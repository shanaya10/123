/* Built on 2021-03-19 15:18:55 */
define("lib/i18n",[],function(){return{version:"1.0.0",load:function(e,t,i,n){n.isBuild?i():xv.i18n.getCatalog(e,function(e){i(e)})}}}),define("lib/tools",["static/utils","lib/i18n!front"],function(e,t){var i={pendingPrepare:[]};i.encloseTextWithTag=function(e,t){return"string"!=typeof e||0!==e.length&&"<"===e[0]?e:"<"+t+">"+e+"</"+t+">"},i.parseUrl=function(e,t,i){var n={body:null,query:null,hash:null},s=e.split("#");if(2===s.length){if("hash"===t)return s[1];n.hash=s[1]}if("hash"===t)return null;if(e=s[0],s=e.split("?"),2===s.length&&(n.query=s[1]),n.body=s[0],void 0!==i&&i){var o=n.query;if(n.query={},o)for(var a=o.split("&"),r=0;r<a.length;r++){var l=a[r];if(l.length){var u=l.split("=");n.query[u.shift()]=u.join("=")}}}return void 0!==t&&t&&"undefined"!=typeof n[t]?n[t]:n},i.addUrlParam=function(e,t,n){var s=i.parseUrl(e,!1,!0);t=t.toString(),void 0===n||!1===n?"undefined"!=typeof s.query[t]&&delete s.query[t]:s.query[t]=n.toString();var o="";for(var a in s.query)o+=(""===o?"?":"&")+a+"="+s.query[a];return s.body+o},i.getUrlHash=function(){return window.location.hash.substr(1)},i.setUrlHash=function(e){"#"!==e.substr(0,1)&&(e="#"+e),e!==window.location.hash&&(window.location.hash=e)},i.isEmpty=function(e){var t=typeof e;if("undefined"===t||null===e||0===e||!1===e)return!0;if("string"===t&&0===$.trim(e).length)return!0;if("object"===t){if("number"==typeof e.length)return 0===e.length;if("function"==typeof Object&&"function"==typeof Object.keys)return 0===Object.keys(e).length;var i=0;for(var n in e)e.hasOwnProperty(n)&&i++;return 0===i}return!1},i.pad=function(e,t,i,n){void 0!==n&&"left"===n||(n="right");for(var s=""+e;s.length<t;)"left"===n?s=i+s:s+=i;return s},i.ucfirst=function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()},i.ucwords=function(e){return e.toLowerCase().replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},i.cleanStr=function(e,t){return e=e.replace(new RegExp("[[\\]{}()*+?.,\\^$|#\\s]"),"\\$&"),t?i.translit(e):e},i.translit=function(e){return e.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/æ/g,"ae").replace(/ç/g,"c").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/ñ/g,"n").replace(/[òóôõö]/g,"o").replace(/œ/g,"oe").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y")};var n={};i.preloadPicture=function(e,t){var i=e;if(t&&(i+=t+".jpg"),"undefined"==typeof n[i]){(new Image).src=i,n[i]=!0}},i.stripStartScript=function(e){if(e=$.trim(e),"<script "!==e.substr(0,8))return e;var t=e.indexOf(">");if(-1===t)return e;var i=e.indexOf("<\/script>");return-1===i?e:t!==i-1?e:e.substr(i+9)},i.replaceThumbcast=function(e){for(var t=e.split(/(<script>|<\/script>)/g),i=0;i<t.length;i++)"<script>"===t[i]||"<\/script>"===t[i]?t[i]="":"document.write(xv.thumbs.replaceThumbUrl("===t[i].substr(0,41)?t[i]=window.xv.thumbs.replaceThumbUrl(t[i].substring(42,t[i].lastIndexOf("))")-1)):"xv.thumbs.casting.displayRandomThumb("===t[i].substr(0,37)?t[i]=window.xv.thumbs.casting.displayRandomThumb(t[i].substring(38,t[i].lastIndexOf(")")-1),!0):"document.write(xv.thumbs.replaceActGalThumbUrl("===t[i].substr(0,47)?t[i]=window.xv.thumbs.replaceActGalThumbUrl(t[i].substring(48,t[i].lastIndexOf("))")-1)):"document.write(xv.thumbs.replacePicThumbUrl("===t[i].substr(0,44)?t[i]=window.xv.thumbs.replacePicThumbUrl(t[i].substring(45,t[i].lastIndexOf("))")-1)):"xv.thumbs.prepareVideo("===t[i].substr(0,23)&&(t[i]="");return t.join("")},i.executePendingPrepare=function(e){if(e.each(function(){window.xv.thumbs.prepareVideo(this)}),window.xv.pending_prepare_video_list)for(var t in window.xv.pending_prepare_video_list)"function"==typeof window.xv.pending_prepare_video_list[t]&&window.xv.pending_prepare_video_list[t](e)},i.addPendingPrepareList=function(e){window.xv.pending_prepare_video_list||(window.xv.pending_prepare_video_list=[]),window.xv.pending_prepare_video_list.push(e)},i.scrollTo=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=400),$("html,body").animate({scrollTop:$(e).offset().top-10-t},i)};var s=[];return i.loadRecaptcha=function(t,i){if("object"==typeof grecaptcha)return void t();if(s.push(t),!(s.length>1)){window.onToolsRecaptchaLoaded=function(){for(var e in s)s[e]()};var n="https://www.google.com/recaptcha/api.js?onload=onToolsRecaptchaLoaded&render=explicit";"string"==typeof i&&(n+="&hl="+i),e.loadScript(n)}},i.formatNumberUnits=function(e,i){i=void 0===i||i!=parseInt(i)?1:parseInt(i);var n=!1,s=0;e>=1e9?(n="billions",s=9):e>=1e6?(n="millions",s=6):e>=1e3&&(n="thousands",s=3);var o=Math.round(e/Math.pow(10,s-i));return o/=Math.pow(10,i),o=o.toLocaleString(),n?t.__("units.number_"+n,{"%number%":o}):o},i.formatFileSize=function(e,i){i=void 0===i||i!=parseInt(i)?1:parseInt(i);var n={terabytes:1099511627776,gigabytes:1073741824,megabytes:1048576,kilobytes:1024},s="bytes";for(var o in n)if("number"==typeof n[o]&&e>=n[o]){s=o,e/=n[o];break}return e=Math.round(e*Math.pow(10,i))/Math.pow(10,i),e=e.toLocaleString(),t.__("units.file_size_"+s,{"%size%":e})},i.formatDurationMethods={"short":"short",medium:"medium","long":"long",diff:"ago"},i.formatDuration=function(e,i){if(i||(i=this.formatDurationMethods.medium),e<5&&i==this.formatDurationMethods.diff)return t.__("misc.just_now");if(e>=86400&&e<172800&&i==this.formatDurationMethods.diff)return t.__("misc.yesterday");var n,s={sec:60,min:3600,hour:86400,day:604800,week:2592e3,month:31536e3,year:-1},o=1;for(var a in s){if(e<s[a]||-1==s[a]){e=Math.floor(e/o),n=1==e?t.__("misc.one_"+a+"_"+i):t.__("misc.nb_"+a+"s_"+i,{"%nb%":e.toString()});break}o=s[a]}return n},i}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function i(e){return _(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(m,e)}function r(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return b[e]})}function l(t,i){function s(e){if("string"==typeof e&&(e=e.split(D,2)),!_(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(n(e[0])+"\\s*"),r=new RegExp("\\s*"+n(e[1])),l=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var o,r,l,c=[],h=[],p=[],g=!1,m=!1;s(i||e.tags);for(var b,k,x,F,$,E,T=new d(t);!T.eos();){if(b=T.pos,x=T.scanUntil(o))for(var S=0,L=x.length;S<L;++S)F=x.charAt(S),a(F)?p.push(h.length):m=!0,h.push(["text",F,b,b+1]),b+=1,"\n"===F&&function(){if(g&&!m)for(;p.length;)delete h[p.pop()];else p=[];g=!1,m=!1}();if(!T.scan(o))break;if(g=!0,k=T.scan(C)||"name",T.scan(v),"="===k?(x=T.scanUntil(y),T.scan(y),T.scanUntil(r)):"{"===k?(x=T.scanUntil(l),T.scan(w),T.scanUntil(r),k="&"):x=T.scanUntil(r),!T.scan(r))throw new Error("Unclosed tag at "+T.pos);if($=[k,x,b,T.pos],h.push($),"#"===k||"^"===k)c.push($);else if("/"===k){if(!(E=c.pop()))throw new Error('Unopened section "'+x+'" at '+b);if(E[1]!==x)throw new Error('Unclosed section "'+E[1]+'" at '+b)}else"name"===k||"{"===k||"&"===k?m=!0:"="===k&&s(x)}if(E=c.pop())throw new Error('Unclosed section "'+E[1]+'" at '+T.pos);return f(u(h))}function u(e){for(var t,i,n=[],s=0,o=e.length;s<o;++s)(t=e[s])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}function f(e){for(var t,i,n=[],s=n,o=[],a=0,r=e.length;a<r;++a)switch(t=e[a],t[0]){case"#":case"^":s.push(t),o.push(t),s=t[4]=[];break;case"/":i=o.pop(),i[5]=t[2],s=o.length>0?o[o.length-1][4]:n;break;default:s.push(t)}return n}function d(e){this.string=e,this.tail=e,this.pos=0}function c(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,_=Array.isArray||function(e){return"[object Array]"===p.call(e)},g=RegExp.prototype.test,m=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,D=/\s+/,y=/\s*=/,w=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},d.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},c.prototype.push=function(e){return new c(e,this)},c.prototype.lookup=function(e){var i,n=this.cache;if(n.hasOwnProperty(e))i=n[e];else{for(var o,a,r=this,l=!1;r;){if(e.indexOf(".")>0)for(i=r.view,o=e.split("."),a=0;null!=i&&a<o.length;)a===o.length-1&&(l=s(i,o[a])),i=i[o[a++]];else i=r.view[e],l=s(r.view,e);if(l)break;r=r.parent}n[e]=i}return t(i)&&(i=i.call(this.view)),i},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=l(e,t)),n},h.prototype.render=function(e,t,i){var n=this.parse(e),s=t instanceof c?t:new c(t);return this.renderTokens(n,s,i,e)},h.prototype.renderTokens=function(e,t,i,n){for(var s,o,a,r="",l=0,u=e.length;l<u;++l)a=undefined,s=e[l],o=s[0],"#"===o?a=this.renderSection(s,t,i,n):"^"===o?a=this.renderInverted(s,t,i,n):">"===o?a=this.renderPartial(s,t,i,n):"&"===o?a=this.unescapedValue(s,t):"name"===o?a=this.escapedValue(s,t):"text"===o&&(a=this.rawValue(s)),a!==undefined&&(r+=a);return r},h.prototype.renderSection=function(e,i,n,s){function o(e){return a.render(e,i,n)}var a=this,r="",l=i.lookup(e[1]);if(l){if(_(l))for(var u=0,f=l.length;u<f;++u)r+=this.renderTokens(e[4],i.push(l[u]),n,s);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)r+=this.renderTokens(e[4],i.push(l),n,s);else if(t(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,s.slice(e[3],e[5]),o),null!=l&&(r+=l)}else r+=this.renderTokens(e[4],i,n,s);return r}},h.prototype.renderInverted=function(e,t,i,n){var s=t.lookup(e[1]);if(!s||_(s)&&0===s.length)return this.renderTokens(e[4],t,i,n)},h.prototype.renderPartial=function(e,i,n){if(n){var s=t(n)?n(e[1]):n[e[1]];return null!=s?this.renderTokens(this.parse(s),i,n,s):void 0}},h.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},h.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);if(null!=n)return e.escape(n)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.2",e.tags=["{{","}}"];var k=new h;return e.clearCache=function(){return k.clearCache()},e.parse=function(e,t){return k.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(e,t,n)},e.to_html=function(i,n,s,o){var a=e.render(i,n,s);if(!t(o))return a;o(a)},e.escape=r,e.Scanner=d,e.Context=c,e.Writer=h,e}),define("text",["module"],function(e){"use strict";function t(e,t){return e===undefined||""===e?t:e}function i(e,i,n,s){if(i===s)return!0;if(e===n){if("http"===e)return t(i,"80")===t(s,"80");if("https"===e)return t(i,"443")===t(s,"443")}return!1}var n,s,o,a,r,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,f=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),h=d&&location.hostname,p=d&&(location.port||undefined),_={},g=e.config&&e.config()||{};return n={version:"2.0.16",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(f);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=l[t];try{e=new ActiveXObject(i)}catch(n){}if(e){l=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),i=e.substring(o+1)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,s,o){var a,r,l,u=n.xdRegExp.exec(e);return!u||(a=u[2],r=u[3],r=r.split(":"),l=r[1],r=r[0],(!a||a===t)&&(!r||r.toLowerCase()===s.toLowerCase())&&(!l&&!r||i(a,l,t,o)))},finishLoad:function(e,t,i,s){i=t?n.strip(i):i,g.isBuild&&(_[e]=i),s(i)},load:function(e,t,i,s){if(s&&s.isBuild&&!s.inlineText)return void i();g.isBuild=s&&s.isBuild;var o=n.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),r=t.toUrl(a),l=g.useXhr||n.useXhr;if(0===r.indexOf("empty:"))return void i();!d||l(r,c,h,p)?n.get(r,function(t){n.finishLoad(e,o.strip,t,i)},function(e){i.error&&i.error(e)}):t([a],function(e){n.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)},function(e){i.error&&i.error(e)})},write:function(e,t,i,s){if(_.hasOwnProperty(t)){var o=n.jsEscape(_[t]);i.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,i,s,o){var a=n.parseName(t),r=a.ext?"."+a.ext:"",l=a.moduleName+r,u=i.toUrl(a.moduleName+r)+".js";n.load(l,i,function(t){var i=function(e){return s(u,e)};i.asModule=function(e,t){return s.asModule(e,u,t)},n.write(e,l,i,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(s=require.nodeRequire("fs"),n.get=function(e,t,i){try{var n=s.readFileSync(e,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),t(n)}catch(o){i&&i(o)}}):"xhr"===g.env||!g.env&&n.createXhr()?n.get=function(e,t,i,s){var o,a=n.createXhr();if(a.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),s[o]);g.onXhr&&g.onXhr(a,e),a.onreadystatechange=function(n){var s,o;4===a.readyState&&(s=a.status||0,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=a,i&&i(o)):t(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,e))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var i,n,s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),"utf-8")),r="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(o),i.append(n);r=String(i.toString())}finally{a.close()}t(r)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in o,n.get=function(e,t){var i,n,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{i=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(s,1,0,!1),n=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),n.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),t(l.value)}catch(u){throw new Error((s&&s.path||"")+": "+u)}}),n}),define("text!lib/helpers/loader/before.mustache",[],function(){return'<span class="x-loader-inline before{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{{ loader }}}{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}</span>'}),define("text!lib/helpers/loader/after.mustache",[],function(){return'<span class="x-loader-inline after{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}{{{ loader }}}</span>'}),define("lib/helpers/inline_loader",["lib/tools","mustache","text!./loader/before.mustache","text!./loader/after.mustache"],function(e,t,i,n){var s="",o=-1,a=function(e){return"before"===e||"button_before"===e?i:n},r=function(e){return void 0!==e?e:"_x_loader_"+ ++o},l=function(e,i,n,s){"string"!=typeof e&&(e="after"),this.html=t.render(a(e),{id:r(n),text:i,is_button:0===e.indexOf("button_"),loader:l.getImg(),safe:!!s}),this.node=!1};return l.setup=function(t){e.preloadPicture(t),s='<img class="x-loader-inline-img" src="'+t+'" />'},l.get=function(e,t,i){return new l(e,t,i)},l.getSafe=function(e,t,i){return new l(e,t,i,!0)},l.getImg=function(){return 0===s.length&&console.error("Loader image not setup"),s},l.getIcf=function(){return"<span class='icon-f icf-spinner icf-anim-pulse'></span>"},l.prototype={getHtml:function(){return this.html},getNode:function(){return this.node||(this.node=$(this.html)),this.node},appendTo:function(e){return this.getNode().appendTo(e),this},prependTo:function(e){return this.getNode().prependTo(e),this},insertAfter:function(e){return this.getNode().insertAfter(e),this},insertBefore:function(e){return this.getNode().insertBefore(e),this},detach:function(){return this.getNode().detach(),this},remove:function(){this.node&&this.node.remove()}},l}),define("text!lib/helpers/popup/template.mustache",[],function(){return'<div class="x-popup {{ position }} {{ cls }}">\n\t<div class="x-popup-arrow"></div>\n\t<div class="x-popup-content"></div>\n\t{{{ closebtn }}}\n</div>\n'}),define("text!lib/helpers/popup/template_close.mustache",[],function(){return'<div class="x-popup-close">{{{ closebtn_content }}}</div>'}),define("lib/helpers/popup",["mustache","text!./popup/template.mustache","text!./popup/template_close.mustache"],function(e,t,i){var n=[],s={relative_to:null,relative_to_default:!1,position:{v:"below",h:"right"},offset:{below:0,above:0,left:0,right:0},max_height:0,max_width:0,trigger:"click",trigger_open:!1,trigger_close:!1,trigger_close_openevents:["all"],autoclose:!0,closebtn:!1,closebtn_content:'<span class="icon-f icf-close-thin"><span>x</span></span>',template:t,template_close:i,popup_class:null,pos_on_scroll:!1,close_on_resize:!0,autoclose_on_same_level:!1,mouseout_autoclose_openevents:["mouseover_btn_timer"],popup_opened_btn_class:"popup-opened-btn",popup_opened_class:"popup-opened"},o=function(e,t,i){if(this.options=$.extend({},s,i||{}),this.setPosition(this.options.position,!0),this.bRelativeToPosSet=!1,this.button=$(),this.content=t,this.opened=!1,this.autoclose_timer=!1,null===this.options.relative_to&&this.setDefaultRelativeTo(),this.setButton(e),this.options.autoclose_on_same_level&&("string"==typeof this.levels[this.options.autoclose_on_same_level]?(this.autoclose_level=this.levels[this.options.autoclose_on_same_level],this.uniqid=(new Date).getTime()+Math.floor(1e4*Math.random()+1).toString(16)):this.options.autoclose_on_same_level=!1),this.options.close_on_resize){this.options.iResizeLastWidth=$(window).outerWidth();var o=this;$(window).on("resize",function(){var e=$(window).outerWidth();if(o.options.iResizeLastWidth===e)return!1;o.options.iResizeLastWidth=e,o.close()})}n.push(this)};o.prototype={onOpen:null,onClose:null,levels:{header_menu:"HEADER_MENU",profile_submit:"PROFILE_SUBMIT",profile_related_submit:"PROFILE_SUBLVL_SUBMIT",profile_listing_dropdowns:"PROF_LIST_DROPDOWN",simple_dropdown_niv2:"SIMPLE_DROPDOWN",thumb_block_menu:"TB_MENU"},setButton:function(e){return this.button.is(e)?this:(this.button&&this.button.length>0&&this.button.removeClass(this.options.popup_opened_btn_class),this.button=e,this.button&&this.button.length>0&&this.button.toggleClass(this.options.popup_opened_btn_class,this.opened),!0===this.options.relative_to_default&&this.setDefaultRelativeTo(),this.initButton(),this)},initButton:function(){var e=this;this.options.trigger&&this.button.off(this.options.trigger,this.callbackButtonTrigger).on(this.options.trigger,e,this.callbackButtonTrigger),this.options.trigger_open&&this.button.off(this.options.trigger_open,this.callbackButtonTriggerOpen).on(this.options.trigger_open,e,this.callbackButtonTriggerOpen),this.options.trigger_close&&this.button.off(this.options.trigger_close,this.callbackButtonTriggerClose).on(this.options.trigger_close,e,this.callbackButtonTriggerClose),this.mouseover_open_timeout=!1,this.button.off("mouseover",this.callbackButtonMouseOver).on("mouseover",e,this.callbackButtonMouseOver),this.mouseout_close_timeout=!1,xv.conf&&xv.conf.dyn&&xv.conf.dyn.is_desktop?this.button.off("mouseout",this.callbackButtonMouseOut).on("mouseout",e,this.callbackButtonMouseOut):(e.button_hovered=!1,e.add_mouseout_close_func()),this.position()},setDefaultRelativeTo:function(){this.options.relative_to_default=!0,this.options.relative_to=null;var e=this;this.button.parents().each(function(){if("fixed"===$(this).css("position"))return e.options.relative_to=$(this),!1}),null===this.options.relative_to&&(this.options.relative_to=$(document.body))},setContent:function(e){return this.popup.find(".x-popup-content").empty().append($(e)),this.position(),this},setPosition:function(e,t){return"object"==typeof e?!e.v||!e.h||"below"!==e.v&&"above"!==e.v||"right"!==e.h&&"left"!==e.h?(t&&(this.options.position=s.position),!1):(this.options.position=e,!0):(e=e.split(" "),2!==e.length||"below"!==e[0]&&"above"!==e[0]||"right"!==e[1]&&"left"!==e[1]?(t&&(this.options.position=s.position),!1):(this.options.position={v:e[0],h:e[1]},!0))},position:function(){if(!this.popup)return!1;var e=this.options.relative_to.offset(),t=this.button.offset(),i=this.options.relative_to.is($(document.body))||this.options.relative_to.is($(window))?0:this.options.relative_to.scrollTop(),n=t.top-e.top+i,s=t.left-e.left,o=!1,a=!1,r=this.popup.children(".x-popup-arrow");switch(this.options.position.v){case"below":n+=this.button.outerHeight(),r.length>0&&(n+=parseInt(r.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.below&&(n+=this.options.offset.below);break;case"above":o=this.options.relative_to.innerHeight()-n,r.length>0&&(o+=parseInt(r.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.above&&(o+=this.options.offset.above)}switch(this.options.position.h){case"right":a=this.options.relative_to.innerWidth()-s-this.button.outerWidth(),"number"==typeof this.options.offset.right&&(a+=this.options.offset.right);break;case"left":"number"==typeof this.options.offset.left&&(s+=this.options.offset.left)}"function"==typeof this.options.max_width&&this.popup.find(".x-popup-content").css("max-width",this.options.max_width()+"px"),this.popup.css("max-width","none"),!1!==a?(this.popup.css("right",a+"px"),r.css("right","")):(this.popup.css("left",s+"px"),r.css("left","")),!1!==o?this.popup.css("bottom",o+"px"):this.popup.css("top",n+"px");var l=this.popup.position();if(!1!==a){if(l.left>=2)return!0;var u=this.popup.outerWidth(),f=$("body").outerWidth(!0)-4;if(u>f&&(u=f,this.popup.css("max-width",u+"px")),l=this.popup.position(),l.left>=2)return!0;var d=parseInt(r.css("right").replace("px",""));return this.popup.css("right",a+l.left-2+"px"),r.css("right",d-l.left+2+"px"),!0}var u=this.popup.outerWidth(),f=$("body").outerWidth(!0)-2;if(l.left+u<=f)return!0;u>f-2&&(u=f-2,this.popup.css("max-width",u+"px"));var d=parseInt(r.css("left").replace("px","")),c=l.left+u-f;return this.popup.css("left",s-c+"px"),r.css("left",d+c+"px"),!0},_getCloseBtn:function(){return this.options.closebtn?e.render(this.options.template_close,{closebtn_content:this.options.closebtn_content}):""},_getPopup:function(){if(this.popup){var t=this.popup.children(".x-popup-close"),i=t.length>0;if(i&&!this.options.closebtn)t.off("click").remove();else if(!i&&this.options.closebtn){var n=this;this.popup.append($(this._getCloseBtn()).on("click",function(e){n.close(e)}))}return this.popup}this.opened=!0,this.popup=$(e.render(this.options.template,{position:this.options.position.v+" "+this.options.position.h,cls:this.options.popup_class+("string"==typeof this.options.popup_opened_class?" "+this.options.popup_opened_class:""),closebtn:this._getCloseBtn()}));var s;s="function"==typeof this.content?$(this.content()):$(this.content);var o=this.popup.find(".x-popup-content").append(s);this.options.max_height>0&&o.css("max-height",this.options.max_height+"px"),this.options.max_width>0&&o.css("max-width",this.options.max_width+"px"),this.options.relative_to.append(this.popup),this.position();var n=this;if(this.popup.on("click",function(e){e.stopPropagation()}),this.popup.on("mouseover",function(){n.popup_hovered=!0,this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1)}),this.popup.on("mouseout",function(){n.popup_hovered=!1,n.add_mouseout_close_func()}),this.options.autoclose&&"number"!=typeof this.options.autoclose?"function"!=typeof this.close_on_body_click&&(this.close_on_body_click=function(e){n.opened&&0===$(e.target).closest(n.button).length&&n.close()},$("body").on("click",this.close_on_body_click)):"function"==typeof this.close_on_body_click&&($("body").off("click",this.close_on_body_click),this.close_on_body_click=!1),this.options.closebtn){var n=this;this.popup.children(".x-popup-close").on("click",function(e){n.close(e)})}return this.onOpen&&this.onOpen(),this.popup},add_mouseover_open_func:function(){if(this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1),!this.mouseover_open_timeout&&this.options.mouseover_open){var e=this;this.mouseover_open_timeout=setTimeout(function(){e.mouseover_open_timeout=!1,e.isOpened()||(e.opened_with="mouseover_btn_timer",e.open())},this.options.mouseover_open)}},add_mouseout_close_func:function(){this.mouseover_open_timeout&&(clearTimeout(this.mouseover_open_timeout),this.mouseover_open_timeout=!1),this.mouseout_close_timeout&&(clearTimeout(this.mouseout_close_timeout),this.mouseout_close_timeout=!1);var e="number"==typeof this.options.autoclose?this.options.autoclose:!!this.options.mouseout_autoclose&&this.options.mouseout_autoclose;if(e){var t=this;this.mouseout_close_timeout=setTimeout(function(){t.mouseout_close_timeout=!1,t.popup_hovered||t.button_hovered||"number"!=typeof t.options.autoclose&&-1===t.options.mouseout_autoclose_openevents.indexOf(t.opened_with)||t.close()},e)}},open:function(e){e?"string"==typeof e?this.opened_with=e:(e.preventDefault(),e.stopPropagation(),this.opened_with=e.type):this.opened_with="no_event",this.close_same_level_popups();var t=this.options.relative_to.css("position");"relative"!==t&&"absolute"!==t&&"fixed"!==t&&(this.options.relative_to.css("position","relative"),this.bRelativeToPosSet=!0),this._getPopup(),!1!==this.autoclose_timer&&(clearTimeout(this.autoclose_timer),this.autoclose_timer=!1);var i=this;if(this.options.autoclose&&("number"!=typeof this.options.autoclose?"function"!=typeof this.close_on_body_click&&(this.close_on_body_click=function(e){i.opened&&0===$(e.target).closest(i.button).length&&i.close()},$("body").on("click",this.close_on_body_click)):"function"==typeof this.close_on_body_click&&($("body").off("click",this.close_on_body_click),this.close_on_body_click=!1)),this.close_same_level_popups(),this.button&&this.button.length>0&&(this.button.addClass(this.options.popup_opened_btn_class),setTimeout(function(){i.opened&&i.button.addClass(i.options.popup_opened_btn_class)},10)),this.opened)return void this.position();this.opened=!0,this.popup.stop().addClass(this.options.popup_opened_class).fadeIn(),this.position(),this.onOpen&&this.onOpen()},close:function(e,t){e&&"object"==typeof e&&(e.preventDefault(),e.stopPropagation(),this.opened_with=e.type);var i=!!this.bRelativeToPosSet;if(this.bRelativeToPosSet&&(this.options.relative_to.css("position",""),this.bRelativeToPosSet=!1),this.opened){if(this.opened=!1,this.opened_with=!1,this.popup.stop(),t)if(i)this.popup.remove();else{var n=this;this.popup.fadeOut(function(){n.popup.remove()})}else i?this.popup.hide():this.popup.removeClass(this.options.popup_opened_class).fadeOut();this.button&&this.button.length>0&&this.button.removeClass(this.options.popup_opened_btn_class),this.onClose&&this.onClose()}},delete_pop:function(){this.close(null,!0)},close_same_level_popups:function(){if(!this.autoclose_level)return!1;for(var e in n)n[e].autoclose_level===this.autoclose_level&&n[e].uniqid!==this.uniqid&&n[e].close()},toggle:function(e){if(this.opened)return void this.close(e);this.open(e)},isOpened:function(){return this.opened},callbackButtonTrigger:function(e){e.data.toggle(e)},callbackButtonTriggerOpen:function(e){e.data.open(e)},callbackButtonTriggerClose:function(e){-1!==e.data.options.trigger_close_openevents.indexOf(e.data.opened_with)&&e.data.close(e)},callbackButtonMouseOver:function(e){e.data.button_hovered=!0,e.data.add_mouseover_open_func()},callbackButtonMouseOut:function(e){e.data.button_hovered=!1,e.data.add_mouseout_close_func()}},$(window).resize(function(){for(var e in n)n[e].isOpened()&&n[e].position()});var a,r=function(){for(var e in n)n[e].isOpened()&&n[e].options.pos_on_scroll&&n[e].position()};return $(window).scroll(function(){a&&window.clearTimeout(a),a=window.setTimeout(r,500)}),o}),define("text!lib/helpers/overlay/template.html",[],function(){return'<div class="x-overlay">\n\t<div class="x-body">\n\t\t<div class="x-content"></div>\n\t\t<div class="x-close{{^closable}} hidden{{/closable}}" title="{{{ close_title }}}">{{{ icon }}}</div>\n\t</div>\n</div>'}),define("lib/helpers/overlay",["mustache","text!./overlay/template.html","lib/i18n!front"],function(e,t,i){var n=function(n,s,o){this.open=!1,this.closable=!!s,this.esc_close=!1,this.esc_close_handler=null,this.click_close_handler=null,this.setCloseAction(o);var a="&times;";xv&&xv.conf&&xv.conf.sitename&&("default"===xv.conf.sitename||"xnxx"===xv.conf.sitename)&&(a='<span class="icon-f icf-close-thin"></span>'),this.parent=$(n).css("position","relative"),this.node=$(e.render(t,{closable:s,close_title:i.__("misc.close"),icon:a})),this.body=this.node.children(".x-body");var r=this;this.close_node=this.body.children(".x-close").on("click",function(){"close"===r.close_action?r.close():r.hide()}),this.container=this.body.children(".x-content")};return n.get=function(e,t,i){return new n(e,t,i)},n.prototype={onShow:null,onHide:null,onClose:null,getNode:function(){return this.node},getContainer:function(){return this.container},addClass:function(e){return this.node.addClass(e),this},setClosable:function(e,t,i){if(this.closable=!!e,this.esc_close=e&&t,this.popbody_click_dontclose=e&&!!i,this.closable?this.close_node.removeClass("hidden"):this.close_node.addClass("hidden"),this.esc_close){if(!this.esc_close_handler){var n=this;this.esc_close_handler=$("body").on("keyup",function(e){n.open&&27===e.which&&("close"===n.close_action?n.close():n.hide())}),this.click_close_handler=$("body").on("click",function(e){n.open&&0===$(e.target).closest(n.popbody_click_dontclose?n.body:n.container).length&&("close"===n.close_action?n.close():n.hide())})}}else this.esc_close_handler&&($("body").off("keyup",this.esc_close_handler),this.esc_close_handler=null,$("body").off("click",this.click_close_handler),this.click_close_handler=null);return this},setCloseAction:function(e){this.close_action="hide"===e?"hide":"close"},setText:function(e){return this.container.text(e),this},setContent:function(e){return this.container.html(e),this},empty:function(){return this.container.empty(),this},append:function(e){return this.container.append(e),this},prepend:function(e){return this.container.prepend(e),this},show:function(){if(!this.open)return this.node.appendTo(this.parent),this.open=!0,this.onShow&&this.onShow(),this},hide:function(){if(this.open)return this.node.detach(),this.open=!1,this.onHide&&this.onHide(),this},close:function(){
this.open&&(this.node.remove(),this.open=!1,this.onClose&&this.onClose())},autoclose:function(e){if(this.open){var t=this;window.setTimeout(function(){t.close()},e)}},isOpen:function(){return!!this.open}},n}),define("lib/helpers/overlay/box",["lib/tools","static/dom","../overlay"],function(e,t,i){var n=function(e,t,n,s){i.apply(this,arguments),this.ori_padding=!1,this.node.addClass("x-overlay-box"),this.verticallyCentered=!!s,this.bCanReposition=!0};return n.prototype=new i,n.get=function(e,t,i,s){return new n(e,t,i,s)},n.prototype.show=function(e){if(!this.open)return this.node.appendTo(this.parent),this.open=!0,this.onShow&&this.onShow(),this.position(e)},n.prototype.position=function(i){if(!this.bCanReposition)return this;var n=this.node.height(),s=this.body.outerHeight(),o=this.verticallyCentered?($(window).height()-s)/2:10;if(!1===i)return this.body.css("margin-top",o+"px"),this;if(n<s+o&&(this.ori_padding=this.parent.css("padding-bottom"),this.parent.css("padding-bottom",s+o-n+"px")),"auto"===i){var a=0;return n>=s+o&&(a=$(window).scrollTop()),this.body.css("margin-top",a+o+"px"),this}if((i=void 0!==i&&$(i))&&i.length>0){var r=i.position().top,l=Math.max(o,Math.min(r,n-s-o));this.body.css("margin-top",l+"px")}else if(this.body.css("margin-top",Math.max(o,Math.round(Math.min(Math.min(.01*$(window).height(),150),(n-s)/2)))+"px"),this.closable&&!t.isElementInView(this.body,!0)){(function(e){var t=e.add(e.parents()),i=!1;return t.each(function(){if("fixed"===$(this).css("position"))return i=!0,!1}),i})(this.body)||e.scrollTo(this.body,10)}return this},n.prototype.setEscapeClosable=function(e){if(!1===e)this.esc_close_handler&&($("body").off("keyup",this.esc_close_handler),this.esc_close_handler=null);else if(!this.esc_close_handler){var t=this;this.esc_close_handler=$("body").on("keyup",function(e){t.open&&27===e.which&&("close"===t.close_action?t.close():t.hide())})}},n.prototype.setCanReposition=function(e){this.bCanReposition=!!e},n.prototype.setOverlayClosable=function(e){if(!1===e)this.overlay_close_handler&&(this.node.off("click",this.overlay_close_handler),this.overlay_close_handler=null);else if(!this.overlay_close_handler){var t=this;this.overlay_close_handler=function(e){$(e.target).hasClass("x-overlay-box")&&("close"===t.close_action?t.close():t.hide())},this.node.on("click",this.overlay_close_handler)}},n.prototype.setOverlayReposition=function(e){var t=this;this.overlay_reposition_handler=function(i){$(i.target).hasClass("x-overlay-box")&&(t.open=!1,t.show(e))},this.node.on("click",this.overlay_reposition_handler)},n.prototype.setScrollAndResizeReposition=function(e){"undefined"!=typeof this.eScrollAndResizeReposition&&$(window).off("scroll",this.eScrollAndResizeReposition).off("resize",this.eScrollAndResizeReposition);var t=this;this.eScrollAndResizeReposition=function(){"undefiled"!=typeof t.tScrollAndResizeReposition&&clearTimeout(t.tScrollAndResizeReposition),t.tScrollAndResizeReposition=setTimeout(function(){t.position(e),t.setScrollAndResizeReposition(e)},250)},$(window).on("scroll",this.eScrollAndResizeReposition).on("resize",this.eScrollAndResizeReposition)},n.prototype.hide=function(){return!1!==this.ori_padding&&this.parent.css("padding-bottom",this.ori_padding),i.prototype.hide.apply(this)},n.prototype.close=function(){return!1!==this.ori_padding&&this.parent.css("padding-bottom",this.ori_padding),i.prototype.close.apply(this)},n}),define("text!lib/helpers/overlay/contextual_popup/alert.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ message }}}\n\t</div>\n\t<div class="contextual-popup-actions">\n\t\t<button class="contextual-popup-content-close btn btn-danger" data-send-form="1">{{{ ok }}}</button>\n\t</div>\n</div>'}),define("text!lib/helpers/overlay/contextual_popup/confirm.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ message }}}\n\t</div>\n\t<div class="contextual-popup-actions">\n\t\t<button class="ok-close btn btn-danger" data-send-form="1">{{{ ok }}}</button>\n\t\t<button class="contextual-popup-content-close btn btn-default">{{{ cancel }}}</button>\n\t</div>\n</div>'}),define("text!lib/helpers/overlay/contextual_popup/loading.mustache",[],function(){return'<div class="contextual-popup-content">\n\t<div class="contextual-popup-message">\n\t\t{{{ message }}}\n\t</div>\n</div>'}),define("lib/helpers/overlay/contextual_popup",["mustache","./box","../inline_loader","lib/i18n!front","text!./contextual_popup/alert.mustache","text!./contextual_popup/confirm.mustache","text!./contextual_popup/loading.mustache"],function(e,t,i,n,s,o,a){var r=function(){};return r.prototype={get_popup:function(i,n,s,o,a,r){i="boolean"!=typeof i||i;var l=t.get($("body"),i,"close").setContent($(e.render(s,o)));return r?l.cp_open_timer=setTimeout(function(){l.show("auto")},r):l.show("auto"),i?(l.setOverlayClosable(i),l.setEscapeClosable(i)):l.setOverlayReposition("auto"),n="contextual-popup"+("string"==typeof n?" "+n:""),l.addClass(n),r&&(l.normal_close=l.close,l.close=function(){l.cp_open_timer&&clearTimeout(l.cp_open_timer),l.normal_close()}),"function"==typeof a&&(l.onClose=a),l.getNode().find(".contextual-popup-content-close").on("click",function(){if($(this).data("send-form")){var e=l.getNode().find("form");e.length>0&&"function"==typeof l.onClose&&(l.onClose(e.serializeArray()),l.onClose=!1)}l.close()}),l},alert:function(e,t,i,o){var a={message:e,ok:n.__("misc.OK")};o&&o.text_ok&&(a.ok=o.text_ok);var r=!(!o||"number"!=typeof o.delay)&&o.delay;return this.get_popup(i,"contextual-popup-alert",s,a,t,r)},confirm:function(e,t,i,s,a){var r={message:e,ok:n.__("misc.OK"),cancel:n.__("misc.cancel")};a&&(a.text_ok&&(r.ok=a.text_ok),a.text_cancel&&(r.cancel=a.text_cancel));var l=!(!a||"number"!=typeof a.delay)&&a.delay,u=i;a&&"function"==typeof a.override_otherclose&&(u=a.override_otherclose);var f=this.get_popup(s,"contextual-popup-confirm",o,r,u,l);return a&&"function"==typeof a.override_otherclose&&f.getNode().find(".contextual-popup-content-close").off("click").on("click",function(){if("function"==typeof i){if($(this).data("send-form")){var e=f.getNode().find("form");if(e.length>0)return t(e.serializeArray()),f.onClose=null,void f.close()}i()}f.onClose=null,f.close()}),f.getNode().find(".ok-close").on("click",function(){if("function"==typeof t){if($(this).data("send-form")){var e=f.getNode().find("form");if(e.length>0)return t(e.serializeArray()),f.onClose=null,void f.close()}t()}f.onClose=null,f.close()}),f},loading:function(e,t){var s={message:i.getSafe("after",e||n.__("loading.loading")).getHtml()},o=!(!t||"number"!=typeof t.delay)&&t.delay;return this.get_popup(!1,"contextual-popup-loading",a,s,null,o)}},new r}),define("skins/common/main_cats/builder",["static/utils","config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t,i,n){var s=function(){};return s.prototype={getMainCats:function(){return t.dyn.main_cats},getUserMainCatId:function(){return t.dyn.user_main_cat},getUserMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_user_cat)return e[t];return!1},getUserOldMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_old_user_cat)return e[t];return!1},getPageMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_page_cat)return e[t];return!1},getSwitchMainCat:function(){var e=this.getMainCats();for(var t in e)if(e.hasOwnProperty(t)&&e[t].is_switch_cat)return e[t];return!1},main_cat_change_alert_enabled:function(){return"object"!=typeof t.dyn.disfeats||-1===t.dyn.disfeats.indexOf("cca")},main_cat_change_alert_toggle_feature:function(e,s){var o=n.loading(i.__("form.saving_settings"),{delay:500}),a=this.main_cat_change_alert_enabled(),r=this;if("boolean"==typeof s&&s===a)return void e();s="boolean"==typeof s?s:!a,!1===s&&(xv.messages.xmmDelById("x-message-main-cat-alert-back"),xv.messages.xmmDelById("x-message-main-cat-alert-stop")),$.post("/account/feature-"+(s?"enabled":"disabled"),{featureid:"cca"},function(s){if(o.close(),!s.result)return void n.alert(i.__("form.error_modification_not_saved"));t.dyn.disfeats||(t.dyn.disfeats=[]),r.main_cat_change_alert_enabled()?t.dyn.disfeats.push("cca"):t.dyn.disfeats.splice(t.dyn.disfeats.indexOf("cca"),1),"undefined"!=typeof xv.main_cats&&"undefined"!=typeof xv.main_cats.switcher&&"function"==typeof xv.main_cats.switcher.updateOverlayAlert&&xv.main_cats.switcher.updateOverlayAlert(),"function"==typeof e&&e()},"json")},goBackToUserMainCat:function(){var e=this.getUserOldMainCat();if(!e)return!1;window.location.href=e.url},stopAlertsFromXMessages:function(){this.main_cat_change_alert_toggle_feature(null,!1)}},new s}),define("text!skins/common/main_cats/switcher.mustache",[],function(){return'<ul>\n\t{{#main_cats}}\n\t\t<li{{#is_user_cat}} class="current"{{/is_user_cat}}>\n\t\t\t<a href="{{ url }}" class="btn cat">\n\t\t\t\t<span>{{{ picto }}}</span> {{{ name }}}\n\t\t\t</a>\n\t\t</li>\n\t{{/main_cats}}\n\t{{^no_disabled_alert}}\n\t<li class="alert-toggle {{{ disabled_alert_class }}}">\n\t\t<button class="btn" type="button"><span class="icon-f icf-square unchecked"></span><span class="icon-f icf-check-square checked"></span> <span class="text">{{{ disabled_alert_text }}}</span></button>\n\t</li>\n\t{{/no_disabled_alert}}\n</ul>'}),define("text!skins/common/main_cats/switcher_feature_toggle.mustache",[],function(){return'<span class="alert-toggle {{{ disabled_alert_class }}}">\n\t<span class="icon-f icf-square unchecked"></span><span class="icon-f icf-check-square checked"></span> <span class="text">{{{ disabled_alert_text }}}</span>\n</span>'}),define("skins/common/main_cats/switcher",["mustache","config/main","lib/helpers/popup","lib/i18n!front","static/cookies","./builder","text!skins/common/main_cats/switcher.mustache","text!skins/common/main_cats/switcher_feature_toggle.mustache"],function(e,t,i,n,s,o,a,r){var l=function(){this.aMainCats=[];var t=o.getMainCats();for(var i in t)t.hasOwnProperty(i)&&this.aMainCats.push(t[i]);this.sCurrentUserCat=o.getUserMainCatId(),this.contents=[],this.bJustSwitched=!!s.get("main_cat_tmp_switch"),this.bJustSwitched&&s.setLocal("main_cat_tmp_switch",!1,100,"/");var a=this;xv.messages&&"function"==typeof xv.messages.addMessageFromChat&&xv.messages.addXMessageSetting(e.render(r,{disabled_alert_class:this.isFeatureEnabled()?"":"disabled-feat",disabled_alert_text:n.__("main_cats."+(this.isFeatureEnabled()?"disable_cat_chang_alert":"cat_chang_alert_disabled"))}),function(e){!0!==a.bXMessageAdded&&(a.bXMessageAdded=!0,a.addContentToUpdate($(e.currentTarget))),a.toggleFeature()})};return l.prototype={getSettingsCat:function(){return o.getSwitchMainCat(!0)},initBtnSwitchers:function(e,n){n=n||{};var s=this;$(e).each(function(){"undefined"==typeof n.popup_class&&(n.popup_class="main-cat-switcher-popup"),"undefined"==typeof n.mouseout_autoclose&&(n.mouseout_autoclose=3e3),"undefined"==typeof n.mouseout_autoclose_openevents&&(n.mouseout_autoclose_openevents=["click","mouseover_btn_timer"]);var e=new i($(this),s.getPopupContent(),n);e.iAllMenuId=xv.menus.addClose(function(){e.close()}),e.onOpen=function(){xv.menus.closeAll(e.iAllMenuId),s.sCurrentUserCat!==t.dyn.user_main_cat&&e.setContent(s.getPopupContent())},$(this).addClass("init-ok")})},goBackToUserMainCat:function(){o.goBackToUserMainCat()},stopAlertsFromXMessages:function(){o.stopAlertsFromXMessages()},addContentToUpdate:function(e){this.contents.push(e)},updateOverlayAlert:function(){for(var e in this.contents){var t=this.contents[e];if(!(!t.length>0)){var i=t.find(".alert-toggle"),s=i.find(".text");this.isFeatureEnabled()?(i.removeClass("disabled-feat"),s.html(n.__("main_cats.disable_cat_chang_alert"))):(i.addClass("disabled-feat"),s.html(n.__("main_cats.cat_chang_alert_disabled")))}}},getPopupContent:function(){var i={main_cats:this.aMainCats};!t.dyn.premium||t.dyn.login_info&&t.dyn.login_info.is_premium?(i.disabled_alert_class=this.isFeatureEnabled()?"":"disabled-feat",i.disabled_alert_text=n.__("main_cats."+(this.isFeatureEnabled()?"disable_cat_chang_alert":"cat_chang_alert_disabled"))):i.no_disabled_alert=!0,$content=$(e.render(a,i));var o=this;return this.addContentToUpdate($content),$content.find(".cat.btn").on("click",function(e){e.preventDefault(),s.setLocal("main_cat_tmp_switch",$.now(),3e5,"/"),window.location.href=$(this).prop("href")}),$content.find(".alert-toggle .btn").on("click",function(e){e.preventDefault(),o.toggleFeature()}),$content},hasJustSwitched:function(){return this.bJustSwitched},isFeatureEnabled:function(){return o.main_cat_change_alert_enabled()},toggleFeature:function(e,t){if(!0!==this.bToggling){var i=this;this.bToggling=!0,"boolean"!=typeof t&&(t=null),o.main_cat_change_alert_toggle_feature(function(){i.updateOverlayAlert(),i.bToggling=!1,"function"==typeof e&&e()},t)}}},xv.main_cats={switcher:new l},xv.main_cats.switcher}),define("skins/common/design/stop_anim_on_resize",[],function(){var e=function(){this.stop_anim_timeout=null;var e=this;$(window).on("resize",function(){e.launch()})};return e.prototype={launch:function(){var e=this;this.stop_anim_timeout?(clearTimeout(this.stop_anim_timeout),this.stop_anim_timeout=null):$("body").addClass("resize-stop-anim"),this.stop_anim_timeout=setTimeout(function(){e.stop_anim_timeout=null,$("body").removeClass("resize-stop-anim")},500)}},new e}),define("skins/common/design/vh_tweak",[],function(){try{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e.toString(10)+"px"),$(window).on("resize",function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e.toString(10)+"px")})}catch(t){}}),define("skins/common/design/old_ie",["lib/i18n!front","static/cookies"],function(e,t){var i=function(){!1!==this.shouldShowAlert()&&(this.alertResizeTimer=!1,this.showAlert())};return i.prototype={shouldShowAlert:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent,t=e.indexOf("MSIE ");if(t<0)return!1;var i=parseInt(e.substring(t+5,e.indexOf(".",t)));return!(i>9)&&(!this.isAlertIgnored()&&(this.sBrowser="Internet Explorer "+i,!0))},showAlert:function(){if("string"==typeof this.sBrowser){this.$alert=$('<div id="browser-too-old"><p>'+e.__("browser.out_of_date_alert",{"%strong%":"<strong>","%strong_end%":"</strong>","%browser%":this.sBrowser})+'</p><p><a href="//browser-update.org/'+xv.conf.dyn.locale+'/update-browser.html" class="btn btn-primary" target="_blank">'+e.__("browser.update")+'</a> <button type="button" class="btn btn-default ignore">'+e.__("misc.ignore")+"</button></p></div>");var t=this;this.$alert.find(".ignore").on("click",function(){t.ignoreAlert()}),$("body").prepend(this.$alert),setTimeout(function(){t.alertResize(),$(window).on("resize",function(){t.alertResize()})},50),setTimeout(function(){t.alertResize()},1e4)}},alertResize:function(){!1!==this.alertResizeTimer&&clearTimeout(this.alertResizeTimer),this.$alert.css({width:"auto","margin-left":0,"margin-right":0});var e=this;this.alertResizeTimer=setTimeout(function(){e.alertResizeTimer=!1;var t=e.$alert.outerWidth(),i=$("html").outerWidth();e.$alert.css({width:i-20,"margin-left":-(i-t)/2+10,"margin-right":-(i-t)/2+10})},200)},isAlertIgnored:function(){return!!t.get("hexavid_ignore_browser_update")},ignoreAlert:function(){this.$alert.remove(),t.setLocal("hexavid_ignore_browser_update","1",864e5,"/")}},new i}),define("skins/common/features_test/tracker",[],function(){var e=function(){return Math.round((new Date).getTime()/1e3)},t=function(e,t){this.storage=!1;try{if("object"==typeof window.localStorage){var i=window.localStorage,n="__storage_test__";i.setItem(n,n),i.removeItem(n),this.storage=window.localStorage}}catch(s){}this.namespace=e,this.max_elements=t};return t.prototype={canTrack:function(){return!1!==this.storage},isTracking:function(){return this.canTrack()&&"disabled"!==this.storage.getItem(this.namespace+".tracking")},stopTracking:function(e){if(!this.canTrack())return!1;this.storage.setItem(this.namespace+".tracking","disabled"),!1!==e&&this.storage.removeItem(this.namespace+".ids")},startTracking:function(){if(!this.canTrack())return!1;this.storage.removeItem(this.namespace+".tracking")},getIdsList:function(){var e=[],t=this.getIds();for(var i in t)e.push(t[i].i);return e},getIdsTimestampsList:function(){var e={},t=this.getIds();for(var i in t)e[t[i].i]=t[i].t;return e},getIds:function(){if(!this.canTrack())return[];var e=this.storage.getItem(this.namespace+".ids");if("string"!=typeof e)return[];try{e=JSON.parse(e)}catch(t){return[]}return e},addId:function(t){if(this.isTracking()){var i=this.getIds(),n=!1;for(var s in i)if(i[s].i===t){i[s].t=e(),n=!0;break}n?i.sort(function(e,t){return e.t===t.t?0:e.t>t.t?-1:1}):(i.unshift({i:t,t:e()}),i.length>this.max_elements&&(i=i.slice(0,this.max_elements-1))),this._write(i)}},addIds:function(t){if(this.isTracking()){var i=this.getIds(),n=!1;for(var s in i){var o=t.indexOf(i[s].i);if(-1!==o){delete t[o],i[s].t=e(),n=!0;break}}if(n&&i.sort(function(e,t){return e.t===t.t?0:e.t>t.t?-1:1}),t.length>0){for(var a in t)i.unshift({i:t[a],t:e()});i.length>this.max_elements&&(i=i.slice(0,this.max_elements-1))}this._write(i)}},removeId:function(e){if(this.isTracking()){var t=this.getIds();for(var i in t)if(t[i].i===e)return t.splice(i,1),void this._write(t)}},hasId:function(e){if(!this.isTracking())return!1;var t=this.getIds();for(var i in t)if(t[i].i===e)return!0;return!1},getTime:function(e){if(!this.isTracking())return!1;var t=this.getIds();for(var i in t)if(t[i].i===e)return t[i].t;return!1},clear:function(){if(!this.canTrack())return!1;this.storage.removeItem(this.namespace+".ids")},_write:function(e){this.storage.setItem(this.namespace+".ids",JSON.stringify(e))}},t}),define("skins/default/features_test/videos_i_like",["../../common/features_test/tracker"],function(e){var t,i=function(){return t||(t=new e("test_videos_ilike",5e3)),t},n=function(){};return n.prototype={canTrack:function(){return i().canTrack()},isTracking:function(){return i().isTracking()},stopTracking:function(){i().stopTracking()},startTracking:function(){i().startTracking()},voteGood:function(e){i().addId(e)},voteBad:function(e){i().removeId(e)},clear:function(){return i().clear()},getIds:function(){return i().getIdsList()}},new n}),define("skins/common/features_test/video_subs",["./tracker"],function(e){var t,i=function(){return t||(t=new e("test_video_subs",5e3)),t},n=function(){};return n.prototype={canTrack:function(){return i().canTrack()},isTracking:function(){return i().isTracking()},stopTracking:function(){i().stopTracking()},startTracking:function(){i().startTracking()},subscribe:function(e){i().addId(e)},unsubscribe:function(e){i().removeId(e)},hasSubscribed:function(e){return i().hasId(e)},clear:function(){return i().clear()},getIds:function(){return i().getIdsList()}},new n}),define("text!skins/common/download_app/popup.mustache",[],function(){return'<div id="popup-opening-message">\n\t<span id="popup-opening-close" class="icon-f icf-close-thin" title="{{{ close }}}"></span>\n\t<div id="popup-opening-content">\n\t\t<div id="popup-opening-desc">\n\t\t\t<p class="popup-opening-title">\n\t\t\t\t<strong>{{{ title }}}</strong>\n\t\t\t</p>\n\t\t\t<p class="popup-opening-link">{{{ link }}}</p>\n\t\t\t<p class="popup-opening-infos">{{{ infos }}}</p>\n\t\t</div>\n\t\t<span class="icon-f icf-device-mobile"></span>\n\t</div>\n</div>'}),define("skins/common/download_app",["config/main","mustache","lib/i18n!front","text!skins/common/download_app/popup.mustache"],function(e,t,i,n){var s=function(){};return s.prototype={_init:function(){this.bIsInit=!1,this.bIsDisplay=!1,this.sSiteName=null,this.sPopupId=null,this.sPopupStorageValue="hide_app_popup",this.oPopupStorage=null,this.$popup=null,this.checkStorage()},checkStorage:function(){this.oPopupStorage=xv.storage.get(this.sPopupStorageValue),(null===this.oPopupStorage||(new Date).getTime()>this.oPopupStorage.t)&&(this.oPopupStorage={i:null,t:null}),1===this.oPopupStorage.i||this.isPopupDisplay()||this.displayPopup();var e=this;window.setTimeout(function(){1===e.oPopupStorage.i&&e.isPopupDisplay()&&e.removePopup(),e.checkStorage()},5e3)},setPopupDisplay:function(e){this.bIsDisplay=e},isPopupDisplay:function(){return this.bIsDisplay},displayPopup:function(){this.isPopupDisplay()||(this.setPopupDisplay(!0),this.sSiteName="XVIDEOS","xnxx"===e.sitename&&(this.sSiteName="XNXX"),document.querySelector("body").insertAdjacentHTML("beforeend",t.render(n,{close:i.__("misc.close"),title:i.__("messages.download_site_app_title",{"%sitename%":this.sSiteName,"%br%":"<br />"}),link:i.__("messages.download_site_app_link",{"%link%":'<a href="'+e.dyn.appandroidpop+'">',"%link_end%":"</a>"}),infos:i.__("messages.download_site_app_infos")})),this.sPopupId="popup-opening-message",this.$popup=document.querySelector("#"+this.sPopupId),this.addEvents())},addEvents:function(){window.addEventListener("scroll",this.removePopup.bind(this)),this.$btnClose=document.querySelector("#popup-opening-close").addEventListener("click",this.removePopup.bind(this));for(var e=document.querySelector("body").childNodes,t=0;t<e.length;t++)1===e[t].nodeType&&"DIV"===e[t].tagName&&e[t].getAttribute("id")!==this.sPopupId&&e[t].addEventListener("click",this.removePopup.bind(this))},removePopup:function(){if(this.isPopupDisplay()){this.$popup.parentNode.removeChild(this.$popup);var e=(new Date).getTime()+2592e6;1!==this.oPopupStorage.i&&(xv.storage.remove(this.sPopupStorageValue),xv.storage.set(this.sPopupStorageValue,{i:1,t:e},e)),this.setPopupDisplay(!1)}}},new s}),define("lib/helpers/events/scroll",[],function(){var e=[],t=[],i=!1,n=null,s=null;return $(window).on("scroll",function(){if(!i)for(var o in e)e[o]();!0!==i&&(n=setTimeout(function(){i=!0},100)),clearTimeout(s),s=setTimeout(function(){clearTimeout(n),i=!1;for(var e in t)t[e]()},200)}),{addScrollStartListener:function(t){e.push(t)},addScrollEndListener:function(e){t.push(e)},isScrolling:function(){return i}}}),define("lib/helpers/events/tab",[],function(){function e(e){e=e||window.event;var o;if(o=e.type in r?r[e.type]:this[s]?"hidden":"visible",t!==o)if(t=o,"hidden"===o)for(var a in n)n[a]();else for(var a in i)i[a]()}var t,i=[],n=[],s="hidden",o="visible",a="hidden",r={focus:o,focusin:o,pageshow:o,blur:a,focusout:a,pagehide:a};return s in document?document.addEventListener("visibilitychange",e):(s="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(s="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(s="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,$(window).on("blur",e),$(window).on("focus",e),{addHiddenListener:function(e){n.push(e)},addVisibleListener:function(e){i.push(e)}}}),define("lib/helpers/events",["lib/helpers/events/scroll"],function(e){var t=0,i=function(){this.thlistener,this.thlisteners=[],this.tvlistener,this.tvlisteners=[],this.sslisteners=[],this.selisteners=[]};return i.prototype={TAB_HIDDEN:"tab.hidden",TAB_VISIBLE:"tab.visible",SCROLL_START:"scroll.start",SCROLL_END:"scroll.end",addListener:function(e,i){switch(e){case this.TAB_HIDDEN:if(this.thlisteners[t]=i,!this.thlistener){this.thlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(e){e.addHiddenListener(function(){for(var e in n.thlisteners)n.thlisteners[e]()})})}return++t-1;case this.TAB_VISIBLE:if(this.tvlisteners[t]=i,!this.tvlistener){this.tvlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(e){e.addVisibleListener(function(){for(var e in n.tvlisteners)n.tvlisteners[e]()})})}return++t-1;case this.SCROLL_START:return this.sslisteners[t]=i,++t-1;case this.SCROLL_END:return this.selisteners[t]=i,++t-1}return!1},isScrolling:function(){return e.isScrolling()}},new i}),define("text!skins/common/history/history_popup.mustache",[],function(){return'<div class="disable-history-confirm">\n\t{{ content }}\n\t<form>\n\t\t<label><input type="checkbox" name="clear" value="1"/>{{ history }}</label>\n\t</form>\n</div>'}),define("skins/form/validator/schema",[],function(){var e=function(e,t,i){void 0!==t&&(this.parent=e,this.halt_on_error=t.options.halt_on_error,this.validators=[],void 0!==i&&this.init(t.rules,i))};return e.prototype={errorChanged:null,refresh:function(){for(var e in this.validators)this.validators[e].refresh&&this.validators[e].refresh()},isValid:function(){for(var e in this.validators)if(!this.validators[e].isValid())return!1;return!0},getFirstError:function(){for(var e in this.validators){if("function"==typeof this.validators[e].getFirstError){var t=this.validators[e].getFirstError();if(t)return t}if(!this.validators[e].isValid())return this.validators[e]}return null},init:function(e,t){var i=this;for(var n in e){var s,o=t[e[n].rule_name];s="schema"===e[n].rule_name?new o(i,e[n],t):new o(i,e[n]),this.addValidator(s)}},addValidator:function(e){var t=this;e.errorChanged=function(e,i){t.errorChanged&&t.errorChanged(e,i)},this.validators.push(e)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e}},e}),define("text!skins/form/validator/form_errors/contener.mustache",[],function(){return"<div class='validator-err-sc'>\n\t<a href=\"#\" class='close-btn'><span class='icon-f icf-close-thin'></span></a>\n\t<h3>{{{ title }}}</h3>\n\t<span class=\"icon-f icf-warning icon-bg\"></span>\n\t<div></div>\n</div>"}),define("text!skins/form/validator/form_errors/error.mustache",[],function(){return"<p class=\"form-error-shortcut\">\n\t<span class='icon-f icf-caret-right'></span>\n\t<a href='#'>\n\t\t{{#label}}<strong>{{{ label }}}</strong> :{{/label}}\n\t\t<span>{{{ error }}}</span>\n\t</a>\n</p>"}),define("skins/form/validator",["./validator/schema","mustache","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","lib/i18n!front","text!./validator/form_errors/contener.mustache","text!./validator/form_errors/error.mustache"],function(e,t,i,n,s,o,a){var r=function(e){var t=[];for(var i in e){var n=e[i].rule_name,s=[n];"schema"===n&&(s=r(e[i].rules),s.push("schema"));for(var o in s)-1===$.inArray(s[o],t)&&t.push(s[o])}return t},l=function(t,s,o){this.options=o||{},e.apply(this,[null,{options:{halt_on_error:!1}}]),this.form=t,this.submit=t.find("button[type=submit],button.g-recaptcha"),this.target=!1;var a=$.trim(t.prop("target"));a.length>0&&(a=$("#"+a),a.length>0&&(this.target=a)),this.is_valid=!0,this.submitted=!1,this.captcha_submitted=!1,this.confirmation=!1,this.bypass_confirmation=!1;var l=this;this.submit.length>0&&(this.submit.each(function(){$(this).on("click",function(e){l.bypass_confirmation=!1,l.confirmation=!1,$(this).data("confirm")!==undefined&&(l.confirmation=$(this).data("confirm")),!0===l.options.no_init_validate&&l.validateAll();var t=l.getFirstError();if(t)return l.showErrorsShortcuts(),t.focus&&t.focus(),e.preventDefault(),e.stopPropagation(),!1})}),this.form.on("submit",function(e){if(!0===l.options.no_init_validate&&l.validateAll(),!l.captcha_submitted&&l.submit.hasClass("g-recaptcha")&&(l.captcha_submitted=!0,l.submit.on("click",function(){l.form.submit()})),!l.isValid()){l.showErrorsShortcuts();var t=l.getFirstError();return t&&t.focus&&t.focus(),e.preventDefault(),e.stopPropagation(),!1}return l.submitted?(e.preventDefault(),e.stopPropagation(),!1):l.onSubmit&&!l.onSubmit()?(e.preventDefault(),e.stopPropagation(),!1):l.confirmation&&!l.bypass_confirmation?(e.preventDefault(),e.stopPropagation(),n.confirm(l.confirmation,function(){l.bypass_confirmation=!0,l.form.submit()},null,!0),!1):(l.submitted=!0,l.submit.prop("disabled",!0).addClass("disabled").append($('<span class="vloader"> '+i.getImg()+"</span>")),void(l.cancel_btn&&l.cancel_btn.hide()))}));var u=r(s),f=[];for(var d in u)f.push("skins/form/validator/"+u[d]);require(f,function(){var e={};for(var t in arguments)e[u[t]]=arguments[t];l.init(s,e)}),this.has_ready_only=this.form.hasClass("has-read-only"),this.cancel_btn=null,this.has_ready_only&&(this.is_editing=this.form.hasClass("editing"),this.form.find(".btn-start-edition").on("click",function(e){e.preventDefault(),l.is_editing||(l.is_editing=!0,l.form.addClass("editing"),l.refresh())}),this.cancel_btn=this.form.find(".btn-cancel-edition").on("click",function(e){e.preventDefault(),l.is_editing&&(l.submitted||(l.is_editing=!1,l.form.removeClass("editing")))}))};return l.prototype=new e,l.prototype.init=function(t,i){if(!0===this.options.no_init_validate)for(var n in t)t[n].options||(t[n].options={}),t[n].options.no_init_validate=!0;if(e.prototype.init.apply(this,[t,i]),this.errorChanged(!1,this),!this.is_valid){var s=this.getFirstError();s&&s.focus&&"undefined"==typeof this.options.no_init_focus&&s.focus()}},l.prototype.errorChanged=function(e,t){if(this.is_valid=!e&&this.isValid(),this.submit.toggleClass("has-verror",!this.is_valid),!this.update_error_timeout){this.updateErrorsShortcuts();var i=this;this.update_error_timeout=setTimeout(function(){i.updateErrorsShortcuts(),i.update_error_timeout=!1},1e3)}},l.prototype.hideErrorsShortcuts=function(){this.form_errors_shortcuts&&(this.form_errors_shortcuts.hide(),this.form_errors_shortcuts_closed=!0)},l.prototype.showErrorsShortcuts=function(){if(this.form.addClass("highlight-errors"),!this.options.no_errors_shortcuts){if(this.form_errors_shortcuts||(this.form_errors_shortcuts=$(t.render(o,{title:s.__("form.cant_validate_cause_errors")+" :"})),this.form_errors_shortcuts_list=this.form_errors_shortcuts.children("div"),this.options.append_errors_shortcuts_to&&$(this.options.append_errors_shortcuts_to).length>0?$(this.options.append_errors_shortcuts_to).append(this.form_errors_shortcuts):this.submit?this.form_errors_shortcuts.insertBefore(this.submit.last()):this.form.append(this.form_errors_shortcuts)),this.is_valid)return void this.hideErrorsShortcuts();this.form_errors_shortcuts.show(),this.form_errors_shortcuts_closed=!1,this.updateErrorsShortcuts()}},l.prototype.updateErrorsShortcuts=function(){if(this.form_errors_shortcuts&&!this.form_errors_shortcuts_closed){if(this.isValid())return void this.hideErrorsShortcuts();this.form_errors_shortcuts_list.empty();var e=this;this.form_errors_shortcuts.find(".close-btn").on("click",function(){e.hideErrorsShortcuts()});for(var i in this.validators)if("function"==typeof this.validators[i].getError){var n=this.validators[i].getError();if(n){var s=$(t.render(a,{label:"function"==typeof this.validators[i].getLabel&&this.validators[i].getLabel(),error:n}));s.children("a").data("goto",i).on("click",function(t){t.preventDefault();var i=e.validators[$(this).data("goto")];i&&i.focus()}),this.form_errors_shortcuts_list.append(s)}}}},l.prototype.onSubmit=null,l.prototype.setConfirmation=function(e){this.submit.data("confirm",e)},l.prototype.resetConfirmation=function(){this.submit.data("confirm",!1)},l.prototype.validateAll=function(){for(var e in this.validators)"function"==typeof this.validators[e].validate&&this.validators[e].validate()},l.prototype.resetSubmit=function(){this.submitted&&(this.submitted=!1,this.submit.prop("disabled",!1).removeClass("disabled").find(".vloader").remove(),this.cancel_btn&&this.cancel_btn.show())},l}),define("skins/common/form/login/base",["config/main","static/console","static/dom","lib/tools","lib/helpers/inline_loader","lib/helpers/overlay/box","skins/form/validator","lib/helpers/overlay/contextual_popup","lib/i18n!front"],function(e,t,i,n,s,o,a,r,l){var u=function(e){this.box=null,this.box_class=e,this.is_popup=!0,this.first_display=!0,this.on_form_loaded=null,this.on_success=null,this.form_closable=!0,this.form_close_on_escape=!0,this.form_reposition_on_overlay_click=!1,this.form_on_close=null,this.form_opening_mode="signin",this.switching=!1,this.last_reqjs=null,this.validators={}};return u.prototype={
setOpenCloseModes:function(e,t,i,n,s){"boolean"==typeof t&&(this.form_closable=t),"boolean"==typeof i&&(this.form_close_on_escape=i),"boolean"==typeof s&&(this.form_reposition_on_overlay_click=s),"function"==typeof n&&(this.form_on_close=n);var o=["signin","signup","premium"];this.form_opening_mode=-1===$.inArray(e,o)?o[0]:e},createOrRefreshValidator:function(e,t,i){if("object"==typeof this.validators[e])return void this.validators[e].refresh();var n=$("#"+e);if(0!==n.length){var s=i||{};return this.first_display&&(this.first_display=!1,s.no_init_validate=!0),this.validators[e]=new a(n,t,s),this.addPasswordCheck(e,this.validators[e],n),this.validators[e]}},clearValidators:function(){for(var e in this.validators)this.validators.hasOwnProperty(e)&&delete this.validators[e]},toggleForms:function(e){this.switching||this.doToggleForms(e)},doToggleForms:function(e){console.error("doToggleForms is not implemented")},onFormLoaded:function(t,i){var o=this;this.last_reqjs=i,this.clearValidators(),null!==t&&this.box.setContent(t),this.doSetupNodes(i),this.toggleForms(i),this.on_form_loaded&&this.on_form_loaded(i),null!==t&&this.box.getNode().find("form").each(function(){var t=$(this),i=t.find(".g-recaptcha"),a=i.is("button");if(t.prop("target")){if(0===i.length)return;if(a){var r=!0;t.on("submit",function(e){r&&e.preventDefault()})}return void n.loadRecaptcha(function(){grecaptcha.render(i.get(0),{callback:function(){a&&(r=!1,t.submit())}},!0)},e.dyn.locale)}var u,f,d,c=function(e){"object"==typeof e&&e.preventDefault();var n=t.prop("id");("object"!=typeof o.validators[n]||o.validators[n].is_valid)&&(f||(!d&&i.length>0&&a&&(i.on("click",c),i.prop("disabled",!0).addClass("disabled").append($('<span class="vloader"> '+s.getImg()+"</span>"))),d=!0,f=!0,u&&(u.remove(),u=null),$.ajax({type:"POST",url:"/account/signinform",data:t.serializeArray(),dataType:"json",xhrFields:{withCredentials:!0},success:function(e){if(e.form_valid)return void o.onFormSubmitSuccess(e);o.onFormLoaded(e.form,e.reqjs)}}).fail(function(){u=$('<div class="alert alert-danger"><ul class="form-error-list"<li><strong><i class="icon-f icf-close-circle"></i> '+l.__("misc.error_please_retry")+"</strong></li></ul></div>").prependTo(t),i.length>0&&a&&i.prop("disabled",!1).removeClass("disabled").find(".vloader").remove()}).always(function(){f=!1})))};if(i.length>0){if(a)return t.on("submit",function(e){d||e.preventDefault()}),void n.loadRecaptcha(function(){grecaptcha.render(i.get(0),{callback:c},!0)},e.dyn.locale);n.loadRecaptcha(function(){grecaptcha.render(i.get(0),{},!0)},e.dyn.locale)}t.on("submit",function(e){e.preventDefault(),c()})})},doSetupNodes:function(e){console.error("doSetupNodes is not implemented")},loggingLoader:function(){r.loading(l.__("misc.redirecting"))},redirectWithConnectionLoader:function(e){this.loggingLoader(),window.location.href=e},reloadWithConnectionLoader:function(){this.loggingLoader(),window.location.reload()},onFormSubmitSuccess:function(t){if(this.box.close(),this.box=null,this.on_success)return void this.on_success();if("string"==typeof t.premium_redirect&&t.premium_redirect.length>0){var i=e.domains.premium+this.getRedirectPath(t.user_main_cat,!0);return-1!==i.indexOf("?")?i+="&":i+="?",i+=t.premium_redirect,void this.redirectWithConnectionLoader(i)}if("string"==typeof t.redirect_domain&&t.redirect_domain.length>0){var i=t.redirect_domain+this.getRedirectPath(t.user_main_cat,!0);return void this.redirectWithConnectionLoader(i)}var i=this.getRedirectPath(t.user_main_cat,!1);if(i)return void this.redirectWithConnectionLoader(i);this.reloadWithConnectionLoader()},getRedirectPath:function(t,i){var n=!1;return i&&(n=window.location.pathname,"string"==typeof window.location.search&&window.location.search.length>1&&(n+=window.location.search)),"string"!=typeof t||"straight"!==t&&"gay"!==t&&"shemale"!==t?n:e.dyn.no_main_cat||!e.dyn.pagefilter||e.dyn.pagefilter===t?n:"straight"===t?"/":"/"+t},positionPopup:function(){this.is_popup},loadForm:function(e){this.box.setContent('<div id="'+this.box_class+'"><p class="text-center">'+s.getSafe("after",l.__("loading.loading")).getHtml()+"</p></div>").show(this.form_reposition_on_overlay_click?"auto":null),this.box.addClass("opened");var i=this,n="/account/signinform"+("signup"===this.form_opening_mode?"/create":"");$.ajax({type:"POST",url:n,data:e||{},dataType:"json",xhrFields:{withCredentials:!0},success:function(e){i.onFormLoaded(e.form,e.reqjs),i.positionPopup()}}).fail(function(e,s,o){t.print("FAILED LOADING URL "+n+" => ERROR: "+s+' - "'+o+'"',"Login form",e);var a=$('<div id="\' + this.box_class + \'"><p class="text-center"><a><strong class="text-danger">'+l.__("loading.failed_retry")+"</strong></a></p></div>");a.find("a").on("click",function(e){e.preventDefault(),e.stopPropagation(),i.loadForm()}),i.box.setContent(a)})},open:function(e){if(this.on_success=null,"function"==typeof e&&(this.on_success=e),!this.box){$("body").css("minHeight",i.getViewportHeight()+"px"),this.box=o.get("body",this.form_closable,"hide"),this.box.setEscapeClosable(this.form_close_on_escape),this.box.setOverlayReposition(this.form_reposition_on_overlay_click?"auto":null),this.box_class&&this.box.addClass(this.box_class);var t=this;this.box.onHide=function(){t.first_display=!0,t.box.node.removeClass("opened"),t.form_on_close&&t.form_on_close()};var n=this.form_closable?{}:{not_closable:1};return void this.loadForm(n)}this.box.show(this.form_reposition_on_overlay_click?"auto":null).addClass("opened"),this.last_reqjs&&this.last_reqjs.form_disp&&this.form_opening_mode&&this.last_reqjs.form_disp!=this.form_opening_mode&&(this.last_reqjs.form_disp=this.form_opening_mode,this.toggleForms(this.last_reqjs)),this.positionPopup()},setupStandAlone:function(t){this.is_popup=!1;var i=function(e){this.node=e};i.prototype={setContent:function(e){this.node.html(e)},getNode:function(){return this.node}},this.box=new i($(t||"#page")),this.onFormLoaded(null,e.data)},setupLinks:function(e,t){var i=this;e.on("click",function(e){e.preventDefault(),e.stopPropagation();var n=$(this).data("mode"),s=$(this).data("closable"),o=$(this).data("close_on_escape"),a=$(this).data("on_close"),r=$(this).data("reposition_on_click");i.setOpenCloseModes(n,s,o,a,r),$(this).trigger("menu.forceclose"),i.open(t)})},addPasswordCheck:function(e,t,i){"signup-form"===e&&(t.init=function(e,i){a.prototype.init.apply(this,[e,i]);for(var n in this.validators)if("signup-form_details_password"===this.validators[n].id){this.validators[n].onStrengthChange=function(e){e<50?t.setConfirmation(l.__("account.password_weak")):t.resetConfirmation()};break}})}},u}),define("skins/common/form/login/standard",["lib/tools","skins/form/validator","./base"],function(e,t,i){var n=function(){i.apply(this,["signin-popup-form"]),this.signup_disp=null,this.signinblocks=null,this.signupblocks=null,this.signupblocks_always_visible=null,this.signupdetails=null,this.signupstep2=null,this.lostpwdblocks=null,this.login2signup=null,this.signup2login=null,this.signup2nextbtn=null,this.step1_error=null,this.infopanel=null,this.not_yet_member=null;var e=this;$(document).on("signupform.submit.completed",function(){var t=e.last_reqjs;t.form_disp="signup",e.onFormLoaded(e.validators["signup-form"].target.contents().find("#iframe-content").html(),t)}),$(document).on("signupform.submit.validated",function(t){if(e.on_success)return void e.on_success(t.referer);window.location.href=t.referer})};return n.prototype=new i,n.prototype.doToggleForms=function(i){var n=this,s=this.signinblocks.parent().css("position","relative"),o=this.signinblocks,a=this.signinblocks;if(!this.signupblocks_always_visible&&this.signupblocks.is(":visible")?o=this.signupblocks:this.lostpwdblocks.is(":visible")&&(o=this.lostpwdblocks),this.signupblocks_always_visible||"signup"!==i.form_disp?"lostpassword"===i.form_disp&&(a=this.lostpwdblocks):a=this.signupblocks,!o.is(a)){this.switching=!0;var r=Math.floor(o.innerWidth()/s.width()*100),l=o.height();r=r>=99?"100%":r>=83?"83.33333333%":r>=66?"66.66666666%":r>=58?"58.33333333%":r>=50?"50%":"41.66666667%",a.css({overflow:"hidden",display:"block",opacity:.01}).removeClass("hidden");var u=a.height();a.css("width",r).height(l).animate({opacity:1,height:u+"px"},"slow",function(){a.width("").height("")}),o.height(l).css({position:"absolute",top:0,left:0}).animate({opacity:0,height:u+"px"},"slow",function(){o.css({position:"static",top:"auto",left:"auto",height:"",display:"none"}),n.infopanel.css("float","left"),n.switching=!1})}if(this.login2signup.toggleClass("hidden","signup"===i.form_disp),this.signup2login.toggleClass("hidden","signup"!==i.form_disp),this.not_yet_member.toggleClass("hidden","signup"===i.form_disp),!this.switching&&this.signupblocks.length>0){var f=this.signupdetails,d=this.signupdetails;this.signupstep2.is(":visible")&&(f=this.signupstep2),"step2"===this.signup_disp&&(d=this.signupstep2),f.is(d)||(f.toggleClass("hidden"),d.toggleClass("hidden"),this.signupblocks.toggleClass("col-xs-12 col-xs-7 col-md-6"),this.infopanel.toggleClass("hidden","step2"===this.signup_disp),e.scrollTo(d))}if(this.signupblocks_always_visible&&this.createOrRefreshValidator("signup-form",i.signup_validation_rules,{no_init_validate:!0}),"signin"===i.form_disp)return void this.createOrRefreshValidator("signin-form",i.signin_validation_rules,{no_init_validate:!0});if("lostpassword"===i.form_disp)return void($("#lost-password-form").length>0&&this.createOrRefreshValidator("lost-password-form",i.lostpwd_validation_rules,{no_init_focus:!0,no_init_validate:!0}));if(!this.signupblocks_always_visible){var c=this.createOrRefreshValidator("signup-form",i.signup_validation_rules,{no_init_validate:!0,append_errors_shortcuts_to:"#signup-form"});c&&(this.step1_error=!1,c.errorChanged=function(e,i){t.prototype.errorChanged.apply(this,[e,i]),n.step1_error=!1;for(var s in this.validators){var o=this.validators[s];if(!o.isValid()&&o.id&&"signup-form_details_"===o.id.substr(0,20)){n.step1_error=o;break}}n.signup2nextbtn.toggleClass("has-verror",!1!==n.step1_error)},c.errorChanged(!1,null))}},n.prototype.doSetupNodes=function(e){var t=this;this.signinblocks=$("#signin-form-block"),this.login2signup=$("#btn-login2signup"),this.signupblocks=$("#signup-form-block"),this.signupblocks_always_visible=this.signupblocks.hasClass("always-visible"),this.signup2login=$("#btn-signup2login"),this.signupdetails=$("#signup-form_details"),this.signupstep2=$("#signup-form_step2"),this.lostpwdblocks=$("#lostpassword-form-block"),this.infopanel=$("#create-account-frame"),this.not_yet_member=this.infopanel.find(".no-create-account"),$("#signup-form_step2_profilepic .step2-profile-pic img").on("click",function(){$("#signup-form_step2_profilepic_file").click()}),this.signup_disp="details";var i=this.signupblocks.find(".has-error");i.length>0&&(this.signup_disp=i.first().parents("fieldset").last().prop("id").substr(12)),$("#btn-login2create,#btn-login2signup,#btn-signup2login").on("click",function(i){i.preventDefault(),e.form_disp="signup"!==e.form_disp?"signup":"signin",t.toggleForms(e)}),$("#btn-lostpassword2login").on("click",function(i){i.preventDefault(),e.form_disp="signin",t.toggleForms(e)}),$("#btn-login2lostpassword").on("click",function(i){i.preventDefault(),e.form_disp="lostpassword",t.toggleForms(e)}),this.signup2nextbtn=$("#btn-signup2next,#btn-signup2prev").on("click",function(i){if(i.preventDefault(),"details"===t.signup_disp&&t.step1_error)return t.validators["signup-form"].showErrorsShortcuts(),void(t.step1_error.focus&&t.step1_error.focus());t.signup_disp="details"===t.signup_disp?"step2":"details",t.toggleForms(e)});var n=this.signupblocks.find("input,select").on("keydown",function(e){if(13===e.which){var t=n.index(this);if(t===n.length-1)return;return n.eq(t+1).focus(),e.preventDefault(),!1}})},n.prototype.positionPopup=function(){this.is_popup&&e.scrollTo(this.box.body)},n}),define("skins/common/form/login/premium",["./base","static/cookies"],function(e,t){var i=function(){e.apply(this,["premium-popup-form"]),this.signinblocks=null,this.signupblocks=null,this.lostpwdblocks=null,this.login2signup=null,this.signup2login=null,this.login2lostpwd=null,this.lostpwd2login=null,this.tab2login=null,this.tab2signup=null,this.tab2lostpwd=null,this.one_click_forms=$(),this.modes=[],this.current_mode=!1};return i.prototype=new e,i.prototype.doToggleForms=function(e){if(!(this.modes.length>1)||this.current_mode){if("premium"===e.form_disp){var t=$("#premium-form-block");return void(t.length>0&&(t.removeClass("hidden"),t[0].style.display=""))}var i=this;this.signinblocks.parent().css("position","relative");var n=this.signupblocks.is(":visible")?this.signupblocks:this.lostpwdblocks.is(":visible")?this.lostpwdblocks:this.signinblocks,s="signup"===e.form_disp?this.signupblocks:"lostpassword"===e.form_disp?this.lostpwdblocks:this.signinblocks;if(!n.is(s)){this.switching=!0;var o=n.width(),a=n.height(),r=n.position();s.css({overflow:"hidden",display:"block",opacity:.01}).removeClass("hidden");var l=s.outerHeight();s.height(a).animate({opacity:1,height:l+"px"},"slow",function(){s.width("").height("")}),n.width(o).height(a).css({position:"absolute",top:r.top,left:r.left}).animate({opacity:0,height:l+"px"},"slow",function(){n.css({position:"static",top:"auto",left:"auto",height:"",display:"none"}),i.switching=!1})}return this.tab2login.toggleClass("active","signin"===e.form_disp),(this.tab2signup.toggleClass("active","signup"===e.form_disp),this.tab2lostpwd.toggleClass("active","lostpassword"===e.form_disp),"signin"===e.form_disp)?void this.createOrRefreshValidator("signin-form",e.signin_validation_rules):"lostpassword"===e.form_disp?void this.createOrRefreshValidator("lost-password-form",e.lostpwd_validation_rules):void this.createOrRefreshValidator("signup-form",e.signup_validation_rules)}},i.prototype.doSetupNodes=function(e){var i=this;if(this.modes=e.products_modes,this.modes.length>1&&(this.current_mode=e.premium_mode,!this.current_mode)){var n=$("#premium-modes-block");n.find("table.mode").on("click",function(){i.current_mode=$(this).data("mode"),t.setLocal("premium_mode",i.current_mode,36e5,"/");var s=!1;for(var o in e.products){var a=e.products[o];$(".premium-plan-"+o).toggleClass("hidden",i.current_mode!==a.mode).children().hasClass(".selected")&&(s=a.mode)}if(!s||s!==i.current_mode)for(var o in e.products)if(e.products[o].mode===i.current_mode){$(".premium-plan-"+o+" .plan").trigger("click");break}for(var r in e.products_modes)$("#premium-popup-form .rebill-help-"+e.products_modes[r].toLowerCase()).toggleClass("hidden",e.products_modes[r]!==i.current_mode);n.addClass("hidden"),i.toggleForms(e)})}if(this.one_click_forms=$(),"premium"===e.form_disp){var s=$("#premium-form");if(this.createOrRefreshValidator("premium-form",e.premium_validation_rules),"object"==typeof e.one_click_form_validation_rules&&e.one_click_form_validation_rules.length>0)for(var o in e.one_click_form_validation_rules){var a=e.one_click_form_validation_rules[o];this.createOrRefreshValidator(a.id,a.rules),this.one_click_forms=this.one_click_forms.add("#"+a.id+"_product")}$("#premium-form-block select").on("change",function(){$(this).toggleClass("no-value",""===$(this).val())}),$("#premium-form-block .form-field-premium-form_cc_ccv input").after('<div class="cc-icon"></div>'),e.products_signup_form&&s.find(".form-field-premium-form_product").appendTo(s)}else{this.signinblocks=$("#signin-form-block"),this.signupblocks=$("#signup-form-block"),this.lostpwdblocks=$("#lostpassword-form-block"),this.signup2login=$("#btn-signup2login"),this.login2signup=$("#btn-login2signup"),this.login2lostpwd=$("#btn-login2lostpassword"),this.lostpwd2login=$("#btn-lostpassword2login"),this.tab2login=$("#tab-2signin"),this.tab2signup=$("#tab-2signup"),this.tab2lostpwd=$("#tab-2lostpassword"),this.tab2signup.add(this.login2signup).on("click",function(t){t.preventDefault(),e.form_disp="signup",i.toggleForms(e)}),this.tab2login.add(this.signup2login).add(this.lostpwd2login).on("click",function(t){t.preventDefault(),e.form_disp="signin",i.toggleForms(e)}),this.tab2lostpwd.add(this.login2lostpwd).on("click",function(t){t.preventDefault(),e.form_disp="lostpassword",i.toggleForms(e)});var r=this.signupblocks.find("input,select").on("keydown",function(e){if(13===e.which){var t=r.index(this);if(t===r.length-1)return;return r.eq(t+1).focus(),e.preventDefault(),!1}});this.toggleForms(e)}$(".premium-plans").each(function(){var t=$(this).find(".plan");t.length>0&&(t.on("click",function(n,s){var o=$(this).addClass("selected"),a=o.find("input").prop("checked","checked"),r=a.val();t.not(o).removeClass("selected"),i.signupblocks&&"object"==typeof e.products[r]&&i.signupblocks.toggleClass("prod-with-trial",e.products[r].has_trial);for(var l in i.validators)i.validators.hasOwnProperty(l)&&i.validators[l].resetSubmit();s||($(".premium-plan-"+r+" .plan").not(o).trigger("click",[!0]),i.one_click_forms.val(a.val()))}),t.find("input:checked").parents(".p-ct").click(),i.one_click_forms.val(t.find("input:checked").val()))})},i.prototype.onFormSubmitSuccess=function(t){if(t.redirect_to)return void this.redirectWithConnectionLoader(t.redirect_to);if(t.premium_declined)return t.premium_end_page?void this.box.setContent(t.premium_end_page):("/account/create/premium-iframe"===window.location.pathname&&(window.location.href="/account/premium/declined-iframe"),void(window.location.href="/account/premium/declined"));if(!t.is_premium)return void this.loadForm({product:t.id_product});if(t.premium_success){if(t.premium_end_page)return void this.box.setContent(t.premium_end_page);var i="/account/premium/congrats?referer="+encodeURIComponent(window.location.href);return"/account/create/premium-iframe"===window.location.pathname&&(i+="&form=iframe"),void(window.location.href=i)}e.prototype.onFormSubmitSuccess.apply(this,[t])},i}),define("skins/default/form/login",["config/main","skins/common/form/login/standard","skins/common/form/login/premium","skins/common/features_test/video_subs","skins/default/features_test/videos_i_like"],function(e,t,i,n,s){var o=t;e.dyn.premium&&(o=i);var a=new o;return a.doSetupNodes=function(e){if(n.isTracking()){var t=n.getIds();if(t.length>0)try{this.box.getNode().find('form input[name$="[subs]"]').val(JSON.stringify(t))}catch(a){}}if(s.isTracking()){var i=s.getIds();if(i.length>0)try{this.box.getNode().find('form input[name$="[votes]"]').val(JSON.stringify(i))}catch(a){}}return o.prototype.doSetupNodes.apply(this,[e])},a}),define("skins/common/history/page_view_history",["../../common/features_test/tracker","static/utils","config/main","lib/i18n!front","mustache","lib/helpers/overlay/contextual_popup","text!skins/common/history/history_popup.mustache"],function(e,t,i,n,s,o,a){var r,l={video:"vv",photo_gallery:"pg",verified_picture:"vp",profile:"pr"},u=function(){return r||(r=new d("page_view_history",5e3)),r},f=function(){};f.prototype={canTrack:function(){return u().canTrack()},cantTrackAlert:function(){i.dyn.login_info.is_logged?o.alert(n.__("profile.tracking.device_not_compatible_create_profile",{"%start_create_profile%":'<a href="/account/create_profile">',"%end_login%":"</a>"})):require(["skins/default/form/login"],function(e){var t=o.alert(n.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}));e.setupLinks(t.getNode().find(".contextual-popup-message a").first())})},isTracking:function(){return u().isTracking()},stopTracking:function(e,t){u().stopTracking(e,t)},startTracking:function(e){if(!this.canTrack())return this.cantTrackAlert(),!1;u().startTracking(e)},addId:function(e,t,i){if("undefined"==typeof l[e])return!1;u().addId(l[e]+"_"+t,i)},removeId:function(e,t,i){if("undefined"==typeof l[e])return!1;u().removeId(t,i)},removeIds:function(e,t){u().removeIds(e,t)},clear:function(e,t){return u().clear(e,t)},getIds:function(){return u().getIdsList()},getIdsTimestamps:function(){return u().getIdsTimestampsList()},getVideosIdsTimestamps:function(){return this.getIdsTimestampsByType().video},getIdsTimestampsByType:function(){var e=this.getIdsTimestamps(),t={},i={};for(var n in e){var s=n.indexOf("_"),o=n.substr(0,s),a=n.substr(s+1);t[o]||(t[o]={}),t[o][a]=e[n]}for(var r in l)t[l[r]]&&(i[r]=t[l[r]]);return i},clearOlderThan:function(e){var t=this.getIdsTimestamps(),i=Math.round((new Date).getTime()/1e3);for(var n in t)t[n]<i-86400*e&&this.removeId(n)}};var d=function(t,i){e.apply(this,[t,i])};return d.prototype=new e,d.prototype.isTracking=function(){return(!i.dyn.disfeats||-1===i.dyn.disfeats.indexOf("vv"))&&e.prototype.isTracking.apply(this)},d.prototype.removeIds=function(t,s){var a=this,r=function(t,s){for(var r in t)e.prototype.removeId.apply(a,[l.video+"_"+t[r]]);i.dyn.login_info.is_logged&&i.dyn.login_info.profile?$.post("/history/clear/selection",{videos:t},function(e){if(!e.result)return void o.alert(n.__("form.error_modification_not_saved"));"function"==typeof s&&s()},"json"):"function"==typeof s&&s()};t.length>1?o.confirm(n.__("history.clear_this_elements_confirm"),function(){r(t,s)}):r(t,s)},d.prototype.removeId=function(e,t){d.prototype.removeIds.apply(this,[[e],t])},d.prototype.clear=function(t,i){var s=this;o.confirm(n.__("categories.confirm_clear_history"),function(){e.prototype.clear.apply(s),!1!==i?$.post("/history/clear/all",{},function(e){if(!e.result)return void o.alert(n.__("form.error_modification_not_saved"));"function"==typeof t&&t()},"json"):"function"==typeof t&&t()})},d.prototype.stopTracking=function(i,r){var l=this,u=s.render(a,{content:t.unescape(n.__("history.disable_confirm")),history:t.unescape(n.__("history.clear"))}),f=function(t){if("undefined"==typeof t[0]){var s=$(this);if(s.data("send-form")){var a=s.closest(".x-popup-content").find("form");a.length>0&&(t=a.serializeArray())}}var r=1===t.length&&"clear"===t[0].name&&t[0].value,u={featureid:"vv"},f=!1;r&&(f=!0,u.clear=1),e.prototype.stopTracking.apply(l,[f]),$.post("/account/feature-disabled",u,function(e){if(!e.result)return void o.alert(n.__("form.error_modification_not_saved"));"function"==typeof i&&i()},"json")};void 0!==r&&"boolean"==typeof r.popup&&"object"==typeof r.popup_btn&&r.popup?require(["lib/helpers/popup"],function(e){"undefined"==typeof l.popup&&(l.popup=new e(r.popup_btn),l.popup.setPosition(r.popup_position)),l.popup.open(),l.popup.setContent(u);var t=$(".disable-history-confirm");t.addClass("popup-confirm").append('<button class="btn btn-primary btn-ok" data-send-form="1">'+n.__("misc.ok")+'</button><button class="btn btn-primary btn-close">'+n.__("misc.cancel")+"</button>"),t.find(".btn-ok").on("click",f),t.find(".btn-close").on("click",function(){l.popup.close()})}):o.confirm(u,f)},d.prototype.startTracking=function(t){e.prototype.startTracking.apply(this),$.post("/account/feature-enabled",{featureid:"vv"},function(e){if(!e.result)return void o.alert(n.__("form.error_modification_not_saved"));"function"==typeof t&&t()},"json")},new f}),define("text!skins/common/suggests/suggest_popup.mustache",[],function(){return'<div class="suggest-popup popup-confirm">\n\t<p>{{ content }}</p>\n\t<button class="btn btn-primary btn-ok">{{ ok }}</button>\n\t<button class="btn btn-primary btn-close">{{ not_ok }}</button>\n</div>'}),define("skins/common/suggests/suggests_manager",["static/utils","config/main","lib/i18n!front","mustache","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s){var o=function(){this.site_id=e.getSiteId()};return o.prototype={is_feature_enabled:function(){return!t.dyn.disfeats||-1===t.dyn.disfeats.indexOf("s")},toogle_feature:function(t,o){if(this.site_id<1)return!1;t="boolean"==typeof t?t:!this.is_feature_enabled();var a=function(){$.post("/account/feature-"+(t?"enabled":"disabled"),{featureid:"s"},function(e){if(!e.result)return void s.alert(i.__("form.error_modification_not_saved"));$("html,body").scrollTop(0),window.location.reload()},"json")};if(t)return void a();if(void 0!==o&&"boolean"==typeof o.popup&&"object"==typeof o.popup_btn&&o.popup){var r=this;require(["lib/helpers/popup","text!skins/common/suggests/suggest_popup.mustache"],function(t,s){"undefined"==typeof r.popup&&(r.popup=new t(o.popup_btn),r.popup.setPosition(o.popup_position)),r.popup.open(),r.popup.setContent(n.render(s,{content:e.unescape(i.__("misc.are_you_sure")),ok:e.unescape(i.__("misc.ok")),not_ok:e.unescape(i.__("misc.cancel"))}));var l=$(".suggest-popup");l.find(".btn-ok").on("click",a),l.find(".btn-close").on("click",function(){r.popup.close()})})}else s.confirm(i.__("misc.are_you_sure"),a)},remove_vid_from_suggest:function(e,t){var n=!1,o=setTimeout(function(){n=s.loading()},500);$.post("/video-suggest/blacklist/"+e,{},function(e){if(clearTimeout(o),n&&n.close(),!e||!e.OK)return void s.alert(i.__("form.error_modification_not_saved"));"function"==typeof t&&t()},"json")}},new o}),define("skins/common/video/vote_manager",["config/main","lib/helpers/inline_loader","lib/helpers/popup","lib/i18n!front"],function(e,t,i,n){var s=function(e,t,i,n,s){this.good_btn=$(e),this.bad_btn=$(t),this.url_good=i,this.url_bad=n,this.data_good=s&&s.data_good?s.data_good:{},this.data_bad=s&&s.data_bad?s.data_bad:{},this.end_func=!(!s||!s.end_func)&&s.end_func,this.success_func=!(!s||!s.success_func)&&s.success_func,this.notlogged_func=!(!s||!s.notlogged_func)&&s.notlogged_func,this.disable_confirm_pop=!(!s||"boolean"!=typeof s.disable_confirm_pop)&&s.disable_confirm_pop,this.pop_relative=s&&s.pop_relative?$(s.pop_relative):$(document.body),this.pop_class="video-vote-popup"+(s&&s.pop_class?" "+s.pop_class:""),this.rating_total=!(!s||!s.rating_total)&&$(s.rating_total),this.rating_pgs_bar=!(!s||!s.rating_pgs_bar)&&$(s.rating_pgs_bar),this.rating_box=!(!s||!s.rating_box)&&$(s.rating_box),this.voting=!1,this.init_btns()};return s.prototype={get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new i(e,t,{relative_to:this.pop_relative,position:{v:"below",h:"left"},trigger:!1,mouseout_autoclose:3e3,mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"],popup_class:this.pop_class}),this.popup},init_btns:function(){this.init_btn(this.good_btn,this.url_good,!0,this.data_good),this.init_btn(this.bad_btn,this.url_bad,!1,this.data_bad)},init_btn:function(i,s,o,a){var r=this;i.on("click",function(l){if(l.preventDefault(),!r.voting){r.voting=!0;var u=i.html();r.good_btn.addClass("disabled"),r.bad_btn.addClass("disabled"),i.html(t.getImg()),$.post({url:s,dataType:"json",data:a,success:function(e){i.html(u);var t;if(e.result){if(r.rating_total&&r.rating_total.text(e.total),r.rating_pgs_bar&&r.rating_pgs_bar.css("width",e.rating+"%"),r.rating_box){var s=e.rating.toFixed(2).split(".");1===s.length&&s.push("00"),r.rating_box.html(s[0]+'<span class="mobile-hide">.'+s[1]+"</span>%")}r.good_btn.children(".value").text(e.vgood),r.bad_btn.children(".value").text(e.vbad),r.good_btn.children(".rating-inbtn").text(e.vgood_uf),r.bad_btn.children(".rating-inbtn").text(e.vbad_uf),"function"==typeof r.success_func&&(t=r.success_func(o)),t||(t=n.__("video.votes.thanks")),t="<strong>"+t+"</strong>"}else t='<strong class="text-danger">'+e.message+"</strong>";r.disable_confirm_pop||r.get_popup(i,t).open()},error:function(){i.html(u),r.get_popup(i,'<strong class="text-danger">'+n.__("error.err_please_reload")+"</strong>").open()},complete:function(){"function"==typeof r.end_func&&r.end_func(),r.voting=!1,r.good_btn.removeClass("disabled"),r.bad_btn.removeClass("disabled")}}),e.dyn.login_info.is_logged||"function"!=typeof r.notlogged_func||r.notlogged_func(o)}})},set_success_func:function(e){this.success_func=e},set_notlogged_func:function(e){this.notlogged_func=e}},s}),define("text!skins/common/mozaique/thumb_block_menu/btn.mustache",[],function(){return'<button class="action-menu"><span class="open icon-f icf-ellipsis-v"></span><span class="close icon-f icf-close-thin"></span></button>'}),define("skins/common/mozaique/thumb_block_menu/one_tb_menu",["config/main","mustache","lib/helpers/popup","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/events","skins/common/history/page_view_history","skins/common/suggests/suggests_manager","skins/common/video/vote_manager","skins/default/features_test/videos_i_like","text!./btn.mustache"],function(e,t,i,n,s,o,a,r,l,u,f){var d=function(e,n,s){this.$ThumbBlock=$(e),this.$TbInside=this.$ThumbBlock.children(".thumb-inside").first(),this.sId=n.toString(),this.options=s||{},this.$Btn=$(t.render(f)),this.$TbInside.append(this.$Btn);var o={mouseout_autoclose:3e3,mouseout_autoclose_openevents:["click","mouseover_btn_timer"],popup_class:"tb-menu",autoclose_on_same_level:"thumb_block_menu"};"favlist"===this.options.type&&(this.options.bBtnAlwaysVisible=!0,o.relative_to=this.options.favorite.getMainContainer()),this.popup=new i(this.$Btn,"",o),this.setVoteGoodEndFunc(this.options.fVoteGoodEnd),this.setVoteBadEndFunc(this.options.fVoteBadEnd),this.setUnvoteEndFunc(this.options.fUnvoteEnd),this.setOnOpenFunc(this.options.fOnOpen),this.setOnCloseFunc(this.options.fOnClose);var a=this;return this.popup.onOpen=function(){a.set_content(),a.$ThumbBlock.addClass("menu-opened"),a.fOnOpen&&a.fOnOpen()},this.popup.onClose=function(){a.$ThumbBlock.removeClass("menu-opened"),a.options.bBtnAlwaysVisible||a.start_hide_timer(),a.fOnClose&&a.fOnClose()},this.$TbInside.length>0&&(this.trigger_event,this.trigger_out_event,this.start_timer,this.hide_timer,this.last_start,this.touch_timer,this.iTmpLocked=!1,this.options.bBtnAlwaysVisible?$(this.$Btn).stop().show().css("opacity",1):this.$TbInside.on(this.ON_EVENT,function(e){if("touchstart"===e.type)return void(a.touch_timer||(a.touch_timer=setTimeout(function(){a.touch_timer=null,a.show("touchstart")},200)));a.show(e.type)}).on("touchend",function(){a.touch_timer&&clearTimeout(a.touch_timer)}).on("mouseleave",function(e){a.hide(e.type)})),this.$ThumbBlock.addClass("tbm-init-ok"),this};return d.prototype={ON_EVENT:/iPad|iPhone|iPod/.test(navigator.userAgent)?"swipe touchmove":"swipe touchstart mouseenter",show:function(e){if(!0===this.bDisabled||o.isScrolling()||0===this.options.aEntries.length)return!1;if("mouseenter"===e&&"mouseleave"===this.trigger_out_event&&(this.trigger_out_event=!1),"mouseleave"!==this.trigger_out_event){if("mouseenter"===e&&this.iTmpLocked){if(!((new Date).getTime()-this.iTmpLocked>200))return;this.iTmpLocked=!1}this.start_timer&&(window.clearTimeout(this.start_timer),this.start_timer=null);var t=(new Date).getTime();if(this.last_start>0&&t-this.last_start<300){this.last_start=t;var i=this;return void(this.start_timer=window.setTimeout(function(){i.show(e)},300))}this.last_start=t,this.trigger_event=e,this.hide(!0),this.start_hide_timer(),$(this.$Btn).stop().show().css("opacity",1),this.$ThumbBlock.addClass("show-tb-menu")}},hide:function(e,t){if(!0===this.bDisabled)return!1;this.stop_hide_timer(),!0!==e&&"swipe"===this.trigger_event||(t&&(this.iTmpLocked=(new Date).getTime()),this.trigger_out_event=e,this.popup.isOpened()||$(this.$Btn).hide(),this.$ThumbBlock.removeClass("show-tb-menu"))},getBtn:function(){return this.$Btn},getId:function(){return this.sId},reinitButton:function(){return this.popup.initButton()},disable:function(){this.$Btn.length>0&&(this.$Btn.remove(),this.bDisabled=!0)},close_popup:function(){this.popup.close()},start_hide_timer:function(){if(!0===this.bDisabled)return!1;this.stop_hide_timer();var e=this;this.hide_timer=window.setTimeout(function(){e.popup.isOpened()||$(e.$Btn).fadeOut(1500,function(){e.hide(!0)})},2e3)},stop_hide_timer:function(){if(!0===this.bDisabled)return!1;$(this.$Btn).stop().show().css("opacity",1),this.hide_timer&&(window.clearTimeout(this.hide_timer),this.hide_timer=null)},set_content:function(){"video"===this.options.type&&this.set_content_video()},reset_content:function(){if(!0===this.bDisabled)return!1;this.$Content=!1},get_profile:function(){return e.dyn.login_info.is_logged&&e.dyn.login_info.profile?e.dyn.login_info.profile:"unlogged"},set_content_video:function(){
if(!0===this.bDisabled)return!1;if(!this.$Content){this.popup.setContent(s.getIcf());var e=this;setTimeout(function(){$.post("/profiles/"+e.get_profile()+"/followers/checkvideo/"+e.sId,function(t){if(t.result){if(!t.found)return void e.popup.setContent($("<p>"+n.__("loading.error")+"</p>"));e.sVote=!!t.vote&&t.vote,e.sUrlVoteGood=!!t.vote_good&&t.vote_good,e.sUrlVoteBad=!!t.vote_bad&&t.vote_bad,e.uploader_id=!!t.id_user&&t.id_user,e.uploader_profile=!!t.profile&&t.profile,e.is_owner=t.is_owner?t.is_owner:null,e.is_follower=t.is_follower?t.is_follower:null,e.sub_csrf=t.csrf?t.csrf:null,e.rejected=t.rejected?t.rejected:null,e.reject_csrf=t.reject_csrf?t.reject_csrf:null,e.$Content=$("<ul></ul>");for(var i=0;i<e.options.aEntries.length;i++){var s=e.options.aEntries[i];"function"==typeof e[s]&&e[s](e)}e.popup.setContent(e.$Content)}else e.popup.setContent($("<p>"+n.__("error.err_please_reload")+"</p>"))},"json")},10)}},setEntries:function(e){if(!0===this.bDisabled)return!1;this.options.aEntries=e,this.reset_content()},setOnOpenFunc:function(e){this.fOnOpen="function"==typeof e&&e},setOnCloseFunc:function(e){this.fOnClose="function"==typeof e&&e},getVote:function(){return this.sVote},setVote:function(e){"GOOD"!==e&&"BAD"!==e&&(e=!1),this.sVote=e,"GOOD"===this.sVote?(this.$ThumbBlock.addClass("voted-good").removeClass("voted-bad voted-null"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-good").addClass("active"),this.$Content.find(".vote-actions .vote-action-bad").removeClass("active")),this.fVoteGoodEnd&&this.fVoteGoodEnd()):"BAD"===this.sVote?(this.$ThumbBlock.addClass("voted-bad").removeClass("voted-good voted-null"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-bad").addClass("active"),this.$Content.find(".vote-actions .vote-action-good").removeClass("active")),this.fVoteBadEnd&&this.fVoteBadEnd()):(this.$ThumbBlock.addClass("voted-null").removeClass("voted-bad voted-good"),this.$Content&&(this.$Content.find(".vote-actions .vote-action-bad").removeClass("active"),this.$Content.find(".vote-actions .vote-action-good").removeClass("active")),this.fUnvoteEnd&&this.fUnvoteEnd())},setVoteGoodEndFunc:function(e){this.fVoteGoodEnd="function"==typeof e&&e},setVoteBadEndFunc:function(e){this.fVoteBadEnd="function"==typeof e&&e},setUnvoteEndFunc:function(e){this.fUnvoteEnd="function"==typeof e&&e},add_content_v_vote_actions:function(){if(this.sUrlVoteGood&&this.sUrlVoteBad&&!this.is_owner){var t=$("<li class='vote-actions'></li>"),i=this.sVote||!1;if(!i&&!e.dyn.login_info.is_logged&&u.isTracking()){var n=u.getIds();n&&-1!==n.indexOf(parseInt(this.sId))&&(i="GOOD")}var s=$("<a class='btn btn-default vote-action-good"+("GOOD"===i?" active":"")+"'><span class='icon-f icf-thumb-up'></span></a>");t.append(s);var o=$("<a class='btn btn-default vote-action-bad"+("BAD"===i?" active":"")+"'><span class='icon-f icf-thumb-down'></span></a>");t.append(o);var a=this;new l(s,o,this.sUrlVoteGood,this.sUrlVoteBad,{pop_class:"no-arrow",disable_confirm_pop:!0,end_func:function(){a.popup.close()},success_func:function(e){return a.setVote(e?"GOOD":"BAD"),""},notlogged_func:function(e){e?u.voteGood(a.sId):u.voteBad(a.sId),a.setVote(e?"GOOD":"BAD")}}),this.$Content.append(t)}},add_content_v_suggested_video:function(){var e,t,i=this;this.options.origin_v_id&&(e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("suggest.remove_video")+"</a>"),t.on("click",function(){r.remove_vid_from_suggest(i.options.origin_v_id,function(){$("#video_"+i.sId).fadeOut(400,function(){$(this).remove()})}),i.popup.close()}),e.append(t),this.$Content.append(e)),e=$("<li></li>"),r.is_feature_enabled()?(t=$("<a><span class='icon-f icf-ban'></span>"+n.__("suggest.disable")+"</a>"),t.on("click",function(){r.toogle_feature(!1)})):(t=$("<a><span class='icon-f icf-suggest-square'></span>"+n.__("suggest.enable")+"</a>"),t.on("click",function(){r.toogle_feature(!0)})),e.append(t),this.$Content.append(e)},add_content_v_toggle_history:function(){if(a.canTrack()){var e,t;a.isTracking()?(e=$("<li class='disable-history'></li>"),t=$("<a><span class='icon-f icf-ban'></span>"+n.__("history.disable"+(r.is_feature_enabled()?"_and_suggests":""))+"</a>"),t.on("click",function(){a.stopTracking(function(){$("html,body").scrollTop(0),window.location.reload()})})):(e=$("<li class='enable-history'></li>"),t=$("<a><span class='icon-f icf-history'></span>"+n.__("history.enable")+"</a>"),t.on("click",function(){a.startTracking(function(){$("html,body").scrollTop(0),window.location.reload()})})),e.append(t),this.$Content.append(e)}},add_content_v_not_interested:function(){var t,i,s=this;t=$("<li></li>"),i=$("<a><span class='icon-f icf-ban'></span>"+n.__("misc.not_interested")+"</a>"),i.on("click",function(){s.popup.close(),s.$ThumbBlock.fadeOut(function(){s.$ThumbBlock.remove()});var t=e.dyn.login_info.is_logged&&e.dyn.login_info.profile?e.dyn.login_info.profile:"unlogged";$.post({url:"/profiles/"+t+"/video/reject/"+s.sId,data:{csrf:s.reject_csrf}})}),t.append(i),this.$Content.append(t)},add_content_v_report_btn:function(){if(e.dyn.login_info.is_logged){var t,i;t=$("<li></li>"),i=$("<a href='/account/support' target='_blank'><span class='icon-f icf-flag'></span>"+n.__("misc.report_issue")+"</a>"),t.append(i),this.$Content.append(t)}}},d}),define("skins/common/mozaique/thumb_block_menu",["config/main","mustache","lib/i18n!front","lib/helpers/inline_loader","lib/helpers/events","./thumb_block_menu/one_tb_menu"],function(e,t,i,n,s,o){var a=function(){this.oEntries={vote_actions:"add_content_v_vote_actions",suggested_video:"add_content_v_suggested_video",toggle_history:"add_content_v_toggle_history",not_interested:"add_content_v_not_interested",report:"add_content_v_report_btn"},this.aEntriesOrder=[]};return a.prototype={init_listing:function(e,t){if(!0===this.bDisabled)return!1;t||(t={}),this.aInitiated||(this.aInitiated=[]);var i="favlist"===t.type?"favlist-elem":"thumb-block",n=$("."+i,e);if(0!==n.length||(e.length>0&&e.each(function(){$(this).hasClass(i)&&(n=n.add($(this)))}),0!==n.length)){var s=this,a=[];return n.each(function(){var e=$(this),i=e.prop("id"),n=e.hasClass("tbm-init-ok")||e.hasClass("thumb-ad"),r=!1,l={};if(!l.type&&i&&("video_"===i.substr(0,6)&&i==="video_"+String(parseInt(i.substr(6)))?l.type="video":"favlist_"===i.substr(0,8)&&i==="favlist_"+String(parseInt(i.substr(8)))&&(l.type="favlist")),!n){if(l.aEntries=s.getOrderedEntries(),"video"===l.type){r=i.substr(6);var u=e.data("origin-video-id");u&&(l.origin_v_id=u)}else"favlist"===t.type&&(l.favorite=t.favorite,r=t.favorite.sId);if(r){var f=new o(e,r,l);s.aInitiated.push(f),a.push(f)}}}),a}},getById:function(e){if(!this.aInitiated||!this.aInitiated.length)return!1;for(var t=0;t<this.aInitiated.length;t++)if(oTBMenu=this.aInitiated[t],oTBMenu.getId()===e)return oTBMenu;return!1},setEntry:function(e,t){this.oEntries[e]=t},getOrderedEntries:function(){for(var e=[],t=0;t<this.aEntriesOrder.length;t++){var i=this.aEntriesOrder[t];"string"==typeof this.oEntries[i]&&e.push(this.oEntries[i])}return e},orderEntries:function(e){this.aEntriesOrder=e},addEntryToDefaultOrder:function(e){if(-1!==this.aEntriesOrder.indexOf(e))return!1;this.aEntriesOrder.push(e),this.update_initiated_contents()},update_initiated_contents:function(){if(this.aInitiated){var e=this.getOrderedEntries();for(var t in this.aInitiated)this.aInitiated[t].setEntries(e)}},reset_initiated_contents:function(){if(this.aInitiated)for(var e in this.aInitiated)this.aInitiated[e].reset_content()},disableSubscribeTooltip:function(e){this.bAllSubscribeTooltipDisabled="boolean"!=typeof e||e},addSubscribeEndFunction:function(e){"undefined"==typeof this.aSubscribeEndFunctions&&(this.aSubscribeEndFunctions=[]),this.aSubscribeEndFunctions.push(e)},executeSubscribeEndFunctions:function(e,t){if("undefined"!=typeof this.aSubscribeEndFunctions)for(var i in this.aSubscribeEndFunctions){var n=this.aSubscribeEndFunctions[i];"function"==typeof n&&n(e,t)}},disableAll:function(){this.bDisabled=!0;for(var e in this.aInitiated){var t=this.aInitiated[e];t&&"function"==typeof t.disable&&t.disable()}}},a}),define("skins/common/video/copy_link",["lib/helpers/popup","lib/i18n!front"],function(e,t){var i=function(e,i){this.container=$(e),this.inp=this.container.find("input"),this.btn=this.container.find(".copy-btn"),this.manager=i;var n=this;this.btn.on("click",function(e){e.preventDefault(),n.inp.focus().select(),document.execCommand("copy"),n.manager.open_tooltip(n.inp,t.__("misc.text_copied"))}).addClass("init-ok")},n=function(e){0===$(e).length&&(e="body"),e=$(e);var t=this;e.find(".copy-link").each(function(){t.is_initiated($(this))||t.copy_links.push(new i($(this),t))})};return i.prototype={container:!1,btn:!1,inp:!1,manager:!1},n.prototype={tooltip:null,copy_links:[],is_initiated:function(e){for(var t in this.copy_links)if(this.copy_links[t].container.is(e))return!0;return!1},open_tooltip:function(t,i){null===this.tooltip?this.tooltip=new e(t,"",{trigger:!1,position:{v:"above",h:"left"},popup_class:"link-copied-popup",autoclose:2e3}):this.tooltip.setButton(t),this.tooltip.open(),this.tooltip.setContent($("<p>"+i+"</p>"))}},n}),define("text!skins/common/video/share.mustache",[],function(){return'<ul class="share-toolbox">\n\t{{#share}}\n\t\t<li>\n\t\t\t<a class="{{{ class }}}" href="{{{ href }}}" title="{{{ tool }}}" target="_blank"><span class="icon-f icf-{{{ icf }}}"></span></a>\n\t\t</li>\n\t{{/share}}\n</ul>'}),define("skins/common/video/share",["mustache","static/utils","lib/i18n!front","skins/common/video/copy_link","text!skins/common/video/share.mustache"],function(e,t,i,n,s){var o=function(){};return o.prototype={getShareElem:function(o,a,r){"string"!=typeof r&&(r="default"),o=t.escape(o,!0),a=encodeURI(t.escape(a,!0)),-1!==o.indexOf("#")&&(o=o.split("#"),o=o[0]);var l=encodeURI(o),u=[{tool:"Twitter",href:"http://twitter.com/share?text="+a+" - "+l,icf:"twitter","class":"twitter"},{tool:"Reddit",href:"http://www.reddit.com/submit?url="+l+"&title="+a,icf:"reddit icf-white-fill","class":"reddit"},{tool:i.__("report_form.email"),href:"mailto:?subject="+a+"&amp;body="+l,icf:"envelop","class":"envelop"}];return"full"===r&&u.push({tool:i.__("misc.copy_url"),href:o,icf:"copy","class":"copy-btn"}),$Share=$(e.render(s,{share:u})),"full"===r&&($Share.find(".copy-btn").parent().addClass("copy-link").append($('<input type="text" value="'+o+'"/>')),new n($Share)),$Share}},new o}),define("skins/default/video/watch_later",["static/utils","config/main","lib/i18n!front","lib/helpers/popup","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s){var o=function(e,t,i,n){var s=this;return this.btn=e,this.video_id=t,this.csrf=i,this.options=n||{},this.btn.on("click",function(e){e.preventDefault(),s.click_func()}).addClass("init-ok"),this};o.prototype={btn:!1,video_id:0,popup:!1,csrf:!1,click_func:function(){!1===this.popup&&(this.popup=new n(this.btn,"",{trigger:!1,autoclose:3e3,popup_class:"string"==typeof this.options.popup_class?this.options.popup_class:"watch-later-pop"}));var e=this;$.post("/api/playlists/watch-later/add/"+this.video_id,{csrf:this.csrf},function(t){e.popup.open(),t.result?(t.already_added?e.popup.setContent($("<p>"+i.__("video.already_added_watch_later",{"%link_start%":'<a href="/watch-later">',"%link_end%":"</a>"})+"</p>")):e.popup.setContent($("<p>"+i.__("video.added_watch_later",{"%link_start%":'<a href="/watch-later">',"%link_end%":"</a>"})+"</p>")),"function"==typeof e.options.end_click_success_func&&e.options.end_click_success_func()):(e.popup.setContent($("<p>"+(t.message||i.__("form.error_modification_not_saved"))+"</p>")),"function"==typeof e.options.end_click_error_func&&e.options.end_click_error_func()),"function"==typeof e.options.end_click_func&&e.options.end_click_func()},"json")}};var a=function(){};return a.prototype={btns:[],list_btns:$(),rmv_btns:[],init_btn:function(e,i,n){e.hasClass("init-ok")||(t.dyn.login_info.is_logged?this.btns.push(new o($(e),i,this.get_add_csrf(),n)):require(["skins/default/form/login"],function(t){n&&"function"==typeof n.end_click_func&&e.on("click",n.end_click_func),t.setupLinks(e),e.addClass("init-ok")}),this.update_view())},init_listing:function(e,i){var n=$(".thumb-block .watch-later",e).not(".init-ok");if(0!==n.length||(e.length>0&&e.each(function(){$(this).hasClass("thumb-block")&&(n=n.add($(this).find(".watch-later")))}),0!==n.length)){var s=this;t.dyn.login_info.is_logged?$(n).each(function(){var e=$(this),t=e.parents(".thumb-block"),n=xv.thumbs.getVideoId(t);n===String(parseInt(n))&&(s.btns.push(new o(e,n,s.get_add_csrf(),i)),s.list_btns=s.list_btns.add(e))}):require(["skins/default/form/login"],function(e){e.setupLinks(n),n.addClass("init-ok")}),this.update_view()}},get_add_csrf:function(){return t.dyn.wl.put},get_del_csrf:function(){return t.dyn.wl.rem},is_feature_enabled:function(){return t.dyn.wl&&t.dyn.wl.in_listing},toggle_feature:function(e){var n=this,o=s.loading(i.__("form.saving_settings"),{delay:500});$.post("/account/feature-"+(this.is_feature_enabled()?"disabled":"enabled"),{featureid:"w"},function(a){if(o.close(),!a.result)return void s.alert(i.__("form.error_modification_not_saved"));t.dyn.wl.in_listing=!t.dyn.wl.in_listing,"undefined"!=typeof xv.thumb_block_menus&&"function"==typeof xv.thumb_block_menus.reset_initiated_contents&&xv.thumb_block_menus.reset_initiated_contents(),n.update_view(),"function"==typeof e&&e()},"json")},update_view:function(){"undefined"!=typeof xv.settings_btn&&"function"==typeof xv.settings_btn.update_watch_later_toggle_btn&&xv.settings_btn.update_watch_later_toggle_btn(),this.list_btns.length>0&&(this.is_feature_enabled()?this.list_btns.removeClass("disabled"):this.list_btns.addClass("disabled"))}},new a}),define("skins/common/history/easy_tracker",["skins/common/features_test/tracker"],function(e){var t=[],i=function(i){return t[i]||(t[i]=new e("EZtrk_"+i,5e3)),t[i]},n=function(){};return n.prototype={canTrack:function(e){return i(e).canTrack()},isTracking:function(e){return i(e).isTracking()},add:function(e,t){i(e).addId(t)},overrigth_all:function(e,t){this.clear(e);for(var i in t)this.add(e,t[i])},clear:function(e){return i(e).clear()},getAll:function(e){return i(e).getIdsList().reverse()},getLast:function(e){var t=this.getAll(e);return t.length>0&&t[0]}},new n}),define("skins/common/history/one_info_tracker",["./easy_tracker"],function(e){var t=function(){};return t.prototype={canTrack:function(t){return e.canTrack(t)},get:function(t){return e.getLast(t)},set:function(t,i){return e.overrigth_all(t,[i])},unset:function(t){e.clear(t)}},new t}),define("skins/default/mozaique/thumb_block_viewed",["static/utils","config/main","lib/i18n!front","skins/common/history/one_info_tracker","skins/common/history/page_view_history","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s,o){var a=function(){};return a.prototype={is_feature_enabled:function(){return t.dyn.vvi&&t.dyn.vvi.in_listing},toggle_feature:function(e,n){"boolean"!=typeof n&&(n=!t.dyn.vvi.in_listing);var s=o.loading(i.__("form.saving_settings")),a=this;$.post("/account/feature-"+(n?"enabled":"disabled"),{featureid:"vvi"},function(r){if(s.close(),!r.result)return void o.alert(i.__("form.error_modification_not_saved"));t.dyn.vvi.in_listing=n,n?a.init_listing():($(".thumb-block.viewed").removeClass("tbv-init-ok"),$(".thumb-block.viewed .video-viewed").remove()),"undefined"!=typeof xv.settings_btn&&"function"==typeof xv.settings_btn.update_viewed_icon_toggle_btn&&xv.settings_btn.update_viewed_icon_toggle_btn(),"undefined"!=typeof xv.thumb_block_menus&&"function"==typeof xv.thumb_block_menus.reset_initiated_contents&&xv.thumb_block_menus.reset_initiated_contents(),"function"==typeof e&&e()},"json")},init_listing:function(e){if(this.update_logged_list(e)&&this.is_feature_enabled()){this.update_viewed_tb(e);var t=$(".thumb-block.viewed",e);0===t.length&&(e&&e.length>0&&e.each(function(){$(this).hasClass("thumb-block")&&$(this).hasClass("viewed")&&(t=t.add($(this)))}),0===t.length)||t.each(function(){var e=$(this).children(".thumb-inside").first();!($(this).hasClass("tbv-init-ok")||$(this).hasClass("thumb-ad"))&&e.length>0&&($(this).addClass("tbv-init-ok"),e.append($('<span class="video-viewed"><span class="icon-f icf-eye"></span></span>')))})}},update_viewed_tb:function(e){if(this.viewed_list){var t=$(".thumb-block",e);if(0!==t.length||(e&&e.length>0&&e.each(function(){$(this).hasClass("thumb-block")&&(t=t.add($(this)))}),0!==t.length)){var i=this;t.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e);-1!==i.viewed_list.indexOf(t)&&e.addClass("viewed")})}}},update_logged_list:function(e){if(this.viewed_list)return!0;var i=s.getVideosIdsTimestamps();this.viewed_list=[];for(var o in i)this.viewed_list.push(parseInt(o));if(!t.dyn.login_info.is_logged||!n.canTrack("tb_viewed_updated"))return!0;var a=n.get("tb_viewed_updated"),r=(new Date).getTime();if(a>0&&r-a<36e5){if(n.get("tb_viewed_list")){var l=n.get("tb_viewed_list");this.viewed_list=[];for(var u in l)this.viewed_list.push(parseInt(l[u]))}return!0}var f=this;return $.post("/history/all-ids",{ids:i},function(t){if(t.result){n.set("tb_viewed_list",t.ids),f.viewed_list=[];for(var i in t.ids)f.viewed_list.push(parseInt(t.ids[i]));f.init_listing(e)}},"json"),n.set("tb_viewed_updated",(new Date).getTime()),!1}},new a}),define("text!skins/common/profile/subscribe/subscribed.mustache",[],function(){return'<div class=\'subscribed\'>\n\t<p>{{ subscribed }}{{^hide_view_activities}} <a href="/my-subs/videos">{{ view_activities }}</a>{{/hide_view_activities}}{{#has_related}} <span>{{ also_like }}:</span>{{/has_related}}</p>\n\t{{#has_related}}<div class="profileslist">{{{ related_html }}}</div>{{/has_related}}\n</div>'}),define("text!skins/common/profile/subscribe/related_profile.mustache",[],function(){return'\n<div class="profile">\n\t<a class="profile-img" href="{{ url }}">\n\t\t{{{ img }}}\n\t\t<span class="flag-small flag-{{ country }}"></span>\n\t</a>\n\t<p class="profile-name">\n\t\t<a href="{{ url }}" title="{{ username_display }}">{{ username_display }}</a>\n\t</p>\n\t<div id="{{ div_sub_id }}"></div>\n\t{{#about_me}}\n\t\t<p class="profile-desc">\n\t\t\t{{{ about_me }}}\n\t\t</p>\n\t{{/about_me}}\n</div>'}),define("text!skins/default/profile/subscribe/btn_sub.mustache",[],function(){return'<span class="user-subscribe">\n\t<span class="count">{{ count }}</span>\n</span>'}),define("skins/default/profile/subscribe/btns",["mustache","config/main","lib/i18n!front","skins/default/profile/subscribe/btn","text!skins/default/profile/subscribe/btn_sub.mustache"],function(e,t,i,n,s){var o={unsubed_text:i.__("subscriptions.subs_short")};return init_btns=function(i,a){var r=[],l={},u={};"object"==typeof a&&"object"==typeof a.sub_options&&(u=a.sub_options);for(var f in o)"undefined"==typeof u[f]&&(u[f]=o[f]);for(var f in i){var d=i[f];r.push(d.user_id),l[d.user_id]=f;var c=$(e.render(s,{count:d.nb_subs}));d.btn_class&&c.addClass(d.btn_class),d.prepend_btn_to?(d.parent=$(d.prepend_btn_to),d.parent.prepend(c)):d.append_btn_to&&(d.parent=$(d.append_btn_to),d.parent.append(c))}if(t.dyn.login_info.is_logged&&t.dyn.login_info.profile)$.post("/profiles/"+t.dyn.login_info.profile+"/followers/checks",{users:r},function(e){if(!0===e.result)for(var s in e.users){var o=i[l[s]];new n(o.parent.find(".user-subscribe"),o.user_name,s,e.users[s].csrf,e.users[s].is_follower,o.user_name===t.dyn.login_info.profile,u)}},"json");else for(var f in i){var d=i[f];new n(d.parent.find(".user-subscribe"),d.user_name,d.user_id,null,null,!1,u)}},init_btns}),define("skins/default/profile/subscribe/btn",["config/main","static/utils","lib/helpers/popup","lib/i18n!front","lib/helpers/inline_loader","skins/common/features_test/video_subs"],function(e,t,i,n,s,o){var a=function(t,i,n,s,a,r,l){if(!r){this.btn=t,this.action_label=this.btn.find(".action"),this.username=i,this.id_user=n,this.related_users={},this.options=l||{},this.options.add_relateds_to="undefined"!=typeof this.options.add_relateds_to&&this.options.add_relateds_to,this.options.tooltip_hide_after="undefined"!=typeof this.options.tooltip_hide_after?this.options.tooltip_hide_after:-1;var u=function(e,t,i){if("number"==typeof e&&-1!==[1,2,4,5].indexOf(e)||(e=i),e!==t)return e;switch(t){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4}};if(this.options.subed_icf_pos=u(this.options.subed_icf_pos,3,5),this.options.unsubed_icf_pos=u(this.options.unsubed_icf_pos,3,5),this.options.subed_text_pos=u(this.options.subed_text_pos,this.options.subed_icf_pos,4),this.options.unsubed_text_pos=u(this.options.unsubed_text_pos,this.options.unsubed_icf_pos,4),"undefined"!=typeof this.options.subed_icf&&"string"!=typeof this.options.subed_icf||(this.subed_icf=$("<span class='icon-f icf-"+("string"==typeof this.options.subed_icf?this.options.subed_icf:"feed")+"'></span>")),"string"==typeof this.options.unsubed_icf&&(this.unsubed_icf=$("<span class='icon-f icf-"+this.options.unsubed_icf+"'></span>")),"string"==typeof this.options.subed_text&&(this.subed_text=$("<span class='sub-state-text subbed-text'>"+this.options.subed_text+"</span>")),"string"==typeof this.options.unsubed_text&&(this.unsubed_text=$("<span class='sub-state-text unsubbed-text'>"+this.options.unsubed_text+"</span>")),"string"!=typeof this.options.btn_display&&!1!==this.options.btn_display&&(this.options.btn_display="inline-block"),"boolean"!=typeof this.options.resize_on_end&&(this.options.resize_on_end=!0),this.is_logged=e.dyn.login_info.is_logged,!this.is_logged)return this.is_follower=o.isTracking()&&o.hasSubscribed(n),void this.on_subscribe_check({data_setted:!0,is_follower:this.is_follower});if("boolean"==typeof a&&"string"==typeof s)return this.csrf=s,this.is_follower=a,void this.on_subscribe_check({data_setted:!0,is_follower:this.is_follower});var f=this;$.post("/profiles/"+this.username+"/followers/check",function(e){f.on_subscribe_check(e)},"json")}};return a.prototype={btn:!1,loader:!1,action_label:!1,username:"",id_user:!1,csrf:!1,is_follower:!1,is_logged:!1,subed_text:!1,unsubed_text:!1,subed_icf:!1,unsubed_icf:!1,options:{},clicked:!1,tooltip:!1,retry_on_csrf:!0,retry_is_follower:!1,retry_click_count:0,on_subscribe_check:function(t){if(!t.is_owner&&(t.data_setted||t.result&&"boolean"==typeof t.is_follower&&"string"==typeof t.csrf)){if(t.data_setted||(this.csrf=t.csrf),e.dyn.login_info&&e.dyn.login_info.is_logged&&this.btn.addClass("logged-user"),this.options.btn_display&&this.btn.fadeIn().css("display",this.options.btn_display),this.retry_is_follower)return this.is_follower===t.is_follower?this.btn.click():this.subscribe_end(t.is_follower),this.retry_is_follower=!1,void(this.retry_on_csrf=!0);this.btn.addClass("sub-checked"),this.subscribe_end(t.is_follower)}},subscribe_end:function(i,s){this.is_follower=i,this.btn.removeClass("wait").prop("title",t.unescape(this.is_follower?n.__("subscriptions.unsubscribe"):n.__("subscriptions.subscribe"))),this.action_label&&this.action_label.text(t.unescape(this.is_follower?n.__("subscriptions.unsubscribe"):n.__("subscriptions.subscribe")));var o=this;s&&(this.is_follower?require(["mustache","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(s,a,r){var l=[],u="",f=0;if($.isArray(o.related)){var d=e.domains["static"]+"/v3/img/skins/default/profile_default_small.jpg",c=o.options.add_relateds_to?o.options.add_relateds_to.related_users:o.related_users;for(var h in o.related)"undefined"==typeof c[o.related[h].id]&&(c[o.related[h].id]=o.related[h],o.related[h].img=xv.thumbs.replacePicThumbUrl('<img title="'+o.related[h].username_display+'" src="'+(o.related[h].thumb?o.related[h].thumb:d)+'" onerror="self.src=\''+d+"'; self.onerror=null;\" />"),o.related[h].div_sub_id="profile-related-sub-"+o.related[h].id+"-"+Math.ceil(1e4*Math.random()),o.related[h].about_me&&(o.related[h].about_me=$("<div>").html(o.related[h].about_me).text()),l.push({user_id:o.related[h].id,user_name:o.related[h].username,nb_subs:o.related[h].nb_subs,append_btn_to:"#"+o.related[h].div_sub_id,btn_class:"sub-strip"}),u+=s.render(r,o.related[h]),f++)}var p=$(s.render(a,{subscribed:t.unescape(n.__("subscriptions.subscribed")),view_activities:t.unescape(n.__("subscriptions.view_activities")),also_like:t.unescape(n.__("user.you_may_also_like")),hide_view_activities:!1!==o.options.add_relateds_to,has_related:!1===o.options.add_relateds_to&&l.length>0,related_html:u})),_=Math.floor(($(window).width()-50)/140),g=f>_?_:f,m=140*g;if(p.find(".profileslist").css("width",m+"px").addClass("nb-profile-per-line-"+g),!0!==o.options.no_tooltip_validation&&o.set_tooltip(p,!0,-1!==o.options.tooltip_hide_after?o.options.tooltip_hide_after:!(l.length>0)&&3500),l.length>0){if(!1!==o.options.add_relateds_to){var b=o.options.add_relateds_to.tooltip?o.options.add_relateds_to.tooltip:!!o.options.add_relateds_to.popup&&o.options.add_relateds_to.popup;"object"==typeof b&&$(b.popup).length>0&&$(b.popup).find(".profileslist").append($(u))}require(["skins/default/profile/subscribe/btns"],function(e){e(l,{sub_options:{add_relateds_to:o.options.add_relateds_to?o.options.add_relateds_to:o,tooltip_hide_after:1e3}})})}"function"==typeof o.options.end_function&&o.options.end_function(o.username,i)}):(!0!==this.options.no_tooltip_validation&&this.set_tooltip(n.__("subscriptions.unsubscribed"),!1,-1!==o.options.tooltip_hide_after?o.options.tooltip_hide_after:3e3),"function"==typeof this.options.end_function&&this.options.end_function(this.username,i))),this.is_follower?(this.subed_text&&this.subed_text.show(),this.subed_icf&&this.subed_icf.show(),this.unsubed_text&&this.unsubed_text.hide(),this.unsubed_icf&&this.unsubed_icf.hide(),this.subed_text?this.options.subed_text_pos<3?(this.subed_icf&&this.options.subed_icf_pos<3&&this.options.subed_icf_pos>this.options.subed_text_pos&&this.btn.prepend(this.subed_icf),this.btn.prepend(this.subed_text),this.subed_icf&&this.options.subed_icf_pos<3&&this.options.subed_icf_pos<this.options.subed_text_pos&&this.btn.prepend(this.subed_icf)):(this.subed_icf&&this.options.subed_icf_pos>3&&this.options.subed_icf_pos<this.options.subed_text_pos&&this.btn.append(this.subed_icf),this.btn.append(this.subed_text),this.subed_icf&&this.options.subed_icf_pos>3&&this.options.subed_icf_pos>this.options.subed_text_pos&&this.btn.append(this.subed_icf)):this.subed_icf&&(this.options.subed_icf_pos<3?this.btn.prepend(this.subed_icf):this.btn.append(this.subed_icf))):(this.subed_text&&this.subed_text.hide(),this.subed_icf&&this.subed_icf.hide(),this.unsubed_text&&this.unsubed_text.show(),this.unsubed_icf&&this.unsubed_icf.show(),this.unsubed_text?this.options.unsubed_text_pos<3?(this.unsubed_icf&&this.options.unsubed_icf_pos<3&&this.options.unsubed_icf_pos>this.options.unsubed_text_pos&&this.btn.prepend(this.unsubed_icf),this.btn.prepend(this.unsubed_text),this.unsubed_icf&&this.options.unsubed_icf_pos<3&&this.options.unsubed_icf_pos<this.options.unsubed_text_pos&&this.btn.prepend(this.unsubed_icf)):(this.unsubed_icf&&this.options.unsubed_icf_pos>3&&this.options.unsubed_icf_pos<this.options.unsubed_text_pos&&this.btn.append(this.unsubed_icf),this.btn.append(this.unsubed_text),this.unsubed_icf&&this.options.unsubed_icf_pos>3&&this.options.unsubed_icf_pos>this.options.unsubed_text_pos&&this.btn.append(this.unsubed_icf)):this.unsubed_icf&&(this.options.unsubed_icf_pos<3?this.btn.prepend(this.unsubed_icf):this.btn.append(this.unsubed_icf))),this.loader&&(this.loader.remove(),this.loader=null),this.btn.off("click").on("click",function(e){o.sub_btn_click(e)}),this.options.resize_on_end&&$(window).resize()},sub_btn_click:function(i){if(i.preventDefault(),!0===this.clicked)return!1;if(this.clicked=!0,this.close_tooltip(),!this.is_logged){if(!o.canTrack()){if(e.dyn.login_info.is_logged)this.set_tooltip(n.__("profile.tracking.device_not_compatible_create_profile",{"%start_create_profile%":'<a href="/account/create_profile">',"%end_login%":"</a>"}),!1,1e4);else{this.set_tooltip(n.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}),!1,1e4);var s=this;require(["skins/default/form/login"],function(e){var t=s.tooltip.popup.find(".x-popup-content a").first();t.on("click",function(){s.tooltip&&s.tooltip.close()}),e.setupLinks(t)})}return void(this.clicked=!1)}var s=this;if(!o.isTracking())return this.set_tooltip(n.__("profile.tracking.disabled",{"%start_login%":'<a href="#">',"%end_login%":"</a>","%start_enable%":'<a href="/my-subs/videos">',"%end_enable%":"</a>"}),!1,1e4),require(["skins/default/form/login"],function(e){e.setupLinks(s.tooltip.popup.find(".x-popup-content a").first())}),void(this.clicked=!1);this.is_follower?o.unsubscribe(this.id_user):o.subscribe(this.id_user);var a={};return this.is_follower||(a.ref=document.referrer),void $.post("/profiles/"+this.username+"/followers/"+(this.is_follower?"unsubscribe":"subscribe"),a,function(e){e.related&&(s.related="undefined"!=typeof e.related&&e.related),s.clicked=!1,s.subscribe_end(!s.is_follower,!0)},"json")}if(this.is_follower&&!0!==this.options.no_unsub_confirm&&!window.confirm(t.unescape(n.__("subscriptions.confirm_subscribed"))))return this.subscribe_end(!0,!0),void(this.clicked=!1);this.load_start(),$(this).off("click");var s=this,r="/profiles/"+this.username+"/followers/"+(this.is_follower?"unsubscribe":"subscribe"),a={csrf:this.csrf};this.is_follower||(a.ref=document.referrer),$.post(r,a,function(e){if(s.clicked=!1,e.related&&(s.related="undefined"!=typeof e.related&&e.related),e.result)return s.subscribe_end(!s.is_follower,!0),void(s.retry_click_count=0);if(9===e.code){if(s.retry_on_csrf&&s.retry_click_count<3)return s.retry_click_count++,s.retry_on_csrf=!1,s.retry_is_follower=!0,void $.post("/profiles/"+s.username+"/followers/check",function(e){s.on_subscribe_check(e)},"json");s.retry_click_count=0,s.subscribe_end(s.is_follower),s.set_tooltip(n.__("misc.reload_the_page")+(e.message?" - "+e.message:""),!1,5e3)}else s.retry_click_count=0,s.subscribe_end(s.is_follower),s.set_tooltip(n.__("misc.error"),!1,3e3)},"json")},load_start:function(){this.btn.addClass("wait").prop("title",""),this.loader||(this.loader=$('<span class="loader"></span>').appendTo(this.btn)),this.loader.append(s.getSafe().getHtml())},set_tooltip:function(e,t,n){if(console.log("set_tooltip",n),!0!==t&&(e="<strong>"+e+"</strong>"),this.tooltip)this.tooltip.setButton(this.btn),this.tooltip.setContent(e),this.tooltip.options.autoclose="number"!=typeof n||n,this.tooltip.options.closebtn="number"!=typeof n||n>5500;else{this.tooltip=new i(this.btn,e,{position:{v:"below",h:"left"},trigger:!1,autoclose:"number"!=typeof n||n,closebtn:"number"!=typeof n||n>5500,popup_class:"video-subscribe-popup"+("string"==typeof this.options.tooltip_class?" "+this.options.tooltip_class:""),autoclose_on_same_level:this.options.add_relateds_to?"profile_related_submit":"profile_submit"});var s=this;this.tooltip.onClose=function(){s.related_users={}}}this.tooltip.open()},close_tooltip:function(){this.tooltip&&this.tooltip.close()}},a}),function(e){"function"==typeof define&&define.amd?define("lib/pathchange",["jquery"],e):e(jQuery)}(function(e){e.fn.pathchange=function(e){return e?this.bind("pathchange",e):this.trigger("pathchange")};var t=e.pathchange={options:{useHistory:!0,useHashchange:!0,pollingInterval:250,interceptLinks:!0,disableHashLinks:!0},init:function(i){var n;e.extend(t.options,i),t.options.useHistory&&t.detectHistorySupport()&&e(window).bind("popstate",function(t){e(window).trigger("pathchange")}),t.options.useHashchange&&(e(window).bind("hashchange",function(t){e(window).trigger("pathchange")}),t.detectHashchangeSupport()||(n=window.location.hash,setInterval(function(){n!==window.location.hash&&(e(window).trigger("hashchange"),n=window.location.hash)},t.options.pollingInterval))),t.options.interceptLinks&&e("body").delegate('a[href^="/"]',"click",function(i){t.changeTo(e(this).attr("href")),
i.preventDefault()}),t.options.disableHashLinks&&e("body").delegate('a[href="#"]',"click",function(e){e.preventDefault()})},changeTo:function(i){t.options.useHistory&&t.detectHistorySupport()?(window.history.pushState(null,null,i),e(window).trigger("pathchange")):(i.indexOf("#")<0&&(i+="#"),window.location.href=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+i)},detectHistorySupport:function(){return!(!window.history||!history.pushState)},detectHashchangeSupport:function(){var e="onhashchange"in window;return!e&&window.setAttribute&&(window.setAttribute("onhashchange","return;"),e="function"==typeof window.onhashchange),e}};return t}),define("lib/history",["./tools","./pathchange"],function(e){var t={},i="",n={};return n.getNoHashValue=function(){return"##NOHASH##"},n.registerHash=function(e,i){return"function"==typeof i&&(e||(e="##NOHASH##"),t[e]=i,!0)},n.setUrlHash=function(t){i!==t&&(i=t,e.setUrlHash(t))},$.pathchange&&($.pathchange.init({interceptLinks:!1}),$(window).on("pathchange",function(){var n=e.getUrlHash();n||(n="##NOHASH##"),n!==i&&t[n]&&t[n](n),i=n})),n}),define("skins/default/pagination",["lib/i18n!front"],function(e){var t=function(e,t){if(this.params={page_selector:"li",current_class:"active",nextprev_class:"no-page",next_class:"next-page",prev_class:"prev-page",first_class:"first-page",last_class:"last-page",first_ellipsis_class:"first-ellipsis",last_ellipsis_class:"last-ellipsis",prev_index:0},"object"==typeof t)for(var i in t)"undefined"!=typeof this.params[i]&&(this.params[i]=t[i]);this.ul=$(e),this.id=String.fromCharCode(Math.floor(11*Math.random()))+Math.floor(1e6*Math.random()),this.lis=[],this.current_index=!1,this.prev_index=!1,this.next_index=!1,this.first_index=!1,this.first_elem_index=!1,this.last_index=!1,this.last_elem_index=!1,this.first_ellipsis_index=!1,this.last_ellipsis_index=!1;var n=this;this.ul.find(this.params.page_selector).each(function(){var e={elem:$(this),index:parseInt($(this).index()),hidden:!1};!1===n.first_elem_index&&$(this).find("."+n.params.nextprev_class).length<1&&(n.first_elem_index=e.index),$(this).find("."+n.params.current_class).length>0&&(n.current_index=e.index),$(this).find("."+n.params.last_class).length>0?n.last_index=e.index:$(this).find("."+n.params.first_class).length>0?n.first_index=e.index:$(this).find("."+n.params.first_ellipsis_class).length>0?n.first_ellipsis_index=e.index:$(this).find("."+n.params.last_ellipsis_class).length>0&&(n.last_ellipsis_index=e.index),$(this).find("."+n.params.next_class).length>0?n.next_index=e.index:$(this).find("."+n.params.prev_class).length>0?n.prev_index=e.index:$(this).find("."+n.params.nextprev_class).length>0?e.index===n.params.prev_index?n.prev_index=e.index:n.next_index=e.index:n.last_elem_index=e.index,n.lis.push(e)}),this.last_ellipsis_index?this.last_elem_index=this.last_ellipsis_index:this.last_index&&(this.last_elem_index=this.last_index)};t.prototype={get_li:function(e,t){"boolean"!=typeof t&&(t=!1);var i=[this.prev_index,this.first_index,this.first_elem_index,this.first_ellipsis_index,this.last_ellipsis_index,this.last_index,this.next_index];(this.last_ellipsis_index||this.last_index)&&i.push(this.last_elem_index);for(var n in this.lis)if(this.lis[n].index===e&&(!1===t||!1===this.lis[n].hidden&&-1===i.indexOf(this.lis[n].index)))return this.lis[n];return!1},get_page_or_before:function(e){var t=this.get_li(e,!0);if(!1===t)for(var i in this.lis){if(this.lis[i].index===e)break;!1===this.lis[i].hidden&&this.lis[i].index!==this.prev_index&&(t=this.lis[i])}return t},get_page_after:function(e){var t=!1,i=!1;for(var n in this.lis){if(!0===t){i=this.get_page_or_after(n);break}this.lis[n].index===e&&(t=!0)}return i},get_page_or_after:function(e){e=parseInt(e);var t=this.get_li(e,!0);if(!1===t){var i=!1;for(var n in this.lis){if(!0===i&&!1===this.lis[n].hidden&&this.lis[n].index!==this.next_index&&this.lis[n].index!==this.ellipsis_index){t=this.lis[n];break}this.lis[n].index===e&&(i=!0)}}return t},get_next_page_to_hide:function(){var e=!1;if(!1===this.current_index)e=this.get_page_or_before(this.last_elem_index);else{var t=this.get_page_after(this.first_elem_index),i=this.get_page_or_before(this.last_elem_index),n=this.current_index-t.index,s=i.index-this.current_index;n>=s&&n>0?e=t:s>0&&(e=i)}return e},is_pagination_to_wide:function(){var e=!1!==this.next_index?this.get_li(this.next_index):this.get_page_or_before(this.last_elem_index);return!1!==e&&Math.floor(e.elem.position().left+e.elem.outerWidth())>Math.floor(this.ul.outerWidth()+this.ul.position().left)},hide_page:function(e){!1!==e&&(e.elem.addClass("hidden"),e.hidden=!0)},resize_pagination:function(){for(var e in this.lis)this.lis[e].hidden&&(this.lis[e].elem.removeClass("hidden"),this.lis[e].hidden=!1);for(;this.is_pagination_to_wide()&&!1!==this.get_next_page_to_hide();)this.hide_page(this.get_next_page_to_hide())}};var i=function(){var e=this;$(window).resize(function(){e.resize_paginations()})};return i.prototype={paginations:[],params:{pagination_selector:".pagination ul"},add:function(e,i){!0!==this.is_initiated(e)&&this.paginations.push(new t(e,i))},add_all_in:function(e,t){"object"!=typeof t?t=this.params:"undefined"==typeof t.pagination_selector&&(t.pagination_selector=this.params.pagination_selector);var i=this;$(e).find(t.pagination_selector).each(function(){i.add($(this),t)}),this.resize_paginations()},is_initiated:function(e){for(var t in this.paginations)if($(e).is($(this.paginations[t].ul)))return!0;return!1},resize_paginations:function(){for(var e in this.paginations)this.paginations[e].resize_pagination()},create:function(t,i,n,s){if(i<2)return!1;var o=s&&s.start_one?1:0,a=$("<div class='pagination'></div>"),r=$("<ul></ul>"),l=$(),u=$(),f=$(),d=0;for(o<t&&(f=t-1,l=$("<li></li>"),u=$("<a></a>"),u.html(e.__("misc.previous")),u.addClass("no-page prev-page"),u.data("page",f),u.prop("href",this.createUrl(n,f)),l.append(u),r.append(l)),f=o;f<i+o;f++)l=$("<li></li>"),u=$("<a></a>"),t===f&&u.addClass("active"),f===o&&u.addClass("first-page"),u.html(this.createTexte(f,s)),u.data("page",f),u.prop("href",this.createUrl(n,f)),l.append(u),r.append(l),d=f;return u.addClass("last-page"),d>t&&(f=t+1,l=$("<li></li>"),u=$("<a></a>"),u.html(e.__("misc.next")),u.addClass("no-page next-page"),u.data("page",f),u.prop("href",this.createUrl(n,f)),l.append(u),r.append(l)),s&&"function"==typeof s.pagin_click&&r.find("a").on("click",function(e){e.preventDefault(),s.pagin_click($(this).data("page"))}),a.append(r),a},createElementsBased:function(e,t,i,n,s){var o=Math.ceil(i/t);return this.create(e,o,n,s)},createUrl:function(e,t,i){return i&&"function"==typeof i.make_url?i.make_url(t):e+t},createTexte:function(e,t){var i=t&&t.start_one?1:0;return t&&"function"==typeof t.make_pagin_text?t.make_pagin_text(e):(e+1-i).toString()}},new i}),define("text!lib/helpers/dragdrop_select_and_reorder/dragdrop_selection_checkbox.mustache",[],function(){return'<div class="checkbox-dragdrop">\n\t<input type="checkbox" id="{{ id }}" value="{{ id }}" name="delete-pic" />\n\t<label class="checkbox-label" for="{{ id }}">o</label>\n</div>'}),function(e){e.fn.drag=function(t,i,n){var s="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==s.indexOf("drag")&&(s="drag"+s),n=(t==o?i:n)||{},o?this.bind(s,n,o):this.trigger(s)};var t=e.event,i=t.special,n=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var i=e.data(this,n.datakey),s=t.data||{};i.related+=1,e.each(n.defaults,function(e,t){void 0!==s[e]&&(i[e]=s[e])})},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(!e.data(this,n.datakey)){var i=e.extend({related:0},n.defaults);e.data(this,n.datakey,i),t.add(this,"touchstart mousedown",n.init,i),this.attachEvent&&this.attachEvent("ondragstart",n.dontstart)}},teardown:function(){(e.data(this,n.datakey)||{}).related||(e.removeData(this,n.datakey),t.remove(this,"touchstart mousedown",n.init),n.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",n.dontstart))},init:function(s){if(!n.touched){var o,a=s.data;if(!(0!=s.which&&a.which>0&&s.which!=a.which)&&!e(s.target).is(a.not)&&(!a.handle||e(s.target).closest(a.handle,s.currentTarget).length)&&(n.touched="touchstart"==s.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[n.interaction(this,a)],a.target=s.target,a.pageX=s.pageX,a.pageY=s.pageY,a.dragging=null,o=n.hijack(s,"draginit",a),a.propagates))return(o=n.flatten(o))&&o.length&&(a.interactions=[],e.each(o,function(){a.interactions.push(n.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&i.drop&&i.drop.handler(s,a),n.textselect(!1),n.touched?t.add(n.touched,"touchmove touchend",n.handler,a):t.add(document,"mousemove mouseup",n.handler,a),!(!n.touched||a.live)&&void 0}},interaction:function(t,i){var s=e(t)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new n.callback,droppable:[],offset:s}},handler:function(s){var o=s.data;switch(s.type){case!o.dragging&&"touchmove":s.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(s.pageX-o.pageX,2)+Math.pow(s.pageY-o.pageY,2)<Math.pow(o.distance,2))break;s.target=o.target,n.hijack(s,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":s.preventDefault();case"mousemove":if(o.dragging){if(n.hijack(s,"drag",o),o.propagates){!1!==o.drop&&i.drop&&i.drop.handler(s,o);break}s.type="mouseup"}case"touchend":case"mouseup":default:n.touched?t.remove(n.touched,"touchmove touchend",n.handler):t.remove(document,"mousemove mouseup",n.handler),o.dragging&&(!1!==o.drop&&i.drop&&i.drop.handler(s,o),n.hijack(s,"dragend",o)),n.textselect(!0),!1===o.click&&o.dragging&&e.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=n.touched=!1}},hijack:function(i,s,o,a,r){if(o){var l,u,f,d={event:i.originalEvent,type:i.type},c=s.indexOf("drop")?"drag":"drop",h=a||0,p=isNaN(a)?o.interactions.length:a;i.type=s,i.originalEvent=null,o.results=[];do{if(u=o.interactions[h]){if("dragend"!==s&&u.cancelled)continue;f=n.properties(i,o,u),u.results=[],e(r||u[c]||o.droppable).each(function(a,r){if(f.target=r,i.isPropagationStopped=function(){return!1},!1===(l=r?t.dispatch.call(r,i,f):null)?("drag"==c&&(u.cancelled=!0,o.propagates-=1),"drop"==s&&(u[c][a]=null)):"dropinit"==s&&u.droppable.push(n.element(l)||r),"dragstart"==s&&(u.proxy=e(n.element(l)||u.drag)[0]),u.results.push(l),delete i.result,"dropinit"!==s)return l}),o.results[h]=n.flatten(u.results),"dropinit"==s&&(u.droppable=n.flatten(u.droppable)),"dragstart"!=s||u.cancelled||f.update()}}while(++h<p);return i.type=d.type,i.originalEvent=d.event,n.flatten(o.results)}},properties:function(e,t,i){var s=i.callback;return s.drag=i.drag,s.proxy=i.proxy||i.drag,s.startX=t.pageX,s.startY=t.pageY,s.deltaX=e.pageX-t.pageX,s.deltaY=e.pageY-t.pageY,s.originalX=i.offset.left,s.originalY=i.offset.top,s.offsetX=s.originalX+s.deltaX,s.offsetY=s.originalY+s.deltaY,s.drop=n.flatten((i.drop||[]).slice()),s.available=n.flatten((i.droppable||[]).slice()),s},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?n.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",n.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};n.callback.prototype={update:function(){i.drop&&this.available.length&&e.each(this.available,function(e){i.drop.locate(this,e)})}};var s=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return s.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,i){if(i){var n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;n&&e.each(o.props,function(e,i){t[i]=n[i]})}return t}};i.draginit=i.dragstart=i.dragend=n}(jQuery),function(e){var t=e.event,i=t.special.drag,n=i.add,s=i.teardown;i.noBubble=!1,i.livekey="livedrag",i.add=function(s){n.apply(this,arguments);var o=e.data(this,i.datakey);!o.live&&s.selector&&(o.live=!0,t.add(this,"draginit."+i.livekey,i.delegate))},i.teardown=function(){s.apply(this,arguments);var n=e.data(this,i.datakey)||{};n.live&&(t.remove(this,"draginit."+i.livekey,i.delegate),n.live=!1)},i.delegate=function(n){var s,o=[],a=e.data(this,"events")||{};return e.each(a||[],function(a,r){0===a.indexOf("drag")&&e.each(r||[],function(a,r){(s=e(n.target).closest(r.selector,n.currentTarget)[0])&&(t.add(s,r.origType+"."+i.livekey,r.origHandler||r.handler,r.data),e.inArray(s,o)<0&&o.push(s))})}),!!o.length&&e(o).bind("dragend."+i.livekey,function(){t.remove(this,"."+i.livekey)})}}(jQuery),function(e){e.fn.drop=function(t,i,n){var s="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==s.indexOf("drop")&&(s="drop"+s),n=(t==o?i:n)||{},o?this.bind(s,n,o):this.trigger(s)},e.drop=function(t){t=t||{},i.multi=!0===t.multi?1/0:!1===t.multi?1:isNaN(t.multi)?i.multi:t.multi,i.delay=t.delay||i.delay,i.tolerance=e.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:i.tolerance,i.mode=t.mode||i.mode||"intersect"};var t=e.event.special,i=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){e.data(this,i.datakey).related+=1},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){e.data(this,i.datakey)||(e.data(this,i.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),i.targets.push(this))},teardown:function(){if(!(e.data(this,i.datakey)||{}).related){e.removeData(this,i.datakey);var t=this;i.targets=e.grep(i.targets,function(e){return e!==t})}},handler:function(n,s){var o;if(s)switch(n.type){case"mousedown":case"touchstart":o=e(i.targets),"string"==typeof s.drop&&(o=o.filter(s.drop)),o.each(function(){var t=e.data(this,i.datakey);t.active=[],t.anyactive=0,t.winner=0}),s.droppable=o,t.drag.hijack(n,"dropinit",s);break;case"mousemove":case"touchmove":i.event=n,i.timer||i.tolerate(s);break;case"mouseup":case"touchend":i.timer=clearTimeout(i.timer),s.propagates&&(t.drag.hijack(n,"drop",s),t.drag.hijack(n,"dropend",s))}},locate:function(t,n){var s=e.data(t,i.datakey),o=e(t),a=o.offset()||{},r=o.outerHeight(),l=o.outerWidth(),u={elem:t,width:l,height:r,top:a.top,left:a.left,right:a.left+l,bottom:a.top+r};return s&&(s.location=u,s.index=n,s.elem=t),u},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,i){return this.contains(i,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(e,t,i){return this.contains(i,t)?1:0},middle:function(e,t,i){return this.contains(i,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(n){var s,o,a,r,l,u,f,d,c=0,h=n.interactions.length,p=[i.event.pageX,i.event.pageY],_=i.tolerance||i.modes[i.mode];do{if(d=n.interactions[c]){if(!d)return;d.drop=[],l=[],u=d.droppable.length,_&&(a=i.locate(d.proxy)),s=0;do{if(f=d.droppable[s]){if(!(o=(r=e.data(f,i.datakey)).location))continue;r.winner=_?_.call(i,i.event,a,o):i.contains(o,p)?1:0,l.push(r)}}while(++s<u);l.sort(i.sort),s=0;do{(r=l[s])&&(r.winner&&d.drop.length<i.multi?(r.active[c]||r.anyactive||(!1!==t.drag.hijack(i.event,"dropstart",n,c,r.elem)[0]?(r.active[c]=1,r.anyactive+=1):r.winner=0),r.winner&&d.drop.push(r.elem)):r.active[c]&&1==r.anyactive&&(t.drag.hijack(i.event,"dropend",n,c,r.elem),r.active[c]=0,r.anyactive-=1))}while(++s<u)}}while(++c<h);i.last&&p[0]==i.last.pageX&&p[1]==i.last.pageY?delete i.timer:i.timer=setTimeout(function(){i.tolerate(n)},i.delay),i.last=i.event}};t.dropinit=t.dropstart=t.dropend=i}(jQuery),function(e){var t=e.event,i=t.special.drop,n=i.add,s=i.teardown;i.noBubble=!1,i.livekey="livedrop",i.add=function(s){n.apply(this,arguments);var o=e.data(this,i.datakey);!o.live&&s.selector&&(o.live=!0,t.add(this,"dropinit."+i.livekey,i.delegate))},i.teardown=function(){s.apply(this,arguments);var n=e.data(this,i.datakey)||{};n.live&&(t.remove(this,"dropinit",i.delegate),n.live=!1)},i.delegate=function(n,s){var o,a=[],r=e.data(this,"events")||{};return e.each(r||[],function(s,r){0===s.indexOf("drop")&&e.each(r,function(s,r){(o=e(n.currentTarget).find(r.selector)).length&&o.each(function(){t.add(this,r.origType+"."+i.livekey,r.origHandler||r.handler,r.data),e.inArray(this,a)<0&&a.push(this)})})}),s&&t.add(s.drag,"dragend."+i.livekey,function(){e.each(a.concat(this),function(){t.remove(this,"."+i.livekey)})}),!!a.length&&e(a)}}(jQuery),define("libs/jquery-event-dragdrop",function(){}),define("lib/helpers/dragdrop_select_and_reorder/dragdrop_selection",["static/utils","mustache","text!./dragdrop_selection_checkbox.mustache","libs/jquery-event-dragdrop"],function(e,t,i){xv.bDebugDragDropSelectZone=xv.bDebugDragDrop;var n=function(e){this._init(e)};n.prototype={_init:function(t){this.$eltDrop=$(),this.$eltDropChild=$(),this.$eltDrag=t.$eltDrag,this.fnScroll=t.fnCallbackScroll,this.fnDropItem=t.fnCallbackDropItem,this.fnDragEnd=t.fnCallbackDragEnd,this.fnDragAbort=t.fnCallbackDragAbort,this.fnGetElemChildren="function"==typeof t.fnGetElemChildren&&t.fnGetElemChildren,this.$ScrollableContainer="undefined"!=typeof t.$ScrollableContainer?$(t.$ScrollableContainer):$(window),this.$Body=$("body"),this.$SelectZone=$('<div class="dragdrop-selection-zone"></div>'),this.bIsScrollableContainerWindow=this.$ScrollableContainer.is($(window)),this.bTouchScreen=e.isTouchScreen(),this.bTriggerDragDrop=!this.bTouchScreen,this.bTriggerInterval=!1,this.bIsStopped=!0,this.bIsDraging=!1,this.iCurrentScrollTop=null,this.iPrevScrollTop=null,this.iTouchScrollTop=null,this.iTouchDelay=500,this.iTouchPosX=null,this.iTouchPosY=null,this.iTouchPosLim=5,this.oTouchTimer=null,this.oInterval=null,this.iTouchTime=null,this.oDraggingPositions={oContainer:{iHeight:null,iLimitBeforeScroll:50,iLimitBottom:null,iLimitTop:null,iScrollDiff:null,iScrollDiffAbs:null,iStartSupScroll:null,iSupTop:null},oMouse:{iStartX:null,iStartY:null,iX:null,iY:null},oSelectZone:{iHeight:null,iLeft:null,iTop:null,iWidth:null},oWindow:{iScrollTop:null}},this.sLastEventTouch=null,this.updateDropElements(t.$eltDrop)},updateDropElements:function(e){if(null!==e&&e!==undefined){var n=this,s=$(),a=$(),r=$(),l=$();if(e.each(function(){-1===n.$eltDrop.index($(this))&&(s=s.add($(this)),a=a.add(n.getElemChildren($(this))))}),this.$eltDrop.each(function(){-1===e.index($(this))&&(r=r.add($(this)),l=l.add(n.getElemChildren($(this))))}),this.$eltDrop=this.$eltDrop.not(r).add(s),this.$eltDropChild=this.$eltDropChild.not(l).add(a),!s.length)return;this.setEvents(s,a),s.each(function(){if(!$(this).find(".checkbox-dragdrop").length){var e=$(t.render(i,{id:"checkbox-dragdrop-"+$(this).index()+"-"+Math.floor(999*Math.random())+"-"+Math.floor(999*Math.random())}));$(this).append(e),e.on("change",n,o)}})}},updateSelectZone:function(){var e=this.oDraggingPositions.oContainer,t=this.oDraggingPositions.oMouse,i=this.oDraggingPositions.oSelectZone,n=this.oDraggingPositions.oWindow;if(e.iLimitTop=Math.abs(t.iY-n.iScrollTop-e.iSupTop),e.iLimitBottom=Math.abs(t.iY-n.iScrollTop-e.iSupTop-e.iHeight),i.iLeft=Math.min(t.iX,t.iStartX),i.iWidth=Math.abs(t.iX-t.iStartX),this.bIsScrollableContainerWindow)i.iHeight=Math.abs(t.iY-t.iStartY),i.iTop=Math.min(t.iY,t.iStartY);else{e.iScrollDiff=this.iCurrentScrollTop-e.iStartSupScroll,e.iScrollDiffAbs=Math.abs(e.iScrollDiff);var s=t.iStartY+e.iStartSupScroll-e.iScrollDiff,o=t.iY+this.iCurrentScrollTop-e.iScrollDiff;i.iTop=(s<o?s:o)-e.iStartSupScroll,i.iHeight=Math.abs(s-o)}this.$SelectZone.css({top:i.iTop,left:i.iLeft,height:i.iHeight,width:i.iWidth})},setEvents:function(e,t){var i=void 0===e||void 0===t||!e.length||!t.length;if(!(!this.isStopped()&&i||this.isStopped()&&!i)){var n=this;i&&(e=this.$eltDrop,this.bIsStopped=!1,this.iPrevScrollTop=this.$ScrollableContainer.scrollTop(),this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.$ScrollableContainer.on("scroll",this,s),this.$eltDrag.on({dragstart:function(e){if(n.bTriggerDragDrop){n.$Body.addClass("is-dragdrop-draging");var t=n.oDraggingPositions.oContainer,i=n.oDraggingPositions.oMouse,s=n.oDraggingPositions.oWindow;return t.iStartSupScroll=n.bIsScrollableContainerWindow?0:n.iCurrentScrollTop,i.iStartX=e.pageX,i.iStartY=e.pageY,i.iX=e.pageX,i.iY=e.pageY,s.iScrollTop=$(window).scrollTop(),n.updateSelectZone(),n.$SelectZone.appendTo(n.bIsScrollableContainerWindow?n.$Body:n.$ScrollableContainer)}return!1},drag:function(e,t){if(!n.bTriggerDragDrop)return!1;n.bIsDraging=!0;var i=n.oDraggingPositions.oContainer,s=n.oDraggingPositions.oMouse,o=n.oDraggingPositions.oWindow;i.iSupTop=n.bIsScrollableContainerWindow?0:n.$ScrollableContainer.offset().top,i.iHeight=n.bIsScrollableContainerWindow?$(window).height():n.$ScrollableContainer.innerHeight(),e&&"undefined"!=typeof e.pageY&&(s.iX=e.pageX,s.iY=e.pageY),t&&(s.iStartX=t.startX),o.iScrollTop=$(window).scrollTop(),n.updateSelectZone(),i.iLimitTop<=i.iLimitBeforeScroll||i.iLimitBottom<=i.iLimitBeforeScroll?n.bTriggerInterval||(n.bTriggerInterval=!0,n.oInterval=setInterval(function(){n.scrollWindow(i.iLimitTop<i.iLimitBottom?"top":"bottom"),n.$eltDrag.trigger("mousemove")},15)):(n.bTriggerInterval=!1,clearInterval(n.oInterval))},dragend:function(){clearInterval(n.oInterval),n.$Body.removeClass("is-dragdrop-draging"),n.$SelectZone.remove(),n.bIsDraging=!1,n.bTriggerInterval=!1,n.fnDragEnd()}})),e.on({dropstart:function(){if(!n.bTriggerDragDrop)return!1;$(this).addClass("is-dragdrop-active")},drop:function(){n.fnDropItem($(this),"drop")},dropend:function(){$(this).removeClass("is-dragdrop-active")}}),$.drop({multi:!0,tolerance:function(e,t,i){var s=n.oDraggingPositions.oSelectZone,o=n.oDraggingPositions.oContainer,a=i.left,r=a+i.width,l=i.top-(n.bIsScrollableContainerWindow?0:o.iScrollDiff),u=l+i.height,f=s.iLeft,d=f+s.iWidth,c=s.iTop,h=c+s.iHeight;return r>=f&&a<=d&&u>=c&&l<=h}})}},unsetEvents:function(){this.isStopped()||(this.bIsStopped=!0,this.$ScrollableContainer.off("scroll",s),this.$eltDrag.off("dragstart drag dragend"),this.$eltDrop.off("dropstart drop dropend"))},isStopped:function(){return this.bIsStopped},getIsDraging:function(){return this.bIsDraging},scrollingWindow:function(){this.iPrevScrollTop=this.iCurrentScrollTop,this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.fnScroll(this.iCurrentScrollTop)},scrollWindow:function(e){"top"===e?this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop-10):this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop+10)},dropTouchstart:function(e,t){if(this.bTriggerDragDrop||"start"===this.sLastEventTouch)return!1;this.bTriggerDragDrop=!0,this.sLastEventTouch="start",this.fnDropItem(e,"touchstart"),t.type="dragstart",this.$eltDrag.trigger(t),this.iTouchTime=Date.now()},dropTouchend:function(e){if("end"===this.sLastEventTouch)return!1;e.hasClass("is-dragdrop-active")&&this.$eltDrag.find(".is-dragdrop-active").length&&(e.removeClass("is-dragdrop-active"),this.fnDropItem(e,"touchend"),e.trigger("drop")),this.updateSelectZone();var t=this.oDraggingPositions.oSelectZone;t.iHeight<=this.iTouchPosLim&&t.iWidth<=this.iTouchPosLim&&this.fnDropItem(e,this.bTouchScreen?"touchclick":"click"),this.$eltDrag.trigger("dragend"),this.bTriggerDragDrop=!1,this.iTouchTime=null,this.sLastEventTouch="end"},getElemChildren:function(e){return"function"==typeof this.fnGetElemChildren?this.fnGetElemChildren(e):e.children()},getElemFromChild:function(e){for(var t=e.parent(),i=!1;t&&t.length&&!t.is(this.$eltDrag)&&"body"!==t.nodeName;)i=t,t=i.parent();return!(!(i&&t&&t.length)||!t.is(this.$eltDrag)&&"body"===t.nodeName)&&i}};var s=function(e){e.data.scrollingWindow()},o=function(e){e.data.fnDropItem(e.data.getElemFromChild($(e.currentTarget)),"change")};return n}),define("lib/helpers/dragdrop_select_and_reorder/dragdrop_reorder",["static/utils","libs/jquery-event-dragdrop"],function(e){var t=function(e){this._init(e)};t.prototype={_init:function(t){this.$eltDrag=t.$eltDrag,this.$eltDrop=t.$eltDrop,this.fnReorder=t.fnCallbackReorder,this.fnReorderAbort=t.fnCallbackReorderAbort,this.fnScroll=t.fnCallbackScroll,this.fnGetElemChildren="function"==typeof t.fnGetElemChildren&&t.fnGetElemChildren,this.fnCustomGetElemById="function"==typeof t.fnCustomGetElemById&&t.fnCustomGetElemById,this.fnCustomGetIdByDomElem="function"==typeof t.fnCustomGetIdByDomElem&&t.fnCustomGetIdByDomElem,this.$ScrollableContainer="undefined"!=typeof t.$ScrollableContainer?$(t.$ScrollableContainer):$(window),this.$eltDropChild=this.getElemChildren(this.$eltDrop),this.$clone=null,this.$cloned=null,this.aItemsSelected=[],this.bIsScrollableContainerWindow=this.$ScrollableContainer.is($(window)),this.bIsStopped=!0,this.bSelection=null,this.bScrollDown=null,this.bTouchScreen=e.isTouchScreen(),this.bTriggerReorder=!1,this.bTriggerReorderTouch=!1,this.bTriggerInterval=!1,this.iCurrentScrollTop=null,this.iPrevScrollTop=null,this.iTouchPosLim=5,this.iLimitScreen=this.bTouchScreen?100:50,this.iTouchDelay=500,this.iCurrentDragPos=0,this.iIndexDragStart=null,this.oTouchTimer=null,this.oInterval=null},updateDropElements:function(e,t){if(null!==t&&t!==[]&&(this.bSelection=t.length>0,this.aItemsSelected=this.bSelection?t:[]),null!==e&&e!==undefined){var i=this,n=$(),s=$(),o=$(),a=$();if(e.each(function(){-1===i.$eltDrop.index($(this))&&(n=n.add($(this)),s=s.add(i.getElemChildren($(this))))}),this.$eltDrop.each(function(){-1===e.index($(this))&&(o=o.add($(this)),a=a.add(i.getElemChildren($(this))))}),this.$eltDrop=this.$eltDrop.not(o).add(n),this.$eltDropChild=this.$eltDropChild.not(a).add(s),!n.length)return;this.setEvents(n,s)}},setEvents:function(e,t){var n=void 0===e||void 0===t||!e.length||!t.length;if(!(!this.isStopped()&&n||this.isStopped()&&!n)){n&&(e=this.$eltDrop,this.iPrevScrollTop=this.$ScrollableContainer.scrollTop(),this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.bIsStopped=!1,this.$ScrollableContainer.on("scroll",this,i));var s=this;e.on({dragstart:function(){var e=$(this);if(!(s.bSelection&&!e.hasClass("is-dragdrop-selected")||s.bTouchScreen&&!s.bTriggerReorderTouch))if(s.bTriggerReorder=!0,s.iIndexDragStart=e.index(),null===s.$clone&&(s.setClone(e),s.$clone.addClass("hidden")),s.bSelection){for(var t=0;t<s.aItemsSelected.length;t++){var i=s.getElemById(s.aItemsSelected[t]);i.find('input[type="checkbox"]').prop("checked",!1),e.is(i)||i.addClass("is-dragdrop-inactive dragdrop-selection")}$('<span class="dragdrop-nb-pics-selected">'+s.aItemsSelected.length+"</span>").appendTo(s.$clone)}else e.find('input[type="checkbox"]').prop("checked",!1)},drag:function(e,t){if(s.$clone&&(s.bTriggerReorder||s.bTouchScreen&&s.bTriggerReorderTouch)){var i=$(this),n=t.drop[0],o=$.data(n||{},"drop+reorder"),a=Math.round(e.pageY-(s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)-i.height()/2),r=Math.round(e.pageX-i.width()/2),l=Math.round((s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)+s.iLimitScreen),u=Math.round((s.bIsScrollableContainerWindow?s.iCurrentScrollTop:0)+s.$ScrollableContainer.height()-s.iLimitScreen);s.iCurrentDragPos=e.pageY,s.$clone.hasClass("hidden")&&s.$clone.removeClass("hidden"),s.$clone.css({top:a,left:r}),!n||n===t.current&&o===t.method||(i[o](n),t.current=n,t.method=o,t.update()),s.iCurrentDragPos<l||s.iCurrentDragPos>u?(s.iCurrentDragPos<l&&(s.bScrollDown=!1),s.iCurrentDragPos>u&&(s.bScrollDown=!0),s.bTriggerInterval||(s.bTriggerInterval=!0,s.oInterval=setInterval(function(){s.scrollWindow()},15))):(s.bTriggerInterval=!1,clearInterval(s.oInterval))}},dragend:function(){if(s.oInterval&&clearInterval(s.oInterval),!s.$clone)return void(s.bTriggerReorder=!1);var e=$(this),t=s.getIdByDomElem(e);s.bTriggerReorder=!1,s.$clone.remove(),s.$clone=null,s.$cloned=null,e.removeClass("is-dragdrop-inactive"),s.$eltDrop.removeAttr("style"),s.fnReorder(t,s.bSelection?s.aItemsSelected:null,s.iIndexDragStart)},dropinit:function(e,t){return!(this==t.drag)}}),$.drop({multi:!1,tolerance:function(e,t,i){var n=e.pageY>i.top+.8*i.height||e.pageX>i.left+i.width/2;return i&&"undefined"!=typeof i.elem?($.data(i.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(i,[e.pageX,e.pageY])):(console.error("%c - ERROR ON TOLERANCE - -- target","color:#00CED1;",i),!1)}})}},unsetEvents:function(){this.isStopped()||(this.bIsStopped=!0,this.$ScrollableContainer.off("scroll"),this.$eltDrop.off("dragstart drag dragend dropinit"),$.drop({}))},setClone:function(e,t){this.$clone=e.clone(),this.$cloned=e,this.$clone.width(e.width()).removeAttr("id data-id").addClass("clone-block is-dragdrop-moving").appendTo(e.parent()),t!==undefined&&this.$clone.css({top:Math.round(t.pageY-(this.bIsScrollableContainerWindow?this.iCurrentScrollTop:0)-e.height()/2),left:Math.round(t.pageX-e.width()/2)}),e.addClass("is-dragdrop-inactive"),this.aItemsSelected.length>0&&$('<span class="dragdrop-nb-pics-selected">'+this.aItemsSelected.length+"</span>").appendTo(this.$clone)},isStopped:function(){return this.bIsStopped},scrollingWindow:function(){this.iPrevScrollTop=this.iCurrentScrollTop,this.iCurrentScrollTop=this.$ScrollableContainer.scrollTop(),this.bScrollDown=this.iCurrentScrollTop>=this.iPrevScrollTop,this.fnScroll(this.iCurrentScrollTop)},scrollWindow:function(){this.bScrollDown?this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop+10):this.$ScrollableContainer.scrollTop(this.iCurrentScrollTop-10)},dropTouchstart:function(e,t){this.bTriggerReorderTouch||(this.bTriggerReorderTouch=!0,this.$eltDrag.addClass("is-dragdrop-reorder-touch"),null===this.$clone&&this.setClone(e,t),t.type="dragstart",e.trigger(t))},dropTouchend:function(){clearTimeout(this.oTouchTimer),this.bTriggerReorderTouch=!1,this.$eltDrag.removeClass("is-dragdrop-reorder-touch")},getElemFromChild:function(e){for(var t=e.parent(),i=!1;t&&t.length&&!t.is(this.$eltDrag)&&"body"!==t.nodeName;)i=t,t=i.parent();return!(!(i&&t&&t.length)||!t.is(this.$eltDrag)&&"body"===t.nodeName)&&i},getElemChildren:function(e){return"function"==typeof this.fnGetElemChildren?this.fnGetElemChildren(e):e.children()},getElemById:function(e){return e=e.toString(),this.fnCustomGetElemById?this.fnCustomGetElemById(e,this.$eltDrop):this.$eltDrop.filter('[data-id="'+e+'"]')},getIdByDomElem:function(e){return this.fnCustomGetIdByDomElem?this.fnCustomGetIdByDomElem(e):e.data("id").toString()},hasClone:function(){return this.$clone&&this.$clone.length},isClone:function(e){return this.$clone&&this.$clone.length&&this.$clone.is(e)},getCloned:function(){return this.$cloned}};var i=function(e){e.data.scrollingWindow()};return t}),define("lib/helpers/dragdrop_select_and_reorder",["static/utils","lib/i18n!front","lib/helpers/overlay/contextual_popup","lib/helpers/dragdrop_select_and_reorder/dragdrop_selection","lib/helpers/dragdrop_select_and_reorder/dragdrop_reorder"],function(e,t,i,n,s){var o=function(e){this._init(e)};return o.prototype={_init:function(t){if(this.$Elems=$(t.element_list),this.$Elems.length){this.updateElemsIdOrder();var i=this.$Container=this.$Elems.first().parent();if(this.$Container.children().length<this.$Elems.length&&this.$Container.append(this.$Elems),this.$Container.children().length>this.$Elems.length){var o=$("<div></div>");this.$Container.append(o.append(this.$Elems)),this.$Container=o}this.$Container.addClass("container-dragdrop"),"undefined"==typeof t.functions&&(t.functions={}),this.fnInitElems="function"==typeof t.functions.init_elems&&t.functions.init_elems,
this.fnCustomGetElemById="function"==typeof t.functions.get_elem_by_id&&t.functions.get_elem_by_id,this.fnCustomGetIdByDomElem="function"==typeof t.functions.get_id_by_dom_elem&&t.functions.get_id_by_dom_elem,this.fnGetElemChildrenForClick="function"==typeof t.functions.get_elem_children&&t.functions.get_elem_children,this.fnUpdateSelectedCount="function"==typeof t.functions.update_selected_count&&t.functions.update_selected_count,this.fnOnReorderModeMany="function"==typeof t.functions.on_reorder_mode_many&&t.functions.on_reorder_mode_many,this.fnOnReorderModeOneNoSelect="function"==typeof t.functions.on_reorder_mode_one_no_select&&t.functions.on_reorder_mode_one_no_select,this.fnOnReorderModeEnabled="function"==typeof t.functions.on_reorder_mode_enabled&&t.functions.on_reorder_mode_enabled,this.fnOnReorderModeDisabled="function"==typeof t.functions.on_reorder_mode_disabled&&t.functions.on_reorder_mode_disabled,this.fnOnScroll="function"==typeof t.functions.on_scroll&&t.functions.on_scroll,this.fnSaveNewOrder="function"==typeof t.functions.save_new_order&&t.functions.save_new_order,this.fnGetNewOrderFirstPosId="function"==typeof t.functions.get_new_order_first_position_id&&t.functions.get_new_order_first_position_id,this.$ScrollableContainer="undefined"!=typeof t.scrollable_container?$(t.scrollable_container):$(window),this.$CurrentBlock=null,this.bIsTouching=!1,this.bIsTouchLongPressed=!1,this.bTouchScreen=e.isTouchScreen(),this.bResetTouchEvent=!1,i.toggleClass("touch-dragdrop-with-scroll",this.bTouchScreen),this.bSelecting=!1,this.bSelectionOrderBlocked=!1,this.iIndexDragStart=null,this.sIdCurrent=null,this.iTouchDelay=500,this.iTouchPosX=null,this.iTouchPosY=null,this.iTouchPosLim=5,this.iResetTouchEventX=null,this.iResetTouchEventY=null,this.oLoader=null,this.oUpdateTimer=null,this.oTouchTimer=null,this.sEventsSetTo=null,this.sReorderMode=null,this.sTouchMode=null,this.tOnDropItemTimer=!1;var a=this,r=function(e){a.callbackScroll(e)},l=function(e,t){a.callbackDropItem(e,t)},u=function(){a.callbackDragEnd()},f=function(e,t){a.callbackAbort(e,t)},d=function(e,t,i){a.callbackReorder(e,t,i)},c=function(e){return a.getElemChildrenForClick(e)},h=function(e,t){return a.getElemById(e,t)},p=function(e){return a.getIdByDomElem(e)};this.initElems(),this.bTouchScreen&&$("body").on("touchmove",function(e){a.iTouchPosX=e.clientX,a.iTouchPosY=e.clientY}),this.aSelectedElems=[],this.oDragdropReorder=new s({$eltDrag:this.$Container,$eltDrop:this.$Elems,$ScrollableContainer:this.$ScrollableContainer,fnCallbackReorder:d,fnCallbackScroll:r,fnCallbackReorderAbort:f,fnGetElemChildren:c,fnCustomGetElemById:h,fnCustomGetIdByDomElem:p}),this.oDragdropSelection=new n({$eltDrag:this.$Container,$eltDrop:this.$Elems,$ScrollableContainer:this.$ScrollableContainer,fnCallbackScroll:r,fnCallbackDropItem:l,fnCallbackDragEnd:u,fnCallbackDragAbort:f,fnGetElemChildren:c}),this.setSelectionEvents(!0)}},getContainer:function(){return this.$Container},getElems:function(){return this.$Elems},getSelectedElems:function(){return this.aSelectedElems},getElemById:function(e,t){return e=e.toString(),void 0===t&&(t=this.$Elems),this.fnCustomGetElemById?this.fnCustomGetElemById(e,t):t.filter('[data-id="'+e+'"]')},getIdByDomElem:function(e){return this.fnCustomGetIdByDomElem?this.fnCustomGetIdByDomElem(e):!!(e&&e.length&&e.data("id"))&&e.data("id").toString()},getElemChildrenForClick:function(e){return"function"==typeof this.fnGetElemChildrenForClick?this.fnGetElemChildrenForClick(e):e.children()},initElems:function(){var e=this.$Elems.filter(":not(.is-dragdrop)"),t=this;e.length&&(this.fnInitElems&&this.fnInitElems(e),e.addClass("is-dragdrop"),this.bTouchScreen&&(e.on("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,!1}),e.find("*").on("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,!1})),this.getElemChildrenForClick(e).off("click").on("click",function(e){e.preventDefault(),t.isSelecting()&&t.callbackDropItem($(this).parents(".is-dragdrop"),"click")}),this.bTouchScreen&&(e.on("touchmove",function(e){return null!==t.sTouchMode?e.preventDefault():(t.iTouchPosX=e.clientX,t.iTouchPosY=e.clientY,t.bResetTouchEvent&&(Math.abs(t.iResetTouchEventX-t.iTouchPosX)>t.iTouchPosLim||Math.abs(t.iResetTouchEventY-t.iTouchPosY)>t.iTouchPosLim)&&(t.bResetTouchEvent=!1,t.setEventsForSelection(),e.type="drag",$(this).trigger(e)),e.stopPropagation()),!0}),e.on("touchstart",function(e){t.bIsTouchLongPressed=!1,t.bIsTouching=!0,t.oTouchTimer&&(clearTimeout(t.oTouchTimer),t.oTouchTimer=!1),t.iTouchPosX=e.clientX,t.iTouchPosY=e.clientY;var i=t.iTouchPosX,n=t.iTouchPosY,s=$(this),o=s.hasClass("is-dragdrop-selected")?"reorder":"selection",a=t.sEventsSetTo!==o;if("selection"===o?t.setEventsForSelection():t.setEventsForReorder(),a)return t.bResetTouchEvent||(t.iResetTouchEventX=t.iTouchPosX,t.iResetTouchEventY=t.iTouchPosY,t.bResetTouchEvent=!0,s.trigger(e)),!0;t.oTouchTimer=setTimeout(function(){t.oTouchTimer=!1,Math.abs(i-t.iTouchPosX)>t.iTouchPosLim||Math.abs(n-t.iTouchPosY)>t.iTouchPosLim||(t.bIsTouchLongPressed=!0,window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(20),"selection"===o?t.oDragdropSelection.dropTouchstart(s,e):t.oDragdropReorder.dropTouchstart(s,e),t.sTouchMode=o,e.type="dragstart",s.triggerHandler(e))},t.iTouchDelay)}),e.on("touchend",function(e){t.oTouchTimer&&(clearTimeout(t.oTouchTimer),t.oTouchTimer=!1);var i=$(this);"selection"===t.sTouchMode?t.oDragdropSelection.dropTouchend(i):"reorder"===t.sTouchMode&&t.oDragdropReorder.dropTouchend(),t.bIsTouchLongPressed=!1,t.bIsTouching=!1,t.sTouchMode=null,t.bResetTouchEvent=!1,e.type="dragend",i.triggerHandler(e)})))},updateElementList:function(){if(this.$Elems=this.$Container.children(),this.$Elems.length&&(this.oDragdropSelection.updateDropElements(this.$Elems),this.oDragdropReorder.updateDropElements(this.$Elems,this.aSelectedElems),this.initElems(),this.updateElemsIdOrder(),this.aSelectedElems.length>0))for(var e in this.aSelectedElems){var t=this.getElemById(this.aSelectedElems[e]);if(!t||!t.length){this.setReorderMode(null),this.setEventsForSelection();break}}},updateElemsIdOrder:function(){this.aElemsIdOrder=[];var e=this;this.$Elems.each(function(t){var i=e.getIdByDomElem($(this));!i&&e.oDragdropReorder.isClone($(this))&&(i=e.getIdByDomElem(e.oDragdropReorder.getCloned())),i&&(e.aElemsIdOrder[t]=i)})},setEventsSetTo:function(e){this.sEventsSetTo=e;var t=$("body");t.removeClass("is-dragdrop-selection is-dragdrop-reorder"),"string"==typeof this.sEventsSetTo&&t.addClass("is-dragdrop-"+this.sEventsSetTo)},setSelectionEvents:function(e){"boolean"!=typeof e&&(e=!0),e?(this.oDragdropSelection.setEvents(),this.setEventsSetTo("selection")):(this.oDragdropSelection.unsetEvents(),"selection"===this.sEventsSetTo&&this.setEventsSetTo(null))},setReorderEvents:function(e){"boolean"!=typeof e&&(e=!0),e?(this.oDragdropReorder.setEvents(),this.setEventsSetTo("reorder")):(this.oDragdropReorder.unsetEvents(),"reorder"===this.sEventsSetTo&&this.setEventsSetTo(null))},unsetAllEvents:function(){this.setSelectionEvents(!1),this.setReorderEvents(!1)},setEventsForSelection:function(){"selection"!==this.sEventsSetTo&&(this.setReorderEvents(!1),this.setSelectionEvents(!0))},setEventsForReorder:function(){"reorder"!==this.sEventsSetTo&&(this.setSelectionEvents(!1),this.setReorderEvents(!0))},isSelecting:function(){return this.bSelecting},setIsSelecting:function(e){"boolean"!=typeof e&&(e=!0),this.$Container.toggleClass("is-dragdrop-selecting",e),this.bSelecting=e},addElemToSelection:function(e,t,i){this.toggleElemToSelection(e,t,!0,i)},removeElemFromSelection:function(e,t,i){this.toggleElemToSelection(e,t,!1,i)},updateSelectionOrder:function(){if(!(this.aSelectedElems.length<2||this.bSelectionOrderBlocked)){for(var e=[],t=0;t<this.aElemsIdOrder.length;t++){var i=this.aElemsIdOrder[t];-1!==this.aSelectedElems.indexOf(i)&&e.push(i)}this.aSelectedElems=e}},toggleSelectAll:function(){if(this.isSelecting){bAdd=this.aElemsIdOrder.length!==this.aSelectedElems.length;for(var e=0;e<this.aElemsIdOrder.length;e++){var t=this.aElemsIdOrder[e];this.toggleElemToSelection(t,null,bAdd)}}},emptySelection:function(){for(;this.aSelectedElems.length;)this.popLastSelectedElement();this.updateElementList()},popLastSelectedElement:function(){var e=this.aSelectedElems[this.aSelectedElems.length-1];return this.removeElemFromSelection(e),e},toggleElemToSelection:function(e,t,i,n){var s=this;if(t&&t.length>1)return void t.each(function(){s.toggleElemToSelection(null,$(this),i,n)});if(!e&&t&&(e=this.getIdByDomElem(t)),e&&!t&&(t=this.getElemById(e)),!e&&!t)return console.error("toggleElemToSelection --- no id nor dom element to refer to"),!1;var o=-1!==this.aSelectedElems.indexOf(e),a=!1;"boolean"!=typeof i&&(i=!o),i?o||(this.aSelectedElems.push(e),t.addClass("is-dragdrop-selected").find('input[type="checkbox"]').prop("checked",!0),a=!0):(t.removeClass("is-dragdrop-selected is-dragdrop-active is-dragdrop-inactive dragdrop-selection").find('input[type="checkbox"]').prop("checked",!1),o&&(this.aSelectedElems.splice(this.aSelectedElems.indexOf(e),1),a=!0)),null!==this.oUpdateTimer&&clearTimeout(this.oUpdateTimer),a&&!n&&(this.oUpdateTimer=setTimeout(function(){s.oUpdateTimer=null,s.updateSelectionOrder(),"function"==typeof s.fnUpdateSelectedCount&&s.fnUpdateSelectedCount("moveMany"===s.sReorderMode?s.aSelectedElems.length:0),s.updateElementList()},100))},countSelectedElems:function(){return this.aSelectedElems.length},getReorderMode:function(){return this.sReorderMode},setReorderMode:function(e){this.sReorderMode!==e&&(this.$Container.removeClass("is-dragdrop-reorder-moveMany is-dragdrop-reorder-moveOneNoSelect"),"moveMany"===e||"moveOneNoSelect"===e?(this.sReorderMode=e,this.$Container.addClass("is-dragdrop-reorder-"+e),this.setIsSelecting(),"function"==typeof this.fnOnReorderModeEnabled&&this.fnOnReorderModeEnabled(),"moveMany"===e?"function"==typeof this.fnOnReorderModeMany&&this.fnOnReorderModeMany():("function"==typeof this.fnOnReorderModeOneNoSelect&&this.fnOnReorderModeOneNoSelect(),this.emptySelection(),this.setEventsForReorder()),"function"==typeof this.fnUpdateSelectedCount&&this.fnUpdateSelectedCount("moveMany"===this.sReorderMode?this.aSelectedElems.length:0)):(this.sReorderMode=null,this.setIsSelecting(!1),this.emptySelection(),this.setEventsForSelection(),"function"==typeof this.fnOnReorderModeDisabled&&this.fnOnReorderModeDisabled(),"function"==typeof this.fnUpdateSelectedCount&&this.fnUpdateSelectedCount(0)))},isReorderActivated:function(){return null!==this.sReorderMode},moveToFirstPos:function(){this.saveNewOrder(0)},moveToBeginPage:function(){if("function"==typeof this.fnGetNewOrderFirstPosId){var e=this;return void this.fnGetNewOrderFirstPosId(function(t){e.saveNewOrder(t,!0)})}this.saveNewOrder(0)},saveNewOrder:function(e,n){if(null===this.oLoader&&(this.oLoader=i.loading(t.__("loading.in_progress"))),this.setEventsForSelection(),-1!==this.aSelectedElems.indexOf(e)){var s=this.aElemsIdOrder.indexOf(e);for(e=0,s;s>=0;s--){var o=this.aElemsIdOrder[s];if(o&&-1===this.aSelectedElems.indexOf(o)){e=o;break}}}if(n=!!n,"function"==typeof this.fnSaveNewOrder){var a=this;this.fnSaveNewOrder(this.aSelectedElems,e,function(){a.reorderMoveItems(e,n)})}else this.reorderMoveItems(e,n)},reorderMoveItems:function(e,t){var i=this.aSelectedElems.length,n=this;if(i>0){this.sIdCurrent||(this.sIdCurrent=this.aSelectedElems[0]);var s,o,a=this.aSelectedElems.indexOf(this.sIdCurrent);if(-1!==a&&(s=this.getElemById(this.sIdCurrent),0===e?"function"==typeof this.fnGetNewOrderFirstPosId?this.fnGetNewOrderFirstPosId(function(e){if(0===e)n.$Container.prepend(s);else for(var t=0;t<i;t++)s=n.getElemById(n.aSelectedElems[t]),s.remove()}):this.$Container.prepend(s):t?this.$Container.prepend(s):(o=this.getElemById(e),s.insertAfter(o)),i>1))if(0===a)for(var r=1;r<i;r++)s=this.getElemById(this.aSelectedElems[r]),o=this.getElemById(this.aSelectedElems[r-1]),s.insertAfter(o);else{for(var l=0;l<a;l++)s=this.getElemById(this.aSelectedElems[l]),s.insertBefore(this.$CurrentBlock);for(var u=a+1;u<this.aSelectedElems.length;u++)s=this.getElemById(this.aSelectedElems[u]),o=this.getElemById(this.aSelectedElems[u-1]),s.insertAfter(o)}}this.$Elems.filter(".is-dragdrop-inactive").removeClass("is-dragdrop-inactive dragdrop-selection"),this.sIdCurrent=null,this.updateElementList(),setTimeout(function(){n.$Elems.filter(".is-dragdrop-selected").removeClass("is-dragdrop-selected").find('input[type="checkbox"]').prop("checked",!1),n.aSelectedElems=[],n.bSelectionOrderBlocked=!1,"moveOneNoSelect"!==n.sReorderMode?n.setReorderMode(null):(n.setReorderMode(null),n.setReorderMode("moveOneNoSelect")),n.oLoader.isOpen()&&(n.oLoader.close(),n.oLoader=null)},500)},callbackScroll:function(e){"function"==typeof this.fnOnScroll&&this.fnOnScroll(e)},callbackDropItem:function(e,t){if("click"===t&&this.bTouchScreen&&(t="touchclick"),"touchstart"!==t&&this.toggleElemToSelection(null,e),this.aSelectedElems.length>0){this.setReorderMode("moveMany");var i=this;"click"===t||"change"===t?(i.setSelectionEvents(!1),this.tOnDropItemTimer&&(clearTimeout(this.tOnDropItemTimer),this.tOnDropItemTimer=!1),"change"===t?i.setReorderEvents(!0):this.tOnDropItemTimer=setTimeout(function(){i.setReorderEvents(!0)},300)):"touchstart"===t&&this.tOnDropItemTimer&&(clearTimeout(this.tOnDropItemTimer),this.tOnDropItemTimer=!1)}else this.setReorderMode(null)},callbackDragEnd:function(){this.aSelectedElems.length>0&&(this.setReorderMode("moveMany"),this.bTouchScreen||this.setEventsForReorder())},callbackAbort:function(e,t){t.stopPropagation(),this.oDragdropSelection.isStopped()&&(e.hasClass("is-dragdrop-selected")||(this.setEventsForSelection(),this.bTouchScreen&&this.oDragdropSelection.dropTouchstart(this.getElemChildrenForClick(e),t))),this.oDragdropReorder.isStopped()&&e.hasClass("is-dragdrop-selected")&&(this.setEventsForReorder(),this.bTouchScreen&&this.oDragdropReorder.dropTouchstart(this.getElemChildrenForClick(e),t))},callbackReorder:function(e,t,i){this.bSelectionOrderBlocked=!0,this.sIdCurrent=e,this.iIndexDragStart=i,this.$CurrentBlock=this.getElemById(this.sIdCurrent),t&&t.length||(t=[this.sIdCurrent]);for(var n=0;n<t.length;n++)this.addElemToSelection(t[n],null,!0);var s,o=this.$CurrentBlock.index(),a=this;if(0===o){if("function"==typeof this.fnGetNewOrderFirstPosId)return void this.fnGetNewOrderFirstPosId(function(e){a.saveNewOrder(e)});s=0}else s=this.getIdByDomElem(this.$Elems.eq(o-(this.iIndexDragStart<o?0:1)));this.saveNewOrder(s)}},o}),define("text!skins/default/video/playlists/tb_list_elem_base.mustache",[],function(){return'<span class=\'in-fav-indic\'>\n\t<span class="icon-f icf-check"></span>\n</span>\n{{^bIsVideo}}\n<span class=\'is-fav-indic{{#bWatchLater}} is-watch-later{{/bWatchLater}}\'>\n\t{{#bWatchLater}}<span class="icon-f icf-clock"></span>{{/bWatchLater}}\n\t{{^bWatchLater}}<span class="icon-f icf-favorites"></span>{{/bWatchLater}}\n</span>\n{{/bIsVideo}}\n'}),define("text!skins/default/video/playlists/tb_list_elem_base_line.mustache",[],function(){return'<div class="favlist-elem favlist-elem-line{{#bInList}} in-favlist{{/bInList}}{{#bIsFull}} max-videos-reached{{/bIsFull}}" id="favlist_{{{sId}}}">\n\t<div class="favlist-e-left">\n\t\t<div class="favlist-e-visibility">{{{sPicto}}}</div>\n\t\t<div class="favlist-e-title">\n\t\t\t<span class="icon-f icf-check in-fav-indic"></span>\n\t\t\t{{#bWatchLater}}<span class="icon-f icf-clock is-watch-later"></span>{{/bWatchLater}}\n\t\t\t{{{sName}}}\n\t\t\t<span class="favlist-e-tags">\n\t\t\t\t{{#bIsFull}}<span class="max-videos-reached" title="{{{sFullTitle}}}">{{{sFull}}}</span>{{/bIsFull}}\n\t\t\t\t<span class="favlist-e-nb-videos">{{{sNbVideos}}}</span>\n\t\t\t\t{{{sTags}}}\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="favlist-e-action favlist-e-right thumb-inside">{{#sAction}}{{{sAction}}}{{/sAction}}</div>\n</div>\n'}),define("text!skins/default/video/playlists/tb_list_elem_base_small_line.mustache",[],function(){return'<div class="favlist-elem favlist-elem-small-line{{#bInList}} in-favlist{{/bInList}}{{#bIsFull}} max-videos-reached{{/bIsFull}}" id="favlist_{{{sId}}}">\n\t<div class="favlist-e-left">\n\t\t<div class="favlist-e-visibility">{{{sPicto}}}</div>\n\t\t<div class="favlist-e-title">\n\t\t\t<span class="icon-f icf-check in-fav-indic"></span>\n\t\t\t{{#bWatchLater}}<span class="icon-f icf-clock is-watch-later"></span>{{/bWatchLater}}\n\t\t\t{{{sName}}}\n\t\t\t<span class="favlist-e-tags">\n\t\t\t\t{{#bIsFull}}<span class="max-videos-reached" title="{{{sFullTitle}}}">{{{sFull}}}</span>{{/bIsFull}}\n\t\t\t\t<span class="favlist-e-nb-videos">{{{sNbVideos}}}</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="favlist-e-action thumb-inside favlist-e-right">{{#sAction}}{{{sAction}}}{{/sAction}}</div>\n</div>\n'}),define("text!skins/default/video/playlists/tb_list_elem_add_to.mustache",[],function(){return'<div class=\'pl-add-remove{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<div class=\'add\'>\n\t\t{{^bInList}}\n\t\t\t{{#bMaxVideosReached}}\n\t\t\t\t{{^bDisplayModeList}}<span class="info-txt">{{{ sMax }}}</span>{{/bDisplayModeList}}\n\t\t\t\t<span class="icon-f icf-ban"></span>\n\t\t\t{{/bMaxVideosReached}}\n\t\t\t{{^bMaxVideosReached}}<span class="icon-f icf-favorites-add"></span>{{/bMaxVideosReached}}\n\t\t{{/bInList}}\n\t\t{{#bInList}}<span class="icon-f icf-favorites-add"></span>{{/bInList}}\n\t\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sAdd }}}</span>{{/bDisplayModeList}}\n\t</div>\n\t<div class=\'remove\'>\n\t\t<span class="icon-f icf-trash"></span>\n\t\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sRemove }}}</span>{{/bDisplayModeList}}\n\t</div>\n</div>'}),define("text!skins/default/video/playlists/tb_list_elem_edit.mustache",[],function(){return'<div class=\'pl-edit{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<span class="icon-f icf-pencil"></span>\n\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sEdit }}}</span>{{/bDisplayModeList}}\n</div>'}),define("text!skins/default/video/playlists/tb_list_elem_move_to.mustache",[],function(){return'<div class=\'pl-move-to{{#bDisplayModeList}} btn btn-default{{/bDisplayModeList}}\'>\n\t<span class="icon-f icf-mail-forward"></span>\n\t{{#bDisplayModeList}}<span class="mobile-hide">{{{ sMoveTo }}}</span>{{/bDisplayModeList}}\n</div>'}),define("text!skins/default/video/playlists/edit_list.mustache",[],function(){return'<div class="favlist-edit">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\n\t<span class="favlist-picto icon-f icf-{{#bWatchLater}}clock{{/bWatchLater}}{{^bWatchLater}}favorites{{/bWatchLater}}"></span>\n\n\t{{#bWatchLater}}<div class="favlist-list-title"><div class="form-horizontal"><div class="form-group"><p>{{{ sTitle }}}</p></div></div></div>{{/bWatchLater}}\n\t<div class="favlist-edit-form"></div>\n\n\t<div class="favlist-edit-list-menu">\n\t\t<button class="btn btn-show-more btn-default btn-lg" title="{{{ sShowMore }}}"><span class="icon-f icf-minus-square"></span></button>\n\n\t\t<p class="legend">{{{ sNbVideo }}}</p>\n\n\t\t{{#bMaxVideosReached}}<span class="max-videos-reached" title="{{{ sMaxTitle }}}">{{{ sMax }}}</span>{{/bMaxVideosReached}}\n\n\t\t<button class="btn btn-reorder btn-default btn-lg" title="{{{ sReorder }}}"><span class="icon-f icf-arrows"></span> {{{ sReorder }}}</button>\n\t\t<button class="btn btn-select btn-default btn-lg" title="{{{ sSelect }}}"><span class="icon-f icf-check"></span> {{{ sSelect }}}</button>\n\t\t<button class="btn btn-empty btn-default btn-lg" title="{{{ sEmpty }}}"><span class="icon-f icf-close"></span> {{{ sEmpty }}}</button>\n\n\t\t<button class="btn btn-check-all btn-default btn-lg" title="{{{ sMoveToFirstPos }}}"><span class="icon-f icf-check-square"></span>/<span class="icon-f icf-square"></span> {{{ sCheckUncheckAll }}}</button>\n\t\t<button class="btn btn-move-first btn-default btn-lg" title="{{{ sMoveToFirstPos }}}"><span class="icon-f icf-arrows"></span> {{{ sMoveToFirstPos }}}</button>\n\t\t<button class="btn btn-move-begin-page btn-default btn-lg" title="{{{ sMoveToBeginPage }}}"><span class="icon-f icf-arrows"></span> {{{ sMoveToBeginPage }}}</button>\n\t\t<button class="btn btn-move-to btn-default btn-lg" title="{{{ sMoveToOtherList }}}"><span class="icon-f icf-mail-forward"></span> {{{ sMoveToOtherList }}}</button>\n\t\t<button class="btn btn-delete btn-danger btn-lg" title="{{{ sDelete }}}"><span class="icon-f icf-trash"></span> {{{ sDelete }}}</button>\n\n\t\t<button class="btn btn-cancel btn-default btn-lg" title="{{{ sCancel }}}"><span class="icon-f icf-close-thin"></span> {{{ sCancel }}}</button>\n\n\t\t<a class="btn btn-link-pl btn-link btn-lg hide-on-reorder" href="{{{ sPlayListPageHref }}}" target="_blank" title="{{{ sPlayListPage }}}"><span class="icon-f icf-player-play-circle-o"></span> {{{ sPlayListPage }}}</a>\n\t\t<a class="btn btn-link-rpl btn-link btn-lg hide-on-reorder" href="{{{ sRandomPlayListPageHref }}}" target="_blank" title="{{{ sRandomPlayListPage }}}"><span class="icon-f icf-random"></span> {{{ sRandomPlayListPage }}}</a>\n\t\t<a class="btn btn-link-pl btn-link btn-lg hide-on-reorder" href="{{{ sListPageHref }}}" target="_blank" title="{{{ sListPage }}}"><span class="icon-f icf-external-link"></span> {{{ sListPage }}}</a>\n\t</div>\n\n\t<div class="mozaique thumbs-5-cols"></div>\n</div>'}),define("text!skins/default/video/playlists/edit_list_delete_btn.mustache",[],function(){return'<button class="btn btn-default delete" type="button">\n\t<span class="icon-f icf-trash"></span>\n\t{{{ sDelete }}}\n</button>'}),define("text!skins/default/video/playlists/edit_list_voters_btn.mustache",[],function(){return'{{#oVote.iTotal}}\n\t<button class="btn btn-vote btn-link btn-lg hide-on-reorder" title="{{{ sVoters }}}">\n\t\t<span class="mobile-hide">\n\t\t\t{{#oVote.iGood}}<span class="icon-f icf-thumb-up"></span> {{{ oVote.sGood }}}{{/oVote.iGood}}\n\t\t\t<span class="icon-f icf-heart"></span> {{{ oVote.sRating }}}\n\t\t\t{{#oVote.iBad}}<span class="icon-f icf-thumb-down"></span> {{{ oVote.sBad }}}{{/oVote.iBad}}\n\t\t</span>\n\t\t<span class="mobile-show-inline">\n\t\t\t<span class="icon-f icf-thumb-up"></span> {{{ oVote.sRating }}}\n\t\t</span>\n\t</button>\n{{/oVote.iTotal}}'}),define("text!skins/default/video/playlists/edit_list_voters.mustache",[],function(){return'<div class="favlist-edit">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\t<div class="voters-list">\n\t\t<p class="voters-list-title">\n\t\t\t{{{ sTitle }}}\n\t\t\t<span class="voters-list-votes">\n\t\t\t\t<span class="good">\n\t\t\t\t\t<span class="icon-f icf-thumb-up"></span> {{{ sGood }}}\n\t\t\t\t</span>\n\t\t\t\t<span class="rating">\n\t\t\t\t\t<span class="icon-f icf-heart"></span> {{{ sRating }}}\n\t\t\t\t</span>\n\t\t\t\t<span class="bad">\n\t\t\t\t\t<span class="icon-f icf-thumb-down"></span> {{{ sBad }}}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</p>\n\n\t\t<ul class="voters">\n\t\t\t{{{ sVoters }}}\n\t\t\t{{^bLastPage}}\n\t\t\t\t<li class="action">\n\t\t\t\t\t<button type="button" class="btn btn-default btn-danger init-ok load-more-voters">\n\t\t\t\t\t\t<span>{{{ sShowMore }}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t{{/bLastPage}}\n\t\t</ul>\n\t</div>\n</div>'}),define("text!skins/default/video/playlists/edit_list_voter.mustache",[],function(){return'<li>\n\t<a href="/profiles/{{{ name }}}" title="{{{ display }}}">\n\t\t<figure><img src="{{{ picture }}}" alt="{{{ display }}}"/></figure>\n\t\t<span>{{{ display }}}</span>\n\t</a>\n</li>'}),define("skins/default/video/playlists/one_list",["config/main","static/utils","mustache","lib/i18n!front","lib/helpers/overlay/contextual_popup","lib/helpers/dragdrop_select_and_reorder","lib/helpers/inline_loader","skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_common_init","skins/form/validator","skins/default/pagination","text!./tb_list_elem_base.mustache","text!./tb_list_elem_base_line.mustache","text!./tb_list_elem_base_small_line.mustache","text!./tb_list_elem_add_to.mustache","text!./tb_list_elem_edit.mustache","text!./tb_list_elem_move_to.mustache","text!./edit_list.mustache","text!./edit_list_delete_btn.mustache","text!./edit_list_voters_btn.mustache","text!./edit_list_voters.mustache","text!./edit_list_voter.mustache"],function(e,t,i,n,s,o,a,r,l,u,f,d,c,h,p,_,g,m,b,v,D,y){var w=function(e,t){if(void 0!==e){this.oListOfLists=t,this.sType=t.sType,this.sId=e.id,this.sName=this.t=e.name,this.sUrl=this.u=e.url,this.sPlaylistUrl=!!e.playlist&&e.playlist,this.sRandomPlaylistUrl=!!e.rand_playlist&&e.rand_playlist,this.sHistoricalStart="favlist_"+this.sId+"_",this.oCsrf=e.csrf?e.csrf:{},this.bWatchLater=!!e.watch_later,this.aCover=e.cover,this.sVisibility=e.status,this.bIsLoading=!1,this.bIsLoadingVoters=!1,this.bHasMoreVideosToLoad=!1,this.bNeedInfoUpdate=!0,this.bNeedTBElemUpdate=!1,this.bVideoListMenuPined=!1,this.bVideoListMenuShowMore=!0,this.bVideoListMenuShowMoreAuto=!0,this.sFormEdit="",this.aFormEditValidationRules=[],this.iDelayTouch=500,this.iPage=0,this.iMobileOnlyWidth=this.oListOfLists&&this.oListOfLists.iMobileOnlyWidth?this.oListOfLists.iMobileOnlyWidth:0,this.iMobileWidth=this.oListOfLists&&this.oListOfLists.iMobileWidth?this.oListOfLists.iMobileWidth:0,this.iHeaderMobileHeight=0,this.iClosestListMenuRelativeParentTop=0,this.iNbVideos=e.nb_videos,this.iNbVideosPerPage=0,this.aVideos=[],this.iNbTags=e.nb_tags,this.oTags=e.tags,this.bMaxVideosReached=this.bHadMaxVideosReached=e.bMaxVideosReached,this.$EditContainer=null,this.$FormEditContainer=null,this.$VideoListContainer=null,this.$VideoListMenuShowMore=null,this.$VideoListMenuShowMoreIcf=null,this.$BtnSelect=null,this.$BtnEmpty=null,this.$BtnReorder=null,this.$BtnCheckAll=null,this.$BtnMoveFirst=null,this.$BtnMoveBeginPage=null,this.$BtnMoveTo=null,this.$BtnDelete=null,this.$VotersBtn=null,this.$BtnCancel=null,this.$BtnsLink=null,this.oTbMenu=null,this.oVote={bLoaded:!1,iTotal:0,iGood:0,iBad:0,iRating:0,sTotal:"",sGood:"",sBad:"",sRating:""},t.oOptions.sIdVideo&&(this.sIdVideo=t.oOptions.sIdVideo.toString()),this.bInList=!!e.in_list,this.initHistoricalNav(),this.bIsMobileOnly=$(window).width()<this.iMobileOnlyWidth;var i=this;$(window).on("resize",function(){var e=$(window).width();i.bIsMobileOnly=e<i.iMobileOnlyWidth,i.updateHeaderMobileHeight(),i.updateVideoListMenu()})}};return w.prototype={getId:function(){return this.sId},getName:function(){return this.sName},getFullUrl:function(){return e.domains.slave+this.sUrl},getUrl:function(){return this.sUrl},getMainContainer:function(){return this.oListOfLists.getContainer()},getListListContainer:function(){return this.oListOfLists.getListContainer()},getPlaylistUrl:function(){return this.sPlaylistUrl},getRandomPlaylistUrl:function(){return this.sRandomPlaylistUrl},getType:function(){return this.sType},getCover:function(){return this.aCover&&this.aCover.length?this.aCover.length<4?'<img src="'+this.aCover[0]+'" alt="" />':'<img src="'+this.aCover[0]+'" alt="" class="top-left"/><img src="'+this.aCover[1]+'" alt="" class="top-right" /><img src="'+this.aCover[2]+'" alt="" class="bottom-left" /><img src="'+this.aCover[3]+'" alt="" class="bottom-right" />':'<img src="'+xv.conf.domains["static"]+'/v3/img/skins/default/favorites/default169ll.png" alt="" />'},getVisibility:function(){return this.sVisibility},getVisibilityPicto:function(e){var t='<span class="icon-f icf-';switch(void 0===e&&(e=this.sVisibility),e){case"NOBODY":t+="eye-blocked";break;case"FRIEND":t+="users";break;case"REGISTER":t+="user-check";break;case"ANYONE":default:t+="eye"}return t+='"></span>'},getTags:function(){if(!this.oTags)return[];var e=[];for(var t in this.oTags)e.push({sId:t,sName:this.oTags[t]});return e},getTagsHTMLList:function(){sTags="";var e=this.getTags();if(e&&e.length)for(var t=0;t<e.length;t++){var i=e[t];sTags+=' <span class="tag">'+i.sName+"</span>"}return sTags},getMoveToCsrf:function(){return!(!this.oCsrf||!this.oCsrf.moveto)&&this.oCsrf.moveto},isWatchLater:function(){return this.bWatchLater},isVideoInList:function(){return this.bInList},isListFull:function(){return this.bMaxVideosReached},setPopError:function(e,t,i){this.unsetPopLoader(),"string"!=typeof t&&(t=n.__("misc.error_please_retry")),"string"==typeof e&&e.length?t.length&&(e=" : "+e):e="";var o=t+e;o.length||(o=n.__("misc.error_please_retry")),s.alert('<span class="text-danger">'+o+"</span>","function"==typeof i?i:null)},setPopLoader:function(e){this.unsetPopLoader(),this.oPopLoader=s.loading(e)},unsetPopLoader:function(){this.oPopLoader&&(this.oPopLoader.close(),this.oPopLoader=null)},getThumbBlockElem:function(){var e=this.oListOfLists.getDisplayMode();"add_to"===this.sType?this.setThumbBlockAddTo(e):"move_to"===this.sType?this.setThumbBlockMoveTo(e):this.setThumbBlockEdit(e);var t=r.init_listing(this.$TBElem,{type:"favlist",favorite:this});return this.oTbMenu="object"==typeof t&&"undefined"!=typeof t[0]?t[0]:null,this.bNeedTBElemUpdate=!1,this.$TBElem},setThumbBlock:function(e,t){var n;n="list"===t?$(i.render(c,{sId:this.getId(),sPicto:this.getVisibilityPicto(),sName:this.getName(),bWatchLater:this.isWatchLater(),sNbVideos:this.getNbVideosTxt(),sTags:this.getTagsHTMLList(),bInList:this.isVideoInList(),bIsFull:this.isListFull(),sFull:xv.i18n.__("video.favs.full"),sFullTitle:xv.i18n.__("video.favs.max_vids_reached"),sAction:e})):"cols"===t?$(i.render(h,{sId:this.getId(),sPicto:this.getVisibilityPicto(),sName:this.getName(),bWatchLater:this.isWatchLater(),sNbVideos:this.getNbVideosTxt(),bInList:this.isVideoInList(),bIsFull:this.isListFull(),sFull:xv.i18n.__("video.favs.full"),sFullTitle:xv.i18n.__("video.favs.max_vids_reached"),sAction:e})):$(xv.thumbs.get_thumb_block_html(this,"favlist",{tb_thumb_end:i.render(d,{bWatchLater:this.bWatchLater})+(e||"")}).html),this.$TBElem&&this.$TBElem.length&&this.$TBElem.parents("body").length&&this.$TBElem.replaceWith(n),this.$TBElem=n},resetThumbBlockEvents:function(){"add_to"===this.sType?this.setThumbBlockAddToEvents():this.setThumbBlockEditEvents()},"delete":function(){var e=this;s.confirm(n.__("video.favs.delete_confirm"),function(){e.setPopLoader(),$.post({url:"/api/playlists/list/"+e.sId+"/delete",dataType:"json",data:{csrf:e.oCsrf["delete"]},success:function(t){t.result||e.setPopError(t.message)},error:function(t,i,n){e.setPopError(n)},complete:function(){e.oListOfLists.loadList(),e.unsetPopLoader()}})})},initHistoricalNav:function(){var e=this;this.oListOfLists.setHistoricalFunc("pl_edit_"+this.sId,function(){e.showEdit()})},setThumbBlockAddTo:function(e){var t={bMaxVideosReached:!!this.bMaxVideosReached,bWatchLater:this.bWatchLater,bInList:!!this.bInList,sMax:n.__("video.favs.full"),bDisplayModeList:"mozaique"!==e,sAdd:!this.bInList&&this.bMaxVideosReached?n.__("video.favs.full"):n.__("video.favs.add_video"),sRemove:n.__("video.favs.remove_video_from_list")};this.setThumbBlock(i.render(p,t),e),this.$MaxVideosReached=this.$TBElem.find(".max-videos-reached"),this.setThumbBlockAddToEvents()},setThumbBlockAddToEvents:function(){var e=this;this.$TBElem.find(".pl-add-remove").off("click").on("click",function(t){t.preventDefault(),e.bInList?e.removeVideoFromList():e.addVideoToList()})},addVideoToList:function(){this.addRemoveVideo("add")},removeVideoFromList:function(){this.addRemoveVideo("remove")},addRemoveVideo:function(e){if("add"===e&&this.bMaxVideosReached)return s.alert(n.__("video.favs.max_vids_reached")),!1;var t=this,i=n.__("add"===e?"video.favs.error_occured_adding":"video.favs.error_occured_removing"),o="add"===e?n.__("video.favs.adding_video"):n.__("video.favs.removing_video");this.setPopLoader(o+' "'+this.sName+'"...'),$.post({url:"/api/playlists/list/"+this.sId+"/"+e+"/"+this.sIdVideo,dataType:"json",
data:{csrf:this.oCsrf[e]},success:function(n){return n.result?n.logged?void t.setToInList("add"===e):void t.oListOfLists.displayLogin():void t.setPopError(n.message,i)},error:function(e,n,s){t.setPopError(s,i)},complete:function(){t.unsetPopLoader()}})},setToInList:function(e,t){"boolean"!=typeof e&&(e=!0),e!==this.bInList&&("boolean"!=typeof t&&(t=!0),this.bInList=e,this.bInList?(this.$TBElem&&this.$TBElem.length&&this.$TBElem.addClass("in-favlist"),t&&(this.iNbVideos++,this.bNeedInfoUpdate=!0,this.bMaxVideosReached=this.bHadMaxVideosReached,this.bMaxVideosReached&&this.$MaxVideosReached.show())):(this.$TBElem&&this.$TBElem.length&&this.$TBElem.removeClass("in-favlist"),t&&(this.iNbVideos--,this.iNbVideos<1&&this.reloadListInfos(),this.bMaxVideosReached?(this.bMaxVideosReached=!1,this.$MaxVideosReached.hide()):this.bHadMaxVideosReached=!1)),this.bNeedTBElemUpdate=!0,this.getThumbBlockElem())},setThumbBlockMoveTo:function(e){var t={bDisplayModeList:"mozaique"!==e,sMoveTo:n.__("video.favs.move_to_this_list")};this.setThumbBlock(i.render(g,t),e),this.setThumbBlockMoveToEvents()},setThumbBlockMoveToEvents:function(){var e=this;this.$TBElem.find(".pl-move-to").off("click").on("click",function(t){t.preventDefault(),e.moveVideosToThisList()})},moveVideosToThisList:function(){this.oListOfLists.moveVideosToOtherList(this.sId)},setThumbBlockEdit:function(e){var t={bDisplayModeList:"mozaique"!==e,sEdit:n.__("video.favs.edit_this_list")};this.setThumbBlock(i.render(_,t),e),this.setThumbBlockEditEvents()},setThumbBlockEditEvents:function(){var e=this;this.$TBElem.find(".pl-edit").off("click").on("click",function(t){t.preventDefault(),e.showEdit()})},showEdit:function(){if(bIsLogged=e.dyn.login_info.is_logged,!bIsLogged)return void this.oListOfLists.displayLogin();this.initEditHTML(),this.oListOfLists.setContent(this.$EditContainer,"pl_edit_"+this.sId),this.updateVideoListMenu(),this.updateEditInfos(),this.updateHeaderMobileHeight()},initEditHTML:function(){var e=this;this.$EditContainer=$(i.render(m,{bMaxVideosReached:!!this.bMaxVideosReached,bWatchLater:!!this.bWatchLater,sTitle:this.sName,aVideos:this.aVideos,sNbVideo:this.getNbVideosTxt(),sMaxTitle:n.__("video.favs.max_vids_reached"),sMax:n.__("video.favs.full"),sShowMore:n.__("misc.show_less"),sBack:n.__("misc.back"),sPlayListPageHref:this.sPlaylistUrl,sRandomPlayListPageHref:this.sRandomPlaylistUrl,sPlayListPage:n.__("video.favs.play_playlist"),sRandomPlayListPage:n.__("video.favs.play_random_playlist"),sListPageHref:this.sUrl,sListPage:n.__("video.favs.list_page"),sEmpty:n.__("video.favs.empty_the_list"),sReorder:n.__("video.favs.reorder_videos"),sSelect:n.__("video.favs.select_videos"),sCheckUncheckAll:n.__("form.check_uncheck_all"),sMoveToFirstPos:n.__("reorder.move_to_first_pos"),sMoveToBeginPage:n.__("reorder.move_to_begin_page"),sMoveToOtherList:n.__("video.favs.move_to_other_list"),sDelete:n.__("misc.delete"),sCancel:n.__("misc.cancel")})),this.$VideoListContainer=this.$EditContainer.find(".mozaique"),this.$VideoListMenu=this.$EditContainer.find(".favlist-edit-list-menu"),this.$VideoListMenuShowMore=this.$EditContainer.find(".btn-show-more"),this.$VideoListMenuShowMoreIcf=this.$VideoListMenuShowMore.find(".icf-minus-square"),this.$VideoListMenuLegend=this.$VideoListMenu.find(".legend"),this.$FormEditContainer=this.$EditContainer.find(".favlist-edit-form");var s=this.$EditContainer.find(".btn-back");this.$BtnSelect=this.$VideoListMenu.find(".btn-select"),this.$BtnEmpty=this.$VideoListMenu.find(".btn-empty"),this.$BtnReorder=this.$VideoListMenu.find(".btn-reorder"),this.$BtnCheckAll=this.$VideoListMenu.find(".btn-check-all"),this.$BtnMoveFirst=this.$VideoListMenu.find(".btn-move-first"),this.$BtnMoveBeginPage=this.$VideoListMenu.find(".btn-move-begin-page"),this.$BtnMoveTo=this.$VideoListMenu.find(".btn-move-to"),this.$BtnDelete=this.$VideoListMenu.find(".btn-delete"),this.$VotersBtn=this.$VideoListMenu.find(".btn-vote"),this.$BtnCancel=this.$VideoListMenu.find(".btn-cancel"),this.$BtnsLink=this.$VideoListMenu.find(".btn-link"),this.$VideoListMenuShowMore.on("click",function(t){t.preventDefault(),e.toggleVideoListMenuShowMore()}),s.on("click",function(t){t.preventDefault(),window.history&&window.history.back?window.history.back():e.goBackToListOfList()}),this.$BtnSelect.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode("moveMany")}),this.$BtnCancel.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode(null)}),this.$BtnCheckAll.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.toggleSelectAll()}),this.$BtnMoveFirst.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.moveToFirstPos()}),this.$BtnMoveBeginPage.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.oDragDrop.moveToBeginPage()}),this.iPage<1&&this.$BtnMoveBeginPage.hide(),this.oListOfLists.getNbLists()>1?this.$BtnMoveTo.on("click",function(t){t.preventDefault(),!$(this).hasClass("disabled")&&e.oDragDrop&&e.moveVideosToOtherList()}):this.$BtnMoveTo.remove(),this.$BtnDelete.on("click",function(t){t.preventDefault(),$(this).hasClass("disabled")||e.deleteSelectedVideos()}),t.isTouchScreen()?this.$BtnReorder.remove():this.$BtnReorder.on("click",function(t){t.preventDefault(),e.oDragDrop&&e.oDragDrop.setReorderMode("moveOneNoSelect")}),this.iNbVideos>0?this.$BtnEmpty.on("click",function(t){t.preventDefault(),e.deleteAllVideos()}):this.$BtnEmpty.hide()},goBackToListOfList:function(){this.$VideoListContainer=null,this.oDragDrop=null,this.oListOfLists.showList()},getNbVideosTxt:function(){return this.iNbVideos>1?n.__("misc.nb_videos",{"%count%":String(this.iNbVideos)}):n.__("misc.one_video",{"%count%":String(this.iNbVideos)})},updateHeaderMobileHeight:function(){var e=$(window).width(),t=$(window).height();if(this.iHeaderMobileHeight=e<this.iMobileWidth&&e<t?41:0,this.$VideoListMenu&&this.$VideoListMenu.length&&this.$VideoListMenu.is(":visible")){var i=this.$VideoListMenu.parents().filter(function(){var e=$(this);return e.is("body")||"relative"===e.css("position")}).slice(0,1);this.iClosestListMenuRelativeParentTop=Math.round(i.offset().top)}},updateVideoListMenu:function(){if(this.$VideoListMenu&&this.$VideoListMenu.length&&this.$VideoListMenu.is(":visible")){var e="",t="",i=0;this.oDragDrop&&(t=this.oDragDrop.getReorderMode(),i=this.oDragDrop.countSelectedElems(),e+="_"+t,e+="_"+i.toString()),e+="_"+this.iPage.toString(),this.sLastVideoListMode!==e&&(this.oDragDrop&&this.oDragDrop.isReorderActivated()?(this.$BtnSelect.hide(),this.$BtnEmpty.hide(),this.$BtnReorder.hide(),this.$BtnsLink.hide(),this.$VotersBtn.hide(),"moveMany"===t?(this.$BtnCheckAll.show(),this.$BtnMoveFirst.show(),this.$BtnMoveTo.show(),this.$BtnDelete.show(),this.iPage>0?this.$BtnMoveBeginPage.show():this.$BtnMoveBeginPage.hide()):(this.$BtnMoveFirst.hide(),this.$BtnMoveBeginPage.hide(),this.$BtnMoveTo.hide(),this.$BtnDelete.hide()),this.$BtnCancel.show(),i>0?(this.$BtnMoveFirst.removeClass("disabled"),this.$BtnMoveBeginPage.removeClass("disabled"),this.$BtnMoveTo.removeClass("disabled"),this.$BtnDelete.removeClass("disabled")):(this.$BtnMoveFirst.addClass("disabled"),this.$BtnMoveBeginPage.addClass("disabled"),this.$BtnMoveTo.addClass("disabled"),this.$BtnDelete.addClass("disabled"))):(this.$BtnSelect.show(),this.$BtnEmpty.show(),this.$BtnReorder.show(),this.$BtnsLink.show(),this.$VotersBtn.show(),this.$BtnCheckAll.hide(),this.$BtnMoveFirst.hide(),this.$BtnMoveBeginPage.hide(),this.$BtnMoveTo.hide(),this.$BtnDelete.hide(),this.$BtnCancel.hide()));var n=this.$VideoListMenu.find(".legend, .btn:not(.btn-show-more)"),s=null,o=!1;n.each(function(){var e=$(this);if(e&&e.length&&e.is(":visible"))return null===s?void(s=e.position().top):void(e.position().top>s&&(o=!0))}),o?(this.$VideoListMenuShowMore.show(),this.$VideoListMenu.addClass(this.bVideoListMenuShowMore?"is-opened":"is-closed")):(this.$VideoListMenuShowMore.hide(),this.$VideoListMenu.removeClass("is-opened is-closed"))}},toggleVideoListMenuShowMore:function(e){if(e||(this.bVideoListMenuShowMoreAuto=!1),!this.$VideoListMenuShowMore||!this.$VideoListMenuShowMore.length)return void this.$VideoListMenu.removeClass("is-opened is-closed");this.bVideoListMenuShowMore=!this.bVideoListMenuShowMore,this.bVideoListMenuShowMore?(this.$VideoListMenuShowMore.prop("title",n.__("misc.show_less")),this.$VideoListMenuShowMoreIcf.removeClass("icf-plus-square").addClass("icf-minus-square"),this.$VideoListMenu.removeClass("is-closed").addClass("is-opened")):(this.$VideoListMenuShowMore.prop("title",n.__("misc.show_more")),this.$VideoListMenuShowMoreIcf.removeClass("icf-minus-square").addClass("icf-plus-square"),this.$VideoListMenu.removeClass("is-opened").addClass("is-closed"))},reloadListInfos:function(){this.bNeedInfoUpdate=!0,this.bNeedTBElemUpdate=!0,this.loadListInfos("same-page")},loadListInfos:function(e,t){if(!this.bIsLoading){if(!this.bNeedInfoUpdate&&("number"!=typeof e||e===this.iPage))return void this.updateEditInfos();this.bIsLoading=!0;var i=this.getMainContainer();i&&i.length&&i.addClass("is-loading-videos"),this.$VideoListContainer&&(t?this.$VideoListContainer.append($('<div class="thumb-block loader">'+a.getIcf()+"</div>")):this.$VideoListContainer.empty().append($('<div class="thumb-block loader">'+a.getIcf()+"</div>")));var s=this;if("number"!=typeof e){var o="/api/playlists/list/"+this.sId;"same-page"===e&&(o+="/"+this.iPage),$.post({url:o,dataType:"json",success:function(t){if(!t.result)return void s.setPopError(t.message,n.__("loading.error"));"same-page"===e&&0!==s.iNbVideos||(s.iPage=0,s.aVideos=s.removeDeletedVideos(t.list.videos)),s.oListOfLists.updateAllLoadedListData(s.sId,t,"load-list"),s.bNeedInfoUpdate=!1,s.oVote.bLoaded=!0,s.updateEditInfos()},error:function(e,t,i){s.setPopError(i,n.__("loading.error"))},complete:function(){s.bIsLoading=!1,i&&i.length&&i.removeClass("is-loading-videos")}})}else $.post({url:"/api/playlists/list/"+this.sId+"/videos/"+e,dataType:"json",success:function(i){if(!i.result)return void s.setPopError(i.message,n.__("loading.error"));s.bHasMoreVideosToLoad=i.nb_more>0;var o=s.removeDeletedVideos(i.videos);t?s.concatNewVideos(o):(s.iPage=e,s.aVideos=o,s.updateEditInfos())},error:function(e,t,i){s.setPopError(i,n.__("loading.error"))},complete:function(){s.bIsLoading=!1,i&&i.length&&i.removeClass("is-loading-videos")}})}},updateListData:function(e,t){var i=[];this.iNbVideos=e.list.nb_videos,this.iNbVideosPerPage=e.list.nb_per_page,this.bHasMoreVideosToLoad=e.list.nb_more>0,e.list.cover&&(this.aCover=e.list.cover),e.list.csrf&&(this.oCsrf=e.list.csrf),e.list.vote&&e.list.vote.nbtotal&&(this.oVote.iTotal=e.list.vote.nbtotal,this.oVote.iGood=e.list.vote.nbgood,this.oVote.iBad=e.list.vote.nbbad,this.oVote.iRating=e.list.vote.rating,this.oVote.sTotal=e.list.vote.total,this.oVote.sGood=e.list.vote.vgood,this.oVote.sBad=e.list.vote.vbad,this.oVote.sRating=e.list.vote.vrating),this.sFormEdit=e.form,this.aFormEditValidationRules=e.js_validation_rules;var n=!0;for(var s in this.oTags)if(!e.list.tags||!e.list.tags[s]){n=!1;break}if(n)for(var o in e.list.tags)if(!this.oTags||!this.oTags[o]){n=!1;break}return n||(i.push("tags"),this.oTags=e.list.tags),this.iNbTags!==e.list.nb_tags&&(i.push("nb_tags"),this.iNbTags=e.list.nb_tags),this.sName!==e.list.name&&(i.push("name"),this.sName=this.t=e.list.name),this.sUrl!==e.list.url&&(i.push("url"),this.sUrl=this.u=e.list.url),this.bMaxVideosReached!==e.list.max_videos_reached&&(i.push("max_videos_reached"),this.bMaxVideosReached=this.bHadMaxVideosReached=e.list.max_videos_reached),this.sVisibility!==e.list.status&&(i.push("status"),this.sVisibility=e.list.status),this.iNbVideos!==e.list.nb_videos&&(i.push("nb_videos"),this.iNbVideos=e.list.nb_videos),"edit-save"===t&&(this.bNeedTBElemUpdate=!0,this.bNeedInfoUpdate=!0),i},removeDeletedVideos:function(e){for(var t in e)if(e[t].deleted)return e.splice(t,1),this.removeDeletedVideos(e);return e},reinitEditForm:function(e){var t=this.sFormEdit,s=this.aFormEditValidationRules;void 0!==e&&(t=e.form,s=e.js_validation_rules),this.$FormEditContainer.html(t);var o=this,a=this.$FormEditContainer.find("form"),r=a.find("#"+a.prop("id")+"_status");if(a.on("submit",function(e){e.preventDefault(),o.setPopLoader(n.__("misc.submitting")),$.post({url:"/api/playlists/list/"+o.sId+"/update",dataType:"json",data:a.serializeArray(),success:function(e){if(!e.result||!e.list)return void(2===e.code&&e.form&&e.js_validation_rules?o.reinitEditForm({form:e.form,js_validation_rules:e.js_validation_rules}):e.result||o.setPopError(e.message,null,function(){o.reinitEditForm()}));var t=o.oListOfLists.updateAllLoadedListData(o.sId,e,"edit-save");t&&(-1!==t.indexOf("tags")&&($TagList=a.find(".tag-adder .tag-list"),$TagList.removeClass("success"),setTimeout(function(){$TagList.addClass("success")},50),setTimeout(function(){$TagList.removeClass("success")},2e3)),-1!==t.indexOf("name")&&($InpName=a.find("#"+a.prop("id")+"_name"),$InpName.removeClass("success"),setTimeout(function(){$InpName.addClass("success")},50),setTimeout(function(){$InpName.removeClass("success")},2e3)),-1!==t.indexOf("status")&&(r.removeClass("success"),setTimeout(function(){r.addClass("success")},50),setTimeout(function(){r.removeClass("success")},2e3))),p.resetSubmit()},error:function(e,t,i){o.setPopError(i,null,function(){o.reinitEditForm()})},complete:function(){o.unsetPopLoader()}})}),r&&r.length){var l=$(this.getVisibilityPicto(r.val())),f=$("<label></label>");f.addClass("favlist-status-label select-label").insertBefore(r).append(r),l.addClass("favlist-status-picto").prependTo(f),r.on("change",function(e){e.preventDefault();var t=$(o.getVisibilityPicto(r.val()));t.addClass("favlist-status-picto"),l.replaceWith(t),l=t})}var d=a.find("button[type=submit]"),c=$(i.render(b,{sDelete:n.__("misc.delete")}));c.insertAfter(d),c.on("click",function(e){e.preventDefault(),o["delete"]()});var h=$(i.render(v,{sVoters:n.__("voters.show_all"),oVote:this.oVote}));this.$VotersBtn&&this.$VotersBtn.length?this.$VotersBtn.replaceWith(h):this.$VideoListMenu.append(h),this.$VotersBtn=h,this.$VotersBtn.on("click",function(e){e.preventDefault(),o.showVoters()});var p=new u(a,s,{no_init_focus:!0,no_init_validate:!0});p.resetSubmit(),p.refresh()},showVoters:function(){this.oListOfLists.setContent($('<div class="loader">'+a.getIcf()+"</div>"));var e=this;this.iLoadedVoters=0,$.post({url:"/api/playlists/list/"+this.sId+"/voters/0",dataType:"json",success:function(t){if(!t.result)return void e.setPopError(t.message);var s="";for(var o in t.voters)s+=i.render(y,t.voters[o]);var a=i.render(D,{sBack:n.__("misc.back"),sVoters:s,bLastPage:!!t.lastpage,sGood:e.oVote.sGood,sBad:e.oVote.sBad,sRating:e.oVote.sRating,sTitle:n.__("video.favs.people_who_voted"),sShowMore:n.__("profile.see_more_profiles")});e.oListOfLists.setContent(a);var r=e.getMainContainer();r&&r.length&&(r.find(".btn-back").on("click",function(t){t.preventDefault(),e.showEdit()}),!0!==t.lastpage&&r.find(".load-more-voters").on("click",function(t){t.preventDefault(),e.seeMoreVoters()}))},error:function(t,i,n){e.setPopError(n)}})},seeMoreVoters:function(){if(!this.bIsLoadingVoters){this.bIsLoadingVoters=!0,this.iLoadedVoters++;var e=this.getMainContainer();if(e&&e.length){var t=e.find(".action");if(t&&t.length){var n=this;$.post({url:"/api/playlists/list/"+this.sId+"/voters/"+this.iLoadedVoters,dataType:"json",success:function(s){if(n.bIsLoadingVoters=!1,!s.result)return void n.setPopError(s.message,"");for(var o in s.voters)$(i.render(y,s.voters[o])).insertBefore(t);!0===s.lastpage?e.find(".load-more-voters").remove():t.enable()},error:function(e,t,i){n.bIsLoadingVoters=!1,n.setPopError(i,"")}})}}}},concatNewVideos:function(e){this.aVideos=this.aVideos.concat(e),this.$VideoListContainer.children(".loader").remove();for(var t in e){var n=e[t],s={};n.id.toString()===this.sIdVideo&&(s.tb_thumb_end=i.render(d,{bIsVideo:!0})),this.$VideoListContainer.append($(xv.thumbs.get_thumb_block_html(n,"video",s).html))}this.oDragDrop.updateElementList()},updateEditInfos:function(){if(this.bNeedInfoUpdate)return void this.loadListInfos();if(!this.$VideoListContainer||!this.$VideoListContainer.length)return void this.initEditHTML();if(this.$VideoListContainer.empty(),this.reinitEditForm(),!this.iNbVideos)return this.$VideoListContainer.append($("<p>"+n.__("video.favs.no_video_in_list")+"</p>")),void this.$VideoListMenu.removeClass("init-ok");for(var t in this.aVideos){var s=this.aVideos[t],a={};s.id.toString()===this.sIdVideo&&(a.tb_thumb_end=i.render(d,{bIsVideo:!0})),this.$VideoListContainer.append($(xv.thumbs.get_thumb_block_html(this.aVideos[t],"video",a).html))}l.init_listing(this.$VideoListContainer,{tb_menu:!1,rotator:!1});var r=this,u=f.createElementsBased(this.iPage,this.iNbVideosPerPage,this.iNbVideos,"",{pagin_click:function(e){r.loadListInfos(e)}}),c=this.$VideoListContainer.parent();c.find(".pagination").remove(),u&&(u.insertBefore(this.$VideoListContainer),u.clone(!0).insertAfter(this.$VideoListContainer),f.add_all_in(c));var h=this.oListOfLists.getScrollableContainer();this.oDragDrop=new o({element_list:this.$VideoListContainer.find(".thumb-block"),scrollable_container:h,functions:{init_elems:function(e){e.find("a").prop("href","").prop("title","")},on_reorder_mode_enabled:function(){r.updateVideoListMenu()},on_reorder_mode_disabled:function(){r.$VideoListMenuLegend.html(r.getNbVideosTxt()),r.updateVideoListMenu()},on_scroll:function(e){if(e>=p?r.bVideoListMenuPined?r.oListOfLists.isInPop()||r.$VideoListMenu.css("top",e-r.iClosestListMenuRelativeParentTop+r.iHeaderMobileHeight+"px"):(r.bVideoListMenuPined=!0,r.$FormEditContainer.css("paddingBottom",r.$VideoListMenu.outerHeight()),r.$VideoListMenu.addClass("is-pined"),r.bVideoListMenuShowMoreAuto&&r.bVideoListMenuShowMore&&setTimeout(function(){r.toggleVideoListMenuShowMore(!0)},20),r.oListOfLists.isInPop()?r.$EditContainer.parent().append(r.$VideoListMenu):r.$VideoListMenu.css("top",e-r.iClosestListMenuRelativeParentTop+r.iHeaderMobileHeight+"px")):r.bVideoListMenuPined?(r.bVideoListMenuPined=!1,r.$FormEditContainer.css("paddingBottom",""),r.oListOfLists.isInPop()?r.$VideoListMenu.insertAfter(r.$FormEditContainer):r.$VideoListMenu.css("top",""),r.bVideoListMenuShowMoreAuto&&!r.bVideoListMenuShowMore&&r.toggleVideoListMenuShowMore(!0),r.$VideoListMenu.removeClass("is-pined")):p=Math.round(r.oListOfLists.isInPop()?r.$VideoListMenu.position().top:r.$VideoListMenu.offset().top-r.iHeaderMobileHeight),r.oDragDrop&&r.oDragDrop.isReorderActivated()){var t=r.oDragDrop.getElems();!r.bIsLoading&&r.bHasMoreVideosToLoad&&e+h.innerHeight()>=Math.round(t.last().offset().top)-20&&r.loadListInfos(r.iPage+1,!0)}},save_new_order:function(e,t,i){$.post({url:"/api/playlists/list/"+r.sId+"/move-after/"+t,dataType:"json",data:{ids:e,csrf:r.oCsrf.move},success:function(e){e.result||r.setPopError(e.message,null,function(){window.location.reload()}),r.bNeedTBElemUpdate=!0,"function"==typeof i&&i()},error:function(e,t,i){r.bIsLoadingVoters=!1,r.setPopError(i,null,function(){window.location.reload()})}})},get_new_order_first_position_id:function(e){if(0!==r.iPage){var t=function(e){r.setPopError(e,n.__("misc.error_occured"),function(){window.location.reload()})};return $.post({url:"/api/playlists/list/"+r.sId+"/videos/"+(r.iPage-1),dataType:"json",success:function(i){if(!i.result)return void t(i.message);if(!i.videos||!i.videos.length)return void t("");var n=i.videos.pop();if(!n||!n.id)return void t("");e(n.id)},error:function(e,i,n){t(n)}}),!1}e(0)},update_selected_count:function(t){t>0?e.dyn.is_mobile?r.$VideoListMenuLegend.html(t.toString()):r.$VideoListMenuLegend.html(t>1?n.__("video.favs.nb_selected_videos",{"%nb%":t.toString()}):n.__("video.favs.one_selected_video")):r.oDragDrop.isReorderActivated()?r.$VideoListMenuLegend.html('<span class="icon-f icf-arrows"></span> '+n.__("video.favs.reorder_videos")):r.$VideoListMenuLegend.html(r.getNbVideosTxt()),r.updateVideoListMenu()}}}),this.$VideoListMenu.addClass("init-ok"),this.updateVideoListMenu();var p=Math.round(this.oListOfLists.isInPop()?this.$VideoListMenu.position().top:this.$VideoListMenu.offset().top-this.iHeaderMobileHeight),_=this.$VideoListMenu.parents().filter(function(){var e=$(this);return e.is("body")||"relative"===e.css("position")}).slice(0,1);this.iClosestListMenuRelativeParentTop=Math.round(_.offset().top)},deleteAllVideos:function(){var e=s.confirm("<p>"+n.__("video.favs.empty_the_list_confirm")+'</p><p class="favlist-empty-checkbox"><label><input type="checkbox" /> '+n.__("video.favs.empty_the_list")+" <span>("+n.__("form.check_to_confirm")+")</span></label></p>"),t=this,i=e.getNode().find(".favlist-empty-checkbox");e.getNode().find(".ok-close").off("click").on("click",function(){if(!e.getNode().find("label input").prop("checked"))return s.alert(n.__("form.check_to_confirm")),void i.addClass("is-mandatory");e.onClose=null,e.close();var o=t.oCsrf.remove;t.setPopLoader(n.__("misc.delete_in_progress")),$.post({url:"/api/playlists/list/"+t.sId+"/empty",dataType:"json",data:{csrf:o},success:function(e){e.result||t.setPopError(e.message),t.reloadListInfos()},error:function(e,i,n){t.setPopError(n)},complete:function(){t.unsetPopLoader()}})})},deleteSelectedVideos:function(e){if(this.oDragDrop){"boolean"!=typeof e&&(e=!0);var t=this;if(!this.oDragDrop.countSelectedElems())return this.iNbVideos<1&&this.reloadListInfos(),this.oDragDrop.setReorderMode(null),void setTimeout(function(){t.unsetPopLoader()},400);var i=this.oDragDrop.popLastSelectedElement(),s=this.oCsrf.remove;$currentBlock=this.oDragDrop.getElemById(i),this.setPopLoader(n.__("misc.delete_in_progress"));var o=function(){t.iNbVideos--,i===t.sIdVideo&&(t.bInList=!1),t.bNeedTBElemUpdate=!0,$currentBlock.fadeOut(500,function(){t.bMaxVideosReached?(t.bMaxVideosReached=!1,t.$MaxVideosReached.hide()):t.bHadMaxVideosReached=!1,$(this).remove();for(var e in t.aVideos)if(i===t.aVideos[e].id.toString()){t.aVideos.splice(e,1);break}})},a=function(){t.unsetPopLoader(),t.deleteSelectedVideos(e)};if(!e)return o(),void a();$.post({url:"/api/playlists/list/"+this.sId+"/remove/"+i,dataType:"json",data:{csrf:s},success:function(e){if(!e.result)return void t.setPopError(e.message);o()},error:function(e,i,n){t.setPopError(n)},complete:function(){a()}})}},deleteVideo:function(e,t){var i=this.oCsrf.remove,s=this;this.setPopLoader(n.__("misc.delete_in_progress")),$.post({url:"/api/playlists/list/"+this.sId+"/remove/"+e,dataType:"json",data:{csrf:i},success:function(e){if(!e.result)return void s.setPopError(e.message);t()},error:function(e,t,i){s.setPopError(i)},complete:function(){s.unsetPopLoader()}})},moveVideosToOtherList:function(){var e=this.oDragDrop.getSelectedElems();if(!e.length)return!1;var t=this;require(["skins/default/video/playlists/manager"],function(i){i.loadMoveToList(t,e)})},moveVideosToOtherListSuccess:function(e,t){this.oListOfLists.updateListNbVideos(e,t),this.deleteSelectedVideos(!1)},setMovedVideos:function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];-1!==this.aVideos.indexOf(n)&&t++,this.sIdVideo===n&&(this.bInList=!0)}this.iNbVideos+=t,this.bNeedTBElemUpdate=!0,this.bNeedInfoUpdate=!0}},w}),define("text!skins/default/video/playlists/container.mustache",[],function(){return'<div class="favlists">\n\t{{^bMaxListsReached}}\n\t\t<button class="btn btn-default favlists-create" type="button">\n\t\t\t<span class="icon-f icf-favorites-add"></span>\n\t\t\t<span class="mobile-hide">{{{ sNew }}}</span>\n\t\t</button>\n\t{{/bMaxListsReached}}\n\t<h2>{{{ sTitle }}}</h2>\n\t<div class="favlists-actions">\n\t\t<div class="favlists-actions-line-1">\n\t\t\t{{#aFilters.length}}\n\t\t\t\t<label class="select-label">\n\t\t\t\t\t<span class="icon-f icf-sort-amount-asc"></span>\n\t\t\t\t\t<select class="favlists-order form-control">\n\t\t\t\t\t\t{{#aFilters}}\n\t\t\t\t\t\t\t<option value="{{{ sMode }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t{{/aFilters}}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t\t{{#aAlphaGroups.length}}\n\t\t\t\t\t<label class="favlists-filter-alpha-label select-label">\n\t\t\t\t\t\t<span class="icon-f icf-sort-alpha-asc"></span>\n\t\t\t\t\t\t<select class="favlists-filter-alpha form-control">\n\t\t\t\t\t\t\t{{#aAlphaGroups}}\n\t\t\t\t\t\t\t\t<option value="{{{ sOption }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t\t{{/aAlphaGroups}}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</label>\n\t\t\t\t{{/aAlphaGroups.length}}\n\t\t\t{{/aFilters.length}}\n\t\t\t{{^bNoSearch}}\n\t\t\t\t<label class="favlists-search">\n\t\t\t\t\t<input type="text" class="form-control" placeholder="{{{ sPlaceHolder }}}"/>\n\t\t\t\t\t<button class="btn btn-default" type="button"><span class="icon-f icf-search"></span></button>\n\t\t\t\t</label>\n\t\t\t{{/bNoSearch}}\n\t\t\t<button class="favlists-show-more-filters btn" type="button">\n\t\t\t\t<span class="icon-f icf-sliders"></span>\n\t\t\t\t<span class="icon-f icf-plus-circle icf-white-fill"></span>\n\t\t\t\t<span class="icon-f icf-minus-circle icf-white-fill"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="favlists-actions-more">\n\t\t\t<button class="favlists-display-mode btn btn-default {{{ sDisplayMode }}}" type="button">\n\t\t\t\t<span class="icon-f icf-grid-4"></span>\n\t\t\t\t<span class="icon-f icf-list-ul"></span>\n\t\t\t\t<span class="icon-f icf-columns"></span>\n\t\t\t</button>\n\t\t\t<label class="favlists-nb-per-page-cont">\n\t\t\t\t<span class="select-label">\n\t\t\t\t\t<select class="favlists-nb-per-page form-control">\n\t\t\t\t\t\t{{#aNbPerPage}}\n\t\t\t\t\t\t\t<option value="{{{ sQtt }}}"{{#bActive}} selected="selected"{{/bActive}}>{{{ sLabel }}}</option>\n\t\t\t\t\t\t{{/aNbPerPage}}\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t\t<span>{{{ sNbPerPage }}}</span>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\n\t<div class="mozaique thumbs-5-cols {{{ sDisplayMode }}}"></div>\n\n\t{{#sCancel}}\n\t\t<div class="favlists-actions-cancel">\n\t\t\t<button type="button" class="btn btn-default btn-lg">{{{ sCancel }}}</button>\n\t\t</div>\n\t{{/sCancel}}\n</div>'}),define("text!skins/default/video/playlists/create_list.mustache",[],function(){return'<div class="favlist-create">\n\t<button type="button" class="btn btn-default btn-back"><span class="icon-f icf-chevron-left"></span> {{{ sBack }}}</button>\n\n\t<span class="favlist-picto icon-f icf-favorites"></span>\n\n\t<div class="favlist-list-title"><div class="form-horizontal"><div class="form-group"><p>{{{ sTitle }}}</p></div></div></div>\n\n\t<div class="favlist-create-form"></div>\n</div>\n'}),define("text!skins/default/video/playlists/login_alert.mustache",[],function(){return'<div class="favlist-alert-login">\n\t<p>{{{ sAlert }}}</p>\n\t<p>\n\t\t<button class="btn btn-primary btn-lg" type="button">{{{ sBtn }}}</button>\n\t</p>\n</div>'}),define("skins/default/video/playlists/list_of_lists",["config/main","mustache","lib/i18n!front","lib/history","lib/tools","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","skins/form/validator","skins/common/history/one_info_tracker","skins/default/pagination","./one_list","text!./container.mustache","text!./create_list.mustache"],function(e,t,i,n,s,o,a,r,l,u,f,d,c){var h=function(e,t,i){this.bNoSearch=!0,this.bFirstLoad=!0,this.bLoaded=!1,this.bIsLoading=!1,this.bInPop=!1,this.sType=e,this.sId=null,this.sDisplayMode="mozaique",this.bShowMoreFilter=!1,this.oManager=t,this.oLoadedPlaylists={},this.aVisiblePlaylists=[],this.aFormCreateRules=[],this.sQuery=!1,this.iPage=0,this.iNbLists=0,this.iNbPerPage=0,this.iMobileOnlyWidth=480,this.iMobileWidth=768,this.$Content=$(),this.$FilterAlphaGroup=!1,this.$FilterSearchInput=!1,this.$FilterSearchBtn=!1,this.$FilterOrder=!1,this.$FilterShowMoreBtn=!1,this.$ToggleDisplayMode=!1,this.$ToggleNbPerPage=!1,this.$FormCreateContainer=!1,this.$ListsContainer=$(),this.$Pagination=!1,this.$ScrollableContainer=!1,this.bMaxListsReached=!1,this.bMaxVideosReached=!1,this.bUsesHashHistory="move_to"!==this.sType,this.sCurrentHash=!1,this.bHasError=!1,this.updateOptions(i),this.oHistorical={},this.initHistoricalNav();var n=this;$(window).on("resize",function(){"cols"===n.sDisplayMode&&$(window).width()<n.iMobileOnlyWidth&&n.toggleDisplayMode("list")})};return h.prototype={setId:function(e){this.sId=e},getId:function(){return this.sId},getNbLists:function(){return this.iNbLists},getDisplayMode:function(){return this.sDisplayMode},isInPop:function(){return this.bInPop},isPopOpen:function(){return!(!this.isInPop||!this.oPopContainer)&&this.oPopContainer.isOpen()},getLoadListUrl:function(){var e="/api/playlists/";switch(this.sOrder){case"alpha":e+="alpha",this.sFilterAlphaGroup&&(e+="/"+this.sFilterAlphaGroup);break;case"best":e+="best";break;case"new":e+="newest";break;case"old":e+="oldest";break;case"most":e+="most-videos";break;case"less":e+="less-videos";break;case"last":default:e+="last-updated"}return this.iPage&&(e+="/"+this.iPage),e},getContainer:function(){if(this.$Container&&0!==this.$Container.length)this.isInPop()&&this.oPopContainer.show();else if(!this.isInPop()&&this.oOptions&&this.oOptions.container&&0!==$(this.oOptions.container).length)this.bInPop=!1,this.$Container=$(this.oOptions.container),this.$ScrollableContainer=$(window);else{this.bInPop=!0;var e=this;this.oPopContainer=o.get($("body"),!0,"hide"),this.oPopContainer.setOverlayClosable(!0),this.oPopContainer.setCanReposition(!1),this.oPopContainer.addClass("x-overlay-body-bg favlist-overlay"),this.oPopContainer.onShow=function(){var e=$("body");e.data("scroll-save",$(window).scrollTop()),$(window).scrollTop(0),e.addClass("fav-list-of-list-opened")},this.oPopContainer.onHide=function(){if(e.$Container=!1,e.bLoaded=!1,e.aVisiblePlaylists=[],e.setHistoricalNav(!1),!e.oManager.isAListPopOpen()){var t=$("body");t.removeClass("fav-list-of-list-opened");var i=t.data("scroll-save");i&&setTimeout(function(){$(window).scrollTop(i)},50)}},this.oPopContainer.show(),this.$Container=$(this.oPopContainer.getContainer()),this.$ScrollableContainer=this.$Container}return this.$Container},getListContainer:function(){return this.$ListsContainer},getScrollableContainer:function(){return this.$ScrollableContainer&&0!==this.$ScrollableContainer.length||this.getContainer(),this.$ScrollableContainer},getSavedCreateForm:function(){var e=l.get("pl_manager_create_form");return!!(e&&Date.now()-e.timestamp<864e5)&&e},hasSavedCreateForm:function(){return!!this.getSavedCreateForm()},hasError:function(){return this.bHasError},setNbPerPage:function(e){if(e=parseInt(e),!this.bIsLoading&&!isNaN(e)&&e!==this.iNbPerPage){this.bIsLoading=!0,this.$Content.addClass("is-loading-lists");var t=this,i="/api/playlists/set-nb-per-page/"+e,n=function(e){t.$Content.removeClass("is-loading-lists"),t.setPopError(e)};$.post({url:i,dataType:"json",success:function(e){if(t.bIsLoading=!1,!e.result)return n(e.message),!1;t.$Content.removeClass("is-loading-lists"),t.loadList()},error:function(e,t,i){n(i)},complete:function(){t.bIsLoading=!1}})}},updateOptions:function(e){this.oOptions=e||{};var t=l.get("pl_manager_list_order"),i=l.get("pl_manager_list_display_mode");if(this.sOrder=t||(this.oOptions.sOrder||"alpha"),this.sIdVideo=this.oOptions.sIdVideo||!1,i=i||(this.oOptions.sDisplayMode||"mozaique"),"cols"===i&&$(window).width()<this.iMobileOnlyWidth&&(i="list"),this.toggleDisplayMode(i),"move_to"===this.sType){if("undefined"==typeof this.oOptions.oMoveToFromPlaylist||"undefined"==typeof this.oOptions.aMoveToSelectedIds||!this.oOptions.aMoveToSelectedIds.length)return console.error("Informations are missing to move the videos to another playlist"),void(this.bHasError=!0);this.oMoveToFromPlaylist=this.oOptions.oMoveToFromPlaylist,this.sMoveToFromId=this.oOptions.oMoveToFromPlaylist.getId(),this.sMoveToCsrf=this.oOptions.oMoveToFromPlaylist.getMoveToCsrf(),
this.aMoveToSelectedIds=this.oOptions.aMoveToSelectedIds,this.sMoveToFromId&&this.sMoveToCsrf||(console.error("Informations are missing to move the videos to another playlist"),this.bHasError=!0)}},loadList:function(){var e=this,t=this.getLoadListUrl(),n={wcf:this.hasSavedCreateForm()?0:1,id_video:this.sIdVideo,query:this.sQuery},s=function(t){e.setPopError(t,i.__("error.internal_err_please_reload"),function(){window.location.reload()})};"alpha"===this.sOrder&&(n.wag=1),this.bIsLoading=!0,this.$Content.addClass("is-loading-lists"),$.post({url:t,dataType:"json",data:n,success:function(t){if(e.bIsLoading=!1,e.$Content.removeClass("is-loading-lists"),!t.result)return s(t.message),!1;if(t.create_form&&t.create_form_validation_rules&&t.create_form&&t.create_form_validation_rules&&e.saveCreateForm(t.create_form,t.create_form_validation_rules),e.iNbLists=t.nb_lists,e.iNbPerPage=t.nb_per_page,e.aVisiblePlaylists=t.lists,e.bMaxListsReached=!!t.max_lists_reached,e.bMaxVideosReached=!!t.max_videos_reached,e.aAlphaGroups=t.alpha_groups||[],e.$Pagination=u.createElementsBased(e.iPage,t.nb_per_page,t.nb_lists_alpha||t.nb_lists,"",{pagin_click:function(t){e.loadPage(t)}}),e.bLoaded=!0,"move_to"===e.sType)for(var i in e.aVisiblePlaylists)if(e.aVisiblePlaylists[i].id===e.sMoveToFromId){e.aVisiblePlaylists.splice(i,1);break}e.showList()},error:function(t,i,n){e.bIsLoading=!1,e.$Content.removeClass("is-loading-lists"),s(n)}})},loadOnePlaylist:function(e,t){var n=this,s=function(e){n.setPopError(e,i.__("loading.error"),function(){t(!1)})};return this.bFirstLoad=!1,"undefined"!=typeof this.oLoadedPlaylists[e]?void t(this.oLoadedPlaylists[e]):this.bIsLoading?void t(!1):(this.bIsLoading=!0,void $.post({url:"/api/playlists/list/"+e,dataType:"json",success:function(i){if(n.bIsLoading=!1,!i.result)return void s(i.message);var o=new f(i.list,n);n.oLoadedPlaylists[e]=o,t(o)},error:function(e,t,i){s(i)},complete:function(){n.bIsLoading=!1}}))},loadPage:function(e){this.iPage=parseInt(e),isNaN(this.iPage)&&(this.iPage=0),this.loadList()},setPopError:function(e,t,n){this.unsetPopLoader(),"string"!=typeof t&&(t=i.__("misc.error_please_retry")),"string"==typeof e&&e.length?t.length&&(e=" : "+e):e="";var s=t+e;s.length||(s=i.__("misc.error_please_retry")),a.alert('<span class="text-danger">'+s+"</span>","function"==typeof n?n:null)},setPopLoader:function(e){this.unsetPopLoader(),this.oPopLoader=a.loading(e)},unsetPopLoader:function(){this.oPopLoader&&(this.oPopLoader.close(),this.oPopLoader=null)},initHistoricalNav:function(){if(this.bUsesHashHistory){var e=this;this.setHistoricalFunc(!1,function(){e.isInPop()?e.oPopContainer.hide():e.showList()}),this.setHistoricalFunc("lists",function(){e.showList()}),this.setHistoricalNav(!1)}},setHistoricalNav:function(e){this.bUsesHashHistory&&(e||!1===e)&&(e&&"function"==typeof this.oHistorical[e]?n.setUrlHash("_"+e):e||"function"!=typeof this.oHistorical.noHash||n.setUrlHash(""))},setHistoricalFunc:function(e,t){if(this.bUsesHashHistory&&t){var i=this;e&&"undefined"==typeof this.oHistorical[e]?n.registerHash("_"+e,function(e){i.onHistoricalNav(e)}):e||"undefined"!=typeof this.oHistorical.noHash||n.registerHash(!1,function(e){i.onHistoricalNav(e)}),e?this.oHistorical[e]=t:this.oHistorical.noHash=t}},onHistoricalNav:function(e){if(this.bUsesHashHistory){e===n.getNoHashValue()&&(e="_noHash");var t=this.oHistorical[e.substr(1)];"function"==typeof t&&t()}},showList:function(){if(!e.dyn.login_info.is_logged)return void this.displayLogin();if(!this.bIsLoading){if(!this.bLoaded)return void this.loadList();if(this.iPage>0&&(!this.aVisiblePlaylists||!this.aVisiblePlaylists.length)){var t=Math.ceil(this.iNbLists/this.iNbPerPage)-1;return t<this.iPage?this.iPage=t:this.iPage--,void this.loadList()}this.initEmptyMozaiqueContainer(!!this.oOptions.no_filter);for(var i in this.aVisiblePlaylists){var n,o=this.aVisiblePlaylists[i];"undefined"==typeof this.oLoadedPlaylists[o.id]?(n=new f(this.aVisiblePlaylists[i],this),this.oLoadedPlaylists[n.sId]=n):n=this.oLoadedPlaylists[o.id],this.$ListsContainer.append(n.getThumbBlockElem()),this.aVisiblePlaylists[i].is_watch_later&&this.aVisiblePlaylists[i].sId}if(this.$Pagination&&(this.$Pagination.insertBefore(this.$ListsContainer),this.$Pagination.clone(!0).insertAfter(this.$ListsContainer)),this.setContent(this.$Content,"lists"),this.bFirstLoad){this.bFirstLoad=!1;var a=this.oOptions.sLoadEditList?"_pl_edit_"+this.oOptions.sLoadEditList:s.getUrlHash();this.oOptions.sLoadEditList=!1,this.oOptions.bLoadCreateForm=!1,a&&(a=a.substr(1),"function"!=typeof this.oHistorical[a.toLowerCase()]&&(a=!1)),a&&(this.setHistoricalNav(a),this.onHistoricalNav("_"+a))}this.toggleShowMoreFilters(this.bShowMoreFilter)}},toggleDisplayMode:function(e){if("string"==typeof e)this.sDisplayMode=e;else{var t=$(window).width()<this.iMobileOnlyWidth;this.sDisplayMode="mozaique"===this.sDisplayMode?"list":"list"!==this.sDisplayMode||t?"mozaique":"cols"}l.set("pl_manager_list_display_mode",this.sDisplayMode),this.$ToggleDisplayMode&&this.$ToggleDisplayMode.length&&(this.$ToggleDisplayMode.removeClass("display-mozaique display-list display-cols").addClass("display-"+this.sDisplayMode),this.$ListsContainer.removeClass("display-mozaique display-list display-cols").addClass("display-"+this.sDisplayMode)),"lists"===this.sCurrentHash&&this.showList()},setOrder:function(e){this.sOrder=e,l.set("pl_manager_list_order",e),this.sFilterAlphaGroup=null,this.loadPage(0)},setOrderToAlphaGroup:function(e){this.sOrder="alpha",this.sFilterAlphaGroup="all"!==e?e:null,this.loadPage(0)},saveCreateForm:function(e,t){l.set("pl_manager_create_form",{create_form:e,create_form_validation_rules:t,timestamp:Date.now()})},setContent:function(e,t){var i=this.getContainer(),n=this.getScrollableContainer();i.html(e),this.isInPop()&&n.scrollTop(0),u.add_all_in(i),this.sCurrentHash=t,this.isInPop()||"lists"!==t||(t=!1),this.setHistoricalNav(t)},initEmptyMozaiqueContainer:function(n){var s=n?{}:{aFilters:[{sLabel:i.__("order.a_z"),sMode:"alpha",bActive:"alpha"===this.sOrder},{sLabel:i.__("misc.last_update"),sMode:"last",bActive:"last"===this.sOrder},{sLabel:i.__("video.favs.order.best"),sMode:"best",bActive:"best"===this.sOrder},{sLabel:i.__("video.favs.order.recent"),sMode:"new",bActive:"new"===this.sOrder},{sLabel:i.__("video.favs.order.oldest"),sMode:"old",bActive:"old"===this.sOrder},{sLabel:i.__("video.favs.order.most"),sMode:"most",bActive:"most"===this.sOrder},{sLabel:i.__("video.favs.order.less"),sMode:"less",bActive:"less"===this.sOrder}],aNbPerPage:[{sLabel:10..toLocaleString(e.dyn.locale),sQtt:"10",bActive:10===this.iNbPerPage},{sLabel:20..toLocaleString(e.dyn.locale),sQtt:"20",bActive:20===this.iNbPerPage},{sLabel:30..toLocaleString(e.dyn.locale),sQtt:"30",bActive:30===this.iNbPerPage},{sLabel:50..toLocaleString(e.dyn.locale),sQtt:"50",bActive:50===this.iNbPerPage},{sLabel:100..toLocaleString(e.dyn.locale),sQtt:"100",bActive:100===this.iNbPerPage}],sNbPerPage:i.__("js.pagination.per_page"),sPlaceHolder:i.__("video.favs.playlist_title"),bNoSearch:!!this.bNoSearch,sDisplayMode:"display-"+this.sDisplayMode};if("add_to"===this.sType)s.sTitle=i.__("video.favs.add_to_title"),s.sNew=i.__("video.favs.create_add_new");else if("move_to"===this.sType){var o=this.aMoveToSelectedIds.length;s.sTitle=o>1?i.__("video.favs.move_to_videos_title",{"%count%":o.toLocaleString(e.dyn.locale)}):i.__("video.favs.move_to_one_video_title"),s.sNew=i.__("video.favs.create_move_to_new"),s.sCancel=i.__("misc.cancel")}else s.sTitle=i.__("video.favs.manage_lists"),s.sNew=i.__("video.favs.create_new");if(s.bMaxListsReached=this.bMaxListsReached,this.aAlphaGroups.length>1){s.aAlphaGroups=[{sLabel:i.__("misc.all"),sOption:"all"}];for(var a in this.aAlphaGroups){var r=this.aAlphaGroups[a];if(!r.range||!r.range.length||!r.count)break;var l=r.range[0],u=r.range[r.range.length-1],f=l+"/"+u;"@"===l.substr(0,1)&&(l=l.substr(1)),"@"===u.substr(0,1)&&(u=u.substr(1));var c=(l!==u?l+" - "+u:l)+" ("+r.count.toLocaleString(e.dyn.locale)+")";s.aAlphaGroups.push({sLabel:c,sOption:f,bActive:f===this.sFilterAlphaGroup})}}this.$Content=$(t.render(d,s)),this.$ListsContainer=this.$Content.find(".mozaique");var h=this;this.$ToggleDisplayMode=this.$Content.find(".favlists-display-mode"),this.$ToggleDisplayMode.on("click",function(e){e.preventDefault(),h.toggleDisplayMode()}),this.$ToggleNbPerPage=this.$Content.find(".favlists-nb-per-page"),this.$ToggleNbPerPage.on("change",function(e){e.preventDefault(),h.setNbPerPage($(this).val())}),n||(this.$FilterOrder=this.$Content.find(".favlists-order"),this.$FilterOrder.on("change",function(e){e.preventDefault(),h.setOrder($(this).prop("value"))}),this.$FilterAlphaGroup=this.$Content.find(".favlists-filter-alpha"),this.$FilterAlphaGroup.on("change",function(e){e.preventDefault(),h.setOrderToAlphaGroup($(this).prop("value"))}),this.$FilterSearchInput=this.$Content.find(".favlists-search input"),this.$FilterSearchInput.on("keypress keydown",function(e){13===e.keyCode&&e.preventDefault()}),this.$FilterSearchInput.on("mouseup keyup",function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),h.searchQuery())}),this.$FilterSearchBtn=this.$Content.find(".favlists-search .btn"),this.$FilterSearchBtn.on("click",function(e){e.preventDefault(),h.searchQuery()}),this.$FilterShowMoreBtn=this.$Content.find(".favlists-show-more-filters"),this.$FilterShowMoreBtn.on("click",function(e){e.preventDefault(),h.toggleShowMoreFilters()}),"string"==typeof this.sQuery&&this.$FilterSearchInput.val(this.sQuery),"move_to"===this.sType?this.$Content.find(".favlists-create").remove():this.$Content.find(".favlists-create").on("click",function(){h.initCreateHTML()}),this.$Content.find(".favlists-actions-cancel .btn").on("click",function(){h.isInPop()&&h.oPopContainer.hide()}))},initCreateHTML:function(){var e=this,n=$(t.render(c,{sBack:i.__("misc.back"),sTitle:"add_to"===this.sType?i.__("video.favs.create_add_new"):i.__("video.favs.create_new")}));this.$FormCreateContainer=n.find(".favlist-create-form"),this.setContent(n),this.reinitCreateForm(),n.find(".btn-back").on("click",function(t){t.preventDefault(),e.showList()})},reinitCreateForm:function(e){var t=this;if(void 0===e&&(e=this.getSavedCreateForm()),!e){var n=this.getLoadListUrl(),s={wcf:1},o=function(e){t.setPopError(e,i.__("error.internal_err_please_reload"),function(){window.location.reload()})};return void $.post({url:n,dataType:"json",data:s,success:function(e){e.result||o(e.message),e.create_form&&e.create_form_validation_rules&&t.saveCreateForm(e.create_form,e.create_form_validation_rules),t.reinitCreateForm()},error:function(e,t,i){o(i)}})}this.$FormCreateContainer.html(e.create_form);var a=this.$FormCreateContainer.find("form");this.aFormCreateRules=e.create_form_validation_rules,new r(a,this.aFormCreateRules,{no_init_focus:!0,no_init_validate:!0}),a.on("submit",function(e){e.preventDefault();var n=a.serializeArray(),s=function(e){t.setPopError(e,null,function(){t.reinitCreateForm()})};t.setPopLoader(i.__("misc.submitting")),"add_to"===t.sType&&n.push({name:"id_document",value:t.sIdVideo}),$.post({url:"/api/playlists/create/",dataType:"json",data:n,success:function(e){if(!e.result)return void(2===e.code&&e.form&&e.js_validation_rules?t.reinitCreateForm({create_form:e.form,create_form_validation_rules:e.js_validation_rules}):s(e.message));if(e.list&&e.list.id){var i=e.list,n=new f(i,t),o=t.aVisiblePlaylists.length&&t.aVisiblePlaylists[0].watch_later?1:0;return t.aVisiblePlaylists.splice(o,0,i),t.oLoadedPlaylists[n.sId]=n,t.iNbLists++,e.video_added&&n.setToInList(!0,!1),void n.showEdit()}t.showList()},error:function(e,t,i){s(i)},complete:function(){t.unsetPopLoader()}})});var l=a.find("#"+a.prop("id")+"_status");if(l&&l.length){var u=new f,d=$(u.getVisibilityPicto(l.val())),c=$("<label></label>");c.addClass("favlist-status-label select-label").insertBefore(l).append(l),d.addClass("favlist-status-picto").prependTo(c),l.on("change",function(e){e.preventDefault();var t=$(u.getVisibilityPicto(l.val()));t.addClass("favlist-status-picto"),d.replaceWith(t),d=t})}},searchQuery:function(){var e=this.$FilterSearchInput.val();e&&e.length||(e=!1),this.sQuery!==e&&(this.sQuery=e,this.loadPage(0))},toggleShowMoreFilters:function(e){this.bShowMoreFilter="boolean"==typeof e?e:!this.bShowMoreFilter,this.$FilterShowMoreBtn.toggleClass("is-opened",this.bShowMoreFilter),$(".favlists-actions-more").toggleClass("is-visible",this.bShowMoreFilter)},displayLogin:function(){var e=this;require(["skins/default/form/login","text!skins/default/video/playlists/login_alert.mustache"],function(n,s){var o=$(t.render(s,{sAlert:i.__("video.favs.must_be_logged_in_to_fav"),sBtn:i.__("login_form.login_or_create_account")}));if(e.setContent(o),e.isInPop()){o.parents(".x-overlay").addClass("auto-width-popup");var a=$("body");a.removeClass("fav-list-of-list-opened");var r=a.data("scroll-save");r&&setTimeout(function(){$(window).scrollTop(r)},50)}n.setupLinks(o.find(".btn"))})},moveVideosToOtherList:function(e){if(!this.bIsLoading){var t="/api/playlists/list/"+this.sMoveToFromId+"/move-to/"+e,i=this;this.bIsLoading=!0,this.setPopLoader(),$.post({url:t,dataType:"json",data:{ids:this.aMoveToSelectedIds,csrf:this.sMoveToCsrf},success:function(t){if(i.bIsLoading=!1,!t.result)return i.isInPop()&&(i.oPopContainer.hide(),i.oMoveToFromPlaylist.reloadListInfos()),i.setPopError(t.message),!1;i.isInPop()?i.oPopContainer.hide():a.alert("OK"),i.oMoveToFromPlaylist.moveVideosToOtherListSuccess(e,i.aMoveToSelectedIds)},error:function(e,t,n){i.setPopError(n)},complete:function(){i.bIsLoading=!1,i.unsetPopLoader()}})}},updateListNbVideos:function(e,t){"undefined"!=typeof this.oLoadedPlaylists[e]&&this.oLoadedPlaylists[e].setMovedVideos(t)},updateLoadedListData:function(e,t,i){return"undefined"!=typeof this.oLoadedPlaylists[e]?this.oLoadedPlaylists[e].updateListData(t,i):[]},updateAllLoadedListData:function(e,t,i){return this.oManager.updateAllLoadedListData(e,t,i,this)}},h}),define("skins/default/video/playlists/manager",["lib/tools","./list_of_lists"],function(e,t){var i=function(){this.aLoadedListsOfLists=[]};return i.prototype={loadList:function(e,i){var n,s=e+(i&&i.sIdVideo?"_"+i.sIdVideo:"");if("undefined"!=typeof this.aLoadedListsOfLists[s])n=this.aLoadedListsOfLists[s],i&&n.updateOptions(i);else{if(n=new t("editWithoutInitLoad"===e?"edit":e,this,i),n.hasError())return!1;n.setId(s),this.aLoadedListsOfLists[s]=n}return"editWithoutInitLoad"!==e&&n.showList(),n},isAListPopOpen:function(){for(sLolId in this.aLoadedListsOfLists){if(this.aLoadedListsOfLists[sLolId].isPopOpen())return!0}return!1},updateAllLoadedListData:function(e,t,i,n){var s=[],o=n.getId();for(sLolId in this.aLoadedListsOfLists){var a=this.aLoadedListsOfLists[sLolId],r=a.updateLoadedListData(e,t,i);o===a.getId()&&(s=r)}return s},loadAddToList:function(e,t){return void 0===t&&(t={}),t.sIdVideo=e,this.loadList("add_to",t)},loadEditList:function(e){return void 0===e&&(e={}),this.loadList("edit",e)},loadCreateForm:function(e,t){return void 0===t&&(t={}),t.bLoadCreateForm=!0,this.loadList(e,t)},loadCreateList:function(e){return void 0===e&&(e={}),this.loadCreateForm("edit",e)},loadCreateAndAddToList:function(e,t){return void 0===t&&(t={}),t.sIdVideo=e,this.loadCreateForm("add_to",t)},removeVideoFromList:function(e,t,i){this.loadList("editWithoutInitLoad").loadOnePlaylist(t,function(t){t&&t.deleteVideo(e,i)})},loadMoveToList:function(e,t,i){return void 0===i&&(i={}),i.oMoveToFromPlaylist=e,i.aMoveToSelectedIds=t,this.loadList("move_to",i)},loadEditPlayList:function(e,t){var i=this.loadList("editWithoutInitLoad");i.loadOnePlaylist(e,function(e){e&&(t||(i.getContainer(),i.isInPop()&&i.setHistoricalNav("lists")),e.showEdit())})},autoOpenByHash:function(){var t=e.getUrlHash();if(t.length){var i,n;return"pl_edit_"===t.substr(1,8)?(n=t.substr(9),void this.loadEditPlayList(n,!0)):"pl_voters_"===t.substr(1,10)?(n=t.substr(11),i=this.loadList("editWithoutInitLoad"),void i.loadOnePlaylist(n,function(e){e&&e.showVoters()})):"lists"===t.substr(1,5)?void this.loadList("edit"):void 0}}},new i}),define("skins/default/mozaique/thumb_block_menu",["skins/common/mozaique/thumb_block_menu","skins/common/mozaique/thumb_block_menu/one_tb_menu","config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/history/page_view_history","skins/common/video/share","skins/default/video/watch_later","skins/default/mozaique/thumb_block_viewed","skins/default/profile/subscribe/btn"],function(e,t,i,n,s,o,a,r,l,u){var f,d=function(){e.apply(this),this.setEntry("watch_later","add_content_v_watch_later"),this.setEntry("sub_btn","add_content_v_sub_btn"),this.setEntry("pl_add","add_content_v_playlist_add"),"favorite"===i.data.action&&i.dyn.login_info&&i.dyn.login_info.is_logged&&i.dyn.login_info.id===i.data.fav_list.id_user?(this.setEntry("pl_remove","add_content_v_playlist_remove"),this.orderEntries(["watch_later","sub_btn","pl_add","pl_remove","vote_actions"])):this.orderEntries(["watch_later","sub_btn","pl_add","vote_actions"])};return d.prototype=new e,t.prototype.set_content=function(){"video"===this.options.type?this.set_content_video():"favlist"===this.options.type&&this.set_content_favlist()},t.prototype.add_content_v_viewed=function(){var e,t,i=this;if(this.btn.parents(".thumb-block").hasClass("viewed")){this.viewed=!0;var s=$("<p><span class='icon-f icf-eye'></span>"+n.__("video.was_watched")+"</p>");e=$("<li class='video-viewed'></li>"),e.append(s),this.$Content.append(e)}l.is_feature_enabled()?l.is_feature_enabled()&&(e=$("<li class='video-viewed-disable'></li>"),t=$("<a><span class='icon-f icf-eye-blocked'></span>"+n.__("video.disable_viewed_indic")+"</a>"),t.on("click",function(){l.toggle_feature(!1,!1),i.popup.close(),f.reset_initiated_contents()}),e.append(t),this.$Content.append(e)):(e=$("<li class='video-viewed-enable'></li>"),t=$("<a><span class='icon-f icf-eye'></span>"+n.__("video.enable_viewed_indic")+"</a>"),t.on("click",function(){l.toggle_feature(!1,!0),i.popup.close(),f.reset_initiated_contents()}),e.append(t),this.$Content.append(e)),this.btn.parents(".thumb-block").hasClass("viewed")&&o.canTrack()&&(e=$("<li class='video-viewed-remove'></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("history.remove")+"</a>"),t.on("click",function(){o.removeId("video",i.sId,function(){i.$ThumbBlock.find(".video-viewed").remove(),i.$Content.find(".video-viewed, .video-viewed-remove").remove()}),i.popup.close()}),e.append(t),this.$Content.append(e))},t.prototype.add_content_v_watch_later=function(){if(r.is_feature_enabled()){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-clock'></span>"+n.__("video.watch_later")+"</a>"),i=this;r.init_btn(t,this.sId,{popup_class:"watch-later-tb-menu",end_click_func:function(){i.popup.close()}}),e.append(t),this.$Content.append(e)}},t.prototype.add_content_v_sub_btn=function(){if(this.uploader_id&&this.uploader_profile&&!this.is_owner){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-feed'></span></a>"),i=this;new u(t,this.uploader_profile,this.uploader_id,this.sub_csrf,this.is_follower,this.is_owner,{state_info_pos:"append",subed_icf:!1,unsubed_text:n.__("subscriptions.subscribe")+"&nbsp;",subed_text:n.__("subscriptions.unsubscribe")+"&nbsp;",btn_display:"block",tooltip_class:"no-arrow",no_tooltip_validation:!!f.bAllSubscribeTooltipDisabled,resize_on_end:!1,end_function:function(e,t){i.popup.close(),f.reset_initiated_contents(),f.executeSubscribeEndFunctions(e,t)}}),e.append(t),this.$Content.append(e)}},t.prototype.add_content_v_playlist_add=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-favorites-add'></span>"+n.__("video.favs.add_to_list")+"</a>"),i=this;t.on("click",function(e){e.preventDefault(),i.popup.close();var t=s.loading();require(["skins/default/video/playlists/manager"],function(e){e.loadAddToList(i.sId),t&&t.close()})}),e.append(t),this.$Content.append(e)},t.prototype.add_content_v_playlist_remove=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.remove_video_from_list")+"</a>"),o=this;t.on("click",function(e){e.preventDefault(),o.popup.close();var t=s.loading();require(["skins/default/video/playlists/manager"],function(e){e.removeVideoFromList(o.sId,i.data.fav_list.id_list,function(){o.$ThumbBlock.fadeOut(500,function(){$(this).remove()})}),t&&t.close()})}),e.append(t),this.$Content.append(e)},t.prototype.set_content_favlist=function(){if(!this.$Content){this.$Content=$("<ul></ul>");var e=this.options.favorite.getType();"move_to"===e?this.add_content_f_move_to(this):("add_to"===e&&this.add_content_f_add_to(this),this.add_content_f_go_to_playlist(),this.add_content_f_go_to_playlist_random(),this.add_content_f_edit(),this.options.favorite.isWatchLater()||this.add_content_f_delete(),this.add_content_f_share()),this.popup.setContent(this.$Content)}},t.prototype.add_content_f_add_to=function(){if(this.options.favorite.isVideoInList()||!this.options.favorite.isListFull()){var e,t=$("<li></li>"),i=this;this.options.favorite.isVideoInList()?(e=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.remove_video_from_list")+"</a>"),e.on("click",function(){i.options.favorite.removeVideoFromList(),i.close_popup()})):(e=$("<a><span class='icon-f icf-plus-square'></span>"+n.__("video.favs.add_video")+"</a>"),e.on("click",function(){i.options.favorite.addVideoToList(),i.close_popup()})),t.append(e),this.$Content.append(t)}},t.prototype.add_content_f_go_to=function(){var e=$("<li class='link-go-to'></li>"),t=$("<a href='"+this.options.favorite.getUrl()+"'><span class='icon-f icf-arrow-right'></span> "+n.__("video.favs.goto")+"</a>");e.append(t),this.$Content.append(e)},t.prototype.add_content_f_go_to_playlist=function(){var e=this.options.favorite.getPlaylistUrl();if(e){var t=$("<li></li>"),i=$("<a href='"+e+"'><span class='icon-f icf-player-play-circle-o'></span> "+n.__("video.favs.play_playlist")+"</a>");t.append(i),this.$Content.append(t)}},t.prototype.add_content_f_go_to_playlist_random=function(){var e=this.options.favorite.getRandomPlaylistUrl();if(e){var t=$("<li></li>"),i=$("<a href='"+e+"'><span class='icon-f icf-random'></span> "+n.__("video.favs.play_random_playlist")+"</a>");t.append(i),this.$Content.append(t)}},t.prototype.add_content_f_share=function(){var e,t=$("<li></li>"),i=this.options.favorite.getVisibility();if("NOBODY"===i){e=$("<span><span class='icon-f icf-share'></span> "+n.__("video.favs.cant_share_private_playlist",{"%link%":"<strong class='u'>","%end_link%":"</strong>"})+"</span>"),e.addClass("tb-menu-share-title");var s=this;e.find("strong").on("click",function(){s.options.favorite.showEdit(),s.close_popup()}),t.append(e)}else e=$("<span><span class='icon-f icf-share'></span> "+n.__("video.favs.share_playlist")+"</span>"),e.addClass("tb-menu-share-title"),t.append(e),t.append(a.getShareElem(this.options.favorite.getFullUrl(),this.options.favorite.getName(),"full")),"ANYONE"!==i&&(e=$("<span>"+n.__("video.favs.share_not_everyone")+"</span>"),e.addClass("tb-menu-share-legend"),t.append(e));this.$Content.append(t)},t.prototype.add_content_f_edit=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-pencil'></span>"+n.__("video.favs.edit_this_list")+"</a>"),i=this;t.on("click",function(){i.options.favorite.showEdit(),i.close_popup()}),e.append(t),this.$Content.append(e)},t.prototype.add_content_f_delete=function(){var e=$("<li></li>"),t=$("<a><span class='icon-f icf-trash'></span>"+n.__("video.favs.delete_this_list")+"</a>"),i=this;t.on("click",function(){i.options.favorite["delete"](),i.close_popup()}),e.append(t),this.$Content.append(e)},t.prototype.add_content_f_move_to=function(){var e,t=$("<li></li>"),i=this;e=$("<a><span class='icon-f icf-mail-forward'></span>"+n.__("video.favs.move_to_this_list")+"</a>"),e.on("click",function(){i.options.favorite.moveVideosToThisList(),i.close_popup()}),t.append(e),this.$Content.append(t)},f=new d,xv.thumb_block_menus=f,f}),define("skins/default/mozaique/next_too_much",[],function(){var e=function(){};return e.prototype={remove:function(e){$(".thumb-block-pagin-next",e).each(function(){var e=$(this).offset(),t=$(this).prev(".thumb-block").offset();(!t||t.top<e.top)&&$(this).remove()})}},new e}),define("lib/helpers/thumbs/mozaique",["lib/tools","./engine_creator"],function(e,t){var i,n=function(e){return e++,e>9?0:e},s=function(e,t,i){return e++,e>=t?i?-1:0:e},o=function(e,t){var n=Math.floor((e-1)/3);return 0===n?"0%":-1*n*(i?100:t?56.25:75)+"%"},a=function(e){this.rotator=e,this.name=t.ENGINE_MOZAIQUE,this.is_video_engine=!1,this.thumb,this.ori_src,this.is_profile_pic,this.is_video_pic,this.is_16_9,this.idx,this.mozaique,this.videos,this.timer};return a.prototype={startVideoPic:function(e){var t=this;this.thumb=e;var i=this.thumb.attr("src");this.is_16_9=-1!==i.indexOf("/thumbs169"),this.idx=0,this.mozaique=this.thumb.next(".hovered"),0===this.mozaique.length&&(i=i.substring(0,i.lastIndexOf("/")).replace("thumbs169lll","thumbs169ll").replace("thumbslll","thumbsll"),this.mozaique=$('<img class="hovered" src="'+i+'/mozaiquehome.jpg" />').hide().insertAfter(this.thumb).on("mouseout",function(e){t.rotator.stop(e)})),this.timer=window.setTimeout(function(){t.nextVideo()},30)},startProfilePic:function(t,i){this.thumb=t,this.ori_src=this.thumb.attr("src"),this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),this.idx=-1,this.videos=i,e.preloadPicture(i[0].img);var n=this;this.timer=window.setTimeout(function(){n.nextProfPic()},30)},nextVideo:function(){if(this.thumb){var e=this;this.idx=n(this.idx),0===this.idx?this.mozaique.hide():1===this.idx?this.mozaique.show().css({marginTop:"0%",marginLeft:"0%"}):(this.mozaique.css({marginTop:o(this.idx,this.is_16_9),marginLeft:-100*Math.floor((this.idx-1)%3)+"%"}),void 0===i&&4===this.idx&&(i=Math.abs(this.thumb.height()-Math.abs(parseInt(this.mozaique.css("marginTop").replace("px",""))))>5)&&this.mozaique.css({marginTop:o(this.idx,this.is_16_9)})),this.timer=window.setTimeout(function(){e.nextVideo()},1e3)}},nextProfPic:function(){if(this.thumb){var t=this;this.idx=s(this.idx,this.videos.length,this.is_video_pic),this.is_video_pic&&(-1===this.idx?this.thumb.addClass("video-pic"):this.thumb.removeClass("video-pic")),this.thumb.attr("src",-1===this.idx?this.ori_src:this.videos[this.idx].img),this.is_profile_pic&&(-1===this.idx?this.thumb.addClass("profile-pic"):this.thumb.removeClass("profile-pic"));var i=s(this.idx,this.videos.length,this.is_video_pic);-1!==i&&e.preloadPicture(this.videos[i].img),this.timer=window.setTimeout(function(){t.nextProfPic()},1e3)}},stop:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.thumb&&(this.mozaique&&this.mozaique.hide(),this.thumb=null,this.ori_src="",this.mozaique=null,this.videos=null)},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx||this.mozaique&&this.mozaique.is(e)&&0===this.idx}},a}),define("lib/helpers/thumbs/mp4vp",["static/utils","./engine_creator"],function(e,t){var i=function(e){return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},n=function(e,t,i){return i?e.replace(".jpg",".mp4"):e.substring(0,e.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?l*\//,"/videopreview/")+(t?"_169.mp4":"_43.mp4")},s=function(e){var t=0;for(var i in e)t+=e[i];return t/e.length},o=function(e,t){return e++,e>=t?0:e},a=function(e){this.rotator=e,this.name=t.ENGINE_MP4,this.is_video_engine=!0,this.thumb,this.is_ad,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.nbplay=0,this.pgs_req,this.req_loaded={},this.req_start=0,this.req_total=0,this.req_dur=[],this.req_duration=[]};return a.prototype={startVideoPic:function(e){this.is_looping=!0,this.startPreview(e)},startProfilePic:function(e,t){this.is_looping=t.length+(e.hasClass("video-pic")?1:0)<2,this.videos=t,this.thumb=e,this.startPreview(e)},startPreview:function(e){this.nbplay=1;var t,i=this;if(this.thumb=e,e.hasClass("profile-pic")?(t=this.videos[0].img,this.thumb.prop("src",t).removeClass("profile-pic")):t=this.thumb.attr("src"),this.is_ad=!0===this.thumb.data("isad"),this.is_16_9=-1!==t.indexOf("/thumbs169"),this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var s=this.thumb.parent().prop("href"),o="";if(this.is_ad)o=' target="_blank" rel="noopener"';else{var a=this.thumb.parent().prop("target");a&&(o=' target="'+a+'"')}this.node=$('<div class="videopv"><a href="'+s+'"'+o+'></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(e){i.rotator.stop(e)})}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),t=n(t,this.is_16_9,this.is_ad),this.startPgsCheck(t);var r=this.createVideo(t);this.node.prepend(r)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=o(this.idx,this.videos.length);var e=n(this.videos[this.idx].img,this.is_16_9,this.is_ad);this.pgsnode.show(),this.startPgsCheck(e);var t=this.node.css("backgroundColor","").children("video"),i=this.createVideo(e,function(){t.remove(),t[0].src="",t[0].load()});t.after(i)},stop:function(){if(this.thumb){this.nbplay=0,this.stopPgsCheck(),this.node.css("backgroundColor","").hide();var e=this.node.children("video");e.remove(),e[0].src="",e[0].load(),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null}},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx},stopPgsCheck:function(){this.pgs_req&&(this.pgs_req.abort(),this.pgs_req=null,this.req_start=0,this.req_total=0)},startPgsCheck:function(t){var n=i(t);if("object"!=typeof this.req_loaded[n]&&(this.stopPgsCheck(),this.pgsbar.stop(!0).css("width","0%"),"boolean"!=typeof this.req_loaded[n])){var o=this;this.pgsbar.animate({width:"100%"},1e4,"linear"),this.req_start=(new Date).getTime(),this.req_total=0,this.pgs_req=e.createRequestObject(),this.pgs_req.open("GET",t),this.pgs_req.addEventListener("loadstart",function(e){o.req_start=(new Date).getTime()}),this.pgs_req.addEventListener("progress",function(e){if(e.lengthComputable&&(0===o.req_total&&o.req_dur.length>2&&o.pgsbar.stop(!0).animate({width:"100%"},Math.round(s(o.req_dur)*e.total),"linear"),o.req_total=e.total),!(o.req_dur.length>2)){if(e.lengthComputable){var t=Math.min(1,e.loaded/e.total*5/1),i=(new Date).getTime()-o.req_start;return t<1?void o.pgsbar.stop(!0).animate({width:"100%"},Math.round(i/t-i),"linear"):void o.pgsbar.stop(!0).animate({width:"100%"},1e3,"linear")}o.pgsbar.stop(!0).animate({width:"100%"},1e4,"linear")}}),this.pgs_req.addEventListener("load",function(){o.req_loaded[n]=!0}),this.pgs_req.addEventListener("abort",function(){!0!==o.req_loaded[n]&&delete o.req_loaded[n]}),this.pgs_req.send(),this.req_loaded[n]=this.pgs_req}},createVideo:function(e,t){var a=this,r=i(e),l=!1,u=document.createElement("video");u.src=e,u.muted=!0,u.autoplay="autoplay",u.disableRemotePlayback=!0,u.playsInline=!0,u.addEventListener("progress",function(){4===u.readyState&&u.seekable.end(0)==u.buffered.end(0)&&(a.req_loaded[r]=!0)}),u.addEventListener("timeupdate",function(){if(!l){var e=2;if(a.req_duration.length>1&&(e=s(a.req_duration)/1e3-.5),!a.is_looping&&u.duration-u.currentTime<=e){l=!0;var t=o(a.idx,a.videos.length),r=a.videos[t].img,f=i(r);"undefined"==typeof a.req_loaded[f]&&a.startPgsCheck(n(r,a.is_16_9,a.is_ad))}}}),this.is_looping?u.addEventListener("ended",function(){if(a.nbplay===a.rotator.max_nb_play)return void a.rotator.stop(!0,!0);a.nbplay++,this.play()}):u.addEventListener("ended",function(){a.req_loaded[r]=!0,a.nextPreview()});var f=!1,d=function(){if(!f){if(f=!0,u.removeEventListener("playing",d),a.req_total>0){var e=(new Date).getTime()-a.req_start;a.req_dur.push(e/a.req_total),a.req_duration.push(e),a.req_dur.length>4&&(a.req_dur.shift(),a.req_duration.shift())}a.stopPgsCheck(),
a.node.css("backgroundColor","#000"),a.pgsnode.hide(),"function"==typeof t&&t()}};return u.addEventListener("playing",d),u}},a}),define("lib/helpers/thumbs/tsvp",["./engine_creator"],function(e){var t=function(e){var t=0;for(var i in e)t+=e[i];return t/e.length},i=function(e,t){return e.substring(0,e.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?l*\//,"/videopreview/")+(t?"_169.ts":"_43.ts")},n=function(e,t){return e++,e>=t?0:e},s=function(e,t,i){i.stop(!0).css("width","0%").animate({width:"100%"},1e4,"linear"),JSMpeg.Player.call(this,e,t);var n=(new Date).getTime(),s=!1,o=this,a=!1;this.renderer.canvas.style.visibility="hidden",this.renderer.renderProgress=function(e){if(0!==e){o.is_cached=!1,i.stop(!0),s&&(s=!1,i.css("width",(100*e).toFixed(2)+"%"));var t=(new Date).getTime()-n;i.animate({width:"100%"},Math.max(200,Math.round(t/e-t)),"linear")}},this.renderer.render=function(e,t,n){this.enabled&&(a?"function"==typeof o.nextframe&&o.nextframe(o.video.getCurrentTime(),o.video.timestamps[o.video.timestamps.length-1].time):(a=!0,this.canvas.style.visibility="",i.stop(!0),"function"==typeof o.started&&o.started()),Object.getPrototypeOf(this).render.call(this,e,t,n),o.video.timestampIndex>0&&o.video.timestampIndex===o.video.timestamps.length-1&&"function"==typeof o.ended&&o.ended())},this.resetProgress=function(){s=!0}};s.prototype=Object.create(JSMpeg.Player.prototype,{}),s.prototype.is_cached=!0,s.prototype.started=null,s.prototype.nextframe=null,s.prototype.ended=null,s.prototype.constructor=s;var o=function(t){this.rotator=t,this.name=e.ENGINE_TS,this.is_video_engine=!0,this.thumb,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.player,this.nextplayer,this.nbplay=0,this.req_duration=[]};return o.prototype={startVideoPic:function(e){this.is_looping=!0,this.startPreview(e)},startProfilePic:function(e,t){this.is_looping=t.length+(e.hasClass("video-pic")?1:0)<2,this.videos=t,this.thumb=e,this.startPreview(e)},startPreview:function(e){this.nbplay=1;var t,i=this;if(this.thumb=e,e.hasClass("profile-pic")?(t=this.videos[0].img,this.thumb.removeClass("profile-pic")):t=this.thumb.attr("src"),this.is_16_9=-1!==t.indexOf("/thumbs169"),this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var n=this.thumb.parent().prop("href");this.node=$('<div class="videopv"><a href="'+n+'"></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(e){i.rotator.stop(e)})}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),this.player=this.createPlayer(t),this.node.prepend(this.player.options.canvas)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=n(this.idx,this.videos.length);var e=this.videos[this.idx].img;this.pgsnode.show();var t=this.player;this.player=this.createPlayer(e),$(t.options.canvas).after(this.player.options.canvas)},stop:function(){this.thumb&&(this.node.css("backgroundColor","").hide(),this.player&&(this.player.destroy(),this.player.options.canvas.parentNode&&this.player.options.canvas.parentNode.removeChild(this.player.options.canvas),this.player=null),this.nextplayer&&(this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null,this.nbplay=0)},isStillOnThumb:function(e){return this.thumb&&this.thumb.is(e)&&1===this.idx},createPlayer:function(e,o){if(e=i(e,this.is_16_9),!o&&this.nextplayer){if(this.nextplayer.source.url===e){this.nextplayer.resetProgress(),this.nextplayer.play();var a=this.nextplayer;return this.nextplayer=null,a}this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null}var r=this,a=new s(e,{canvas:document.createElement("canvas"),progressive:!1,loop:this.is_looping,autoplay:void 0===o||!o,decodeFirstFrame:!1},this.pgsbar);if(this.is_looping)a.started=function(){r.node.css("backgroundColor","#000"),r.pgsnode.hide()},a.ended=function(){if(r.nbplay===r.rotator.max_nb_play)return void r.rotator.stop(!0,!0);r.nbplay++};else{var l=this.player,u=(new Date).getTime();a.started=function(){if(r.node.css("backgroundColor","#000"),r.pgsnode.hide(),l&&(l.destroy(),l.options.canvas.parentNode.removeChild(l.options.canvas)),!a.is_cached){var e=(new Date).getTime()-u;r.req_duration.push(e),r.req_duration.length>4&&r.req_duration.shift()}},a.nextframe=function(e,i){if(!r.nextplayer){var s=2;if(r.req_duration.length>1&&(s=t(r.req_duration)/1e3-.5),i-e<=s){var o=n(r.idx,r.videos.length),a=r.videos[o].img;r.nextplayer=r.createPlayer(a,!0)}}},a.ended=function(){r.nextPreview()}}return a}},o}),define("lib/helpers/thumbs/engine_creator",["config/main","static/utils"],function(e,t){var i=function(){if(this.videopv_allowed=!1,this.videopv_enabled=!1,this.videopv_codec,"object"==typeof e.dyn&&"object"==typeof e.dyn.vp&&e.dyn.vp.allowed&&"string"==typeof e.dyn.vp.codec&&("mp4"===e.dyn.vp.codec||"ts"===e.dyn.vp.codec)&&(this.videopv_allowed=!0,this.videopv_codec=e.dyn.vp.codec,this.videopv_enabled=!e.dyn.vp.disabled,"mp4"===this.videopv_codec&&-1===navigator.userAgent.toLowerCase().indexOf("chrome-lighthouse"))){var t=document.createElement("video");"undefined"!=typeof t.canPlayType&&t.canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"').length>0||(this.videopv_codec="ts")}this.engineLoading=!1,this.engineName=!1,this.engineObj,this.libtimer,this.pending_create=[]};return i.prototype={ENGINE_MOZAIQUE:"mozaique",ENGINE_MP4:"mp4vp",ENGINE_TS:"tsvp",create:function(i){i&&this.pending_create.push(i);var n=this.ENGINE_MOZAIQUE,s=this;if(this.videopv_enabled)if("mp4"===this.videopv_codec)n=this.ENGINE_MP4;else if("ts"===this.videopv_codec)if("object"==typeof JSMpeg)n=this.ENGINE_TS,this.libtimer&&(window.clearInterval(this.libtimer),this.libtimer=null);else if(!this.libtimer)return t.loadScript(e.domains["static"]+"/v3/js/libs/jsmpeg.min.js"),void(this.libtimer=window.setInterval(function(){s.create()},500));if(this.engineName===n)return void this.executeCallbacks();if(this.engineLoading!==n){this.engineLoading=n;var o=function(e){s.engineLoading===n&&(s.engineLoading=!1,s.engineName=n,s.engineObj=e,s.executeCallbacks())};n===this.ENGINE_MOZAIQUE?require(["lib/helpers/thumbs/mozaique"],o):n===this.ENGINE_MP4?require(["lib/helpers/thumbs/mp4vp"],o):n===this.ENGINE_TS&&require(["lib/helpers/thumbs/tsvp"],o)}},executeCallbacks:function(){for(var e in this.pending_create)this.pending_create[e](this.engineObj);this.pending_create=[]}},new i}),function(e){function t(){var e=o();e!==a&&(a=e,u.trigger("orientationchange"))}function i(t,i,n,s){var o=n.type;n.type=i,e.event.dispatch.call(t,n,s),n.type=o}e.attrFn=e.attrFn||{};var n="ontouchstart"in window,s={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:n?"touchstart":"mousedown",endevent:n?"touchend":"mouseup",moveevent:n?"touchmove":"mousemove",tapevent:n?"tap":"click",scrollevent:n?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.touch={},e.isTouchCapable=function(){return s.touch_capable},e.getStartEvent=function(){return s.startevent},e.getEndEvent=function(){return s.endevent},e.getMoveEvent=function(){return s.moveevent},e.getTapEvent=function(){return s.tapevent},e.getScrollEvent=function(){return s.scrollevent},e.touch.setSwipeThresholdX=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.swipe_h_threshold=e},e.touch.setSwipeThresholdY=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.swipe_v_threshold=e},e.touch.setDoubleTapInt=function(e){if("number"!=typeof e)throw new Error("Interval parameter must be a type of number");s.doubletap_int=e},e.touch.setTapHoldThreshold=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");s.taphold_threshold=e},e.touch.setTapRange=function(e){if("number"!=typeof e)throw new Error("Ranger parameter must be a type of number");s.tap_pixel_range=e},e.each(["tapstart","tapend","tapmove","tap","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange","tap2","taphold2"],function(t,i){e.fn[i]=function(e){return e?this.on(i,e):this.trigger(i)},e.attrFn[i]=!0}),e.event.special.tapstart={setup:function(){var t=this,n=e(t);n.on(s.startevent,function o(e){if(n.data("callee",o),e.which&&1!==e.which)return!1;var a=e.originalEvent,r={position:{x:s.touch_capable?a.touches[0].pageX:e.pageX,y:s.touch_capable?a.touches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(e.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(e.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:e.target};return i(t,"tapstart",e,r),!0})},remove:function(){e(this).off(s.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,n=e(t);n.on(s.moveevent,function o(e){n.data("callee",o);var a=e.originalEvent,r={position:{x:s.touch_capable?a.touches[0].pageX:e.pageX,y:s.touch_capable?a.touches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(e.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(e.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:e.target};return i(t,"tapmove",e,r),!0})},remove:function(){e(this).off(s.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,n=e(t);n.on(s.endevent,function o(e){n.data("callee",o);var a=e.originalEvent,r={position:{x:s.touch_capable?a.changedTouches[0].pageX:e.pageX,y:s.touch_capable?a.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(e.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(e.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:e.target};return i(t,"tapend",e,r),!0})},remove:function(){e(this).off(s.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,n=this,o=e(n),a={x:0,y:0},r=0,l=0;o.on(s.startevent,function u(e){if(e.which&&1!==e.which)return!1;o.data("tapheld",!1),t=e.target;var f=e.originalEvent,d=Date.now();s.touch_capable?f.touches[0].pageX:e.pageX,s.touch_capable?f.touches[0].pageY:e.pageY,s.touch_capable?(f.touches[0].pageX,f.touches[0].target.offsetLeft):e.offsetX,s.touch_capable?(f.touches[0].pageY,f.touches[0].target.offsetTop):e.offsetY;a.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,a.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,r=a.x,l=a.y;var c=o.parent().data("threshold")?o.parent().data("threshold"):o.data("threshold"),h=void 0!==c&&!1!==c&&parseInt(c)?parseInt(c):s.taphold_threshold;return o.data("hold_timer",window.setTimeout(function(){var c=a.x-r,h=a.y-l;if(e.target==t&&(a.x==r&&a.y==l||c>=-s.tap_pixel_range&&c<=s.tap_pixel_range&&h>=-s.tap_pixel_range&&h<=s.tap_pixel_range)){o.data("tapheld",!0);for(var p=Date.now(),_=p-d,g=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],m=[],b=0;b<g.length;b++){var v={position:{x:s.touch_capable?f.changedTouches[b].pageX:e.pageX,y:s.touch_capable?f.changedTouches[b].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(f.changedTouches[b].pageX-(o.offset()?o.offset().left:0)):Math.round(e.pageX-(o.offset()?o.offset().left:0)),y:s.touch_capable?Math.round(f.changedTouches[b].pageY-(o.offset()?o.offset().top:0)):Math.round(e.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:e.target,duration:_};m.push(v)}var D=2==g.length?"taphold2":"taphold";o.data("callee1",u),i(n,D,e,m)}},h)),!0}).on(s.endevent,function f(){o.data("callee2",f),o.data("tapheld",!1),window.clearTimeout(o.data("hold_timer"))}).on(s.moveevent,function d(e){o.data("callee3",d),r=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,l=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2).off(s.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,n,o,a,r=this,l=e(r),u=null,f=!1;l.on(s.startevent,function d(i){return(!i.which||1===i.which)&&(l.data("doubletapped",!1),t=i.target,l.data("callee1",d),o=i.originalEvent,u||(u={position:{x:s.touch_capable?o.touches[0].pageX:i.pageX,y:s.touch_capable?o.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(i.pageX-(l.offset()?l.offset().left:0)),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(i.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:i.target,element:i.originalEvent.srcElement,index:e(i.target).index()}),!0)}).on(s.endevent,function c(t){var d=Date.now(),h=l.data("lastTouch")||d+1,p=d-h;if(window.clearTimeout(n),l.data("callee2",c),p<s.doubletap_int&&e(t.target).index()==u.index&&p>100){l.data("doubletapped",!0),window.clearTimeout(s.tap_timer);var _={position:{x:s.touch_capable?t.originalEvent.changedTouches[0].pageX:t.pageX,y:s.touch_capable?t.originalEvent.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(t.pageX-(l.offset()?l.offset().left:0)),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(t.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:t.target,element:t.originalEvent.srcElement,index:e(t.target).index()},g={firstTap:u,secondTap:_,interval:_.time-u.time};f||(i(r,"doubletap",t,g),u=null),f=!0,a=window.setTimeout(function(){f=!1},s.doubletap_int)}else l.data("lastTouch",d),n=window.setTimeout(function(){u=null,window.clearTimeout(n)},s.doubletap_int,[t]);l.data("lastTouch",d)})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,n=e(t),o=null,a=null,r={x:0,y:0};n.on(s.startevent,function l(e){return(!e.which||1===e.which)&&(a=Date.now(),o=e.target,n.data("callee1",l),r.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,r.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)}).on(s.endevent,function u(e){if(n.data("callee2",u),e.target==o){var l=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,f=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageY:e.pageY;s.tap_timer=window.setTimeout(function(){var o=r.x-l,u=r.y-f;if(!n.data("doubletapped")&&!n.data("tapheld")&&(r.x==l&&r.y==f||o>=-s.tap_pixel_range&&o<=s.tap_pixel_range&&u>=-s.tap_pixel_range&&u<=s.tap_pixel_range)){var d=e.originalEvent,c={position:{x:s.touch_capable?d.changedTouches[0].pageX:e.pageX,y:s.touch_capable?d.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(d.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(e.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(d.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(e.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:e.target};c.time-a<s.taphold_threshold&&i(t,"singletap",e,c)}},s.doubletap_int)}})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,n,o=this,a=e(o),r=!1,l=null,u={x:0,y:0};a.on(s.startevent,function f(e){return a.data("callee1",f),(!e.which||1===e.which)&&(r=!0,u.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,u.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,t=Date.now(),l=e.target,n=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)}).on(s.endevent,function d(e){a.data("callee2",d);var f=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,c=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,h=u.x-f,p=u.y-c;if(l==e.target&&r&&Date.now()-t<s.taphold_threshold&&(u.x==f&&u.y==c||h>=-s.tap_pixel_range&&h<=s.tap_pixel_range&&p>=-s.tap_pixel_range&&p<=s.tap_pixel_range)){for(var _=e.originalEvent,g=[],m=0;m<n.length;m++){var b={position:{x:s.touch_capable?_.changedTouches[m].pageX:e.pageX,y:s.touch_capable?_.changedTouches[m].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(_.changedTouches[m].pageX-(a.offset()?a.offset().left:0)):Math.round(e.pageX-(a.offset()?a.offset().left:0)),y:s.touch_capable?Math.round(_.changedTouches[m].pageY-(a.offset()?a.offset().top:0)):Math.round(e.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:e.target};g.push(b)}var v=2==n.length?"tap2":"tap";i(o,v,e,g)}})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){function t(i){r=e(i.currentTarget),r.data("callee1",t),f.x=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageX:i.pageX,f.y=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageY:i.pageY,d.x=f.x,d.y=f.y,l=!0;var n=i.originalEvent;o={position:{x:s.touch_capable?n.touches[0].pageX:i.pageX,y:s.touch_capable?n.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(n.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(i.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(n.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(i.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:i.target}}function i(t){r=e(t.currentTarget),r.data("callee2",i),d.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,d.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;var n,a=r.parent().data("xthreshold")?r.parent().data("xthreshold"):r.data("xthreshold"),c=r.parent().data("ythreshold")?r.parent().data("ythreshold"):r.data("ythreshold"),h=void 0!==a&&!1!==a&&parseInt(a)?parseInt(a):s.swipe_h_threshold,p=void 0!==c&&!1!==c&&parseInt(c)?parseInt(c):s.swipe_v_threshold;if(f.y>d.y&&f.y-d.y>p&&(n="swipeup"),f.x<d.x&&d.x-f.x>h&&(n="swiperight"),f.y<d.y&&d.y-f.y>p&&(n="swipedown"),f.x>d.x&&f.x-d.x>h&&(n="swipeleft"),n!=undefined&&l){f.x=0,f.y=0,d.x=0,d.y=0,l=!1;var _=t.originalEvent,g={position:{x:s.touch_capable?_.touches[0].pageX:t.pageX,y:s.touch_capable?_.touches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(_.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(t.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(_.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(t.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:t.target},m=Math.abs(o.position.x-g.position.x),b=Math.abs(o.position.y-g.position.y),v={startEvnt:o,endEvnt:g,direction:n.replace("swipe",""),xAmount:m,yAmount:b,duration:g.time-o.time};u=!0,r.trigger("swipe",v).trigger(n,v)}}function n(t){r=e(t.currentTarget);var i="";if(r.data("callee3",n),u){var a=r.data("xthreshold"),f=r.data("ythreshold"),d=void 0!==a&&!1!==a&&parseInt(a)?parseInt(a):s.swipe_h_threshold,c=void 0!==f&&!1!==f&&parseInt(f)?parseInt(f):s.swipe_v_threshold,h=t.originalEvent,p={position:{x:s.touch_capable?h.changedTouches[0].pageX:t.pageX,y:s.touch_capable?h.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(h.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(t.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(h.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(t.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:t.target};o.position.y>p.position.y&&o.position.y-p.position.y>c&&(i="swipeup"),o.position.x<p.position.x&&p.position.x-o.position.x>d&&(i="swiperight"),o.position.y<p.position.y&&p.position.y-o.position.y>c&&(i="swipedown"),o.position.x>p.position.x&&o.position.x-p.position.x>d&&(i="swipeleft");var _=Math.abs(o.position.x-p.position.x),g=Math.abs(o.position.y-p.position.y),m={startEvnt:o,endEvnt:p,direction:i.replace("swipe",""),xAmount:_,yAmount:g,duration:p.time-o.time};r.trigger("swipeend",m)}l=!1,u=!1}var o,a=this,r=e(a),l=!1,u=!1,f={x:0,y:0},d={x:0,y:0};r.on(s.startevent,t),r.on(s.moveevent,i),r.on(s.endevent,n)},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.moveevent,e(this).data.callee2).off(s.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){function t(e,t){n=t,i(a,n?"scrollstart":"scrollend",e)}var n,o,a=this,r=e(a);r.on(s.scrollevent,function l(e){r.data("callee",l),n||t(e,!0),clearTimeout(o),o=setTimeout(function(){t(e,!1)},50)})},remove:function(){e(this).off(s.scrollevent,e(this).data.callee)}};var o,a,r,l,u=e(window),f={0:!0,180:!0};if(s.orientation_support){var d=window.innerWidth||u.width(),c=window.innerHeight||u.height();r=d>c&&d-c>50,l=f[window.orientation],(r&&l||!r&&!l)&&(f={"-90":!0,90:!0})}e.event.special.orientationchange={setup:function(){return!s.orientation_support&&(a=o(),u.on("throttledresize",t),!0)},teardown:function(){return!s.orientation_support&&(u.off("throttledresize",t),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=o=function(){var e=!0,t=document.documentElement;return e=s.orientation_support?f[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",g)},teardown:function(){e(this).off("resize",g)}};var h,p,_,g=function(){p=Date.now(),_=p-m,_>=250?(m=p,e(this).trigger("throttledresize")):(h&&window.clearTimeout(h),h=window.setTimeout(t,250-_))},m=0;e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap",taphold2:"taphold"},function(t,i){e.event.special[t]={setup:function(){e(this).on(i,e.noop)}}})}(jQuery),define("jquery-mobile-events",function(){}),define("lib/helpers/thumbs/rotator",["lib/helpers/events","./engine_creator","jquery-mobile-events"],function(e,t){var i=function(){this.thumbs=$(),this.thumb,this.ori_src,this.is_video_thumb,this.is_profile_pic,this.is_video_pic,this.trigger_event,this.start_timer,this.last_start,this.touch_timer,this.max_nb_play=4,this.tmp_locked=!1,this.videopv_enabled=t.videopv_enabled,this.no_video_pv=null,this.initEngine(),this.testVideoPreview()};return i.prototype={ON_EVENT:/iPad|iPhone|iPod/.test(navigator.userAgent)?"swipe touchmove":"swipe touchstart mouseenter mousemove",addThumb:function(e){if(-1===this.thumbs.index(e)){var t=this;this.thumbs=this.thumbs.add($(e).on(this.ON_EVENT,function(e){var i=e.type;if("touchstart"!==i)t.start(this,i);else if(!t.touch_timer){var n=this;t.touch_timer=setTimeout(function(){t.touch_timer=null,t.start(n,i)},200)}}).on("touchend",function(){t.touch_timer&&clearTimeout(t.touch_timer)}).on("mouseleave",function(e){t.stop(e)}).on("mousedown",function(e){t.lock(e)}))}},initEngine:function(){var e=this,i=function(t){var i=!1,n=e.thumb;e.engine&&e.thumb&&(e.stop(!0),i=!0),e.engine=new t(e),i&&e.start(n,e.trigger_event)};t.create(i)},toggleVP:function(e){if(!t.videopv_allowed)return!1;if("boolean"!=typeof e)e=!this.videopv_enabled;else if(this.videopv_enabled===e)return!1;return null===this.no_video_pv&&this.testVideoPreview(!0),!0===this.no_video_pv&&e?(require(["lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t){var i;/iPad|iPhone|iPod/.test(navigator.userAgent)?i=e.__("rotator.ios_low_battery_alert"):(i="<p>"+e.__("rotator.allowed_multimedia_autoplay")+"</p>",/Firefox/.test(navigator.userAgent)&&(i+='<p><a href="https://support.mozilla.org/en-US/kb/playing-videos-firefox-android#w_disable-autoplay" target="_blank">'+e.__("misc.learn_how_here")+"</a></p>")),t.alert(i)}),!1):(this.videopv_enabled=e,t.videopv_enabled=this.videopv_enabled,this.initEngine(),this.onToggleVP(this.videopv_enabled),!0!==this.no_video_pv)},onToggleVP:function(e){},start:function(t,i){if(e.isScrolling())return!1;if($(t).hasClass("thumb-ad")&&this.engine!==this.ENGINE_MP4)return!1;if("mouseenter"===i&&this.tmp_locked){if(!((new Date).getTime()-this.tmp_locked>200))return;this.tmp_locked=!1}if(this.start_timer&&(window.clearTimeout(this.start_timer),this.start_timer=null),!this.thumb||!this.thumb.is(t)){var n=(new Date).getTime();if(this.last_start>0&&n-this.last_start<300||!this.engine){this.last_start=n;var s=this;return void(this.start_timer=window.setTimeout(function(){s.start(t,i)},300))}this.last_start=n,this.trigger_event=i,this.stop(!0),this.addThumbBlockStartedClass(t),this.thumb=$(t);var o=this.thumb.data("videos");if(this.is_video_thumb="object"!=typeof o,this.is_profile_pic=!1,this.is_video_pic=!1,this.is_video_thumb)this.engine.startVideoPic(this.thumb);else{if(this.ori_src=this.thumb.attr("src"),this.ori_src.indexOf("/profthumb/")>0&&(!o||0===o.length))return this.thumb.off("swipe touchstart mouseenter mouseleave mousedown"),void(this.thumb=null);if(this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),(!o||0===o.length)&&(!this.engine.is_video_engine||this.is_profile_pic))return;this.engine.startProfilePic(this.thumb,o)}}},stop:function(e,t){if(this.engine){if(!0!==e){if("swipe"===this.trigger_event)return;if(this.engine.isStillOnThumb(e.target))return}t&&(this.tmp_locked=(new Date).getTime()),this.engine.stop(),this.thumb&&(this.removeThumbBlockStartedClass(this.thumb),this.is_video_pic&&this.thumb.addClass("video-pic"),this.is_video_thumb||this.thumb.attr("src",this.ori_src),this.is_profile_pic&&this.thumb.addClass("profile-pic"),this.thumb=null)}},lock:function(e){1!==e.which||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(this.thumbs.off("swipe touchstart mouseenter mouseleave"),this.stop(!0))},addThumbBlockStartedClass:function(e){$(e).parents(".thumb-block").addClass("rotator-started")},removeThumbBlockStartedClass:function(e){$(e).parents(".thumb-block").removeClass("rotator-started")},testVideoPreview:function(e){if(!/iPad|iPhone|iPod|Firefox/.test(navigator.userAgent)&&!xv.conf.dyn.is_desktop||!t.videopv_allowed)return void(this.no_video_pv=!1);if(!0!==this.no_video_pv&&(t.videopv_enabled||!0===e)){var i=document.createElement("video");i.src=xv.conf.domains["static"]+"/v3/img/skins/common/blank.mp4",i.muted=!0,i.style.position="fixed",i.style.left="1px",i.style.top="1px",i.style.opacity="0.1",i.style.height="2px",i.style.width="2px",i.style.zIndex="9999",bVidRemoved=!1;var n=this;xv.dom.addEventListener(i,"suspend",function(){!0!==bVidRemoved&&null===n.no_video_pv&&(n.no_video_pv=!0,setTimeout(function(){!1===bVidRemoved&&(bVidRemoved=!0,n.toggleVP(!1),document.body.removeChild(i))},500))}),xv.dom.addEventListener(i,"play",function(){!0!==bVidRemoved&&!1!==n.no_video_pv&&(n.no_video_pv=!1,!1===bVidRemoved&&(bVidRemoved=!0,document.body.removeChild(i)))}),i.autoplay="autoplay",i.disableRemotePlayback=!0,i.playsInline=!0,document.body.appendChild(i)}}},i}),define("lib/helpers/thumbs_rotator",["./thumbs/rotator","./events"],function(e,t){var i,n,s,o,a=new e,r=0,l=function(){a.addThumb(this)};o=function(e,t){t?$(".thumb img",e).not(".no-rotate").each(l):$(".thumb-block",e).not(".no-rotate").find(".thumb img").each(l)},o.video_preview=a.videopv_enabled,o.toggle_vp=function(){return a.toggleVP()},o.update_vp=function(e){o.video_preview=e,"undefined"!=typeof xv.settings_btn&&"function"==typeof xv.settings_btn.updateVideoPreviewBtn&&xv.settings_btn.updateVideoPreviewBtn()},a.onToggleVP=function(e){o.update_vp(e)},o.createEngine=function(){},o(),t.addListener(t.TAB_HIDDEN,function(){a.stop(!0)});var u=function(){if(i=null,r=(new Date).getTime(),a.thumb){var e=a.thumb.offset();if(n<e.left||s<e.top)return void a.stop(!0);var t=a.thumb.outerWidth(!0),o=a.thumb.outerHeight(!0);return n>e.left+t||s>e.top+o?void a.stop(!0):void 0}};return $(window).on("mousemove",function(e){if(n=e.pageX,s=e.pageY,!i){var t=(new Date).getTime()-r;if(t<950)return void(i=window.setTimeout(u,1e3-t));u()}}),o}),define("lib/helpers/thumbs/wall",["./engine_creator"],function(e){var t=function(e,t){this.wall=e,this.thumb=$(t),this.playing=!1,this.max_nb_play=10,this.initEngine()};t.prototype={initEngine:function(){var t=this,i=function(e){t.engine=new e(t),t.checkPreview()};e.create(i)},shouldPlay:function(){return!!this.wall.playing&&this.wall.isInView(this.thumb,!0)},checkPreview:function(){if(this.engine)return this.shouldPlay()?void(this.playing||(this.playing=!0,this.engine.startVideoPic(this.thumb))):(this.engine.stop(),void(this.playing=!1))},stop:function(){}};var i=function(e){this.container=e,this.thumbs=[],this.playing=!0;var t=this,i=!1,n=null,s=null;this.container.on("scroll",function(){t.playing&&(i||t.start(),!0!==i&&(n=setTimeout(function(){i=!0},100)),clearTimeout(s),s=setTimeout(function(){clearTimeout(n),i=!1,t.start()},200))}),this.container.find(".thumb-block .thumb img,.wall-autoplay").each(function(){t.addThumb(this)})};return i.prototype={addThumb:function(e){for(var i in this.thumbs)if(this.thumbs[i].thumb.is(e))return;var n=new t(this,e);this.thumbs.push(n),n.checkPreview()},clear:function(){var e=this.playing;this.playing=!1;for(var t in this.thumbs)this.thumbs[t].checkPreview(),delete this.thumbs[t];this.thumbs=[],this.playing=e},isInView:function(e,t){var i=this.container.height(),n=e.offset().top-this.container.offset().top,s=n+e.height();return n>=0&&s<=i||!!t&&(n<0&&s>0||n>0&&n<=i)},start:function(){this.playing=!0;var e=0;for(var t in this.thumbs)this.thumbs[t].checkPreview(),this.thumbs[t].playing&&e++},stop:function(){this.playing=!1;for(var e in this.thumbs)this.thumbs[e].checkPreview()}},i}),define("skins/common/mozaique/premium_redirect_alert",["config/main"],function(e){var t=function(){};return t.prototype={init_listing:function(t){e.dyn.login_info.is_premium||e.dyn.is_premium||"default"!==e.sitename&&"xnxx"!==e.sitename||require(["config/main","lib/i18n!front","mustache","lib/helpers/overlay/box","lib/helpers/thumbs_rotator","lib/helpers/thumbs/wall","text!skins/"+e.sitename+"/mozaique/premium_redirect_alert.mustache","text!skins/"+e.sitename+"/header/premium_logo.mustache"],function(e,i,n,s,o,a,r,l){var u=$(".thumb-block[data-is-premium]",t);(u.length||(t&&t.length&&t.each(function(){$(this).hasClass("thumb-block")&&$(this).data("is-premium")&&(u=u.add($(this)))}),u.length))&&u.each(function(){var t=$(this).find("a").not(".thumb-block .metadata a"),u=t.first().prop("href"),f=$(this).find(".thumb a img").prop("src"),d=$(this).find(".cover-thumb").length>0,c=!$(this).hasClass("no-rotate");t.on("click",function(t){t.preventDefault();var h=s.get($("body"),!0,null,!0),p=$(n.render(r,{sTxt1:i.__("video.only_available_on",{"%site%":n.render(l,{sStaticDom:e.domains["static"]})}),sTxt2:i.__("premium.subscribe_enjoy"),sImgSrc:f,sStaticDom:e.domains["static"],sHref:u,sEnter:i.__("misc.enter_site",{"%site%":"default"===e.sitename?"RED":"GOLD"}),bCover:d}));h.setOverlayClosable(!0),h.setEscapeClosable(!0),h.addClass("auto-width-popup"),h.setContent(p),h.onShow=function(){c&&o.video_preview&&new a(h.node.find(".video"))},h.show("auto")})})})}},new t}),
define("skins/default/mozaique/thumb_block_common_init",["skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_viewed","skins/default/mozaique/next_too_much","lib/helpers/thumbs_rotator","skins/common/mozaique/premium_redirect_alert"],function(e,t,i,n,s){var o=function(){};return o.prototype={init_listing:function(o,a){a&&!1===a.tb_menu||e.init_listing(o),a&&!1===a.tb_viewed||t.init_listing(o),a&&!1===a.rotator||n(o,void 0!==a&&"boolean"==typeof a.is_thumb_list?a.is_thumb_list:null),a&&!1===a.next_too_much||i.remove(o),a&&!1===a.premium_redirect_alert||s.init_listing(o)}},my_tb_initiator=new o,xv.thumb_block_initiator=my_tb_initiator,my_tb_initiator}),define("text!skins/common/xcams/currently_online_popup.mustache",[],function(){return'<div class="live-models">\n\t<h2>{{{ title }}}</h2>\n\t<a href="{{{ home_url }}}" target="_blank" class="btn btn-xs btn-primary">{{{ more }}}</a>\n\t<div class="models">\n\t\t{{#models}}\n\t\t\t<a class="model" target="_blank" href="{{{ link_url }}}">\n\t\t\t\t<img src="{{^live_img_url}}{{{ img_url }}}{{/live_img_url}}{{#live_img_url}}{{{ live_img_url }}}" onerror="this.onerror=null;this.src=\'{{{ img_url }}}\';$(this).parent().addClass(\'not-live\');{{/live_img_url}}" alt="{{{ name }}}"/>\n\t\t\t\t<span class="name">{{{ name }}}</span>\n\t\t\t\t<span class="live badge">{{{ live }}}</span>\n\t\t\t</a>\n\t\t{{/models}}\n\t</div>\n</div>'}),define("text!skins/common/xcams/ad_xv_cams_player_video.mustache",[],function(){return'<div class="xv-cams-block player-video">\n\t<div class="xv-cams-header">\n\t\t<p>{{{ title }}}</p>\n\t</div>\n\t<div class="models">\n\t\t{{#models}}\n\t\t\t<a class="model" target="_blank" href="{{{ link_url }}}">\n\t\t\t\t<img src="{{^live_img_url}}{{{ img_url }}}{{/live_img_url}}{{#live_img_url}}{{{ live_img_url }}}" onerror="this.onerror=null;this.src=\'{{{ img_url }}}\';$(this).parent().addClass(\'not-live\');{{/live_img_url}}" alt="{{{ name }}}"/>\n\t\t\t\t<span class="name">{{{ name }}}</span>\n\t\t\t\t<span class="live badge">{{{ live }}}</span>\n\t\t\t</a>\n\t\t{{/models}}\n\t</div>\n\t<a href="{{{ home_url }}}" target="_blank" class="btn">\n\t\t<span class="part-left">\n\t\t\t<span class="icon-f icf-xcams"></span>\n\t\t\t{{{ seemore }}}\n\t\t</span>\n\t\t<span class="part-right">\n\t\t\t<span>{{{ filter }}}</span>\n\t\t</span>\n\t</a>\n</div>'}),define("text!skins/common/xcams/ad_xv_cams_footer.mustache",[],function(){return'<div class="xv-cams-block footer">\n\t<div class="models">\n\t\t{{#models}}\n\t\t\t<a class="model" target="_blank" href="{{{ link_url }}}">\n\t\t\t\t<figure>\n\t\t\t\t\t<img src="{{^live_img_url}}{{{ img_url }}}{{/live_img_url}}{{#live_img_url}}{{{ live_img_url }}}" onerror="this.onerror=null;this.src=\'{{{ img_url }}}\';$(this).parent().addClass(\'not-live\');{{/live_img_url}}" alt="{{{ name }}}"/>\n\t\t\t\t</figure>\n\t\t\t\t<span class="name">{{{ name }}}</span>\n\t\t\t\t<span class="live badge">{{{ live }}}</span>\n\t\t\t</a>\n\t\t{{/models}}\n\t</div>\n</div>'}),define("skins/common/xcams/current_live_cams",["config/main"],function(e){var t="rtl"===$("html").prop("dir"),i=function(){this.popups={},this.bDataIsSetted=!1,this.oCurrentLiveCams={},this.oAdsCam={}};return i.prototype={addHoverToLink:function(i,n){if(e.dyn.is_desktop){var s=this;require(["lib/i18n!front","lib/helpers/popup","lib/helpers/inline_loader"],function(e,o,a){s.popups[n]=new o(i,a.getSafe("after",'<div class="live-models-loading">'+e.__("misc.loading")).getHtml()+"</div>",{trigger:!1,autoclose:50,trigger_open:"mouseenter",position:{v:"below",h:t?"right":"left"}}),s.popups[n].onOpen=function(){s.getCurrentLiveCamsInfos(n)}})}},getCurrentLiveCamsInfos:function(t){if(this.bDataIsSetted)return void this.setCurrentLiveCams(t);"tab"===t&&(this.popups[t].onOpen=!1);var i,n=this;i="undefined"==typeof e.data.livecamscat?"/cams/live-banners/"+e.dyn.page_main_cat:"/cams/live-banners/"+e.dyn.page_main_cat+"/"+e.data.livecamscat,$.ajax({url:i,type:"POST",success:function(e){if(!e.result||"object"!=typeof e.codes||"undefined"==typeof e.codes[t])return void("tab"===t&&(n.popup.close(),n.popups[t].onOpen=function(){n.setCurrentLiveCamsInfos(t)}));n.bDataIsSetted||(n.oCurrentLiveCams=e,n.bDataIsSetted=!0),n.setCurrentLiveCams(t)},dataType:"json"})},setCurrentLiveCams:function(t){var i=this;require(["mustache","lib/tools","lib/i18n!front"],function(n,s,o){var a,r,l;"foot"===t&&"undefined"!=typeof i.oCurrentLiveCams.cat_codes&&"undefined"!=typeof i.oCurrentLiveCams.cat_banners?(l=!0,a=i.oCurrentLiveCams.cat_banners,r=i.oCurrentLiveCams.cat_codes):(l=!1,a=i.oCurrentLiveCams.banners,r=i.oCurrentLiveCams.codes);var u=JSON.parse(JSON.stringify(a)),f=i.oCurrentLiveCams.domain,d=[];e.dyn.camsnl?f+="/rooms/":f="gay"===e.dyn.page_main_cat?f+"/live/guys/":"trans"===e.dyn.page_main_cat?f+"/live/trans/":f,f=s.addUrlParam(f,"language",e.dyn.locale),f=s.addUrlParam(f,"mp_code",r[t]),f=s.addUrlParam(f,"utm_content",r[t]),f="gay"===e.dyn.page_main_cat?s.addUrlParam(f,"service","guys"):"trans"===e.dyn.page_main_cat?s.addUrlParam(f,"service","trans"):s.addUrlParam(f,"service","girls");for(var c in a){var h=i.oCurrentLiveCams.domain+a[c].link_url;h=s.addUrlParam(h,"mp_code",r[t]),h=s.addUrlParam(h,"utm_content",r[t]),"gay"===e.dyn.page_main_cat&&(h=s.addUrlParam(h,"service","guys")),"trans"===e.dyn.page_main_cat&&(h=s.addUrlParam(h,"service","trans")),u[c].link_url=h,d.push(u[c])}switch(t){case"tab":require(["text!skins/common/xcams/currently_online_popup.mustache"],function(s){i.popups[t].setContent(n.render(s,{models:d,home_url:f,title:"<span>"+("default"===e.sitename?"XVideos":"XNXX")+"</span> "+o.__("default"===e.sitename?"xcams.live_porn_models":"xcams.live_sex_models"),more:o.__("xcams.more_models"),live:o.__("xcams.live")}))});break;case"ntv":require(["text!skins/common/xcams/ad_xv_cams_player_video.mustache"],function(t){e.dyn.is_mobile||e.dyn.is_tablet||(i.oAdsCam.ntv=$(n.render(t,{models:d,home_url:f,title:"straight"===e.dyn.page_main_cat?o.__("xcams.chat_with_girls",{"%span_start%":"<span>","%span_end%":"</span>"}):"gay"===e.dyn.page_main_cat?o.__("xcams.chat_with_guys",{"%span_start%":"<span>","%span_end%":"</span>"}):o.__("xcams.chat_with_trans",{"%span_start%":"<span>","%span_end%":"</span>"}),seemore:o.__("xcams.clicktosee"),filter:"straight"===e.dyn.page_main_cat?o.__("xcams.girls"):"gay"===e.dyn.page_main_cat?o.__("xcams.guys"):o.__("xcams.trans"),live:o.__("xcams.live")})),i.oAdsCam.ntv.insertBefore("#video-player-bg"))});break;case"foot":require(["text!skins/common/xcams/ad_xv_cams_footer.mustache"],function(e){l&&(i.oAdsCam.foot=$(n.render(e,{models:d,home_url:f,live:o.__("xcams.live")})),i.oAdsCam.foot.insertBefore("#ad-footer"))})}})}},new i}),define("skins/common/mozaique/simple_dropdown",["lib/helpers/popup","static/cookies","lib/i18n!front"],function(e,t,i){var n=function(e){this.popups=[],e&&this.init(e)};return n.prototype={init:function(i){var n=this;if(i=$(i),i.find(".niv1").each(function(){var i=$(this).children(".niv2");if(0===i.length)return!0;i.on("click","a",function(){var e=$(this).data("cookie");e&&t.setLocal("sdpdwnce",e,12e4,"/")});var s=$(this).children(".show-niv2");s.removeAttr("href").addClass("init-ok");var o="simple-dropdown-pop",a=i.data("popup-class");a&&(o+=" "+a),s.hasClass("current")&&(o+=" current");var r=new e(s,i,{popup_class:o,autoclose_on_same_level:"simple_dropdown_niv2",max_width:function(){return Math.floor(96*$(window).innerWidth()/100)-4}});$(this).closest(".simple-dropdown").data("xvpop",r),n.popups.push(r);var l=i.children(".see-all");if(0===l.length)return!0;var u=i.data("type");if(!u)return l.remove(),!0;var f=i.find(".uls ul"),d=n.get_uls_to_center(f,u);f.addClass("hidden-pagin"),d.addClass("main-pagin"),l.on("click",function(){n.toggle_see_all($(this),r,u)})}),i.find(".year").length){var s=$(".year"),o=s.find(".year-months");if($(".year-label").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".year"),n=i.find(".year-months");if(n.is(":visible"))s.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden"),o.addClass("hidden");else if(s.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden is-close").find(".icf-angle-left").removeClass("hidden"),$(".with-days").length){var a=o.find(".year-month");a.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden")}}),$(".with-days").length){var a=o.find(".year-month"),r=a.find(".month-days");$(".month-label").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".year-month"),n=i.find(".month-days");n.is(":visible")?(a.removeClass("hidden").addClass("is-close").find(".icf-angle-left").addClass("hidden"),r.addClass("hidden")):(a.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden is-close").find(".icf-angle-left").removeClass("hidden"))})}}},close_all:function(){for(var e=0;e<this.popups.length;e++){var t=this.popups[e];t&&"function"==typeof t.close&&t.close()}},get_uls_to_center:function(e,t){var i=!1,n=!1,s=!1;return e.each(function(){if($(this).find(".current").length>0){if("weeks"===t)return $(this);i?n=$(this):(i=$(this),n=!0)}else if(n){if(!0!==n)return s=$(this),!1;n=$(this)}else i=$(this)}),s?"boolean"==typeof n?e.slice(0,"weeks"===t?1:3):$(i).add($(n)).add($(s)):e.slice("weeks"===t?-1:-3)},toggle_see_all:function(e,t,n){var s=t.popup.find(".niv2"),o=!s.hasClass("see-all");if(s.toggleClass("see-all",o),e.text(i.__(o?"misc.show_less":"misc.show_more")),t.position(),!o)return!1;var a=this.get_uls_to_center(s.find(".uls ul"),n),r=a.first().position().left,l=s.find(".uls").first();r>30&&l.scrollLeft(r-30)}},n}),define("skins/default/common_all",["config/main"],function(e){require(["skins/common/main_cats/switcher","skins/common/design/stop_anim_on_resize","skins/common/design/vh_tweak","skins/common/design/old_ie"],function(e){e.initBtnSwitchers($("#main-cat-switcher"),{position:{v:"below",h:"right"}}),e.initBtnSwitchers($("#mobile-slogan .main-cat-switcher-mobile"),{position:{v:"below",h:"left"}}),e.initBtnSwitchers($("#mobile-footer-slogan .main-cat-switcher-mobile"),{position:{v:"above",h:"left"}})}),e.dyn.login_info.is_logged&&require(["skins/default/features_test/videos_i_like"],function(e){e.clear()}),e.dyn.login_info.profile&&require(["skins/common/features_test/video_subs"],function(e){e.clear()}),e.dyn.appandroidpop&&require(["skins/common/download_app"],function(e){e._init()}),$(".thumb-block").length>0&&require(["skins/default/mozaique/thumb_block_common_init"],function(e){e.init_listing(!1,{rotator:!1})});var t=$("#nav .live-cams");(t.length>0||!e.dyn.is_premium&&e.dyn.slcams&&"undefined"!=typeof e.data.livecamscat)&&require(["skins/common/xcams/current_live_cams"],function(i){t.length>0&&i.addHoverToLink(t,"tab"),!e.dyn.is_premium&&e.dyn.slcams&&"undefined"!=typeof e.data.livecamscat&&i.getCurrentLiveCamsInfos("foot")});var i=$(".simple-dropdown");i.length>0&&require(["skins/common/mozaique/simple_dropdown"],function(e){new e(i)}),require(["static/utils","lib/helpers/overlay/contextual_popup"],function(e,t){e.contextual_popup=t}),!e.dyn.is_premium||e.dyn.login_info&&e.dyn.login_info.is_premium&&e.dyn.login_info.is_logged||require(["skins/default/mozaique/thumb_block_menu"],function(e){e.disableAll()})}),define("skins/common/form/login",["config/main","./login/standard","./login/premium"],function(e,t,i){return e.dyn.premium?new i:new t}),define("skins/default/header/theme_switcher",["config/main","static/utils","lib/i18n!front"],function(e,t,i){var n=function(){this.bGetSettingsBtn=!1,this.bIsOldIE="undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent),this.bIsDisabled=!1,this.bIsDev=!0===e.is_dev,this.aBtns=[],this.oTimerSwitchAuto=null,this.initModeAuto()};return n.prototype={initModeAuto:function(){return"undefined"==typeof e.dyn.utheme?void this.setThemeWebsite("light"):(this.setThemeReference(),this.getThemeStorage(),this.getThemeWebsite(),"matchMedia"in window&&"manual"!==this.oThemeStorage.m&&(this.setThemeBrowser(),"black"===this.getThemeBrowser()&&"auto"!==this.oThemeStorage.m&&(this.setModeAuto(!1),this.getThemeWebsite()!==this.getThemeBrowser()))?void this.switchTheme(this.getThemeBrowser()):void("auto"===e.dyn.utheme?(this.setModeAuto(!0),this.initModeAutoByHour()):(this.setModeAuto(!1),this.setThemeWebsite(e.dyn.utheme),e.dyn.utheme!==this.oThemeStorage.i?this.switchTheme(this.getThemeWebsite()):this.setThemeStorage())))},initModeAutoByHour:function(){this.oTimer!==undefined&&clearTimeout(this.oTimer),this.getThemeWebsite()!==this.getThemeReference()?this.switchTheme(this.getThemeReference()):null!==this.oThemeStorage.i&&this.oThemeStorage.i!==this.getThemeReference()?(this.setThemeWebsite(this.oThemeStorage.i),this.switchTheme(this.getThemeReference())):this.setThemeStorage();var e=this.getDelayAutoSwitch(),t=this;e>0&&(this.oTimer=setTimeout(function(){t.setCurrentHour(),t.setThemeReference(),t.setDelayAutoSwitch(),t.initModeAutoByHour()},e))},setThemeReference:function(){this.getCurrentHour()>=0&&this.getCurrentHour()<=6||this.getCurrentHour()>=21&&this.getCurrentHour()<=23?this.sThemeReference="black":this.sThemeReference="light"},setThemeWebsite:function(e){this.sThemeWebsite=e},setThemeBrowser:function(){this.bMatchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.sThemeBrowser=this.bMatchMedia.matches?"black":"light"},setModeAuto:function(e){this.bModeAuto=e},setThemeStorage:function(){"boolean"!=typeof this.getModeAuto()&&("true"===this.getModeAuto()||null===this.getModeAuto()?this.setModeAuto(!0):this.setModeAuto(!1)),this.oThemeStorage={i:this.getThemeWebsite(),m:this.getModeAuto()?"auto":"manual"},xv.storage.remove(this.sThemeStorageValue),xv.storage.set(this.sThemeStorageValue,this.oThemeStorage),xv.cookies.setLocal("session_ath",this.getThemeWebsite(),null,"/")},setCurrentHour:function(){var e=new Date;this.iCurrentHour=e.getHours()},setDelayAutoSwitch:function(){var e,t=new Date,i=t.getTime(),n=i+6e4*t.getTimezoneOffset()-i%864e5,s=[7,0,0],o=[21,0,0];e=t.getHours()<7?n+36e5*s[0]+6e4*s[1]+1e3*s[2]-i:t.getHours()>=7&&t.getHours()<21?n+36e5*o[0]+6e4*o[1]+1e3*o[2]-i:n+864e5+36e5*s[0]+6e4*s[1]+1e3*s[2]-i,this.iAutoSwitchHour=e},getThemeReference:function(){return this.sThemeReference},getThemeWebsite:function(){return"undefined"==typeof this.sThemeWebsite&&("undefined"==typeof this.oThemeStorage||null===this.oThemeStorage.i?this.setThemeWebsite("light"):this.setThemeWebsite(this.oThemeStorage.i),this.setThemeWebsite("light")),this.sThemeWebsite},getThemeBrowser:function(){return this.sThemeBrowser},getModeAuto:function(){return"undefined"==typeof this.bModeAuto&&("auto"===e.dyn.utheme?this.setModeAuto(!0):this.setModeAuto(!1)),this.bModeAuto},getThemeStorage:function(){this.sThemeStorageValue="user_theme_fav",this.oThemeStorage=xv.storage.get(this.sThemeStorageValue),null===this.oThemeStorage&&(this.oThemeStorage={i:null,m:null})},getCurrentHour:function(){return"undefined"==typeof this.iCurrentHour&&this.setCurrentHour(),this.iCurrentHour},getDelayAutoSwitch:function(){return"undefined"==typeof this.iAutoSwitchHour&&this.setDelayAutoSwitch(),this.iAutoSwitchHour},switchTheme:function(t){if(!0!==this.bIsDisabled){this.bIsDisabled=!0,this.disableBtns();var i=this,n=this.getModeAuto()?"/switch-theme/auto?no_redirect=1":"/switch-theme/"+t+"?no_redirect=1",s=function(){i.updateBtn(o),i.enableBtns(),i.bIsDisabled=!1,i.setThemeWebsite(t),i.setThemeStorage(),$(".listing-settings-popup").removeClass("show-theme")},o=t;if((void 0===t||"auto"===t||t===this.getThemeWebsite())&&("auto"===t&&(o="auto",t=this.getThemeReference()),this.getThemeWebsite()===this.getThemeReference()))return void $.ajax({type:"POST",url:n,success:s});var a=$("style.ajax-loaded"),r=$("link#xvstyles"),l=$("link#xvstylesspec"),u=0===window.location.pathname.split("#")[0].indexOf("/account"),f=u?"account":"main",d=a.length<1?r.attr("href"):a.attr("data-href"),c=[],h=[];if(this.bIsDev)var p=d.split("css/")[0]+"css/"+e.sitename+"/";switch(t){case"black":this.bIsDev?(c.push(p+f+"-black-base.css"),c.push(p+f+"-black-specific.css")):(c.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.ab:e.dyn.thvers.mb)+"/v3/css/"+e.sitename+"/"+f+"-black-base.css"),c.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.abs:e.dyn.thvers.mbs)+"/v3/css/"+e.sitename+"/"+f+"-black-specific.css"));break;case"light":this.bIsDev?c.push(p+f+".css"):c.push(e.domains["static"]+"/v-"+(u?e.dyn.thvers.a:e.dyn.thvers.m)+"/v3/css/"+e.sitename+"/"+f+".css")}for(var _ in c)!function(e){$.get(e,function(t){if(h.push({path:e,css:t.replace(/url\((\'|\")?\./g,"url($1"+d.substr(0,d.lastIndexOf("/")+1)+".").replace(/url\((\'|\")?\//g,"url($1"+xv.conf.domains["static"]+"/")}),!(h.length<c.length)){var i=null;a.length>0&&(i=$("style.ajax-loaded"));for(var o in h)$('<style class="ajax-loaded" data-href="'+h[o].path+'"></style>').html(h[o].css).appendTo("head");a.length<1?(r.remove(),l.remove()):i.remove(),$.ajax({type:"POST",url:n,success:s})}})}(c[_])}},canInit:function(){return!this.bIsOldIE},updateBtn:function(e){if("undefined"!=typeof this.sBtn){var n;n="auto"===e?i.__("theme.automatic"):"light"===e?i.__("theme.light"):i.__("theme.dark"),$(".site-settings").find(".theme-label").text(t.unescape(n))}},disableBtns:function(){for(var e=0;e<this.aBtns.length;e++)$Btn=this.aBtns[e],$Btn.length&&$Btn.addClass("isLoading").prop("disabled",!0)},enableBtns:function(){for(var e=0;e<this.aBtns.length;e++)$Btn=this.aBtns[e],$Btn.length&&$Btn.removeClass("isLoading").prop("disabled",!1)},getSettingsBtn:function(e){this.bGetSettingsBtn=!0;var n;return n=this.getModeAuto()?i.__("theme.automatic"):"light"===this.getThemeWebsite()?i.__("theme.light"):i.__("theme.dark"),"undefined"!=typeof this.oThemeStorage&&null!==this.oThemeStorage.i||(n=i.__("theme.light")),this.sBtn=(e?"":'<button type="button">')+'<span class="icon-f icf-theme-switch"></span>'+t.unescape(i.__("theme.appearance"))+' : <strong class="theme-label">'+t.unescape(n)+"</strong>"+(e?"":"</button>"),this.sBtn},initBtn:function(e){if(this.canInit()){e=$(e);var t=this;e.off("click").on("click",function(i){i.preventDefault(),e.closest("li").removeClass("current");var n=$(i.currentTarget),s=n.data("mode"),o=!0;"auto"===s?t.getModeAuto()?o=!1:t.setModeAuto(!0):("undefined"==typeof t.oThemeStorage&&t.getThemeStorage(),"manual"===t.oThemeStorage.m&&s===t.getThemeWebsite()?o=!1:t.setModeAuto(!1)),o?(t.switchTheme(s),n.closest("li").addClass("current")):$(".listing-settings-popup").removeClass("show-theme")}),this.aBtns.push(e)}},setClassCurrent:function(e){var t=this.getModeAuto()?"auto":this.getThemeWebsite();"undefined"!=typeof this.oThemeStorage&&null!==this.oThemeStorage.i||(t="light"),e.each(function(){var e=$(this);e.closest("li").toggleClass("current",e.data("mode")===t)})}},n}),define("text!skins/common/geo_switch/contener.mustache",[],function(){return'<div>\n\t<div class="filter">\n\t\t<label>\n\t\t\t<span class="icon-f icf-search"></span>\n\t\t\t<input type="text"{{#placeholder}} placeholder="{{ placeholder }}"{{/placeholder}}/>\n\t\t</label>\n\t\t<button type="button" class="clear"><span class="icon-f icf-close-thin"></span></button>\n\t</div>\n\t<ul class="countries row">{{{ list }}}</ul>\n\t{{^simple_contener}}\n\t<ul class="width-ref row">{{{ ref-list }}}</ul>\n\t<div class="see-all"><button type="button" class="btn btn-primary"></button></div>\n\t{{/simple_contener}}\n</div>'}),define("text!skins/common/geo_switch/list_element.mustache",[],function(){return'<li class="{{^empty}}country-{{ code }} {{/empty}}col-xs-12 {{^half}}col-sm-4 col-md-3 col-lg-2{{/half}}{{#half}}col-sm-2 col-md-1-5 col-lg-1{{/half}}{{#cur}} current{{/cur}}{{#empty}} empty{{/empty}}">{{^empty}}\n\t<a href="/change-country/{{ code }}" class="btn"><span class="flag-small flag-{{ code }}"></span> {{{ name }}}</a>\n{{/empty}}</li>'}),define("text!skins/common/geo_switch/list_no_result.mustache",[],function(){return'<li class="no-result col-xs-12">\n\t{{{ no_result }}}\n</li>'}),define("skins/common/geo_switch/geo_switch",["config/main","mustache","lib/i18n!front","lib/helpers/overlay","lib/helpers/inline_loader","skins/common/history/one_info_tracker","text!./contener.mustache","text!./list_element.mustache","text!./list_no_result.mustache"],function(e,t,i,n,s,o,a,r,l){var u=["AF","AR","AT","AU","AZ","BD","BE","BG","BO","BR","CA","CH","CL","CM","CN","CO","CY","CZ","DE","DK","DO","EC","EG","ES","FI","FR","GB","GE","GR","GT","HK","HU","ID","IE","IL","IN","IQ","IS","IT","JO","JP","KE","KH","KR","LA","LB","LK","LV","MA","MD","MM","MT","MX","MY","NG","NL","NO","NZ","PE","PH","PK","PL","PT","QA","RO","RS","RU","SE","SG","SK","SN","TH","TN","TW","TZ","UA","US","VE","VN","ZA"];xv||(xv={});var f=function(e,t){var i=e.trim().toLowerCase();return i=i.replace(new RegExp(/[_\s]/g)," "),i=i.replace(new RegExp(/[àáâãäå]/g),"a"),i=i.replace(new RegExp(/æ/g),"ae"),i=i.replace(new RegExp(/ç/g),"c"),i=i.replace(new RegExp(/[èéêë]/g),"e"),i=i.replace(new RegExp(/[ìíîï]/g),"i"),i=i.replace(new RegExp(/ñ/g),"n"),i=i.replace(new RegExp(/[òóôõö]/g),"o"),i=i.replace(new RegExp(/œ/g),"oe"),i=i.replace(new RegExp(/[ùúûü]/g),"u"),i=i.replace(new RegExp(/[ýÿ]/g),"y"),i=i.replace(new RegExp(/\W/g)," "),i=i.trim(),i=i.replace(new RegExp(/([\s])+/g),t?" ":"")},d=function(){this.toExWhenInit=[],this.initiated,this.popup,this.countries,this.cur_country;var t=$("#disclaimer_vpn_another");if(this.is_vpn_disclaimer=t.length>0,this.is_vpn_disclaimer||(t="default"===e.sitename?$("#nav .main-categories .country-switch"):$("#site-nav .country-switch, .topbar .country-switch"),0!==t.length)){var i=this;$(window).on("resize",function(){i.update_popup()}),t.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.auto_show_popup()}).addClass("init-ok")}};return d.prototype={sAllCountriesStoreId:"geoSwitchCountries",current_state:{search:!1,show_all:!1,nb_cols:0},last_update:{first_update:!0},filter_inp:!1,filter_clear_btn:!1,show_all_btn:!1,list_cont:!1,empty_list_elem:"",empty_half_list_elem:"",vpn_disclaimer_btn:!1,is_vpn_disclaimer:!1,mobile_menu_index:!1,get_popup:function(){return this.init(),this.popup},executeAllWhenInit:function(){for(var e=0;e<this.toExWhenInit.length;e++){var t=this.toExWhenInit[e];"function"==typeof t&&t()}this.toExWhenInit=[]},init:function(){if("yes"===this.initiated)return this.executeAllWhenInit(),!0;if("pending"===this.initiated)return!1;this.initiated="pending";var t=this;this.popup||(this.popup=new n("body",!0,"hide"),this.popup.setClosable(!0,!0,!1),this.popup.addClass("geo-switch-pop"+(this.is_vpn_disclaimer?" vpn-disclaimer":"")),this.popup.onHide=function(){$("html").removeClass("geo-switch-pop-opened")},this.popup.onShow=function(){$("html").addClass("geo-switch-pop-opened"),t.init()?t.update_popup():t.toExWhenInit.push(function(){t.update_popup()})},this.iAllMenuId=xv.menus.addClose(function(){t.popup.hide()})),this.setPopupLoading(),this.cur_country=("string"==typeof e.dyn.forcedcountry?e.dyn.forcedcountry:e.dyn.country).toLowerCase(),this.countries=[];var i=o.get(this.sAllCountriesStoreId);if(i&&i.timestamp){var s=Date.now()-1728e5;i.timestamp>s&&this.setCountries(i.countries)}return"yes"===this.initiated?(this.executeAllWhenInit(),!0):($.ajax({url:"/account/getcountries/"+e.dyn.locale,success:function(e){e.result&&e.countries?(o.set(t.sAllCountriesStoreId,{timestamp:Date.now(),countries:e.countries}),t.setCountries(e.countries)):(t.initiated="no",t.setPopupError())},error:function(){t.initiated="no",t.setPopupError()},dataType:"json"}),!1)},setPopupLoading:function(){if(!this.popup)return!1;this.popup.setContent($('<p class="text-center">'+s.getSafe("after",i.__("misc.loading")).getHtml()+"</p>"))},setPopupError:function(){if(!this.popup)return!1;var e=$('<p class="text-center"><span class="btn btn-primary">'+i.__("error.failed_loading_info_retry")+"</span></p>"),t=this;e.find(".btn").on("click",function(){setTimeout(function(){t.init()},100)}),this.popup.setContent(e)},setCountries:function(e){var i=this,n=function(e){e.preventDefault(),i.get_popup().hide(),window.xv.disclaimer.vpn_display_closed($(this).prop("href"))};order=0;for(var s in e){var o=s.toLowerCase(),l={o:order,code:o,name:e[s],cur:o===this.cur_country,big:-1!==u.indexOf(s)};l.search=this.build_search_index(l),l.elem=$(t.render(r,l)),this.is_vpn_disclaimer&&(l.a_click=n),this.countries.push(l),order++}if(this.countries.length<1)return this.initiated="no",i.setPopupError(),!1;this.empty_list_elem=$(t.render(r,{empty:!0})),this.empty_half_list_elem=$(t.render(r,{empty:!0,half:!0}));var f=$(t.render(a,{list:"","ref-list":t.render(r,{empty:!0})}));this.filter_inp=f.find("input").first(),this.filter_clear_btn=f.find("button.clear").first(),this.show_all_btn=f.find(".see-all button").first(),this.ref_col_for_w=f.find("ul.width-ref li").first(),this.list_cont=f.find("ul.countries").first(),this.popup.setContent(f),this.filter_inp.on("change blur focus paste input",function(){i.update_search()}),this.filter_inp.on("keydown",function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation()),i.update_search()}),this.filter_inp.on("keyup",function(e){27===e.keyCode&&i.filter_inp.prop("value").length>0&&(e.preventDefault(),e.stopPropagation(),i.filter_inp.prop("value","")),i.update_search()}),this.filter_clear_btn.on("click",function(){i.filter_inp.prop("value",""),i.update_search()}),this.show_all_btn.on("click",function(){i.popup.getNode().children(".x-body").scrollTop(0),i.toggle_show_all()}),this.executeAllWhenInit(),this.initiated="yes"},build_search_index:function(e){var t=e.name.indexOf(","),i="us"===e.code?"usa|theunitedstatesofamerica|":"";return-1!==t?(i+=f(e.name.substr(0,t)),i+=f(e.name.substr(t+1)),i+="|"+f(e.name.substr(t+1)),i+=f(e.name.substr(0,t))):i+=f(e.name),i+="|"+f(e.code)},get_ordered_list_elems:function(e,t){var i=[];for(var n in this.countries)("all"===e||"search"===e&&-1!==this.countries[n].search.indexOf(t)||"search"!==e&&!this.current_state.search&&(this.current_state.show_all||this.countries[n].big)||"search"!==e&&this.current_state.search&&-1!==this.countries[n].search.indexOf(this.current_state.search))&&i.push(this.countries[n]);return i.sort(function(e,t){return e.o<t.o?-1:e.o>t.o?1:0})},show_popup:function(){var e=this.get_popup();e&&e.show("body")},auto_show_popup:function(){xv.menus.closeAll(this.iAllMenuId),$(window).scrollTop(0),this.show_popup()},update_search:function(e){var t=this.filter_inp.prop("value");!t||t.length<1?this.current_state.search=!1:(t=f(t),t.length<1?this.current_state.search=!1:(this.current_state.search=t,this.toggle_show_all(!1,!0))),e||this.update_popup()},update_popup:function(){this.popup&&this.popup.open&&(this.update_nb_cols(),this.needs_update()&&(this.show_all_btn.html(this.current_state.show_all?i.__("misc.see_less_countries"):i.__("misc.see_all_countries")),this.write_list(),this.reinit_needs_update()))},needs_update:function(){for(var e in this.current_state)if("undefined"==typeof this.last_update[e]||this.last_update[e]!==this.current_state[e])return!0;return!1},reinit_needs_update:function(){this.last_update={};for(var e in this.current_state)this.last_update[e]=this.current_state[e]},update_nb_cols:function(){var e=parseInt(this.list_cont.width()),t=parseInt(this.ref_col_for_w.outerWidth());this.current_state.nb_cols=Math.max(Math.round(e/t),1)},write_list:function(){var e=this.get_ordered_list_elems(),n=e.length,s=Math.ceil(n/this.current_state.nb_cols),o=1===s&&this.current_state.nb_cols!==n,a=(this.current_state.nb_cols-1)*s>=n,r=(this.current_state.nb_cols-2)*s>=n;if(this.list_cont.empty().toggleClass("single-not-full-line",o),0===n)return this.list_cont.append($(t.render(l,{no_result:i.__("search.no_result")}))),!1;count=0;for(var u=0;u<s;u++)for(var f=0;f<this.current_state.nb_cols;f++){var d=u+f*s;if(count++,d<n){!o&&a&&count%this.current_state.nb_cols==1&&(r?this.list_cont.append(this.empty_list_elem.clone()):this.list_cont.append(this.empty_half_list_elem.clone()));var c=e[d].elem.clone();"function"==typeof e[d].a_click&&c.find("a").on("click",e[d].a_click),this.list_cont.append(c)}else o||(a&&count%this.current_state.nb_cols==0?r||this.list_cont.append(this.empty_half_list_elem.clone()):this.list_cont.append(this.empty_list_elem.clone()))}},set_simple_list_elem:function(e,t,i,n){var s=this,o=function(){var o=$(s.get_simple_list_elem());o.prop("id",t),o.addClass(i),$(e).append(o),s.init_simple_list_elem_search(o),n()};this.toExWhenInit.push(o),this.init()},get_simple_list_elem:function(){var e=this.get_ordered_list_elems("all"),i="";for(var n in e)i+=t.render(r,e[n]);return t.render(a,{simple_contener:!0,list:i})},init_simple_list_elem_search:function(e){if(input=$(e).find(".filter input").first(),clear_btn=$(e).find(".filter .clear").first(),ul=$(e).find("ul").first(),0===input.length||0===clear_btn.length||0===ul.length)return!1;var t=this,i=function(){var e=input.prop("value");e!==input.data("last-update")&&(input.data("last-update",e),t.update_simple_list_elem(ul,e))};input.on("change blur focus paste input",i),input.on("keydown",function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation()),i()}),input.on("keyup",function(e){27===e.keyCode&&input.prop("value").length>0&&(e.preventDefault(),e.stopPropagation(),t.filter_inp.prop("value","")),i()}),clear_btn.on("click",function(){input.prop("value",""),i()})},update_simple_list_elem:function(e,n){if(e=$(e),0===e.length)return!1;n="string"==typeof n&&f(n);var s=n?this.get_ordered_list_elems("search",n):this.get_ordered_list_elems("all");if(list_html="",0===s.length)list_html=t.render(l,{no_result:i.__("search.no_result")});else for(var o in s)list_html+=t.render(r,s[o]);e.html($(list_html))},toggle_show_all:function(e,t){this.current_state.show_all="boolean"==typeof e?e:!this.current_state.show_all,this.current_state.show_all&&(this.filter_inp.prop("value",""),this.update_search(!0)),t||this.update_popup()}},new d}),define("text!lib/helpers/popup/language_switcher.mustache",[],function(){return'<ul>\n\t{{#languages}}\n\t<li><a href="{{{ url }}}"><span class="flag-small flag-{{{ country }}}"></span> {{ name }}</a></li>\n\t{{/languages}}\n</ul>'}),define("text!skins/default/header/theme_switcher.mustache",[],function(){return'<ul id="theme-switcher-list">\n\t{{#themes}}\n\t\t<li><span class="btn" data-mode="{{ mode }}">{{ name }}</span></li>\n\t{{/themes}}\n</ul>'}),define("skins/common/listing/settings",["config/main","static/cookies","static/dom","lib/helpers/popup","lib/helpers/thumbs_rotator","lib/helpers/overlay/box","lib/i18n!front","skins/default/video/watch_later","skins/default/mozaique/thumb_block_viewed","skins/common/suggests/suggests_manager","skins/default/header/theme_switcher","skins/common/history/page_view_history","skins/common/geo_switch/geo_switch","skins/common/main_cats/switcher","mustache","text!lib/helpers/popup/language_switcher.mustache","text!skins/default/header/theme_switcher.mustache"],function(e,t,i,n,s,o,a,r,l,u,f,d,c,h,p,_,g){var m=function(){if(this.$SiteSettings=$("#site-settings"),this.$Container=$("#listing-settings"),0!==this.$SiteSettings.length||0!==this.$Container.length){this.oPopup=!1,"default"===e.sitename&&(this.oThemeSwitcher=new f),this.buttons=[],this.aHighlight=!1,this.iHighlightInterval=300,this.bDontCloseAllMenus=!1;for(var t in e.dyn.ls.buttons){var s=e.dyn.ls.buttons[t];this.buttons.push(s)}this.nb_vids_btn_params="xnxx"===e.sitename?this.nb_vids_xnxx_btn_params.nb_vids_per_row_btn_params:this.nb_vids_default_btn_params.nb_vids_per_row_btn_params,this.nb_vids_btn_list="xnxx"===e.sitename?this.nb_vids_xnxx_btn_params.nb_vids_per_row_btn_list:this.nb_vids_default_btn_params.nb_vids_per_row_btn_list;var o=this;if(this.$SiteSettings.length>0)this.oPopup=new n(this.$SiteSettings,"",{popup_class:"listing-settings-popup in-header",autoclose:!0,mouseout_autoclose:5e3}),this.oPopup.iAllMenuId=xv.menus.addClose(function(){o.oPopup.close()}),this.oPopup.onOpen=function(){
o.bDontCloseAllMenus||xv.menus.closeAll(o.oPopup.iAllMenuId),o.bDontCloseAllMenus=!1,o.oPopup.setContent(o.get_popup_content()),o.oPopup.position(),o.hide_lang(),o.hide_main_cat(),o.hide_theme(),$("body").addClass("header-site-settings-menu-opened")},this.oPopup.onClose=function(){$("body").removeClass("header-site-settings-menu-opened")},this.$SiteSettings.addClass("init-ok"),this.$Container.length>0&&(this.$Container.children("button,a,.btn").on("click",function(e){e.stopPropagation(),o.oPopup.toggle()}),this.$Container.addClass("init-ok"));else if(this.$Container.length>0){var a=this.$Container.children("button,a,.btn"),r=a.parents("#page");0===r.length&&(r=$("body")),this.oPopup=new n(a,"",{relative_to:r,trigger:"click mouseclick",popup_class:"listing-settings-popup under-header",autoclose:!0,autoclose_on_same_level:"header_menu",mouseout_autoclose:5e3,offset:{below:-5,above:0,left:0,right:1}}),this.oPopup.iAllMenuId=xv.menus.addClose(function(){o.oPopup.close()}),this.oPopup.onOpen=function(){o.bDontCloseAllMenus||xv.menus.closeAll(o.oPopup.iAllMenuId),o.bDontCloseAllMenus=!1,o.oPopup.setContent(o.get_popup_content()),o.oPopup.position(),o.hide_lang(),o.hide_main_cat(),o.hide_theme()},this.$Container.addClass("init-ok")}xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.openChatSettings=function(){i.isElementInView(o.$SiteSettings)||$("html,body").scrollTop(0),o.oPopup&&setTimeout(function(){o.bDontCloseAllMenus=!0,o.aHighlight=["main_cat_alert","chat_notif"],o.oPopup.close(),o.oPopup.open()},50)},xv.settings_btn.updateVideoPreviewBtn=function(){o.update_video_preview_btn()}}};return m.prototype={nb_vids_default_btn_params:{nb_vids_per_row_btn_list:[{"function":"get_nb_vids_btn",size:"xs"},{"function":"get_nb_vids_btn",size:"sm"},{"function":"get_nb_vids_btn",size:"lg"},{"function":"get_nb_vids_btn",size:"xlg"}],nb_vids_per_row_btn_params:{xs:{icf:"device-mobile","class":"mobile-only-show-list-item",nbs:window.xv.thumbs.nb_by_cols.xs.nbs||[1],"default":parseInt(window.xv.thumbs.nb_by_cols.xs["default"])||1,setted:window.xv.thumbs.nb_by_cols.xs.setted||!1},sm:{icf:"device-tablet","class":"mobile-show-list-item mobile-only-hide",nbs:window.xv.thumbs.nb_by_cols.sm.nbs||[3],"default":parseInt(window.xv.thumbs.nb_by_cols.sm["default"])||3,setted:window.xv.thumbs.nb_by_cols.sm.setted||!1},lg:{icf:"device-desktop","class":"mobile-hide device-xlg-hide",nbs:window.xv.thumbs.nb_by_cols.lg.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.lg["default"])||4,setted:window.xv.thumbs.nb_by_cols.lg.setted||!1},xlg:{icf:"device-desktop","class":"device-xlg-show",nbs:window.xv.thumbs.nb_by_cols.xlg.nbs||[5],"default":parseInt(window.xv.thumbs.nb_by_cols.xlg["default"])||5,setted:window.xv.thumbs.nb_by_cols.xlg.setted||!1}}},nb_vids_xnxx_btn_params:{nb_vids_per_row_btn_list:[{"function":"get_nb_vids_btn",size:"xs"},{"function":"get_nb_vids_btn",size:"sm"},{"function":"get_nb_vids_btn",size:"md"},{"function":"get_smaller_vids_btn",size:"lg"},{"function":"get_bigger_vids_btn",size:"lg"}],nb_vids_per_row_btn_params:{xs:{icf:"device-mobile","class":"mobile-only-show",nbs:window.xv.thumbs.nb_by_cols.xs.nbs||[1],"default":parseInt(window.xv.thumbs.nb_by_cols.xs["default"])||1,setted:window.xv.thumbs.nb_by_cols.xs.setted||!1},sm:{icf:"device-tablet","class":"sm-col-only-show",nbs:window.xv.thumbs.nb_by_cols.sm.nbs||[3],"default":parseInt(window.xv.thumbs.nb_by_cols.sm["default"])||3,setted:window.xv.thumbs.nb_by_cols.sm.setted||!1},md:{icf:"device-tablet","class":"md-col-only-show",nbs:window.xv.thumbs.nb_by_cols.md.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.md["default"])||4,setted:window.xv.thumbs.nb_by_cols.md.setted||!1},lg:{"class":"lg-col-only-show",nbs:window.xv.thumbs.nb_by_cols.lg.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.lg["default"])||4,setted:window.xv.thumbs.nb_by_cols.lg.setted||!1}}},get_popup_content:function(){var t=$('<div class="site-settings"></div>'),i=$("<ul>");for(var n in this.buttons){var s=this.buttons[n].name,o=this.aHighlight&&!1!==this.aHighlight.indexOf(s);switch(s){case"nb_vids_per_row":for(var a in this.nb_vids_btn_list)i.append(this[this.nb_vids_btn_list[a]["function"]](this.nb_vids_btn_list[a].size));break;case"video_preview":i.append(this.get_video_preview_btn());break;case"watch_later":"default"===e.sitename&&i.append(this.get_watch_later_toggle_btn());break;case"viewed_icon":"default"===e.sitename&&i.append(this.get_viewed_icon_toggle_btn());break;case"suggests":"xnxx"!==e.sitename&&"default"!==e.sitename||i.append(this.get_suggests_toggle_btn());break;case"switch_theme":"default"===e.sitename&&(i.append(this.get_theme_toggle_btn()),t.append(this.get_theme_list()));break;case"language":"xnxx"!==e.sitename&&"default"!==e.sitename||(i.append(this.get_language_btn()),t.append(this.get_language_list()));break;case"history":"default"===e.sitename&&i.append(this.get_history_switch_btn());break;case"version":"xnxx"!==e.sitename&&"default"!==e.sitename||i.append(this.get_version_switch_btn());break;case"main_cat":i.append(this.get_main_cat_switch_btn()),t.append(this.get_main_cat_list());break;case"main_cat_alert":i.append(this.get_main_cat_alert_switch_btn(o));break;case"chat_notif":i.append(this.get_notifications_switch_btn(o));break;case"sep":i.append(this.get_sep())}}return t.prepend(i),this.aHighlight=!1,t},is_smallest_col_qtt:function(e,t){return!(t>this.nb_vids_btn_params[e].nbs[0])},is_biggest_col_qtt:function(e,t){var i=this.nb_vids_btn_params[e].nbs;return!(t<i[i.length-1])},set_nb_vids_next_qtt:function(e,t,i,n){var s,o=this.nb_vids_btn_params[e].nbs,a=!1;for(var r in o)if($("html").hasClass("nb-thumbs-cols-"+e+"-"+o[r])){if(a=o[r],t)return a;$("html").removeClass("nb-thumbs-cols-"+e+"-"+a)}return!a&&(a=this.nb_vids_btn_params[e]["default"],t)?a:(a=parseInt(a),s=!1!==i?this.is_biggest_col_qtt(e,a)?!1!==n?o[0]:a:a+1:this.is_smallest_col_qtt(e,a)?!1!==n?o[o.length-1]:a:a-1,$("html").addClass("nb-thumbs-cols-"+e+"-"+s),s)},save_nb_for_size:function(e,i){if(t.setLocal("hexavid_nb_thumbs_cols_"+e,i,7776e7,"/"),"xs"!==e&&"sm"!==e&&"md"!==e||0===$("html,body").scrollTop()||this.closeSettingsPopups(),document.body){var n;document.createEventObject?(n=document.createEventObject(),document.body.fireEvent("settings_nb_thumbs_changed",n)):(n=document.createEvent("HTMLEvents"),n.initEvent("settings_nb_thumbs_changed",!0,!0),document.body.dispatchEvent(n))}},get_smaller_vids_btn:function(e){var t=this,i=function(e){return"<span"+(t.is_biggest_col_qtt(e,t.set_nb_vids_next_qtt(e,!0))?' class="disabled"':"")+'><span class="icon-f icf-search-minus"></span> '+a.__("listing.smaller_thumbnails")+"</span>"},n=$('<button type="button">'+i(e)+"</button>");return n.on("click",function(s){s.preventDefault();var o=t.set_nb_vids_next_qtt(e,!1,!0,!1);n.html(i(e)),t.is_smallest_col_qtt(e,o)||n.parents("ul").find(".bigger-"+e+"-col-thumbs .disabled").removeClass("disabled"),t.save_nb_for_size(e,o)}),$('<li class="smaller-'+e+"-col-thumbs "+this.nb_vids_btn_params[e]["class"]+'"></li>').append(n)},get_bigger_vids_btn:function(e){var t=this,i=function(e){return"<span"+(t.is_smallest_col_qtt(e,t.set_nb_vids_next_qtt(e,!0))?' class="disabled"':"")+'><span class="icon-f icf-search-plus"></span> '+a.__("listing.bigger_thumbnails")+"</span>"},n=$('<button type="button">'+i(e)+"</button>");return n.on("click",function(s){s.preventDefault();var o=t.set_nb_vids_next_qtt(e,!1,!1,!1);n.html(i(e)),t.is_biggest_col_qtt(e,o)||n.parents("ul").find(".smaller-"+e+"-col-thumbs .disabled").removeClass("disabled"),t.save_nb_for_size(e,o)}),$('<li class="bigger-'+e+"-col-thumbs "+this.nb_vids_btn_params[e]["class"]+'"></li>').append(n)},get_nb_vids_btn:function(e){var t=this,i=function(e,t){return'<span class="icon-f icf-'+e+'"></span> '+(1===t?a.__("listing.one_column"):a.__("listing.nb_columns",{"%nb%":t.toString()}))},n=this.nb_vids_btn_params[e].icf,s=$('<button type="button">'+i(n,this.set_nb_vids_next_qtt(e,!0))+"</button>");return s.on("click",function(o){o.preventDefault();var a=t.set_nb_vids_next_qtt(e);s.html(i(n,a)),t.save_nb_for_size(e,a)}),$('<li class="'+this.nb_vids_btn_params[e]["class"]+'"></li>').append(s)},get_video_preview_btn:function(){return $Li=$("<li></li>"),this.$BtnVideoPreview=$('<button type="button"></button>').appendTo($Li),this.update_video_preview_btn(),this.$BtnVideoPreview.on("click",function(e){e.preventDefault(),s.toggle_vp()&&t.setLocal("hexavid_no_videopv",s.video_preview?"0":"1",7776e7,"/")}),$Li},update_video_preview_btn:function(){if("undefined"!=typeof this.$BtnVideoPreview&&0!==this.$BtnVideoPreview.length){var e=s.video_preview,t='<span class="icon-f icf-play-rectangle'+(e?"":" icf-red-crossed")+'"></span> '+a.__(e?"listing.disable_pv":"listing.enable_pv",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"});this.$BtnVideoPreview.html(t)}},get_watch_later_toggle_btn:function(){var e=function(e){return'<span class="icon-f icf-clock'+(e?"":" icf-red-crossed")+'"></span> '+a.__("video.watch_later_btn_"+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},t=$("<li></li>"),i=$('<button type="button"></button>').appendTo(t),n=function(){i.html(e(r.is_feature_enabled()))};return xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.update_watch_later_toggle_btn=n,n(),i.on("click",function(e){e.preventDefault(),r.toggle_feature(function(){xv.settings_btn.update_watch_later_toggle_btn()})}),t},get_viewed_icon_toggle_btn:function(){var e=function(e){return'<span class="icon-f icf-eye'+(e?"":" icf-red-crossed")+'"></span> '+a.__("video.viewed_indic_"+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},t=$("<li></li>"),i=$('<button type="button"></button>').appendTo(t),n=function(){i.html(e(l.is_feature_enabled()))};return xv.settings_btn||(xv.settings_btn={}),xv.settings_btn.update_viewed_icon_toggle_btn=n,n(),i.on("click",function(e){e.preventDefault(),l.toggle_feature(function(){xv.settings_btn.update_viewed_icon_toggle_btn()})}),t},get_theme_toggle_btn:function(){var e=$("<li></li>"),t=$(this.oThemeSwitcher.getSettingsBtn()),i=this;return t.on("click",function(){i.show_theme()}),e.append(t),e},get_language_btn:function(){var t=$("<li></li>"),i=$('<button type="button" class="language-switch"><span class="flag-small flag-'+e.dyn.locale_flag+'"></span> '+a.__("language")+" : <strong>"+e.dyn.locale_trsl+"</strong></button>"),n=this;return i.on("click",function(){n.show_lang()}),t.append(i),t},get_language_list:function(){var t=[],i=this;for(var n in e.data.other_locales)t.push({url:"/change-language/"+n,country:e.data.other_locales[n].country.toLowerCase(),name:e.data.other_locales[n].translated});var s=$('<div class="language-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>'+p.render(_,{languages:t})+"</div>");return s.find(".back").on("click",function(){i.hide_lang()}),s},get_theme_list:function(){var t=this,i=[{name:a.__("theme.dark"),mode:"black"},{name:a.__("theme.light"),mode:"light"}];return"matchMedia"in window&&"undefined"!=typeof e.dyn.utheme&&i.push({name:a.__("theme.automatic"),mode:"auto"}),$Themes=$('<div class="theme-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button>'+p.render(g,{themes:i})+"</div>"),this.oThemeSwitcher.setClassCurrent($Themes.find(".btn")),$Themes.find(".back").on("click",function(){t.hide_theme()}),$Themes},show_lang:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-lang")},hide_lang:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-lang")},show_theme:function(){if(!1!==this.oPopup&&this.oPopup.isOpened()){this.oPopup.popup.addClass("show-theme");var e=$("#theme-switcher-list").find(".btn");this.oThemeSwitcher.initBtn(e)}},hide_theme:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-theme")},get_suggests_toggle_btn:function(){var e=$("<li></li>");return $('<button type="button">'+function(e){return'<span class="icon-f icf-suggest-square'+(e?"":" icf-red-crossed")+'"></span> '+a.__(e?"suggest.enabled":"suggest.disabled",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})}(u.is_feature_enabled())+"</button>").appendTo(e).on("click",function(e){e.preventDefault(),u.toogle_feature(!u.is_feature_enabled())}),e},get_history_switch_btn:function(){var e=$("<li></li>");return $('<button type="button">'+function(e){return'<span class="icon-f icf-history'+(e?"":" icf-red-crossed")+'"></span> '+a.__(e?"history.enabled":"history.disabled",{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})}(d.isTracking())+"</button>").appendTo(e).on("click",function(e){e.preventDefault(),d.isTracking()?d.stopTracking(function(){$("html,body").scrollTop(0),window.location.reload()}):d.startTracking(function(){$("html,body").scrollTop(0),window.location.reload()})}),e},get_version_switch_btn:function(){var t=$("<li></li>");return $('<button type="button">'+function(){return'<span class="flag-small flag-'+e.dyn.version_flag+'"></span> '+("xnxx"===e.sitename?a.__("misc.content"):a.__("country"))+" : <strong>"+e.dyn.version_trsl+"</strong>"}()+"</button>").appendTo(t).on("click",function(e){e.preventDefault(),c.auto_show_popup()}),t},get_main_cat_switch_btn:function(){var e=$("<li></li>"),t=$('<button type="button">'+function(){var e=h.getSettingsCat();return e.picto+" "+a.__("categories.category")+" : <strong>"+e.name+"</strong>"}()+"</button>"),i=this;return t.on("click",function(){i.show_main_cat()}),e.append(t),e},get_main_cat_list:function(){var e=this,t=$('<div class="main-cat-switcher"><button type="button" class="back"><span class="icon-f icf-arrow-left"></span></button></div>');return t.find(".back").on("click",function(){e.hide_main_cat()}),t.append(h.getPopupContent()),t},show_main_cat:function(){!1!==this.oPopup&&this.oPopup.isOpened()&&this.oPopup.popup.addClass("show-main-cat")},hide_main_cat:function(){!1!==this.oPopup&&"undefined"!=typeof this.oPopup.popup&&"function"==typeof this.oPopup.popup.removeClass&&this.oPopup.popup.removeClass("show-main-cat")},get_notifications_switch_btn:function(e){if("function"!=typeof xv.get_messages_toggle_feature)return $("");var t=function(e){return'<span class="icon-f icf-bell'+(e?"":" icf-red-crossed")+'"></span> '+a.__("chat.settings.notifications."+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=$("<li></li>"),n=$('<button type="button">'+t(xv.get_messages_feature_enabled())+"</button>").appendTo(i);return n.on("click",function(e){e.preventDefault(),xv.get_messages_toggle_feature(function(){n.html(t(xv.get_messages_feature_enabled()))})}),e&&this.setBtnToHighlight(n),i},get_main_cat_alert_switch_btn:function(e){var t=function(e){return'<span class="icon-f icf-bell'+(e?"":" icf-red-crossed")+'"></span> '+a.__("main_cats.cat_chang_alert."+(e?"enabled":"disabled"),{"%strong%":'<strong class="text-highlight">',"%end_strong%":"</strong>"})},i=$("<li></li>"),n=$('<button type="button">'+t(h.isFeatureEnabled())+"</button>").appendTo(i);return n.on("click",function(e){e.preventDefault(),h.toggleFeature(function(){n.html(t(h.isFeatureEnabled()))})}),e&&this.setBtnToHighlight(n),i},get_sep:function(){return $('<li class="sep"></li>')},closeSettingsPopups:function(){this.hide_lang(),this.hide_main_cat(),this.hide_theme(),!1!==this.oPopup&&this.oPopup.close()},setBtnToHighlight:function(e){e.addClass("btn-highlight btn-highlighting btn-highlight-t");var t=!0,i=setInterval(function(){t=!t,t?e.addClass("btn-highlight"):e.removeClass("btn-highlight")},this.iHighlightInterval);setTimeout(function(){clearInterval(i),e.removeClass("btn-highlight btn-highlighting")},8*this.iHighlightInterval),setTimeout(function(){e.removeClass("btn-highlight-t")},8*this.iHighlightInterval+500)}},new m}),define("lib/helpers/popup/language_switcher",["mustache","../popup","text!lib/helpers/popup/language_switcher.mustache"],function(e,t,i){return function(n,s,o,a){var r=function(){var t=[];for(var n in o)t.push({url:s+n,country:o[n].country.toLowerCase(),name:o[n].translated});return e.render(i,{languages:t})};return"object"!=typeof a&&(a={}),"undefined"==typeof a.trigger&&(a.trigger="click mouseclick"),"undefined"==typeof a.popup_class&&(a.popup_class="language-switcher-popup"),"undefined"==typeof a.autoclose&&(a.autoclose=3e3),new t(n,r,a)}}),define("skins/default/common",["config/main","skins/default/pagination"],function(e,t){"object"==typeof e.dyn.ls&&"object"==typeof e.dyn.ls.buttons&&e.dyn.ls.buttons.length>0&&require(["skins/common/listing/settings"]);var i=$(".menu-login-acct");i.length>0&&require(["skins/default/form/login"],function(e){e.setupLinks(i)});var n=$("#mobile-login-btn");if(n.length>0){var s=!1,o=$("#mobile-login-menu"),a=xv.menus.addClose(function(){r(!1,!1)}),r=function(e,t){!1!==t&&xv.menus.closeAll(a),s="boolean"==typeof e?e:!s,o.toggleClass("hidden",!s)};n.on("click",function(e){e.preventDefault(),r()}).addClass("init-ok"),o.on("menu.forceclose",function(){s&&(o.addClass("hidden"),s=!1)}),$("body").on("click",function(e){s&&($(e.target).closest("#mobile-login-menu,#mobile-login-btn").length>0||(o.addClass("hidden"),s=!1))}),o.find(".playlists").on("click",function(e){e.preventDefault(),o.addClass("hidden"),s=!1,require(["skins/default/video/playlists/manager"],function(e){e.loadEditList()})})}var l=$("#reload-page");l.length>0&&l.on("click",function(){$("html,body").scrollTop(0),window.location.reload()}).addClass("init-ok");var u=$("#subs-home-toggle");u.length>0&&require(["lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(t,i){var n=!e.dyn.disfeats||-1===e.dyn.disfeats.indexOf("s");u.html((n?"<span class='icon-f icf-ban'></span> ":"")+t.__("subscriptions."+(n?"dont_":"")+"show_on_homepage")).on("click",function(){$.post("/account/feature-"+(n?"disabled":"enabled"),{featureid:"s"},function(e){if(!e.result)return void i.alert(t.__("form.error_modification_not_saved"));$("html,body").scrollTop(0),window.location.reload()},"json")}).addClass("init-ok")});var f=$("#language-switcher");f.length>0&&require(["lib/helpers/popup/language_switcher"],function(t){t(f,"/change-language/",e.data.other_locales),f.addClass("init-ok")}),t.add_all_in("#page")}),define("skins/common/blog_survey",["config/main","static/cookies"],function(e,t){var i=$("#warning-survey");if(i.length>0){var n=i.data("survey"),s="survey_"+n;null===t.get(s)&&$.ajax({type:"POST",url:window.location.protocol+"//pornbiz.com/"+n+"/has-answered",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){var i="0",n=300;e.result&&(e.has_answered&&0===e.nb_rem?(i="2",n=86400):(i=e.has_answered?"1":"0",n=900)),t.setLocal(s,i,1e3*n,"/")},error:function(){t.setLocal(s,"0",3e5,"/")}}),i.find("a").on("click",function(){t.removeLocal(s,"/")})}}),require.config({waitSeconds:300,paths:{jquery:"jquery",text:"text","@firebase/app":"libs/firebase-app","@firebase/messaging":"libs/firebase-messaging"},shim:{json3:{exports:"JSON"}},config:{text:{useXhr:function(e,t,i,n){if("/"===e.substr(0,1))return!0;if(e.match(/^https?:\/\/static[\w-]*\.xvideos-cdn\.com\/.*$/))return!0;var s=t+"://"+i;return e.substr(0,s.length)===s}}}}),define("static/console",window.xv.console),define("static/utils",window.xv.utils),define("static/dom",window.xv.dom),define("static/cookies",window.xv.cookies),define("static/storage",window.xv.storage),define("static/thumbs",window.xv.thumbs),define("static/messages",window.xv.messages),document.addEventListener||require(["respond"]),require(["config/main","static/dom","static/cookies","lib/helpers/inline_loader","static/console"],function(e,t,i,n,s){if(s.log(window.location.href,"Load page"),n.setup(e.domains["static"]+"/v3/img/skins/default/xv-inline-loader.gif"),require(["skins/default/common_all"]),e.dyn.premium&&!e.dyn.login_info.is_premium&&"main"!==e.data.action&&"profile"!==e.data.action&&"video"!==e.data.action&&"/red"!==window.location.pathname.substr(0,4)&&"/landing"!==window.location.pathname.substr(0,8))return void require(["skins/common/form/login"],function(t){var i=$("body > .x-overlay.premium-popup-form");t.setOpenCloseModes("signup",!0,!1,function(){e.data.is_premium?window.location.href=e.domains.slave:window.location.href=e.domains.slave+window.location.pathname+window.location.search}),t.open(),$("#language-switcher,#language-switcher-list").appendTo(t.box.body),i.remove()});e.data.action&&require(["skins/"+e.sitename+"/"+e.data.action]),require(["skins/default/common"]),e.dyn.premium||require(["skins/common/blog_survey"]);var o=$("#page-go-up");if(o.length>0){o.on("click",function(){t.scrollToTop()});var a,r=!1,l=$(window),u=function(){a=null;var e=l.scrollTop()>t.getViewportHeight()/3;e!==r&&(o.toggleClass("displayed",e),r=e)};l.on("scroll",function(){a||(a=window.setTimeout(u,500))}),u()}e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&(i.get("hexavid_lastsubscheck")||($.getJSON("/my-subs/videos/update-count",function(e){if(e.result){var t=$("#home-tabs .mysubs .navbadge,#mobile-filters-menu .nb-new-video-subs-badge,#mobile-login-menu .nb-new-video-subs-badge");0===e.nb_subs?t.remove():0===t.length?($("#home-tabs .mysubs").append('<span class="navbadge">'+e.formatted+"</span>"),$("#mobile-filters-menu .my-subs-nav-link,#mobile-login-menu .my-subs-nav-link").append('&nbsp;<span class="navbadge nb-new-video-subs-badge">'+e.formatted+"</span>")):t.text(e.formatted)}}),i.setLocal("hexavid_lastsubscheck","1",3e5,"/"))),e.dyn.chat&&e.dyn.chat.enabled&&(e.is_dev?require(["skins/chat"]):e.dyn.chat.vers?require([e.domains["static"]+"/v-"+e.dyn.chat.vers+"/v3/js/skins/min/chat.js"]):require(["skins/min/chat"]))}),define("skins/default",function(){}),define("lib/converter",[],function(){var e={},t={in2cm:2.54,lbs2kg:.45359237},i={"in":"cm",cm:"in",lbs:"kg",kg:"lbs"};return e.map=function(e){return i[e]},e.convert=function(e,n,s,o){void 0!==s&&s||(s=i[n]);var a,r=n+"2"+s;if("undefined"==typeof t[r]){if(r=s+"2"+n,"undefined"==typeof t[r])return!1;a=1/t[r]}else a=t[r];var l=e*a;if(void 0!==o){if(0===o)return Math.round(l);var u=Math.pow(10,o);l=Math.round(l*u)/u}return l},e.trimPx=function(e){return Math.round(parseFloat(e.replace(/[^\d\.-]/g,"")))},e}),function(e){"function"==typeof define&&define.amd?define("jquery-scrollLock",["jquery"],e):e(jQuery)}(function(e){"use strict";var t,i={space:32,pageup:33,pagedown:34,end:35,home:36,up:38,down:40},n=function(t,i){var n,s,o,a=i.scrollTop(),r=i.prop("scrollHeight"),l=i.prop("clientHeight"),u=t.originalEvent.wheelDelta||-1*t.originalEvent.detail||-1*t.originalEvent.deltaY,f=0;return"wheel"===t.type?(n=i.height()/e(window).height(),f=t.originalEvent.deltaY*n):this.options.touch&&"touchmove"===t.type&&(u=t.originalEvent.changedTouches[0].clientY-this.startClientY),o=(s=u>0&&a+f<=0)||u<0&&a+f>=r-l,{prevent:o,top:s,scrollTop:a,deltaY:f}},s=function(e,t){var n,s,o=t.scrollTop(),a={top:!1,bottom:!1};return a.top=0===o&&(e.keyCode===i.pageup||e.keyCode===i.home||e.keyCode===i.up),a.top||(n=t.prop("scrollHeight"),s=t.prop("clientHeight"),a.bottom=n===o+s&&(e.keyCode===i.space||e.keyCode===i.pagedown||e.keyCode===i.end||e.keyCode===i.down)),a},o=function(t,i){this.$element=t,this.options=e.extend({},o.DEFAULTS,this.$element.data(),i),this.enabled=!0,this.startClientY=0,this.options.unblock&&this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this)),this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.handler,this)),this.options.touch&&(this.$element.on("touchstart"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.touchHandler,this)),this.$element.on("touchmove"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.handler,this)),this.options.unblock&&this.$element.on("touchmove"+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this))),this.options.keyboard&&(this.$element.attr("tabindex",this.options.keyboard.tabindex||0),this.$element.on("keydown"+o.NAMESPACE,this.options.selector,e.proxy(o.CORE.keyboardHandler,this)),this.options.unblock&&this.$element.on("keydown"+o.NAMESPACE,this.options.unblock,e.proxy(o.CORE.unblockHandler,this)))};o.NAME="ScrollLock",o.VERSION="3.1.2",o.NAMESPACE=".scrollLock",o.ANIMATION_NAMESPACE=o.NAMESPACE+".effect",o.DEFAULTS={strict:!1,strictFn:function(e){return e.prop("scrollHeight")>e.prop("clientHeight")},selector:!1,animation:!1,touch:"ontouchstart"in window,keyboard:!1,unblock:!1},o.CORE={wheelEventName:"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",animationEventName:["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].join(o.ANIMATION_NAMESPACE+" ")+o.ANIMATION_NAMESPACE,unblockHandler:function(e){e.__currentTarget=e.currentTarget},handler:function(t){var i,s,a;this.enabled&&!t.ctrlKey&&(i=e(t.currentTarget),(!0!==this.options.strict||this.options.strictFn(i))&&(t.stopPropagation(),s=e.proxy(n,this)(t,i),t.__currentTarget&&(s.prevent&=e.proxy(n,this)(t,e(t.__currentTarget)).prevent),s.prevent&&(t.preventDefault(),s.deltaY&&i.scrollTop(s.scrollTop+s.deltaY),a=s.top?"top":"bottom",this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,i,a),0),i.trigger(e.Event(a+o.NAMESPACE)))))},touchHandler:function(e){this.startClientY=e.originalEvent.touches[0].clientY},animationHandler:function(e,t){var i=this.options.animation[t],n=this.options.animation.top+" "+this.options.animation.bottom;e.off(o.ANIMATION_NAMESPACE).removeClass(n).addClass(i).one(o.CORE.animationEventName,function(){e.removeClass(i)})},keyboardHandler:function(t){var i,n=e(t.currentTarget),a=(n.scrollTop(),s(t,n));return t.__currentTarget&&(i=s(t,e(t.__currentTarget)),a.top&=i.top,a.bottom&=i.bottom),a.top?(n.trigger(e.Event("top"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"top"),0),!1):a.bottom?(n.trigger(e.Event("bottom"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"bottom"),0),!1):void 0}},o.prototype.toggleStrict=function(){this.options.strict=!this.options.strict},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.destroy=function(){this.disable(),this.$element.off(o.NAMESPACE),this.$element=null,this.options=null},t=e.fn.scrollLock,e.fn.scrollLock=function(t){return this.each(function(){var i=e(this),n="object"==typeof t&&t,s=i.data(o.NAME);(s||"destroy"!==t)&&(s||i.data(o.NAME,s=new o(i,n)),"string"==typeof t&&s[t]())})},e.fn.scrollLock.defaults=o.DEFAULTS,e.fn.scrollLock.noConflict=function(){return e.fn.scrollLock=t,this}}),define("skins/common/search/autocomplete",["config/main","mustache","lib/tools","lib/converter","lib/i18n!front","jquery-scrollLock"],function(e,t,i,n,s){var o=["KEYWORDS","PORNSTAR","CHANNEL"],a=function(e,t,i,n,s){this.relative=i,this.input=t.prop("autocomplete","off"),this.is_premium_search_input=!!this.input.parents("form").find('input[name="premium"]').prop("value"),this.tpl=n,this.opened=!1,this.autocomplete=$("<div>").addClass("search-autocomplete").appendTo(e.css("position","relative")).hide().scrollLock({unblock:"ul"}),this.source_url=s,this.has_results=!1,this.results={},this.time_btw_searchs=200,this.timer,this.last_time=0,this.cur_search=!1,this.last_search=!1,this.cur_keywords=!1,this.searches=[],this.max_searchs=3,this.has_scroll_height="undefined"!=typeof $("body")[0].scrollHeight,this.min_height=106,this.max_height=0,this.selected=!1,this.res_selected=0,this.is_keyboard_nav=!1;var o=this;this.input.on("keydown",function(e){o.on_tab_input(e)}).on("keyup paste",function(e){o.on_char_input(e)}).on("blur",function(){setTimeout(function(){o.close()},300)}).on("focus",function(){o.search()}),$(window).on("resize",function(){o.resize()})};return a.prototype={open:function(){this.opened||(this.autocomplete.show(),this.resize(),this.opened=!0)},close:function(){this.opened&&(this.autocomplete.hide(),this.opened=!1)},resize:function(){var e=n.trimPx(this.input.css("border-left-width")),t=n.trimPx(this.input.css("padding-left")),i=n.trimPx(this.input.css("padding-left")),s=this.relative.offset(),o=this.input.offset(),a=this.input.outerHeight(),r=o.top-s.top+a+1,l=o.left-s.left,u=this.relative.outerWidth()-l,f=this.input.width()+i+t+2*e;this.lpadding={left:t+e+"px",right:i+e+"px"},this.autocomplete.css({top:r+"px",left:l+"px"}),u<=f?this.autocomplete.css("width",u+"px"):this.autocomplete.css({minWidth:Math.min(u,Math.max(f,Math.min(u,300)))+"px",maxWidth:u+"px"}),this.max_height=$(window).height()-(o.top+s.top+a+1),this.max_height<this.min_height&&(this.max_height=this.min_height),this.resizeResults()},resizeResults:function(){if(this.has_scroll_height&&this.has_results){if(this.max_height<768)return this.autocomplete.children(".title").hide(),this.autocomplete.children("ul").css("maxHeight","none"),void this.autocomplete.css({maxHeight:this.max_height-4+"px",overflowY:"auto"});this.autocomplete.css({maxHeight:"none",overflowY:"hidden"});var e=0,t=0,i=[];this.autocomplete.children().each(function(){var n=$(this);if(n.hasClass("title"))return n.show(),void(e+=n.outerHeight(!0));var s={e:n,h:n[0].scrollHeight};t+=s.h,i.push(s)});var n=Math.max(this.max_height-e-4,140*i.length);do{var s=i.length,o=0;for(var a in i){var r=n/s;r>=i[a].h&&(i[a].e.css("maxHeight","none"),o+=i[a].h,i.splice(a,1))}n-=o,t-=o}while(i.length<s);for(var a in i){var r=n/i.length;i[a].e.css("maxHeight",r+"px")}}},getSearch:function(){return $.trim(this.input.val()).replace(/[\s\/]+/," ")},search:function(e){if(void 0===e?(!1===this.last_search&&(this.last_search=this.getSearch()),e=this.last_search):this.last_search=e,this.cur_keywords===e)return void(this.has_results&&this.open());if(this.cur_search!==e){if("undefined"!=typeof this.results[e])return void this.display(e);if(0===e.length)return this.results[""]={KEYWORDS:[],PORNSTAR:[],CHANNEL:[]},void this.display("");if(!this.timer){var t=this,i=(new Date).getTime(),n=i-this.last_time;if(n<this.time_btw_searchs)return void(this.timer=window.setTimeout(function(){t.timer=null,t.search()},this.time_btw_searchs-n));this.searches.length===this.max_searchs&&this.searches.shift().abort(),this.last_time=i,this.searches.push($.getJSON(this.source_url+"/"+encodeURIComponent(e),function(i){"object"!=typeof i.KEYWORDS&&(i.KEYWORDS=[]),"object"!=typeof i.PORNSTAR&&(i.PORNSTAR=[]),"object"!=typeof i.CHANNEL&&(i.CHANNEL=[]);for(var n in o){var s=o[n];for(var a in i[s]){var r=i[s][a];if("KEYWORDS"!==s)"https:"===window.location.protocol&&(i[s][a].P=r.P.replace("http://","https://")),"number"==typeof r.M?(i[s][a].highlight=!0,i[s][a].t1=r.N.toString().substr(0,r.M),i[s][a].t2=r.N.toString().substr(r.M,r.L),i[s][a].t3=r.N.toString().substr(r.M+r.L)):i[s][a].highlight=!1;else{var l=r.N.toString().toLowerCase().indexOf(e.toLowerCase());-1===l?i[s][a].highlight=!1:(i[s][a].highlight=!0,i[s][a].t1=r.N.toString().substr(0,l),i[s][a].t2=r.N.toString().substr(l,e.length),i[s][a].t3=r.N.toString().substr(l+e.length))}}}for(var a in i.PORNSTAR)i.PORNSTAR[a].model=0===i.PORNSTAR[a].R||i.PORNSTAR[a].R>1e3;t.results[e]=i,t.last_search===e&&t.display(e)}).fail(function(){t.results[e]={KEYWORDS:[],PORNSTAR:[],CHANNEL:[]},t.last_search===e&&t.display(e)}).always(function(){t.cur_search===e&&(t.cur_search=!1,t.timer&&(window.clearTimeout(t.timer),t.timer=null))}))}}},display:function(e){this.cur_keywords=e;var i=this.results[e];if(0===i.KEYWORDS.length&&0===i.PORNSTAR.length&&0===i.CHANNEL.length)return this.selected=!1,this.has_results=!1,void this.close();this.has_results=!0,this.open(),this.selected=$(t.render(this.tpl,{results:i,
has_keywords:i.KEYWORDS.length>0,has_pornstars:i.PORNSTAR.length>0,has_channels:i.CHANNEL.length>0,padding:this.lpadding,lbl_world:s.__("misc.world"),lbl_model:s.__("profile.model"),lbl_chans:s.__("profile.channels"),lbl_suggestions:s.__("video.suggestions"),is_premium_search:this.is_premium_search_input,uri:function(){return function(e,t){return encodeURIComponent(t(e))}}})).appendTo(this.autocomplete.empty()).filter("ul").first().scrollTop(0).children("li").first().addClass("selected"),this.res_selected=0,this.resizeResults()},on_tab_input:function(e){9===e.which&&this.has_results&&(e.preventDefault(),this.selected&&(window.location.href=this.selected.children("a").prop("href")))},on_char_input:function(e){if(38===e.which||40===e.which){if(!this.has_results)return;if(this.is_keyboard_nav=!0,38===e.which){if(0===this.res_selected)return;this.res_selected--}else{var t=this.results[this.cur_keywords];if(this.res_selected===t.KEYWORDS.length+t.PORNSTAR.length+t.CHANNEL.length-1)return;this.res_selected++}return this.selected.removeClass("selected"),this.selected=this.autocomplete.children("ul").children("li").eq(this.res_selected).addClass("selected"),void this.selected.parent().scrollTop(this.selected.parent().scrollTop()+this.selected.position().top-20)}if(13===e.which&&this.has_results&&this.is_keyboard_nav&&this.selected)return e.preventDefault(),void(window.location.href=this.selected.children("a").prop("href"));if(this.is_keyboard_nav=!1,"paste"===e.type){"object"==typeof e.originalEvent.clipboardData&&"function"==typeof e.originalEvent.clipboardData.getData&&this.search(e.originalEvent.clipboardData.getData("text"));var i=this;return void window.setTimeout(function(){i.search(i.getSearch())},50)}this.search(this.getSearch())}},function(t,i,n){if("string"==typeof e.dyn.ip&&-1!==e.dyn.ip.indexOf(".")){var s="/search-suggest",o=e.dyn.user_main_cat||e.dyn.pagefilter||!1;!o||"gay"!==o&&"shemale"!==o||(s+="/"+o);var r=$("header input.search-input").filter("[name='k']"),l=!1;r.each(function(){$(this).is(":focus")&&(new a(t,$(this),i||t,n,s),l=!0)}),!1===l&&e.dyn.is_desktop&&("/"===window.location.pathname||"/gay"===window.location.pathname||"/shemale"===window.location.pathname)&&document.activeElement&&"BODY"===document.activeElement.tagName&&r.first().is(":visible")&&r.first().focus(),r.on("keyup keydown focus",function(e){$(this).off("keyup keydown focus"),new a(t,$(this),i||t,n,s),$(this).trigger(e)})}}}),define("text!skins/default/header/autocomplete.mustache",[],function(){return'{{#has_keywords}}\r\n<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_suggestions}}}</div>\r\n<ul class="keywords">\r\n\t{{#results.KEYWORDS}}\r\n\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\r\n\t\t<a href="/?k={{#uri}}{{{N}}}{{/uri}}{{#is_premium_search}}&premium=1{{/is_premium_search}}&top">\r\n\t\t\t<span class="nbres">{{R}}</span>\r\n\t\t\t<span class="keywords">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t</a>\r\n\t</li>\r\n\t{{/results.KEYWORDS}}\r\n</ul>\r\n{{/has_keywords}}\r\n{{#has_pornstars}}\r\n<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_pss}}}</div>\r\n<ul class="pornstars">\r\n\t{{#results.PORNSTAR}}\r\n\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\r\n\t\t<a href="/profiles/{{{F}}}">\r\n\t\t\t<span class="thumb" style="background-image:url(\'{{{P}}}\')"></span>\r\n\t\t\t<span class="name">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t\t<span class="rank"><span class="rank-type">{{#model}}M{{/model}}{{^model}}P{{/model}}</span>{{#RF}}#<span class="rank-pos">{{RF}}</span>{{/RF}}</span>\r\n\t\t</a>\r\n\t</li>\r\n\t{{/results.PORNSTAR}}\r\n</ul>\r\n{{/has_pornstars}}\r\n{{#has_channels}}\r\n<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_chans}}}</div>\r\n<ul class="pornstars">\r\n\t{{#results.CHANNEL}}\r\n\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\r\n\t\t<a href="/profiles/{{{F}}}">\r\n\t\t\t<span class="thumb" style="background-image:url(\'{{{P}}}\')"></span>\r\n\t\t\t<span class="name">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\r\n\t\t\t<span class="rank"><span class="rank-type">C</span>{{#RF}}#<span class="rank-pos">{{RF}}</span>{{/RF}}</span>\r\n\t\t</a>\r\n\t</li>\r\n\t{{/results.CHANNEL}}\r\n</ul>\r\n{{/has_channels}}'}),define("skins/default/header/autocomplete",["skins/common/search/autocomplete","text!./autocomplete.mustache"],function(e,t){e($("#page"),$("#header .white-stripe"),t)}),define("skins/default/header/click_ordered_label_list",["../../common/features_test/tracker"],function(e){var t=function(e,t,i){this.tags=$(e),this.list_name="oll_"+t,this.options={toggle_btn:i&&i.toggle_btn,toggle_btn_label_enabled:!(!i||!i.toggle_btn_label_enabled)&&i.toggle_btn_label_enabled,toggle_btn_label_disabled:!(!i||!i.toggle_btn_label_disabled)&&i.toggle_btn_label_disabled,copy_last_elems_to:!(!i||!i.copy_last_elems_to)&&$(i.copy_last_elems_to),copy_last_elems_limit:i&&i.copy_last_elems_limit?i.copy_last_elems_limit:5},this.trackers={},this.active_order=!0,this.toggle_btn=!1,this.order_list(),this.order_top=this.get_tracker("tg").isTracking()};return t.prototype={get_tracker:function(t){return"string"!=typeof t&&(t="default"),this.trackers[t]||(this.trackers[t]=new e(("default"!==t?t:"")+this.list_name,500)),this.trackers[t]},order_list:function(){if(this.get_tracker().canTrack()){var e=this.get_tracker().getIdsTimestampsList(),t=!0,i=[],n=["/","/gay","/shemale"];for(var s in e){t=!1;break}if(this.options.toggle_btn&&!this.toggle_btn&&!t){var o=$("<li class='click-order-toggle'></li>");o.insertBefore(this.tags.first()),this.toggle_btn=$("<a href='#' class='btn btn-default'><span class='icon-f icf-caret-right'></span><span class='label'></span></a>"),this.toggle_btn.appendTo(o),this.toggle_btn.on("click",function(e){e.preventDefault(),a.toggle_active_order(),"undefined"!=typeof xv.header&&"undefined"!=typeof xv.header.categories&&"function"==typeof xv.header.categories.position&&xv.header.categories.position()}),this.toggle_active_order(this.order_top,!1)}var a=this,r=1,l=window.location.pathname+window.location.search,u=!1;this.tags.each(function(){var t=$(this).children("a").first(),n="",s=t.prop("host");"string"==typeof s&&s.length>0&&window.location.host!==s&&(n=t.prop("protocol")+"//"+s);var o={elem:$(this),init_order:r,timestamp:0,name:t.text().trim(),href:n+t.prop("pathname")+t.prop("search")};t.children(".flag-small").length>0&&(o.name="0 "+o.name);var f=o.href;l===f&&a.get_tracker().addId(f),"undefined"!=typeof e[f]&&(o.elem.addClass("clicked"),u=!0,o.timestamp=e[f]),t.on("click",function(e){e.preventDefault(),a.get_tracker().addId(f),window.location.href=f}),i.push(o),r++}),i=i.sort(function(e,t){return e.timestamp!==t.timestamp&&a.active_order?e.timestamp<t.timestamp?1:-1:a.initial_order_compare(e,t)}),this.options.copy_last_elems_to.length>0&&this.options.copy_last_elems_to.html(""),last_elem=!1,last_elems_count=0,last_elems_ul=$("<ul class='mobile-portrait-show'></ul>");for(var s in i)!1!==last_elem&&i[s].elem.insertAfter(last_elem.elem),i[s].timestamp>0&&-1===n.indexOf(i[s].href)&&this.options.copy_last_elems_to.length>0&&last_elems_count<this.options.copy_last_elems_limit&&(i[s].elem.clone().appendTo(last_elems_ul),last_elems_count++),last_elem=i[s];this.order_top&&last_elems_count>0&&last_elems_ul.appendTo(this.options.copy_last_elems_to)}},initial_order_compare:function(e,t){return e.init_order>t.init_order?1:-1},toggle_active_order:function(e,t){if(this.get_tracker().canTrack()){this.active_order="boolean"==typeof e?e:!this.active_order;var i=this.toggle_btn.children(".label");i.html(""),this.active_order?(this.get_tracker("tg").startTracking(),this.options.toggle_btn_label_enabled&&i.html(this.options.toggle_btn_label_enabled),this.order_top=!0):(this.get_tracker("tg").stopTracking(),this.options.toggle_btn_label_disabled&&i.html(this.options.toggle_btn_label_disabled),this.order_top=!1),this.toggle_btn.toggleClass("active",this.active_order),!1!==t&&this.order_list()}}},t}),define("skins/default/header/categories",["config/main","mustache","static/cookies","lib/helpers/overlay","lib/helpers/popup","lib/i18n!front","./click_ordered_label_list","skins/common/geo_switch/geo_switch","skins/default/features_test/videos_i_like","skins/common/features_test/video_subs"],function(e,t,i,n,s,o,a,r,l,u){var f=$("#nav .main-categories");if(0!==f.length){var d=f.find("a.view-more").parent();if(0!==d.length){var c=f.find(".topterm"),h=f.find(".topcat"),p=!1;if(new a($("#main-cat-sub-list li"),"main_cat_list",{toggle_btn:!0,toggle_btn_label_disabled:"<span class='mobile-show-inline'>"+o.__("order.a_z")+"</span>",toggle_btn_label_enabled:"<span class='mobile-show-inline'>"+o.__("misc.top")+"</span>",copy_last_elems_to:$("#last-main-cats-visited"),copy_last_elems_limit:6}),!e.dyn.login_info.is_logged){l.getIds().length||$("#mc-vidsilike").remove();u.getIds().length||$("#mc-mysubs").remove()}var _=$();$("#nav .main-categories a.red-label").each(function(){_=_.add($(this).parent("li"))}),new a(_,"main_cat_redlabel"),xv.header||(xv.header={}),xv.header.categories||(xv.header.categories={}),xv.header.categories.position=function(){var e=c.add(h).filter(":visible").first().outerHeight(!0);if(c.removeClass("hidden"),h.removeClass("hidden"),"function"==typeof xv.header.is_menu_opened&&!xv.header.is_mobile()&&xv.header.is_menu_opened()){if(0===c.length||c.last().position().top<2*e-1)return void d.addClass("hidden");if(!p){var t,i=3,n=$(window).width(),s="function"==typeof window.matchMedia,o=s&&window.matchMedia("(max-width: 1200px)").matches||!s&&n<1200,a=s&&window.matchMedia("(max-width: 1000px)").matches||!s&&n<1e3,r=s&&window.matchMedia("(min-aspect-ratio: 1/1)").matches||!s&&$(window).height()<n;for(o&&r?i=2:a&&(i=4),t=20;t>0;t--)if(c.filter(".topterm-"+t+":not(.clicked)").addClass("hidden"),d.position().top<i*e-1)return;if(d.position().top>=i*e-1){for(t=0;t<h.length;t++)if(h.filter(".topcat-"+t+":not(.clicked)").addClass("hidden"),d.position().top<i*e-1)return;if(d.position().top>=i*e-1){for(t=20;t>0;t--)if(c.filter(".topterm-"+t).addClass("hidden"),d.position().top<i*e-1)return;if(d.position().top>=i*e-1)for(t=0;t<h.length;t++)if(h.filter(".topcat-"+t).addClass("hidden"),d.position().top<i*e-1)return}}}}},xv.header.categories.position(),$(window).on("resize",function(){xv.header.categories.position()});var g=d.children("a").on("click",function(){p=!p,g.html(p?"-":"+"),f.toggleClass("opened",p),xv.header.categories.position()});$("#nav_subs").length>0&&"function"==typeof xv.header.add_mobile_menu_init&&xv.header.add_mobile_menu_init(function(){r.set_simple_list_elem($("#nav_subs"),"version-country-switch-list","country-switch-list",function(){xv.header.add_sub_menu(document.getElementById("version-country-switch-a"),document.getElementById("version-country-switch-list"),!1,!1,!1,{already_opened_func:xv.header.open_default_sub_menu}),$("#version-country-switch-a").addClass("init-ok")})})}}}),define("skins/default/header/header",["./autocomplete","./categories"],function(){}),define("skins/default/mozaique/search_base",["lib/i18n!front","lib/helpers/thumbs_rotator","./../header/header"],function(e){var t,i,n=$("#search-page-filters-block"),s=!1;t=n.find(".btn,.selected a").on("click",function(o){o.preventDefault(),n.toggleClass("expanded"),t.html(s?i:e.__("search.hide_filters",{},"Hide filters")+"&#9650;"),s=!s}).filter(".btn"),i=t.html()}),define("skins/default/category",["./mozaique/search_base"],function(){}),define("skins/default/facial_recognition.js",["static/utils","./header/header"],function(e){var t=$("#similar-face-form"),i=t.find("fieldset > .form-group"),n=t.find(".file-upload-submit"),s=t.find("input[type='file']"),o=t.find(".file-upload-recap"),a="";s.change(function(){if(a=s.val(),a.length<1)return!1;o.html(e.escape(a)),i.fadeOut(function(){n.fadeIn()})}),n.find(".return-file-select").click(function(){s.val("").trigger("change"),n.fadeOut(function(){o.html(""),i.fadeIn()})})}),define("text!skins/default/profile/vote/light.html",[],function(){return'<div class="rating-box-light">\n\t<span class="vote-actions">\n\t\t<span class="vote-action-good"><span class="icon thumb-up white">&nbsp;</span></span><span class="vote-action-bad"><span class="icon thumb-down white">&nbsp;</span></span>\n\t</span>\n\t<span class="rating">{{ rating }}</span> (<span class="total">{{ vtotal }}</span>)\n\t<div class="rating-bar"><div style="width:{{ vrating }}%;"></div></div>\n</div>'}),define("skins/default/profile/vote/light",["config/main","mustache","lib/tools","text!./light.html","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/overlay/box","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(e,i,s,o,a,r,l){if(void 0!==e){this.vtotal=o,this.vrating=i,this.rating=s,this.visitor_vote=!1,void 0===a||"GOOD"!==a&&"BAD"!==a||(this.visitor_vote=a),this.login_required="boolean"==typeof r&&r,this.login_container=l,this.node=$(t.render(n,this._get_tpl_vars())),e.replaceWith(this.node),this.actions=this.node.children(".vote-actions"),this.yes_btn=this.actions.children(".vote-action-good"),"GOOD"===this.visitor_vote&&this.yes_btn.addClass("disabled"),this.no_btn=this.actions.children(".vote-action-bad"),"BAD"===this.visitor_vote&&this.no_btn.addClass("disabled"),this.bar_good=this.node.find(".rating-bar div"),this.bar_rating=this.node.children(".rating"),this.total=this.node.find(".total"),this._init_counts();var u=this;this.voting=!1,this.popup=null,this.popup_pos={v:"below",h:"left"},this.yes_btn.on("click",function(){u._vote("GOOD")}),this.no_btn.on("click",function(){u._vote("BAD")})}};return l.prototype={initPostData:function(e,t,i){this.url_good=e,this.url_bad=t,this.post_data=i||{}},setPopupPosition:function(e,t){this.popup_pos.v=e,this.popup_pos.h=t},_init_counts:function(){this.counts_total=this.node.find(".total")},_get_tpl_vars:function(){return{vtotal:this.vtotal,rating:this.rating,vrating:this.vrating}},_update_counts:function(e){this.bar_rating.text(e.vrating),this.total.text(e.total),this.bar_good.css("width",e.rating+"%")},_get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new o(e,t,{relative_to:this.node.parent(),position:this.popup_pos,trigger:!1}),this.popup},_open_login:function(){require(["skins/default/form/login"],function(e){e.open()})},_vote:function(t){if("GOOD"!==t&&"BAD"!==t)return!1;if(t===this.visitor_vote)return!0;if(this.voting)return!1;if(this.login_required&&!e.dyn.login_info.is_logged)return this._open_login(),!1;var i=this,n="GOOD"===t?this.yes_btn:this.no_btn,o=n.html(),a="GOOD"===t?this.url_good:this.url_bad;this.yes_btn.addClass("disabled"),this.no_btn.addClass("disabled"),n.html(s.getImg()),$.post(a,this.post_data,function(e){var s;e.result?(i._update_counts(e),i.visitor_vote=t,s="<strong>"+r.__("video.votes.thanks")+"</strong>"):s='<strong class="text-danger">'+e.message+"</strong>",i._get_popup(n,s).open()},"json").fail(function(){i._get_popup(n,'<strong class="text-danger">'+r.__("error.err_please_reload")+"</strong>").open()}).complete(function(){n.html(o),i.voting=!1,i.yes_btn.toggleClass("disabled",!e.dyn.login_info.is_logged||"GOOD"===i.visitor_vote),i.no_btn.toggleClass("disabled",!e.dyn.login_info.is_logged||"BAD"===i.visitor_vote)})}},l}),define("skins/default/favorite",["config/main","./profile/vote/light","./profile/subscribe/btn","lib/helpers/thumbs_rotator","./header/header"],function(e,t,i){if("undefined"!=typeof e.data.fav_list){var n=e.data.fav_list;new t($("#fav-list-votes"),n.rating,n.vrating,n.total,n.visitor_vote).initPostData("/api/playlists/list/"+n.id_list+"/vote/GOOD","/api/playlists/list/"+n.id_list+"/vote/BAD",{csrf:n.csrf_vote,id_user:n.id_user});var s=$("#profile-title .user-subscribe");s.length>0&&new i(s,e.data.user.username,e.data.user.id_user,e.data.user.csrf.sub||"");var o=$("#profile-title .playlist-edit");o.length>0&&require(["skins/default/video/playlists/manager"],function(e){o.on("click",function(t){t.preventDefault(),e.loadEditPlayList(n.id_list)}),e.autoOpenByHash()})}}),define("skins/default/http_status",["./header/header"],function(){}),define("skins/default/langidx",["./header/header"],function(){}),define("lib/helpers/suggest_tracker",["static/cookies","config/main"],function(e,t){var i=function(){this.active_tracking=!1,this.thumb_list=!1,this.thumb_subscribe=!1,this.view_list={},this.view_list.t=[],this.view_list.s=[],this.view_list.p=[],this.view_list.r=[],this.cookie_name="pending_thumb",this.init_tracking()};return i.prototype={init_tracking:function(){this.active_tracking=!0,t.dyn.is_premium?this.thumb_list=$(".thumb-block").not(".thumb-block-premium-feed-channel"):this.thumb_list=$(".video-suggest");var i=e.get(this.cookie_name);if(i){var n=JSON.parse(i);n&&(this.view_list=n)}var s=2e3;t.dyn.is_desktop&&(s=6e3);var o=this;setInterval(function(){t.dyn.is_premium?o.thumb_list=$(".thumb-block").not(":hidden").not(".thumb-block-premium-feed-channel"):o.thumb_list=$(".video-suggest").not(":hidden"),o.checkViewed()},s),o.checkViewed(),window.addEventListener("beforeunload",function(){o.saveCookie()})},checkViewed:function(){if(!this.thumb_list)return void console.error("Suggest : No video detected");var e=this;this.thumb_list=jQuery.grep(this.thumb_list,function(i){if(!i.getBoundingClientRect)return console.error("Failed for ",i),!1;var n=i.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(n.top<0)return i.last_seen=0,!0;if(n.left<0)return i.last_seen=0,!0;if(n.top>s-n.height)return i.last_seen=0,!0;if(!i.last_seen)return i.last_seen=(new Date).getTime(),!0;if((new Date).getTime()-i.last_seen<900)return!0;i.setAttribute("data-seen","true");var o=i.getAttribute("data-id"),a=i.getAttribute("data-sub");return o?(!e.view_list.t.includes(o)&&e.view_list.t.length<50&&e.view_list.t.push(o),$(i).hasClass("suggest-subscribed")&&(e.view_list.s.includes(o+"-"+a)||e.view_list.s.push(o+"-"+a)),($(i).hasClass("suggest-premium")||t.dyn.is_premium)&&e.view_list.p.length<50&&(e.view_list.p.includes(o)||e.view_list.p.push(o)),$(i).hasClass("suggest-regular")&&(e.view_list.r.includes(o)||e.view_list.r.push(o)),!1):(console.error("Bad thumb id",i.id),!1)})},saveCookie:function(){e.setLocal(this.cookie_name,JSON.stringify(this.view_list),108e5,"/")}},new i}),define("skins/common/main_regional",["config/main","lib/tools","lib/helpers/thumbs_rotator"],function(e,t,i){if(e.data.id_regional){var n=$(document),s=$("#content .mozaique"),o=1,a=!1,r=s.children().last(),l=r.offset().top,u=function(e){if($.trim(e).length<200)return void(o=!1);o++,s.append(t.replaceThumbcast(e.replace(/\\'/gi,"'"))),t.executePendingPrepare(s.find(".thumb-block")),i(r.nextAll(),!0),r=s.children().last(),l=r.offset().top},f=function(){a||!1===o||n.scrollTop()+2.5*$(window).height()<l||(a=!0,$.get("/regional-home/"+e.data.id_regional+"/"+o,u,"html").always(function(){a=!1,f()}))};$(window).on("scroll",f).on("resize",function(){l=r.offset().top,f()})}}),define("skins/default/main",["static/cookies","lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","./header/header","skins/common/main_regional"],function(e){var t=$("#show-more-best");t.length>0&&t.on("click",function(){e.setLocal("hexavid_bestall","1",3e4,"/")})}),define("skins/common/listing/dates_link_pagination",["config/main","static/cookies"],function(e,t){var i=$("#best-months,#date-links-pagination");if(0!==i.length){var n=i.find(".hidden"),s=i.find(".view-more"),o=!1;s.on("click",function(){o=!o,s.html(o?"-":"+"),n.toggleClass("hidden",!o)}),t.get("hexavid_"+e.data.moz_type)&&(s.click(),t.setLocal("hexavid_"+e.data.moz_type,"",1e3,"/"))}}),define("skins/common/mozaique/vids_list_by_uploader",["lib/i18n!front","lib/tools","lib/helpers/inline_loader","skins/default/profile/subscribe/btn","skins/common/history/one_info_tracker","lib/helpers/overlay/contextual_popup"],function(e,t,i,n,s,o){var a=function(){this.scroll_to_profile_shortcut($(".profiles-shortcuts a")),$(".eventslist .header .user-subscribe").each(function(){new n($(this),$(this).data("user-profile"),$(this).data("user-id")),$(this).css("display","inline-block")});var e=this;if($(".eventslist a.more").on("click",function(t){t.preventDefault(),e.show_more($(this))}).each(function(){e.update_show_more_count($(this))}),$(".eventslist a.less").on("click",function(t){t.preventDefault(),e.show_less_min($(this))}),s.canTrack("channVids_scrollPos")){s.get("channVids_pageId")!==this.get_page_identifier()?(s.unset("channVids_scrollPos"),s.set("channVids_pageId",this.get_page_identifier())):this.scroll_to_profile(s.get("channVids_scrollPos"));var t=!1;$(window).on("scroll",function(){!1!==t&&(clearTimeout(t),t=!1),t=setTimeout(function(){var t=!1,i=!1,n=$(window).scrollTop()+e.get_mobile_header_marge();$(".eventslist .activity-event").each(function(){i||($(this).offset().top-n>0?i=!0:t=this)}),$(t).length>0&&s.set("channVids_scrollPos",$(t).data("profile"))},500)})}var i=!1;$(window).on("resize",function(){!1!==i&&(clearTimeout(i),i=!1),i=setTimeout(function(){$(".eventslist a.more").each(function(){e.update_show_more_count($(this))})},500)})};return a.prototype={get_page_identifier:function(){return xv.conf.data.premium_listing_timerange+"_"+xv.conf.data.premium_listing_current_page},get_mobile_header_marge:function(){return xv.header.is_mobile()?48:8},scroll_to_profile:function(e){if("string"==typeof e&&e.length>0){var t=$(".eventslist .activity-event[data-profile="+e+"]").first(),i=this;t.length>0&&$("html, body").scrollTop(t.offset().top-i.get_mobile_header_marge())}},scroll_to_profile_shortcut:function(e){var t=this;e.each(function(){$(this).data("profile")&&$(this).on("click",function(e){e.preventDefault(),t.scroll_to_profile($(this).data("profile"))})})},show_more:function(n){var s=n.data("next-page"),a=n.parents(".activity-event"),r=!n.hasClass("first-load")&&a.hasClass("show-less");if(!s||r)return this.show_more_min(n),!1;var l=i.getSafe("after"," "+e.__("loading.loading")).getNode().insertAfter(n),u=this;$.post(s,function(i){if(!i.result)return void o.alert('<strong class="text-danger">'+e.__("misc.loading_failed")+"</strong>");if(i.result){var s=$(t.replaceThumbcast(i.html.replace(/\\'/gi,"'")));a.find(".mozaique").children(".thumb-block").not(".show-more-less-vids").last().after(s),t.executePendingPrepare(a.find(".thumb-block")),s.addClass("extra-thumb-block")}n.removeClass("first-load"),i.next_page?n.data("next-page",i.next_page):n.data("next-page",!1).addClass("no-more-to-load").off("click").on("click",function(e){e.preventDefault(),u.show_more_min($(this))}),a.removeClass("show-less");var r=parseInt(a.data("total-count"));n.find(".count").html(r-a.find(".thumb-block:visible").not(".show-more-less-vids").length),u.update_show_more_count(n)},"json").fail(function(){o.alert('<strong class="text-danger">'+e.__("misc.loading_failed")+"</strong>")}).always(function(){l.remove()})},show_more_min:function(e){e.parents(".activity-event").removeClass("show-less"),this.update_show_more_count(e)},show_less_min:function(e){var t=e.parents(".activity-event").addClass("show-less"),i=Math.min(100,$(window).height()/4),n=$("html, body").scrollTop(),s=$(window).innerHeight(),o=t.offset().top;(o<n||o>n+s)&&$("html, body").scrollTop(t.offset().top-i),this.update_show_more_count(t.find("a.more"))},update_show_more_count:function(e){var t=e.parents(".activity-event"),i=parseInt(t.data("total-count"));e.find(".count").html("("+(i-t.find(".thumb-block:visible").not(".show-more-less-vids").length)+")")}},new a}),define("skins/common/mozaique/premium_tab_listing",["config/main","static/cookies","skins/common/history/one_info_tracker"],function(e,t,i){var n=function(){if(this.scroll_to_profile_shortcut($(".profiles-shortcuts a")),i.canTrack()){var e=this;this.bIncreased=!1,this.oProfCount={},this.aProfList=[],$(".eventslist .activity-event[data-profile]").each(function(){var t=$(this).data("order-id");e.oProfCount[t]=0,e.aProfList.push(t),$(this).find(".thumb-block a[href]").on("click",function(i){if(!0===e.bIncreased)return void(window.location.href=$(this).prop("href"));i.preventDefault(),e.bIncreased=!0,e.increase_profile_count_cookie(t),$(this).trigger("click")})})}};return n.prototype={get_mobile_header_marge:function(){return xv.header.is_mobile()?"xnxx"===e.sitename?62:48:8},scroll_to_profile:function(e){if("string"==typeof e&&e.length>0){var t=$(".eventslist .activity-event[data-profile="+e+"]").first(),i=this;t.length>0&&$("html, body").scrollTop(t.offset().top-i.get_mobile_header_marge())}},scroll_to_profile_shortcut:function(e){var t=this;e.each(function(){$(this).data("profile")&&$(this).on("click",function(e){e.preventDefault(),t.scroll_to_profile($(this).data("profile"))})})},increase_profile_count_cookie:function(e){var n=i.get("premiumSuggestPageOrder");for($.isArray(n)||(n=[]),n.unshift(e);n.length>50;)n.pop();i.set("premiumSuggestPageOrder",n);for(var s in n)e=n[s],"undefined"==typeof this.oProfCount[e]&&(this.oProfCount[e]=0,this.aProfList.push(e)),this.oProfCount[e]++;var o=this;this.aProfList.sort(function(e,t){return Math.round((o.oProfCount[t]-o.oProfCount[e])/10)}),t.setLocal("premiumSuggestPageOrder",this.aProfList.join(","),432e5,"/")}},new n}),define("skins/common/mozaique/vids_list_by_channel",["config/main","skins/common/features_test/video_subs","skins/default/profile/subscribe/btn"],function(e,t,i){var n=function(){this.channels={},this.update_channels_infos_in_tb($(".mozaique"))};return n.prototype={update_channels_infos_in_tb:function(i){var n=this;if($(".thumb-block .thumb-over .sub",i).each(function(){var e=$(this).data("profile-id");e&&(n.channels[e]||(n.channels[e]={sub_btn:$(this),profile:$(this).data("profile"),csrf:null,is_follower:null,is_owner:null}))}),e.dyn.login_info.is_logged&&e.dyn.login_info.profile)$.post("/profiles/"+e.dyn.login_info.profile+"/followers/checks",{users:Object.keys(this.channels)},function(t){if(t.result&&t.users){for(var i in t.users)"undefined"!=typeof n.channels[i]&&(n.channels[i].is_owner=i===e.dyn.login_info.id,n.channels[i].is_follower=t.users[i].is_follower,n.channels[i].csrf=t.users[i].csrf);n.update_channels_indic_in_tb()}},"json");else if(t.isTracking()){var s=t.getIds();for(var o in this.channels)this.channels[o].is_follower=-1!==s.indexOf(o);this.update_channels_indic_in_tb()}},update_channels_indic_in_tb:function(){for(var e in this.channels)if(this.channels[e].is_follower){var t=this;!function(){var n=e;new i($('.thumb-block .thumb-over .sub[data-profile-id="'+n+'"]'),t.channels[n].profile,n,t.channels[n].csrf,t.channels[n].is_follower,t.channels[n].is_owner,{subed_icf:!1,btn_display:!1,tooltip_class:"no-arrow",end_function:function(){t.channels[n].sub_btn.removeClass("sub-checked"),setTimeout(function(){t.channels[n].sub_btn.hide()},500)}})}()}}},new n}),define("skins/default/mozaique",["lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","./header/header","skins/common/listing/dates_link_pagination"],function(){xv.conf.data.premium_listing_timerange&&require(["lib/tools","skins/default/mozaique/thumb_block_common_init","skins/common/mozaique/vids_list_by_uploader"],function(e,t){e.addPendingPrepareList(function(e){t.init_listing(e,{is_thumb_list:!0,rotator:!1})})}),xv.conf.dyn.premium_tab_listing&&require(["skins/common/mozaique/premium_tab_listing"]),$(".mozaique .thumb-block .thumb-over a .name").length>0&&require(["skins/common/mozaique/vids_list_by_channel"])}),define("skins/common/profile/sub_actions",["config/main","skins/common/features_test/video_subs"],function(e,t){var i=function(){};return i.prototype={follow:function(e,t,i){var n="/profiles/"+e+"/followers/subscribe",s={csrf:t,ref:document.referrer};$.post(n,s,function(e){i(e)},"json")},unfollow:function(e,t,i){var n="/profiles/"+e+"/followers/unsubscribe",s={csrf:t};$.post(n,s,function(e){i(e)},"json")},reject:function(e,t,i){var n="/profiles/"+e+"/followers/reject",s={csrf:t};$.post(n,s,function(e){i(e)},"json")}},i}),define("skins/common/profile/cat_sub_actions",["skins/common/profile/sub_actions","config/main"],function(e,t){var i=function(){e.apply(this)};return i.prototype=new e,i.prototype.followCat=function(e,t,i){var n="/cats-subs/subscribe/"+e,s={csrf:t,ref:document.referrer};$.post(n,s,function(e){"function"==typeof i&&i(e)},"json")},i.prototype.followCatInSubbedChannels=function(e,t,i){var n="/cats-subs/subscribe-in-channels/"+e,s={csrf:t,ref:document.referrer};$.post(n,s,function(e){"function"==typeof i&&i(e)},"json")},i.prototype.unfollowCat=function(e,t,i){var n="/cats-subs/unsubscribe/"+e,s={csrf:t};$.post(n,s,function(e){"function"==typeof i&&i(e)},"json")},i.prototype.rejectCat=function(e,t,i){var n="/cats-subs/reject/"+e,s={csrf:t};$.post(n,s,function(e){"function"==typeof i&&i(e)},"json")},i.prototype.followCatInChannel=function(e,t,i,n){var s="/cats-subs/subscribe/"+e+"/"+t,o={csrf:i,ref:document.referrer};$.post(s,o,function(e){"function"==typeof n&&n(e)},"json")},i.prototype.unfollowCatInChannel=function(e,t,i,n){var s="/cats-subs/unsubscribe/"+e+"/"+t,o={csrf:i};$.post(s,o,function(e){"function"==typeof n&&n(e)},"json")},i.prototype.rejectCatInChannel=function(e,t,i,n){var s="/cats-subs/reject/"+e+"/"+t,o={csrf:i};$.post(s,o,function(e){"function"==typeof n&&n(e)},"json")},new i}),define("text!skins/default/profile/action/link/captcha.html",[],function(){return'<p>{{{ labels.ip_not_trusted }}}</p>\n<div id="prof-recaptcha">{{{ loader }}}</div>\n<p>{{{ labels.verifiy_to_trust }}}</p>'}),define("skins/default/profile/action/link",["config/main","mustache","static/utils","lib/tools","lib/helpers/popup","lib/helpers/inline_loader","lib/i18n!front","text!./link/captcha.html"],function(e,t,i,n,s,o,a,r){var l,u,f,d=null,c=function(){return null===d&&(d=e.data.visitor.trusted),d},h=function(i){if(l)i!==f&&(f.enable(),l.setButton(i.link));else{var d=function(){u=$("#prof-recaptcha").empty();var t=grecaptcha.render(u.get(0),{sitekey:e.data.recaptcha_key,callback:function(e){l.close(),f.trigger(e),grecaptcha.reset(t)}});l.position()},c={labels:a.__("profile.captcha.*",{"%verif_link_start%":'<a href="/account/verify_account">',"%verif_link_end%":"</a>"}),loader:o.get("after",a.__("loading.loading"),"prof-recaptcha-loading").getHtml()};l=new s(i.link,t.render(r,c),{trigger:!1,popup_class:"prof-link-captcha"}),l.onClose=function(){f.enable()},n.loadRecaptcha(d,e.dyn.locale)}f=i,f.disable(),l.open()},p=function(e,t,i,n,s){if(void 0!==e){this.link=e,this.setAction(t,i,n,s),this.enabled=!0,this.posting=!1,this.error_popup=!1;var o=this;e.on("click",function(e){return e.preventDefault(),o.trigger()})}};return p.prototype={validate:null,getPost:function(){return{}},onSuccess:null,setAction:function(e,t,i,n){this.url=e,this.confirm=t,this.is_confirmed=!t,this.check_trusted=!!i,this.csrf_token=n||!1},setLoadingMessage:function(e){this.loading_msg=e},_is_confirmed:function(){if(this.is_confirmed)return!0;var e="string"==typeof this.confirm?this.confirm:a.__("misc.are_you_sure");return!!window.confirm(i.unescape(e))&&(this.is_confirmed=!0,!0)},_is_trusted:function(){return!this.check_trusted||(!!c()||(this.clearError(),h(this),!1))},enable:function(){this.enabled||this.posting||(this.enabled=!0,this.link.removeClass("disabled"))},disable:function(){this.enabled&&(this.enabled=!1,this.link.addClass("disabled"))},toggle:function(e){e?this.enable():this.disable()},showError:function(e){var t=this;this.error_popup?(this.error_popup.setContent("<strong>"+e+"</strong>"),this.error_popup.open()):(this.error_popup=new s(this.link,"<strong>"+e+"</strong>",{
trigger:!1,autoclose:!1,closebtn:!0,popup_class:"profile-action-link-popup"}),this.error_popup.open(),this.error_popup.popup.on("click",function(){t.error_popup.close()}))},clearError:function(){this.error_popup&&this.error_popup.close()},trigger:function(e){if(this.enabled&&!this.posting&&this._is_confirmed()&&("function"!=typeof this.validate||this.validate())&&("string"==typeof e||this._is_trusted())){this.clearError(),this.posting=!0,this.disable();var t=this.link.html(),i=o.get("after","undefined"==typeof this.loading_msg?a.__("loading.in_progress"):this.loading_msg).appendTo(this.link.empty()),n=this,s=this.getPost();"string"==typeof e&&(s["g-recaptcha-response"]=e),this.csrf_token&&(s.csrf=this.csrf_token),$.post(this.url,s,function(e){if(i.remove(),n.link.html(t),n.posting=!1,n.enable(),e.result)return void("function"==typeof n.onSuccess&&n.onSuccess(e));n.showError("string"==typeof e.message?e.message:a.__("misc.error_please_retry"))},"json").fail(function(){i.remove(),n.link.html(t),n.posting=!1,n.enable(),n.showError(a.__("misc.error_please_retry"))})}}},p}),define("text!skins/account/social/friends_list/action_btn_desktop.mustache",[],function(){return'<button class="action-desktop-btn btn btn-default" title="{{{ title }}}">\n\t<span class="icon-f icf-user"></span>\n\t<span class="icon-f icf-{{ icf }} small-icf"></span>\n</button>\n'}),define("text!skins/account/social/friends_list/action_btn_mobile.mustache",[],function(){return'<button class="action-mobile-btn btn btn-default btn-xs" title="{{{ title }}}">\n\t<span class="icon-f icf-{{ icf }}"></span>\n\t<span class="text">{{{ title }}}</span>\n</button>\n'}),define("text!skins/account/social/friends_list/action_success.mustache",[],function(){return'<strong class="success-message text-success"><span class="icon-f icf-check"></span> {{{ message }}}</strong>'}),define("skins/account/social/friends_list_base",["config/main","mustache","skins/default/profile/action/link","lib/i18n!front","text!./friends_list/action_btn_desktop.mustache","text!./friends_list/action_btn_mobile.mustache","text!./friends_list/action_success.mustache"],function(e,t,i,n,s,o,a){return function(a,r,l,u,f,d,c){if(c||e.data.profiles){var h,p,_,g;c&&void 0!==c?(h=c.oProfiles,g=c.iNbProfiles,p=c.sType,_=$(".overlay-subs").find("h1")):(h=e.data.profiles,g=e.data.nb_profiles,p=e.data.action,_=$("#account-content-block").find("h1"));var m=g;for(var b in h){var v=$("#profile_"+b);if(v.length<1)break;var D=$(t.render(e.dyn.is_desktop?s:o,{title:n.__(a),icf:l}));v.append(D);var y={};y[String(f)]=h[b].display;new i(D,"/profiles/"+b+r,!(!u||!f)&&n.__(u,y),!1,h[b].csrf).onSuccess=function(){var t=this.link.parent(),i=t.attr("data-profile"),s="";switch(e.dyn.is_desktop?this.link.remove():this.link.off("click").prop("disabled",!0),delete h[i],m--,a){case"profile.unfriend":s=m<1?n.__("profile.friends.no_yet"):1===m?n.__("profile.friends.my_friend"):n.__("profile.friends.my_nb",{"%count%":m.toString()});break;case"profile.unlike":s=m<1?n.__("profile.like.no_yet"):1===m?n.__("profile.like.my_like"):n.__("profile.like.my_nb",{"%count%":m.toString()});break;case"subscriptions.unsubscribe":if("xnxx"===e.sitename){s=m<1?n.__("profile.subscription.no_uploader_yet"):1===m?n.__("profile.subscription.my_followed"):n.__("profile.subscription.my_uploaders_nb");break}if("social_subscriptions_channels"===p||"channels"===p){s=m<1?n.__("profile.subscription.no_chan_yet"):1===m?n.__("profile.subscription.my_chan_subscription"):n.__("profile.subscription.my_chan_nb",{"%count%":m.toString()});break}s=m<1?n.__("profile.subscription.no_yet"):1===m?n.__("profile.subscription.my_subscription"):n.__("profile.subscription.my_nb",{"%count%":m.toString()});break;case"misc.cancel_not_interested":s=m<1?n.__("profile.subscription.no_chan_not_interesting"):1===m?n.__("profile.subscription.one_chan_not_interesting"):n.__("profile.subscription.nb_chan_not_interesting",{"%count%":m.toString()});break;case"subscriptions.subscribe":s=m<1?n.__("xnxx"===e.sitename?"profile.subscription.no_uploaders_not_interesting":"profile.subscription.no_chan_not_interesting"):1===m?n.__("xnxx"===e.sitename?"profile.subscription.one_uploader_not_interesting":"profile.subscription.one_chan_not_interesting"):n.__("xnxx"===e.sitename?"profile.subscription.nb_uploaders_not_interesting":"profile.subscription.nb_chan_not_interesting",{"%count%":m.toString()});break;case"profile.actions.block":s=m<1?n.__("profile.liked.no_yet"):1==m?n.__("profile.liked.my_like"):n.__("profile.liked.my_nb",{"%count%":m.toString()});break;case"profile.actions.unblock":s=m<1?n.__("profile.blocked.no_yet"):1==m?n.__("profile.blocked.one_account"):n.__("profile.blocked.nb_accounts",{"%count%":m.toString()})}t.fadeOut(),_.html(s),c&&void 0!==c&&g!==m&&c.fnCallbackOnchange({iInitialNbItem:g,iNewNbItem:m})}}e.dyn.is_desktop&&setTimeout(function(){$(".action-desktop-btn").addClass("read")},2e3)}}}),define("skins/common/profile/sub_overlay",["config/main","lib/tools","mustache","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/inline_loader","skins/account/social/friends_list_base","skins/default/pagination"],function(e,t,i,n,s,o,a,r){var l=function(){this._init()};return l.prototype={_init:function(){this.oOverlay=!1,this.iInitNbItems=null,this.iNbItems=null,this.sUrl=null,this.fnCallbackLoadVideos=null},setOverlay:function(e){if(this.sUrl=e.sUrl,this.fnCallbackLoadVideos=e.fnLoadVideos,!this.oOverlay){var t=this;this.oOverlay=new s("body",!0,"hide"),this.oOverlay.onHide=function(){t.iInitNbItems!==t.iNbItems&&(t.fnCallbackLoadVideos(),t.iInitNbItems=null,t.iNbItems=null)},this.oOverlay.addClass("overlay-subs")}this.oOverlay.setContent($('<p class="text-center">'+o.getSafe("after",n.__("misc.loading")).getHtml()+"</p>")),this.showOverlay(),this.loadContentOverlay()},showOverlay:function(){if(!this.oOverlay)return!1;this.oOverlay.show()},loadContentOverlay:function(e){var i=this,n={"no-layout":1};void 0===e&&(e=this.sUrl);var s=e.split("/");s=s[s.length-1],$.post(e,n,function(e){var n=t.replaceThumbcast(e.html);i.oOverlay.setContent(n),r.add_all_in(".x-content"),$(".x-content").find(".pagination a").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||i.loadContentOverlay($(this).attr("href"))});var o={oProfiles:e.profiles,iNbProfiles:e.nb_profiles,sType:s,fnCallbackOnchange:function(e){i.iInitNbItems=e.iInitialNbItem,i.iNbItems=e.iNewNbItem}};i.setBtn(o)},"json")},setBtn:function(e){var t,i,n;"channels"===e.sType||"followed"===e.sType?(t="subscriptions.unsubscribe",i="close-circle",n="subscriptions.confirm_unsubscribe"):(t="misc.cancel_not_interested",i="plus-circle",n="misc.confirm_cancel_not_interested"),new a(t,"/followers/unsubscribe",i,n,"%user%","",e)}},new l}),define("skins/common/basic_feature",["static/utils","config/main","lib/i18n!front","lib/helpers/overlay/contextual_popup"],function(e,t,i,n){var s=function(e){this.sKey=e,this.bLoadingPopupNotif=!0,this.bErrorPopupNotif=!0};return s.prototype={isEnabled:function(){return"object"!=typeof t.dyn.disfeats||-1===t.dyn.disfeats.indexOf(this.sKey)},toggle:function(e,s){this.bLoadingPopupNotif&&(this.oLoadingPopup=n.loading(i.__("form.saving_settings"),{delay:500}));var o=this.isEnabled(),a=this;if("boolean"==typeof s&&s===o)return void("function"==typeof e&&e());s=!o,$.post({url:"/account/feature-"+(s?"enabled":"disabled"),data:{featureid:this.sKey},complete:function(){a.bLoadingPopupNotif&&a.oLoadingPopup&&a.oLoadingPopup.close()},success:function(s){if(!s.result)return void(a.bErrorPopupNotif&&n.alert(i.__("form.error_modification_not_saved")));t.dyn.disfeats||(t.dyn.disfeats=[]),a.isEnabled()?t.dyn.disfeats.push(a.sKey):t.dyn.disfeats.splice(t.dyn.disfeats.indexOf(a.sKey),1),"function"==typeof e&&e()},error:function(){a.bErrorPopupNotif&&n.alert(i.__("form.error_modification_not_saved"))},dataType:"json"})},activateLoadingPopup:function(e){this.bLoadingPopupNotif=!!e},activateErrorPopup:function(e){this.bErrorPopupNotif=!!e}},s}),define("text!skins/common/premium_feed/categories_filter_resume.mustache",[],function(){return'<div class="categories-filter-resume">\n\t<h3>{{{ title }}} <button type="button" class="btn btn-default reset"><span class="icon-f icf-close"></span> {{{ reset }}}</button></h3>\n\t<div class="row cat-list">\n\t\t<div class="col-xs-6">\n\t\t\t<button type="button" class="btn btn-lg btn-default add"><span class="icon-f icf-plus-square icf-white-fill"></span></button>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<button type="button" class="btn btn-lg btn-default exclude"><span class="icon-f icf-minus-square icf-white-fill"></span></button>\n\t\t</div>\n\t\t{{^empty_list_text}}\n\t\t\t<div class="col-xs-6">\n\t\t\t\t{{#add_list}}\n\t\t\t\t\t<p data-id="{{{ id }}}">\n\t\t\t\t\t\t<button type="button" class="btn btn-default remove" data-id="{{{ id }}}"><span class="icon-f icf-close"></span></button>\n\t\t\t\t\t\t<span class="label">{{{ name }}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t{{/add_list}}\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t{{#exclude_list}}\n\t\t\t\t\t<p data-id="{{{ id }}}">\n\t\t\t\t\t\t<button type="button" class="btn btn-default remove" data-id="{{{ id }}}"><span class="icon-f icf-close"></span></button>\n\t\t\t\t\t\t<span class="label">{{{ name }}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t{{/exclude_list}}\n\t\t\t</div>\n\t\t{{/empty_list_text}}\n\t\t{{#empty_list_text}}\n\t\t\t<p class="empty">{{{ empty_list_text }}}</p>\n\t\t{{/empty_list_text}}\n\t</div>\n\t<p class="close"><button type="button" class="btn btn-primary">{{{ ok }}}</button></p>\n</div>'}),define("text!skins/common/premium_feed/categories_filter_update_list.mustache",[],function(){return'<div class="categories-filter-update-list {{{ list_id }}}">\n\t<h3><span class="icon-f icf-minus-square icf-white-fill"></span><span class="icon-f icf-plus-square icf-white-fill"></span> {{{ title }}}</h3>\n\t<div class="row cat-list mobile-hide">\n\t\t{{#lists_3_cols}}\n\t\t<div class="col-xs-4">\n\t\t\t{{#list}}\n\t\t\t\t<p data-id="{{{ id }}}" class="{{{ status }}}">\n\t\t\t\t\t<button type="button" class="btn btn-default action" data-id="{{{ id }}}"><span class="icon-f icf-square"></span><span class="icon-f icf-minus-square"></span><span class="icon-f icf-plus-square"></span> <span class="label">{{{ name }}}</span></button>\n\t\t\t\t</p>\n\t\t\t{{/list}}\n\t\t</div>\n\t\t{{/lists_3_cols}}\n\t</div>\n\t<div class="row cat-list mobile-show">\n\t\t{{#lists_2_cols}}\n\t\t<div class="col-xs-6">\n\t\t\t{{#list}}\n\t\t\t\t<p data-id="{{{ id }}}" class="{{{ status }}}">\n\t\t\t\t\t<button type="button" class="btn btn-default action" data-id="{{{ id }}}"><span class="icon-f icf-square"></span><span class="icon-f icf-minus-square"></span><span class="icon-f icf-plus-square"></span> <span class="label">{{{ name }}}</span></button>\n\t\t\t\t</p>\n\t\t\t{{/list}}\n\t\t</div>\n\t\t{{/lists_2_cols}}\n\t</div>\n\t<p class="close"><button type="button" class="btn btn-primary">{{{ ok }}}</button></p>\n</div>'}),define("text!skins/common/premium_feed/categories_review.mustache",[],function(){return'<div class="categories-review">\n\t<h2>{{{ title }}}</h2>\n\n\t<div class="cats-row">\n\t\t{{#cols}}\n\t\t\t<div class="cats-col">\n\t\t\t\t<h3>{{{ col_title }}}</h3>\n\t\t\t\t<div class="cats{{^col_cats}} empty{{/col_cats}}">\n\t\t\t\t\t{{#col_cats}}\n\t\t\t\t\t\t<p data-id="{{{ id }}}">{{{ name }}}</p>\n\t\t\t\t\t{{/col_cats}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{/cols}}\n\t</div>\n\n\t<button type="button" class="btn btn-primary ok">{{{ ok }}}</button>\n</div>'}),define("text!skins/common/premium_feed/category_review.mustache",[],function(){return'<div class="category-review">\n\t<h2>\n\t\t<a href="{{{ href }}}" title="{{{ category_page }}}" class="btn btn-default" target="_blank">{{{ category_page }}}</a>\n\t\t<span class="label">{{{ category_title }}}</span>\n\t</h2>\n\n\t<div class="category-actions">\n\t\t<p>\n\t\t\t<button class="btn btn-primary sub" type="button">{{{ sub_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ sub_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-primary sub-in-chan" type="button">{{{ sub_in_chan_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ sub_in_chan_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-default unsub" type="button">{{{ unsub_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ unsub_desc }}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<button class="btn btn-default reject" type="button">{{{ reject_btn }}}</button>\n\t\t\t<span><span class="icon-f icf-info-circle"></span> {{{ reject_desc }}}</span>\n\t\t</p>\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/channel_preview.mustache",[],function(){return'<div class="channel-preview-header">\n\t{{#channel_pic_src}}\n\t\t<img src="{{{ channel_pic_src }}}" alt="" class="profile-pic" />\n\t{{/channel_pic_src}}\n\t<h2>\n\t\t<a href="{{{ href }}}" title="{{{ channel_page }}}" class="btn btn-default" target="_blank">{{{ channel_page }}}</a>\n\t\t<span class="label">{{{ channel_title }}}</span>\n\t</h2>\n\n\t<p class="channel-actions">\n\t\t<button class="btn btn-ticket sub" type="button">{{{ sub_btn }}}</button>\n\t\t<button class="btn btn-default reject" type="button">{{{ reject_btn }}}</button>\n\t</p>\n</div>\n\n<div class="mozaique thumbs-2-cols">\n\t{{{ mozaique }}}\n\t{{{ cover_loader }}}\n</div>'}),define("text!skins/common/premium_feed/channel_preview_mozaique_tbs.mustache",[],function(){return'{{#video_list}}\n\t<div id="video_{{{ id }}}_channel_preview" data-id="{{{ id }}}" class="thumb-block">\n\t\t<div class="thumb-inside">\n\t\t\t<div class="thumb">\n\t\t\t\t<a href="{{{ url }}}" target="_blank">\n\t\t\t\t\t<img src="{{{ img }}}{{{ thumb }}}" data-idcdn="10" data-videoid="{{{ id }}}" id="pic_{{{ id }}}" />\n\t\t\t\t\t<span class="video-title">{{{ title }}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/video_list}}'}),define("text!skins/common/premium_feed/containers.mustache",[],function(){return'<button id="hide-suggests" class="hide-suggests btn btn-xs btn-default">{{{ hide_suggests }}}</button>\n<div class="clearfix"></div>\n<h3 id="sub-suggests-title" class="sub-suggests-title"><span class="title">{{{ suggests_title }}}</span> <span class="added-removed">{{{ added_removed_total }}}</span> <span class="added-removed-cats">{{{ added_removed_cats }}}</span></h3>\n<div id="sub-suggests" class="sub-suggests mozaique thumbs-5-cols"></div>\n\n<div id="feed-videos-filters">\n\t<p>{{{ showing_x_vids }}}{{{ new_videos_channels }}}</p>\n\t{{{ filters }}}\n</div>\n<div id="feed-videos"></div>\n\n\n<button id="hide-suggests-2" class="hide-suggests btn btn-xs btn-default">{{{ hide_suggests }}}</button>\n<div class="clearfix"></div>\n<h3 id="sub-suggests-title-2" class="sub-suggests-title"><span class="title">{{{ suggests_title }}}</span> <span class="added-removed">{{{ added_removed_total }}}</span> <span class="added-removed-cats">{{{ added_removed_cats }}}</span></h3>\n<div id="sub-suggests-2" class="sub-suggests mozaique thumbs-5-cols"></div>'}),define("text!skins/common/premium_feed/cover_loader.mustache",[],function(){return"<div class=\"cover-loader\"><span class='icon-f icf-spinner icf-anim-pulse'></span></div>"}),define("text!skins/common/premium_feed/free_search.mustache",[],function(){return'<div class="free-search-filter">\n\t<h3>\n\t\t<span class="icon-f icf-search"></span> {{{ title }}}\n\t</h3>\n\t<div class="input-group">\n\t\t<input type="text" class="form-control" placeholder="{{{ placeholder }}}"{{#value}} value="{{{ value }}}"{{/value}}/>\n\t\t<span class="input-group-btn">\n            <button class="btn btn-primary ok" type="button">{{{ ok }}}</button>\n        </span>\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-default clear"><span class="icon-f icf-trash"></span> {{{ clear }}}</button>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/min_length_filter.mustache",[],function(){return'<div class="free-min-length-filter">\n\t<h3>\n\t\t<span class="icon-f icf-clock"></span> {{{ title }}}\n\t</h3>\n\t<div class="form-range">\n\t\t<span class="min">{{ min_label }}</span>\n\t\t<span class="max">{{ max_label }}</span>\n\t\t<input type="range" min="{{ min }}" max="{{ max }}" value="{{ value }}" step="1" />\n\t</div>\n\t<p>\n\t\t<button type="button" class="btn btn-primary ok">{{{ ok }}}</button>\n\t\t<button type="button" class="btn btn-default cancel">{{{ cancel }}}</button>\n\t</p>\n</div>'}),define("text!skins/common/premium_feed/other_suggest.mustache",[],function(){return'<div id="{{{ id }}}" class="thumb-block thumb-block-premium-feed-channel thumb-block-premium-feed-other-suggest">\n\t<div class="thumb-inside">\n\t\t<div class="big-button-container">\n\t\t\t<a href="{{ href }}" class="more" target="_blank">\n\t\t\t\t<span>\n\t\t\t\t\t<span class="cat">{{{ category }}}</span>\n\t\t\t\t\t{{{ name }}}\n\t\t\t\t\t<span class="thumbs"><span class="icon-f icf-thumb-up"></span> / <span class="icon-f icf-thumb-down"></span></span>\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>'}),define("text!skins/common/premium_feed/simple_dropdown_menu.mustache",[],function(){return'<div class="simple-dropdown premium-feed-filters">\n\t{{#filters}}\n\n\t\t\t<div class="niv1{{#list.length}} with-niv2{{/list.length}}">\n\t\t\t\t<span class="show-niv2{{#is_reset}} is-reset{{/is_reset}}">\n\t\t\t\t\t{{^is_reset}}<span class="icon-f icf-caret-down"></span>{{/is_reset}}\n\t\t\t\t\t<span class="label" data-filter="{{{ filter }}}">{{#forced_label}}{{{ forced_label }}}{{/forced_label}}{{^forced_label}}{{#list}}{{#active}}{{#label}}{{{ label }}}{{/label}}{{^label}}{{{ name }}}{{/label}}{{/active}}{{/list}}{{/forced_label}}</span>\n\t\t\t\t</span>\n\t\t\t\t{{#list.length}}\n\t\t\t\t\t<div class="niv2 premium-feed-filters">\n\t\t\t\t\t\t<div class="uls">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{{#list}}\n\t\t\t\t\t\t\t\t\t<li><a href="{{{ href }}}"{{#active}} class="current"{{/active}} data-filter="{{{ filter }}}" data-value="{{{ value }}}">{{{ name }}}</a></li>\n\t\t\t\t\t\t\t\t{{/list}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{{/list.length}}\n\t\t\t</div>\n\n\t{{/filters}}\n</div>'}),define("skins/common/premium_feed",["config/main","mustache","lib/tools","static/utils","static/dom","static/thumbs","lib/i18n!front","lib/helpers/overlay/box","lib/helpers/thumbs/wall","lib/helpers/inline_loader","lib/helpers/overlay/contextual_popup","skins/common/profile/cat_sub_actions","skins/common/profile/sub_overlay","skins/common/mozaique/simple_dropdown","skins/common/history/page_view_history","skins/common/history/one_info_tracker","skins/common/basic_feature","skins/common/main_cats/switcher","text!skins/common/premium_feed/categories_filter_resume.mustache","text!skins/common/premium_feed/categories_filter_update_list.mustache","text!skins/common/premium_feed/categories_review.mustache","text!skins/common/premium_feed/category_review.mustache","text!skins/common/premium_feed/channel_preview.mustache","text!skins/common/premium_feed/channel_preview_mozaique_tbs.mustache","text!skins/common/premium_feed/containers.mustache","text!skins/common/premium_feed/cover_loader.mustache","text!skins/common/premium_feed/free_search.mustache","text!skins/common/premium_feed/min_length_filter.mustache","text!skins/common/premium_feed/other_suggest.mustache","text!skins/common/premium_feed/simple_dropdown_menu.mustache"],function(e,t,i,n,s,o,a,r,l,u,f,d,c,h,p,_,g,m,b,v,D,y,w,C,k,x,F,E,T,S){var L={categories_filter_resume:b,categories_filter_update:v,categories_review:D,category_review:y,channel_preview:w,channel_preview_thumb_list:C,containers:k,cover_loader:x,free_search_filter:F,min_length_filter:E,other_suggest:T,simple_dropdown:S},P={premium_name:"RED"},I={add_exclude_cats_to_result:"premium_feed.add_exclude_cats_to_result",all:"misc.all",all_qualities:"listing.all_qualities",cancel:"misc.cancel",cat_content_no_longer_offered:"premium_feed.cat_content_no_longer_offered",cat_no_longer_offered:"premium_feed.cat_no_longer_offered",categories:"video.categories",category:"category",categories_added:"premium_feed.categories.added",categories_added_in_channels:"premium_feed.categories.added_in_channels",categories_ignored:"premium_feed.categories.ignored",categories_rejected:"premium_feed.categories.rejected",categories_unreviewed:"premium_feed.categories.unreviewed",category_page:"video.category_page",category_dont_show_it_again:"video.category.dont_show_it_again",channel_page:"profile.channel_page",channels_added_removed_total:"premium_feed.channels_added_removed_total",channels_left_to_review:"premium_feed.channels_left_to_review",clear:"search.clear",duration_minutes_min:"video.duration_minutes_min",filter_add_categories:"premium_feed.filter_add_categories",filter_exclude_categories:"premium_feed.filter_exclude_categories",filters_restrict_results:"search.filters_restrict_results",free:"misc.free",free_only:"videos.free_vids",here_some_channels:"premium_feed.here_some_channels",hide_suggests:"premium_feed.hide_suggests",min_length_title_free:"premium_feed.minimum_duration_of_free_videos",min_length_title_premium:"premium_feed.minimum_duration_of_site_videos",minimum_duration:"video.duration",nb_mins_long:"misc.nb_mins_long",new_channel_added_since_last_visit:"premium_feed.new_channel_added_since_last_visit",new_channels_added_since_last_visit:"premium_feed.new_channels_added_since_last_visit",new_video_added_since_last_visit:"premium_feed.new_video_added_since_last_visit",new_video_channel_added_since_last_visit:"premium_feed.new_video_channel_added_since_last_visit",new_video_channels_added_since_last_visit:"premium_feed.new_video_channels_added_since_last_visit",new_videos_added_since_last_visit:"premium_feed.new_videos_added_since_last_visit",new_videos_channel_added_since_last_visit:"premium_feed.new_videos_channel_added_since_last_visit",new_videos_channels_added_since_last_visit:"premium_feed.new_videos_channels_added_since_last_visit",not_interested:"misc.not_interested",ok:"misc.OK",older_videos:"order.older_videos",random_order:"order.random_order",randomize_again:"order.randomize_again",recent_videos:"order.recent_videos",red_and_free:"premium_feed.red_and_free",red_only:"videos.red_vids",reset_filters:"search.reset_filters",reset_selection:"misc.reset_selection",search:"search",search_for:"search.for",see_all:"misc.see_all",show_suggests:"premium_feed.show_suggests",showing_vids_out_off_total:"listing.showing_vids_out_off_total",sub_to_cat_global:"premium_feed.sub_to_cat_global",sub_to_cat_in_subbed_channels:"premium_feed.sub_to_cat_in_subbed_channels",sub_to_channels_to_populate:"premium_feed.sub_to_channels_to_populate",sub_to_channels_to_populate_version:"premium_feed.sub_to_channels_to_populate_version",subscribe:"subscriptions.subscribe",subscribe_in_channel:"premium_feed.category.subscribe_in_channel",subscription_date:"premium_feed.subscription_date",unwatched_videos_only:"listing.unwatched_videos_only",watched_videos_only:"listing.watched_videos_only"},M={channels_added_removed_total:""},A={reject_cat:"ban",sub_cat:!1,sub_cat_in_chan:!1,unsub_cat:"eye-blocked"},O={account_subscriptions:"/account/subscriptions/channels",account_not_interested:"/account/subscriptions/not-interested",hash_red:"#red",hash_red_and_free:"#red-and-free"},B={page_init_end:function(e){},get_channel_top_title:function(e){},append_channel_videos:function(e,t){},init_videos_list:function(e){},init_desktop_channel_videos:function(e){},add_pagination:function(e){},launch_wizard:function(){}},R=function(t){if(this.bNoCatSuggests=!0,e.data.user_cats=[],this.$PageContainer=$("#page-videos-content"),0===this.$PageContainer.length)return!1;if(this.oTexts=P,this.oTranslations=I,this.oIcfs=A,this.oForcedTranslations=M,this.oTemplates=L,this.oUrls=O,this.oFunctions=B,void 0!==t){if("undefined"!=typeof t.texts)for(var i in t.texts)"undefined"!=typeof this.oTexts[i]&&(this.oTexts[i]=t.texts[i]);if("undefined"!=typeof t.translations)for(var n in t.translations)"undefined"!=typeof this.oTranslations[n]&&(this.oTranslations[n]=t.translations[n]);if("undefined"!=typeof t.forced_translations)for(var s in t.forced_translations)"undefined"!=typeof this.oForcedTranslations[s]&&(this.oForcedTranslations[s]=t.forced_translations[s]);if("undefined"!=typeof t.icfs)for(var o in t.icon_f)"undefined"!=typeof this.oIcfs[o]&&(this.oIcfs[o]=t.icon_f[o]);if("undefined"!=typeof t.templates)for(var r in t.templates)"undefined"!=typeof this.oTemplates[r]&&(this.oTemplates[r]=t.templates[r]);if("undefined"!=typeof t.urls)for(var l in t.urls)"undefined"!=typeof this.oUrls[l]&&(this.oUrls[l]=t.urls[l]);if("undefined"!=typeof t.functions)for(var u in t.functions)"undefined"!=typeof this.oFunctions[u]&&(this.oFunctions[u]=t.functions[u])}this.iCancelTimeout=3e3,this.iSuggestsContainerNbRows=1,this.iSuggestsContainerNbRows2=2,this.iMobileSuggestsContainerNbRows=1,this.iMobileSuggestsContainerNbRows2=2,this.iMaxMobileSuggestsContainerNbRows=3,this.iMaxMobileSuggestsContainerNbRows2=6,this.iTooFewChannelsLimit=2,this.iAjaxErrorsCount=0,this.aLoadedSuggests=[],this.aVisibleSuggests=[],this.oFiltersLabels=[],this.iFilterSensitivity="undefined"!=typeof e.data.sensitivity?e.data.sensitivity:0,this.iFilterViewMode="undefined"!=typeof e.data.view_mode?e.data.view_mode:0,this.iFilterSort="undefined"!=typeof e.data.sort?e.data.sort:0,this.iFilterSortRandomize=!1,this.iFilterShowFree="undefined"!=typeof e.data.show_free?e.data.show_free:0,this.iFilterMinLengthPremium="undefined"!=typeof e.data.premium_min_length?e.data.premium_min_length:0,this.iFilterMinLengthFree="undefined"!=typeof e.data.free_min_length?e.data.free_min_length:0,this.sFilterQuality="undefined"!=typeof e.data.quality?e.data.quality:"360P",this.oFilterCategories={cats:[],excats:[]};var d=_.get("premiumFeed_lastFreeSearchFilter");this.sFilterFreeSearch=d||!1;var c=_.get("premiumFeed_lastCatFilter");if(c&&c.cats&&e.data.categories&&e.data.categories.length>0)for(var m in e.data.categories){var b=e.data.categories[m];-1!==c.cats.indexOf(b.id)?this.oFilterCategories.cats.push(b.id):-1!==c.excats.indexOf(b.id)&&this.oFilterCategories.excats.push(b.id)}this.iAddedChannels=0,this.iRejectedChannels=0,this.iUnreviewedChannels=1,this.iTotalChannels=1,this.bSuggestsContainerAutoShow=!1,this.bHasTooFewSuggestsAdded=!1,this.bHasTooFewVideos=!1,this.oFeatureSuggestOpened=new g("fc"),this.oFeatureSuggestOpened.activateLoadingPopup(!1),this.oFeatureSuggestOpened.activateErrorPopup(!1),this.bSuggestsContainerManualShow=this.oFeatureSuggestOpened.isEnabled(),this.oSimpleDropdown=new h;var v=this;this.loadChannels(function(){v.iLastResizeChannelThumbsSpace=v.countVisibleSuggestThumbsSpace(v.getSuggestsContainerNbRows()),v.iLastResizeChannelThumbsSpace2=v.countVisibleSuggestThumbsSpace(v.getSuggestsContainerNbRows2()),v.insertFirstSuggests(),$(window).on("resize",function(){v.resizeWindowEvt()}),0!==v.countVisibleSuggestThumbsAdded()&&e.dyn.login_info&&e.dyn.login_info.is_logged&&e.dyn.login_info.is_premium&&v.oFunctions.launch_wizard()});var D=_.get("premiumFeed_lastPage")||null;0===this.iFilterViewMode||this.isViewModeAvailable()?this.loadVideos(D):f.confirm(a.__("premium_feed.filter_based_on_history_enabling"),function(){p.startTracking(function(){v.loadVideos(D)})},function(){p.startTracking(function(){v.updateFilterSelect("view_mode",0),v.loadVideos(D)})}),this.oFunctions.page_init_end(v)};return R.prototype={createContainers:function(){if("undefined"==typeof this.$VideosContainer){this.$PageContainer.empty().append($(t.render(this.oTemplates.containers,{hide_suggests:a.__(this.bSuggestsContainerManualShow?this.oTranslations.hide_suggests:this.oTranslations.show_suggests),suggests_title:0===this.countReviewedChannels()?a.__(this.oTranslations.here_some_channels):a.__(this.oTranslations.channels_left_to_review,{"%count%":'<strong class="feed-nb-channels-unreviewed">'+this.iUnreviewedChannels+"</strong>"}),added_removed_total:a.__(this.oTranslations.channels_added_removed_total,{"%link_added%":'<a href="'+this.oUrls.account_subscriptions+'">',"%link_removed%":'<a href="'+this.oUrls.account_not_interested+'">',"%link_end%":"</a>","%nb_added%":'<strong class="feed-nb-channels-added">'+this.iAddedChannels+"</strong>","%nb_removed%":'<strong class="feed-nb-channels-rejected">'+this.iRejectedChannels+"</strong>","%nb_total%":'<strong class="feed-nb-channels-total">'+this.iTotalChannels+"</strong>"},this.oForcedTranslations.channels_added_removed_total),added_removed_cats:this.getCatSuggestsTitleText(),showing_x_vids:a.__(this.oTranslations.showing_vids_out_off_total,{"%nb_videos%":'<strong id="feed-nb-videos"></strong>',"%nb_total%":'<strong id="feed-nb-total"></strong>'}),new_videos_channels:e.data.new_videos||e.data.new_channels?" "+a.__(this.oTranslations["new"+(e.data.new_videos>0?e.data.new_videos>1?"_videos":"_video":"")+(e.data.new_channels>0?e.data.new_channels>1?"_channels":"_channel":"")+"_added_since_last_visit"],{"%videos_count%":e.data.new_videos?"<strong>"+e.data.new_videos.toString()+"</strong>":"","%channels_count%":e.data.new_channels?"<strong>"+e.data.new_channels.toString()+"</strong>":""}):"",filters:this.getFiltersHTML()}))),this.$ManualHideSuggestsBtn=this.$PageContainer.children("#hide-suggests"),this.$ManualHideSuggestsBtn2=this.$PageContainer.children("#hide-suggests-2"),this.$SuggestsTitle=this.$PageContainer.children("#sub-suggests-title"),this.$SuggestsTitle2=this.$PageContainer.children("#sub-suggests-title-2"),this.$SuggestsContainer=this.$PageContainer.children("#sub-suggests"),this.$SuggestsContainer2=this.$PageContainer.children("#sub-suggests-2"),this.$CountAddedChannels=this.$PageContainer.find(".feed-nb-channels-added"),this.$CountAddedChannels1=this.$SuggestsTitle.find(".feed-nb-channels-added"),this.$CountAddedChannels2=this.$SuggestsTitle2.find(".feed-nb-channels-added"),this.$CountRejectedChannels=this.$PageContainer.find(".feed-nb-channels-rejected"),this.$CountRejectedChannels1=this.$SuggestsTitle.find(".feed-nb-channels-rejected"),this.$CountRejectedChannels2=this.$SuggestsTitle2.find(".feed-nb-channels-rejected"),this.$CountTotalChannels=this.$PageContainer.find(".feed-nb-channels-total"),this.$CatsSuggestsRecap=this.$PageContainer.find(".added-removed-cats"),this.$CountUnreviewedChannels=this.$PageContainer.find(".feed-nb-channels-unreviewed"),e.data.categories&&0!==e.data.categories.length&&!this.bNoCatSuggests||this.$CatsSuggestsRecap.hide(),this.$CutSuggestsList=$('<div class="sub-suggests-cut" id="sub-suggests-cut"></div>'),this.$SuggestsContainer.append(this.$CutSuggestsList),this.$CutSuggestsList2=$('<div class="sub-suggests-cut" id="sub-suggests-cut-2"></div>'),this.$SuggestsContainer2.append(this.$CutSuggestsList2),this.$CutSuggestsList22=$('<div class="sub-suggests-cut" id="sub-suggests-cut-22"></div>'),this.$SuggestsContainer2.append(this.$CutSuggestsList22),this.$VideosContainer=this.$PageContainer.children("#feed-videos"),this.$CountVideos=this.$PageContainer.find("#feed-nb-videos"),this.$CountTotalVideos=this.$PageContainer.find("#feed-nb-total"),this.$VideoFilters=this.$PageContainer.find("#feed-videos-filters"),this.initVideoFilters();var i=this;this.$ManualHideSuggestsBtn.appendTo($(".premium-switch-page-dropdown")),this.$ManualHideSuggestsBtn.add(this.$ManualHideSuggestsBtn2).on("click",function(){i.manualHideShowSuggestsContainers()}),this.$SuggestsTitle.add(this.$SuggestsTitle2).find(".added-removed a").on("click",function(e){e.preventDefault(),c.setOverlay({sUrl:$(this).attr("href"),fnLoadVideos:function(){i.loadChannels(),i.loadVideos()}})}),
this.$SuggestsTitle.add(this.$SuggestsTitle2).find(".added-removed-cats").on("click",function(e){e.preventDefault(),i.openCategoriesReview()})}},getSuggestsContainer:function(){return this.createContainers(),this.$SuggestsContainer},getSuggestsContainer2:function(){return this.createContainers(),this.$SuggestsContainer2},getVideosContainer:function(){return this.createContainers(),this.$VideosContainer},setVideosContainerToLoading:function(){!0!==this.bVideosContainerIsLoading&&(this.bVideosContainerIsLoading=!0,this.$VideosContainerLoader||(this.$VideosContainerLoader=$(t.render(this.oTemplates.cover_loader))),$ListingContainer=this.getVideosContainer(),$ListingContainer.append(this.$VideosContainerLoader).addClass("loading"))},unsetVideosContainerToLoading:function(){!0===this.bVideosContainerIsLoading&&(this.bVideosContainerIsLoading=!1,this.$VideosContainerLoader&&this.$VideosContainerLoader.remove(),$ListingContainer=this.getVideosContainer(),$ListingContainer.removeClass("loading"))},setSuggestsContainerToLoading:function(){if(!0!==this.bSuggestsContainerIsLoading){this.bSuggestsContainerIsLoading=!0;var e=this.getSuggestsContainer(),i=this.getSuggestsContainer2();this.$SuggestsContainerLoader||(this.$SuggestsContainerLoader=$(t.render(this.oTemplates.cover_loader))),this.$SuggestsContainerLoader2||(this.$SuggestsContainerLoader2=$(t.render(this.oTemplates.cover_loader))),e.append(this.$SuggestsContainerLoader),i.append(this.$SuggestsContainerLoader2)}},unsetSuggestsContainerToLoading:function(){!0===this.bSuggestsContainerIsLoading&&(this.bSuggestsContainerIsLoading=!1,this.$SuggestsContainerLoader&&this.$SuggestsContainerLoader.remove(),this.$SuggestsContainerLoader2&&this.$SuggestsContainerLoader2.remove())},loadVideos:function(t){t="string"==typeof t?t:"/feed/0","undefined"!=typeof this.xVideoCall&&"function"==typeof this.xVideoCall.abort&&this.xVideoCall.abort(),this.setVideosContainerToLoading();var i=this;this.xVideoCall=$.post({url:t,data:this.getVideoLoadData(),complete:function(){i.unsetVideosContainerToLoading()},success:function(n){if(n.result){_.set("premiumFeed_lastCatFilter",i.oFilterCategories),_.set("premiumFeed_lastFreeSearchFilter",i.sFilterFreeSearch),_.set("premiumFeed_lastPage",t),$ListingContainer=i.getVideosContainer(),$SuggestsContainer=i.getSuggestsContainer(),$ListingContainer.empty(),"number"!=typeof n.nb_videos_total&&(n.nb_videos_total=0),n.nb_videos_total<12?i.setTooFewVideos(!0):i.setTooFewVideos(!1),i.$CountVideos.text(n.nb_videos_total.toLocaleString(e.dyn.locale)),i.$CountTotalVideos.text(n.nb_premium_vids_total.toLocaleString(e.dyn.locale));var s=$(n.html);if($ListingContainer.toggleClass("no-videos",0===s.length),0===n.nb_videos_total)return void(0===n.nb_channels&&0===n.nb_categories?i.$VideoFilters.hide():$ListingContainer.append('<p class="empty">'+a.__(i.oTranslations.filters_restrict_results)+"</p>"));i.$VideoFilters.show(),$ListingContainer.prepend(s),"undefined"==typeof n.show_free||n.show_free===i.iFilterShowFree||1===n.show_free&&"undefined"!=typeof n.free_min_length&&0!==n.free_min_length||i.updateFilterSelect("show_free",n.show_free),"undefined"!=typeof n.premium_min_length&&n.premium_min_length!==i.iFilterMinLengthPremium&&i.updateFilterSelect("premium_min_length",n.premium_min_length),"undefined"!=typeof n.free_min_length&&n.free_min_length!==i.iFilterMinLengthFree&&i.updateFilterSelect("free_min_length",n.free_min_length),"undefined"!=typeof n.view_mode&&n.view_mode!==i.iFilterViewMode&&i.updateFilterSelect("view_mode",n.view_mode),i.iFilterSortRandomize=!1,"undefined"!=typeof n.sort&&n.sort!==i.iFilterSort&&i.updateFilterSelect("sort",n.sort),"undefined"!=typeof n.quality&&n.quality!==i.sFilterQuality&&i.updateFilterSelect("quality",n.quality),"undefined"!=typeof n.free_search&&n.free_search!==i.sFilterFreeSearch&&i.updateFilterSelect("free_search",n.free_search),"undefined"!=typeof n.cats&&"undefined"!=typeof n.excats&&i.hasCategoriesFilterChanged(n)&&(i.oFilterCategories.cats=n.cats,i.oFilterCategories.excats=n.excats,i.updateCategoriesFilter()),3===i.iFilterSort&&i.initChannelShowMore($ListingContainer),i.oFunctions.init_videos_list($ListingContainer),i.oFunctions.add_pagination($ListingContainer),$ListingContainer.find(".pagination a, .pagin-next").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||(i.scrollToVideos(),i.loadVideos("/feed/"+$(this).attr("href").substr(1)))})}},error:function(e){e&&"abort"===e.statusText||(console.log("%cLoading videos - Ajax ERROR","color:red;",e),i.iAjaxErrorsCount++,i.iAjaxErrorsCount<5?(console.log("Trying again"),setTimeout(function(){i.loadVideos(t)},500)):console.log("%cLoading videos - Too many Ajax ERROR","color:red;"))},dataType:"json"})},scrollToVideos:function(e){if(void 0===e){if(e=this.getVideosContainer(),s.isElementInView(this.$VideoFilters,!1)&&s.isElementInView(e,!1))return}else if(s.isElementInView(e,!1))return;var t=Math.min(80,$(window).height()/8),i=e.offset().top-t;s.scrollToTop(i)},loadChannels:function(e,t){"undefined"!=typeof this.xChannelCall&&"function"==typeof this.xChannelCall.abort&&this.xChannelCall.abort(),this.setSuggestsContainerToLoading();var n=this,s=this.getLoadedChannelsId();"function"==typeof e&&("undefined"==typeof this.aLoadChannelsEndFunctions&&(this.aLoadChannelsEndFunctions=[]),this.aLoadChannelsEndFunctions.push(e)),this.xChannelCall=$.post({url:"/feed/channels",data:{ids:s},complete:function(){n.unsetSuggestsContainerToLoading()},success:function(e){if(e.result){var s=0===n.iUnreviewedChannels;if(n.iAddedChannels="number"==typeof e.nb_chans_added?e.nb_chans_added:0,n.iRejectedChannels="number"==typeof e.nb_chans_rejected?e.nb_chans_rejected:0,n.iUnreviewedChannels="number"==typeof e.nb_chans_disp?e.nb_chans_disp:0,n.iTotalChannels=n.iAddedChannels+n.iRejectedChannels+n.iUnreviewedChannels,n.updateSuggestsContainersTitles(),s||!0===t)return void n.execLoadChannelsEndFunctions();if(e.html&&e.subs_users){var o=$(i.replaceThumbcast(e.html)).filter(".thumb-block");for(var a in e.subs_users){var r=o.filter("#profile_"+a);if(0!==r.length){var l=e.subs_users[a];n.aLoadedSuggests.push({sId:l.id,iSubs:l.subs,sSubs:l.subs_s,sType:"channel",sUserName:a,sReview:"unreviewed",$Html:r,$Html2:r.clone().prop("id",r.prop("id").replace("profile_","profile2_")),sCsrf:"undefined"!=typeof e.csrf[l.id]&&e.csrf[l.id],sUrl:"undefined"!=typeof e.urls[l.id]?e.urls[l.id]:"",sCountVideosFree:"undefined"!=typeof e.counts[l.id]?e.counts[l.id].nb_free_vids:"",sCountVideosPremium:"undefined"!=typeof e.counts[l.id]?e.counts[l.id].nb_premium_vids:""})}}}n.execLoadChannelsEndFunctions()}},error:function(e){e&&"abort"===e.statusText||(console.log("%cLoading channels - Ajax ERROR","color:red;",e),n.iAjaxErrorsCount++,n.iAjaxErrorsCount<5?(console.log("Trying again"),setTimeout(function(){n.loadChannels(null,t)},500)):console.log("%cLoading channels - Too many Ajax ERROR","color:red;"))},dataType:"json"})},insertFirstSuggests:function(){var e=this.countUnreviewedCategoriesSuggests();if(0!==this.aLoadedSuggests.length||0!==e){var t=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2()),i=$(),n=$(),s=this.getSuggestsContainer(),o=this.getSuggestsContainer2();for(var a in this.aLoadedSuggests){if(this.countVisibleSuggestThumbsAdded()>=t)break;var r=this.aLoadedSuggests[a];r.bAdded||(this.initAddedSuggestThumb(r),i=i.add(r.$Html),n=n.add(r.$Html2))}s.append(i),o.append(n);var l=this.getOrCreateFirstCatSuggest();l&&this.appendOCatSuggest(l,s,o),this.countLoadedSuggestsNotAdded()+this.countVisibleSuggestThumbsAdded()>0?this.autoHideShowSuggestsContainers(!0):this.autoHideShowSuggestsContainers(!1),this.fillSuggestsContainers("first-load"),this.updateSuggestsPositionCut(!0),this.updateSuggestsContainersTitles()}},execLoadChannelsEndFunctions:function(){if("undefined"!=typeof this.aLoadChannelsEndFunctions&&this.aLoadChannelsEndFunctions.length>0){for(var e=0;e<this.aLoadChannelsEndFunctions.length;e++){var t=this.aLoadChannelsEndFunctions[e];"function"==typeof t&&t()}this.aLoadChannelsEndFunctions=[]}},initAddedSuggestThumb:function(e,t){e.bAdded||("channel"===e.sType?(e.$ThumbLink=e.$Html.find(".thumb a"),e.$ThumbLink2=e.$Html2.find(".thumb a"),e.$SubBtn=e.$Html.find(".sub"),e.$SubBtn2=e.$Html2.find(".sub"),e.$SubBtnLabel=e.$SubBtn.find(".label"),e.$SubBtnLabel2=e.$SubBtn2.find(".label"),e.$RejectBtn=e.$Html.find(".reject"),e.$RejectBtn2=e.$Html2.find(".reject"),e.$RejectBtnLabel=e.$RejectBtn.find(".label"),e.$RejectBtnLabel2=e.$RejectBtn2.find(".label"),e.sPicSrc=e.$Html.find(".profile-pic").prop("src"),e.sDisplayName=e.$Html.find(".profile-name").text(),e.aSimpleVideoList=e.$ThumbLink.find("img").data("videos"),e.bAdded=!0,this.setChannelThumbActions(e)):"category"===e.sType&&(e.$ThumbLink=e.$Html.find("a"),e.$ThumbLink2=e.$Html2.find("a"),e.bAdded=!0,this.setCategoryThumbActions(e))),t||this.aVisibleSuggests.push(e)},reloadSuggest:function(e,t){var i,n,s=this.getSuggestsContainer(),o=this.getSuggestsContainer2();if("channel"===e.sType?(i=s.find("#profile_"+e.sUserName),n=o.find("#profile2_"+e.sUserName)):"category"===e.sType&&(i=s.find("#catsuggest_"+e.sId),n=o.find("#catsuggest2_"+e.sId)),0===i.length)return!1;var a=this.getOSuggestVisibleIndex(e);if(-1!==a){var r=this,l=this.getNextSuggest(this.getSuggestsContainerNbRows2(),e);if(!l)return"string"!=typeof t||"after-loading"!==t?void this.loadChannels(function(){r.reloadSuggest(e,"after-loading")}):(this.aVisibleSuggests.splice(a,1),i.add(n).find("*").off("click"),i.stop().animate({opacity:0},function(){i.remove(),r.updateSuggestsPositionCut(!0),0===r.aVisibleSuggests.length&&r.autoHideShowSuggestsContainers(!1)}),void n.stop().animate({opacity:0},function(){n.remove(),r.updateSuggestsPositionCut(!0)}));this.initAddedSuggestThumb(l,!0),this.aVisibleSuggests.splice(a,1,l),i.add(n).find("*").off("click");var u=function(){var e=l.$Html;e.css("opacity","0"),i.replaceWith(e),e.animate({opacity:1},function(){r.updateSuggestsPositionCut(!0,t),r.isMobileSuggestContainer()&&r.increaseMobileSuggestContainerNbRows(!r.bHideContainer&&a<r.countVisibleSuggestThumbsSpace(r.getSuggestsContainerNbRows())?1:2)})},f=function(){var e=l.$Html2;e.css("opacity","0"),n.replaceWith(e),e.animate({opacity:1},function(){r.updateSuggestsPositionCut(!0,t)})},d=bFadedOut2=!1;if("channel"===e.sType)if(!this.bHideContainer&&a<this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows())){var c="subscribe"===t?this.$CountAddedChannels1:this.$CountRejectedChannels1,h=c.offset(),p=i.offset(),_=Math.round(h.left+c.outerWidth()/2-(p.left+i.outerWidth()/2)),g=Math.round(h.top+c.outerHeight()/2-(p.top+i.outerHeight()/2));d=!0,i.stop().delay(200).css({position:"relative","transform-origin":"50% 50%","z-index":"2"}).animate({"data-Evol":1},{duration:500,step:function(e,t){$(this).css("transform","translate("+Math.round(_*e)+"px,"+Math.round(g*e)+"px) scale("+(1-e+.1*e)+")")},complete:u})}else if(this.bHideContainer){var m="subscribe"===t?this.$CountAddedChannels2:this.$CountRejectedChannels2,b=m.offset(),v=n.offset(),D=Math.round(b.left+m.outerWidth()/2-(v.left+n.outerWidth()/2)),y=Math.round(b.top+m.outerHeight()/2-(v.top+n.outerHeight()/2));bFadedOut2=!0,n.stop().delay(200).css({position:"relative","transform-origin":"50% 50%","z-index":"2"}).animate({"data-Evol":1},{duration:500,step:function(e,t){$(this).css("transform","translate("+Math.round(D*e)+"px,"+Math.round(y*e)+"px) scale("+(1-e+.1*e)+")")},complete:f})}!1===d&&i.stop().animate({opacity:0},u),!1===bFadedOut2&&n.stop().animate({opacity:0},f)}},getVideoLoadData:function(){var e={view_mode:this.iFilterViewMode,sort:this.iFilterSortRandomize?"randomize":this.iFilterSort,show_free:this.iFilterShowFree,premium_min_length:this.iFilterMinLengthPremium,free_min_length:this.iFilterMinLengthFree,quality:this.sFilterQuality,cats:this.oFilterCategories.cats,excats:this.oFilterCategories.excats};return"string"==typeof this.sFilterFreeSearch&&this.sFilterFreeSearch.length>0&&(e.free_search=this.sFilterFreeSearch),e},initChannelShowMore:function(e){var t=this;$(".activity-event",e).each(function(){var e=$(this),i=e.find("a.more"),n=e.find("a.less");0!==i.length&&(e.data("loaded",e.find(".thumb-block").length<=10),e.data("page-loaded",0),n.on("click",function(i){i.preventDefault(),e.addClass("show-less"),t.scrollToVideos(t.oFunctions.get_channel_top_title(e))}),i.on("click",function(i){i.preventDefault(),t.showMoreChannelVideosClick(e)}))})},showMoreChannelVideosClick:function(e){if(e.data("loaded"))return void e.removeClass("show-less");if(e.hasClass("show-less")){if(!0===!e.find(".mozaique .thumb-block").not(".show-more-less-vids").last().is(":visible"))return void e.removeClass("show-less")}var t=this,n=$('<p class="loader">'+u.getIcf()+"</p>"),s=e.find(".mozaique"),o=e.data("id-profile"),a=e.data("page-loaded"),r=e.find("a.more");r.off("click"),s.append(n),$.post({url:"/feed/channel/"+o+"/"+(a+1),data:this.getVideoLoadData(),complete:function(){n.remove()},success:function(n){if(n.result){e.removeClass("show-less").data("page-loaded",a+1);var o=$(i.replaceThumbcast(n.html.replace(/\\'/gi,"'"))).find(".thumb-block");i.executePendingPrepare(o),t.oFunctions.append_channel_videos(o,e),t.oFunctions.init_videos_list(s),o.addClass("extra-thumb-block"),r.on("click",function(i){i.preventDefault(),t.showMoreChannelVideosClick(e)}),n.nb_more||(e.data("loaded",!0),r.addClass("no-more-to-load"))}},error:function(i){console.log("%cLoading SHOW MORE channel videos - Ajax ERROR","color:red;",i),t.iAjaxErrorsCount++,t.iAjaxErrorsCount<5?(console.log("Trying again"),setTimeout(function(){t.showMoreChannelVideosClick(e)},500)):console.log("%cLoading SHOW MORE channel videos - Too many Ajax ERROR","color:red;")},dataType:"json"})},getSuggestsContainerNbRows:function(){return this.isMobileSuggestContainer()?this.iMobileSuggestsContainerNbRows:this.iSuggestsContainerNbRows},getSuggestsContainerNbRows2:function(){return this.countChannelsLeftToLoad()<1?this.getSuggestsContainerNbRows():this.isMobileSuggestContainer()?this.iMobileSuggestsContainerNbRows2:this.iSuggestsContainerNbRows2},isMobileSuggestContainer:function(){return this.getSuggestsContainerNbCols()<4},increaseMobileSuggestContainerNbRows:function(e){if(!(this.iMobileSuggestsContainerNbRows>=this.iMaxMobileSuggestsContainerNbRows&&this.iMobileSuggestsContainerNbRows2>=this.iMaxMobileSuggestsContainerNbRows2)){var t=this.countChannelsLeftToLoad()<1;this.iMobileSuggestsContainerNbRows<this.iMaxMobileSuggestsContainerNbRows&&(1===e||t)&&this.iMobileSuggestsContainerNbRows++,this.iMobileSuggestsContainerNbRows2<this.iMaxMobileSuggestsContainerNbRows2&&(t||this.iMobileSuggestsContainerNbRows2++),this.resizeWindowEvt("increase-rows-"+e)}},getSuggestsContainerNbCols:function(){var e=s.getViewportWidth();return e<=640?2:e>=1900?7:e>=1440?6:e>=1024?5:e<=767?3:4},countVisibleSuggestThumbsSpace:function(e){return"number"!=typeof e&&(e=1),e*this.getSuggestsContainerNbCols()},countVisibleSuggestThumbsAdded:function(){return this.aVisibleSuggests.length},countHiddenSuggests:function(e){return this.countVisibleSuggestThumbsAdded()-this.countVisibleSuggestThumbsSpace(e)},countLoadedSuggestsNotAdded:function(){var e=0;for(var t in this.aLoadedSuggests)this.aLoadedSuggests[t].bAdded||e++;return e},countLoadedChannelSuggestsNotAdded:function(){var e=0;for(var t in this.aLoadedSuggests)this.aLoadedSuggests[t].bAdded||"channel"!==this.aLoadedSuggests[t].sType||e++;return e},getNextSuggest:function(e,t){var i=!1,n=this.getNextCategorySuggestId();return n&&(void 0!==t&&"category"===t.sType||this.countChannelsLeftToLoad()<1)&&(i=this.getOrCreateOCatSuggestObject(n)),i||!(i=this.getNextChannel(e))&&n&&(i=this.getOrCreateOCatSuggestObject(n)),i},updateSuggestsPositionCut:function(e,t){if((e||"undefined"!=typeof this.$CutSuggestsList)&&0!==this.$CutSuggestsList.length){this.fillSuggestsContainers(t);var i=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows()),n=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2()),s=this.getSuggestsContainer2(),o=s.find(".thumb-block"),a=this.countChannelsLeftToLoad()<1;if(e||i!==this.iLastSuggestThumbsSpace){this.iLastSuggestThumbsSpace=i,this.$CutSuggestsList.remove(),this.$CutSuggestsList2.remove();var r=this.getSuggestsContainer(),l=r.find(".thumb-block");l.length<1?this.$CutSuggestsList.prependTo(r):l.length>i?this.$CutSuggestsList.insertBefore(l.get(i)):this.$CutSuggestsList.insertAfter(l.last()),a||o.length<1?this.$CutSuggestsList2.prependTo(s):o.length>i?this.$CutSuggestsList2.insertBefore(o.get(i)):this.$CutSuggestsList2.insertAfter(o.last())}(e||n!==this.iLastSuggestThumbsSpace2)&&(this.iLastSuggestThumbsSpace2=n,this.$CutSuggestsList22.remove(),o.length<1?this.$CutSuggestsList22.appendTo(s):a?o.length>i?this.$CutSuggestsList22.insertBefore(o.get(i)):this.$CutSuggestsList22.insertAfter(o.last()):o.length>n?this.$CutSuggestsList22.insertBefore(o.get(n)):this.$CutSuggestsList22.insertAfter(o.last()))}},updateSuggestsContainersTitles:function(){if("undefined"!=typeof this.$CountAddedChannels&&0!==this.$CountAddedChannels.length){this.$CountAddedChannels.html(parseInt(this.iAddedChannels).toLocaleString(e.dyn.locale)),this.$CountRejectedChannels.html(parseInt(this.iRejectedChannels).toLocaleString(e.dyn.locale)),this.$CountTotalChannels.html(parseInt(this.iTotalChannels).toLocaleString(e.dyn.locale)),this.$CountUnreviewedChannels.html(parseInt(this.iUnreviewedChannels).toLocaleString(e.dyn.locale)),this.$CatsSuggestsRecap.html(this.getCatSuggestsTitleText()),this.setTooFewChannelsAdded(this.iAddedChannels<=this.iTooFewChannelsLimit);var t=this.countReviewedChannels(),i=this.$CountUnreviewedChannels.length;0===t&&0===i||t>0&&i>0||(this.$SuggestsTitle.add(this.$SuggestsTitle2).find(".title").html(0===t?a.__(this.oTranslations.here_some_channels):a.__(this.oTranslations.channels_left_to_review,{"%count%":'<strong class="feed-nb-channels-unreviewed">'+this.iUnreviewedChannels+"</strong>"})),this.$CountUnreviewedChannels=this.$PageContainer.find(".feed-nb-channels-unreviewed"))}},fillSuggestsContainers:function(e){var t=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2())-this.countVisibleSuggestThumbsAdded(),i=this.getSuggestsContainer(),n=this.getSuggestsContainer2(),s=this;if(t>0)for(var o=0;o<t;o++){var a=this.getNextSuggest(this.getSuggestsContainerNbRows2());if(!a)return void("after-loading"!==e&&this.loadChannels(function(){s.resizeWindowEvt("after-loading"),s.bResizingWindow=!1}));this.initAddedSuggestThumb(a),"increase-rows-2"===e&&(a.$Html.hide(),a.$Html2.hide()),i.append(a.$Html),n.append(a.$Html2),"increase-rows-2"===e&&(this.slideDownElem(a.$Html,!0),this.slideDownElem(a.$Html2,!0))}},setTooFewChannelsAdded:function(e){if(this.bHasTooFewSuggestsAdded!==e)if(this.bHasTooFewSuggestsAdded=e,this.bHasTooFewSuggestsAdded){this.bSuggestsContainerManualShow=!0;var t=this.getVideosContainer();if("undefined"==typeof this.$HasTooFewChannelsAddedAlert){var i=a.__(this.oTranslations.sub_to_channels_to_populate);if(m.hasJustSwitched()){var n=m.getSettingsCat();n.name&&(i=a.__(this.oTranslations.sub_to_channels_to_populate_version,{"%version%":"<span>"+n.name+"</span>"}))}this.$HasTooFewChannelsAddedAlert=$('<p class="empty">'+i+"</p>")}this.$HasTooFewChannelsAddedAlert.insertAfter(t)}else"undefined"!=typeof this.$HasTooFewChannelsAddedAlert&&this.$HasTooFewChannelsAddedAlert.remove()},setTooFewVideos:function(e){this.bHasTooFewVideos!==e&&(this.bHasTooFewVideos=e,this.updateSuggestsContainers())},autoHideShowSuggestsContainers:function(e){this.bSuggestsContainerAutoShow=e,this.updateSuggestsContainers()},manualHideShowSuggestsContainers:function(){this.bSuggestsContainerManualShow=!this.bSuggestsContainerManualShow;var e=a.__(this.bSuggestsContainerManualShow?this.oTranslations.hide_suggests:this.oTranslations.show_suggests);this.oFeatureSuggestOpened.toggle(null,this.bSuggestsContainerManualShow),this.$ManualHideSuggestsBtn.html(e),this.$ManualHideSuggestsBtn2.html(e),this.updateSuggestsContainers()},updateSuggestsContainers:function(){this.bHideManualBtn=!this.bSuggestsContainerAutoShow||this.bHasTooFewVideos||this.bHasTooFewSuggestsAdded,this.bHideTitle=!this.bSuggestsContainerAutoShow||this.bHasTooFewVideos||!this.bSuggestsContainerManualShow,this.bHideContainer=!this.bSuggestsContainerAutoShow||this.bHasTooFewVideos||!this.bSuggestsContainerManualShow;var e=!this.bSuggestsContainerAutoShow||this.bHasTooFewVideos;this.bHideManualBtn2=!this.bSuggestsContainerAutoShow||this.bHasTooFewSuggestsAdded,this.bHideTitle2=!this.bSuggestsContainerAutoShow||!this.bHasTooFewVideos||!this.bSuggestsContainerManualShow,this.bHideContainer2=!this.bSuggestsContainerAutoShow||!this.bSuggestsContainerManualShow;var t=this.getSuggestsContainer(),i=this.getSuggestsContainer2();this.bHideManualBtn?this.slideUpElem(this.$ManualHideSuggestsBtn):this.slideDownElem(this.$ManualHideSuggestsBtn),this.bHideTitle?this.slideUpElem(this.$SuggestsTitle):this.slideDownElem(this.$SuggestsTitle),this.bHideContainer?this.slideUpElem(t):this.slideDownElem(t),this.bHideManualBtn2?this.slideUpElem(this.$ManualHideSuggestsBtn2):this.slideDownElem(this.$ManualHideSuggestsBtn2),this.bHideTitle2?this.slideUpElem(this.$SuggestsTitle2):this.slideDownElem(this.$SuggestsTitle2),this.bHideContainer2?this.slideUpElem(i):this.slideDownElem(i),i.toggleClass("sub-suggests-1-visible",!e)},getOSuggestVisibleIndex:function(e){var t=-1,i=e.sType;for(var n in this.aVisibleSuggests){var s=this.aVisibleSuggests[n];if(s.sType===i&&s.sId===e.sId){t=n;break}}return t},getNextChannel:function(e){if(this.countLoadedChannelSuggestsNotAdded()<1){var t=this.getFirstHiddenChannelSuggestIndex(e);if("number"!=typeof t)return!1;var i=this.aVisibleSuggests.splice(t,1);if(i.length>0)return i[0]}for(var n in this.aLoadedSuggests){var s=this.aLoadedSuggests[n];if(!s.bAdded&&"channel"===s.sType)return s}return!1},getFirstHiddenChannelSuggestIndex:function(e){if(this.countHiddenSuggests(e)<1)return!1;for(var t=this.countVisibleSuggestThumbsSpace(e);t<this.aVisibleSuggests.length;t++)if("channel"===this.aVisibleSuggests[t].sType)return t;return!1},getLoadedChannelsId:function(){var e=[];for(var t in this.aLoadedSuggests){var i=this.aLoadedSuggests[t];"channel"===i.sType&&e.push(i.sId)}return e},countReviewedChannels:function(){return this.iAddedChannels+this.iRejectedChannels},countVisibleUnreviewedChannels:function(){var e=0;for(var t in this.aVisibleSuggests){var i=this.aVisibleSuggests[t];"channel"===i.sType&&"unreviewed"===i.sReview&&e++}return e},countChannelsLeftToLoad:function(){var e=0;for(var t in this.aLoadedSuggests){var i=this.aLoadedSuggests[t];"unreviewed"===i.sReview&&"channel"===i.sType&&e++}return this.iUnreviewedChannels-e},openChannelThumbPreview:function(i){var n=$(t.render(this.oTemplates.channel_preview,{channel_pic_src:i.sPicSrc,channel_title:i.sDisplayName,mozaique:t.render(this.oTemplates.channel_preview_thumb_list,{video_list:i.aSimpleVideoList}),cover_loader:t.render(this.oTemplates.cover_loader),href:i.sUrl,sub_btn:i.$SubBtn.html(),reject_btn:i.$RejectBtn.html(),channel_page:a.__(this.oTranslations.channel_page),count_free:i.sCountVideosFree,count_free_title:a.__("listing.count_free_videos",{"%count%":i.sCountVideosFree}),count_premium:i.sCountVideosPremium,count_premium_title:a.__("listing.count_premium_videos",{"%count%":i.sCountVideosPremium})})),s=r.get($("body"),!0,"close");s.setContent(n),s.setScrollAndResizeReposition("auto"),s.setOverlayClosable(!0),s.setEscapeClosable(!0),s.addClass("auto-width-popup premium-feed-channel-preview-pop");var o=n.filter(".mozaique"),f=!1,d=this;s.onShow=function(){$("body").addClass("premium-feed-channel-preview-opened")},s.onClose=function(){$("body").removeClass("premium-feed-channel-preview-opened"),f&&f.stop()},s.show("auto");var c=0,h=!1,p=function(){if(!0!==h){h=!0;var n=$('<p class="loader">'+u.getIcf()+"</p>");o.append(n),$.get("/feed/channels/"+i.sId+"/videos/"+c,function(i){if(n.remove(),i.result){var s=$(t.render(d.oTemplates.channel_preview_thumb_list,{video_list:i.videos}));0===c&&o.empty(),o.append(s),e.dyn.is_desktop?d.oFunctions.init_desktop_channel_videos(o):0===c?f=new l(o):s.find(".thumb img").each(function(){f.addThumb(this)}),i.nb_remaining>0?c++:c=!1,h=!1,setTimeout(function(){o.scroll()},1e3)}},"json")}},_=n.find(".channel-actions"),g=_.find(".sub"),m=_.find(".reject");g.on("click",function(){s.close(),i.$SubBtn.click()}),m.on("click",function(){s.close(),i.$RejectBtn.click()}),o.on("scroll",function(){"number"==typeof c&&o[0].scrollHeight-20<=o.scrollTop()+o.height()&&p()}),p()},setChannelThumbActions:function(e){if(e.tCancel&&(clearTimeout(e.tCancel),e.tCancel=!1),e.bAdded&&e.$SubBtn&&0!==e.$SubBtn.length){e.sSubBtnLabelSave&&(e.$SubBtnLabel.html(e.sSubBtnLabelSave),e.$SubBtnLabel2.html(e.sSubBtnLabelSave),e.sSubBtnLabelSave=!1),e.sRejectBtnLabelSave&&(e.$RejectBtnLabel.html(e.sRejectBtnLabelSave),e.$RejectBtnLabel2.html(e.sRejectBtnLabelSave),e.sRejectBtnLabelSave=!1);var t=this;e.$ThumbLink.add(e.$ThumbLink2).off("click").on("click",function(i){i.preventDefault(),t.openChannelThumbPreview(e)}),e.$SubBtn.add(e.$SubBtn2).off("click").css({opacity:"1"}).removeClass("loading").on("click",function(i){i.preventDefault(),d.follow(e.sUserName,e.sCsrf,function(){e.sReview="added",t.iAddedChannels++,t.iUnreviewedChannels--,t.updateSuggestsContainersTitles(),t.setChannelActionsCancel(e,"subscribe")})}),e.$RejectBtn.add(e.$RejectBtn2).off("click").css({opacity:"1"}).removeClass("loading").on("click",function(i){i.preventDefault(),d.reject(e.sUserName,e.sCsrf,function(){e.sReview="rejected",t.iRejectedChannels++,t.iUnreviewedChannels--,t.updateSuggestsContainersTitles(),t.setChannelActionsCancel(e,"reject")})})}},setChannelActionsCancel:function(e,t){if(e.bAdded&&e.$SubBtn&&0!==e.$SubBtn.length){e.$ThumbLink.add(e.$ThumbLink2).off("click").on("click",function(e){e.preventDefault()}),e.$SubBtn.off("click"),e.$SubBtn2.off("click"),e.$RejectBtn.off("click"),e.$RejectBtn2.off("click");var i=this;"subscribe"===t?e.$RejectBtn.add(e.$RejectBtn2).css({opacity:"0.5"}):e.$SubBtn.add(e.$SubBtn2).css({opacity:"0.5"}),setTimeout(function(){var n,s;"subscribe"===t?(e.sSubBtnLabelSave=e.$SubBtnLabel.html(),n=e.$SubBtn.add(e.$SubBtn2),s=e.$SubBtnLabel.add(e.$SubBtnLabel2)):(e.sRejectBtnLabelSave=e.$RejectBtnLabel.html(),n=e.$RejectBtn.add(e.$RejectBtn2),s=e.$RejectBtnLabel.add(e.$RejectBtnLabel2)),s.html(a.__(i.oTranslations.cancel)),n.addClass("loading").on("click",function(){e.sReview="unreviewed","subscribe"===t?i.iAddedChannels--:i.iRejectedChannels--,i.iUnreviewedChannels++,i.updateSuggestsContainersTitles(),d.unfollow(e.sUserName,e.sCsrf,function(){i.setChannelThumbActions(e)})}),e.tCancel=setTimeout(function(){e.tCancel=!1,"reject"!==t&&i.loadVideos(),i.reloadSuggest(e,t)},i.iCancelTimeout)},50)}},getOrCreateFirstCatSuggest:function(){if(this.bNoCatSuggests)return!1;for(var e in this.aVisibleSuggests){var t=this.aVisibleSuggests[e];if("category"===t.sType)return t}var i=this.getNextCategorySuggestId(),n=this.getCategorySuggestPosition(),s=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2())-this.countVisibleSuggestThumbsAdded()>0;return!(!i||"number"!=typeof n&&!s)&&this.getOrCreateOCatSuggestObject(i)},getOrCreateOCatSuggestObject:function(t){if(!e.data.categories)return!1;var i,n;for(i in this.aLoadedSuggests)if(n=this.aLoadedSuggests[i],"category"===n.sType&&n.sId===t)return n;var s;for(i in e.data.categories)if(s=e.data.categories[i],s.id===t)break;if(!s)return!1;n={sId:t,sType:"category",sDisplayName:s.name,sCsrf:e.data.cats_csrf||"undefined"!=typeof e.data.cats_csrf[t]?e.data.cats_csrf[t]:"",sUrl:s.url};var o=this.getCategorySuggestHTML(n),a=this.getCategorySuggestHTML(n,2);return!(!o||!a)&&(n.$Html=o,n.$Html2=a,this.aLoadedSuggests.push(n),n)},appendOCatSuggest:function(e,t,i){var n=this.getCategorySuggestPosition(!0),s=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows());if(t&&t.length>0){e.$Html.remove();var o=t.find(".thumb-block");o.length<1?e.$Html.appendTo(t):o.length<=n?e.$Html.insertAfter(o.last()):e.$Html.insertBefore(o.get(n))}if(i&&i.length>0){var a=this.countChannelsLeftToLoad()<1;e.$Html2.remove();var r=i.find(".thumb-block");r.length<1?e.$Html2.appendTo(i):a?r.length<=n?e.$Html2.insertAfter(r.last()):e.$Html2.insertBefore(r.get(n)):r.length<=n+s?e.$Html2.insertAfter(r.last()):e.$Html2.insertBefore(r.get(n+s))}e.bAdded?this.setCategoryThumbActions(e):(this.aVisibleSuggests.splice(n,0,e),this.initAddedSuggestThumb(e,!0))},getCatSuggestsTitleText:function(){if(!e.data.user_cats||0===e.data.user_cats.length)return a.__(this.oTranslations.categories)+' : <span class="icon-f icf-thumb-up"></span> / <span class="icon-f icf-thumb-down"></span>';var t=this.countReviewedCategories(!0);return a.__(this.oTranslations.categories)+' : <span class="icon-f icf-thumb-up"></span> '+t.added.toLocaleString(e.dyn.locale)+" - "+t.addedInChannels.toLocaleString(e.dyn.locale)+' / <span class="icon-f icf-thumb-down"></span> '+t.ignored.toLocaleString(e.dyn.locale)+" - "+t.rejected.toLocaleString(e.dyn.locale)},countReviewedCategories:function(e){var t=this.getCategories();return e?{added:t.added.length,addedInChannels:t.addedInChannels.length,ignored:t.ignored.length,rejected:t.rejected.length}:t.added.length+t.addedInChannels.length+t.ignored.length+t.rejected.length},getCategories:function(){var t={unreviewed:[],added:[],addedInChannels:[],ignored:[],rejected:[]};for(var i in e.data.categories){var n=e.data.categories[i];switch(e.data.user_cats[n.id]){case 0:t.added.push(n);break;case 1:t.addedInChannels.push(n);break;case 2:t.ignored.push(n);break;case 3:t.rejected.push(n);break;default:t.unreviewed.push(n)}}return t},getLoadedCatsId:function(){var e=[];for(var t in this.aLoadedSuggests){var i=this.aLoadedSuggests[t];"category"===i.sType&&e.push(i.sId)}return e},getUnreviewedCategoriesSuggestIds:function(){var t=[];for(var i in e.data.categories){var n=e.data.categories[i];"undefined"==typeof e.data.user_cats[n.id]&&t.push(n.id)}return t},countUnreviewedCategoriesSuggests:function(){return this.getUnreviewedCategoriesSuggestIds().length},getUnreviewedAndUnloadedCategoriesSuggestIds:function(){var e=[],t=this.getLoadedCatsId();if(aUnreviewedCatIds=this.getUnreviewedCategoriesSuggestIds(),t.length===aUnreviewedCatIds.length)return e;for(var i in aUnreviewedCatIds){var n=aUnreviewedCatIds[i];-1===t.indexOf(n)&&e.push(n)}return e},getNextCategorySuggestId:function(){var e=this.getUnreviewedAndUnloadedCategoriesSuggestIds();return 0!==e.length&&e[Math.floor(Math.random()*e.length)]},getCategorySuggestPosition:function(e){if(!e){if(0===this.countUnreviewedCategoriesSuggests())return!1}return this.isMobileSuggestContainer()?!!(e||this.getSuggestsContainerNbRows()>1||this.countReviewedCategories()>0)&&this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows())-1:this.countReviewedChannels()>=3?0:this.countVisibleSuggestThumbsSpace()-1},getCategorySuggestHTML:function(e,t){return!!e&&$(this.getOtherSuggestHTML({id:"catsuggest"+("number"==typeof t?t:"")+"_"+e.sId,href:e.sUrl,category:a.__(this.oTranslations.category),name:e.sDisplayName,sub_label:a.__(this.oTranslations.subscribe),reject_label:a.__(this.oTranslations.not_interested)}))},getOtherSuggestHTML:function(e){return t.render(this.oTemplates.other_suggest,e)},openCategoryReview:function(i,n){var s=this;oPopup=r.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-cat-review-pop"),oPopup.onShow=function(){$("body").addClass("premium-feed-cat-review-opened")},oPopup.onClose=function(){$("body").removeClass("premium-feed-cat-review-opened"),s.updateSuggestsContainersTitles(),"function"==typeof n&&n()},$Content=$(t.render(this.oTemplates.category_review,{href:i.sUrl,
category_page:a.__(this.oTranslations.category_page),category_title:i.sDisplayName,sub_btn:(this.oIcfs.sub_cat?'<span class="icon-f icf-'+this.oIcfs.sub_cat+'"></span> ':"")+a.__(this.oTranslations.subscribe),sub_desc:a.__(this.oTranslations.sub_to_cat_global),sub_in_chan_btn:(this.oIcfs.sub_cat_in_chan?'<span class="icon-f icf-'+this.oIcfs.sub_cat_in_chan+'"></span> ':"")+a.__(this.oTranslations.subscribe_in_channel),sub_in_chan_desc:a.__(this.oTranslations.sub_to_cat_in_subbed_channels),unsub_btn:(this.oIcfs.unsub_cat?'<span class="icon-f icf-'+this.oIcfs.unsub_cat+'"></span> ':"")+a.__(this.oTranslations.category_dont_show_it_again),unsub_desc:a.__(this.oTranslations.cat_no_longer_offered),reject_btn:(this.oIcfs.reject_cat?'<span class="icon-f icf-'+this.oIcfs.reject_cat+'"></span> ':"")+a.__(this.oTranslations.not_interested),reject_desc:a.__(this.oTranslations.cat_content_no_longer_offered),cancel:a.__(this.oTranslations.cancel)}));var o=$Content.find(".sub"),l=$Content.find(".sub-in-chan"),u=$Content.find(".unsub"),f=$Content.find(".reject"),c=$Content.find(".cancel"),h=function(n,o,a){n.preventDefault(),oPopup.setContent($(t.render(s.oTemplates.cover_loader))),s.setCatSuggestToLoading(i),d[o](i.sId,i.sCsrf,function(){e.data.user_cats[i.sId]=a,s.unsetCatSuggestToLoading(i),s.reloadSuggest(i),oPopup.close()})};o.on("click",function(e){h(e,"followCat",0)}),l.on("click",function(e){h(e,"followCatInSubbedChannels",1)}),u.on("click",function(e){h(e,"unfollowCat",2)}),f.on("click",function(e){h(e,"rejectCat",3)}),c.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent($Content),oPopup.show("auto")},openCategoriesReview:function(){var e=this;oPopup=r.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-cats-review-pop"),oPopup.onShow=function(){$("body").addClass("premium-feed-cats-review-opened")},oPopup.onClose=function(){$("body").removeClass("premium-feed-cats-review-opened"),e.updateSuggestsContainersTitles()};var i=this.getCategories();$Content=$(t.render(this.oTemplates.categories_review,{title:a.__(this.oTranslations.categories),cols:[{col_title:a.__(this.oTranslations.categories_added),col_cats:i.added},{col_title:a.__(this.oTranslations.categories_added_in_channels),col_cats:i.addedInChannels},{col_title:a.__(this.oTranslations.categories_ignored),col_cats:i.ignored},{col_title:a.__(this.oTranslations.categories_rejected),col_cats:i.rejected},{col_title:a.__(this.oTranslations.categories_unreviewed),col_cats:i.unreviewed}],ok:a.__(this.oTranslations.ok)}));var n=$Content.find(".cats p"),s=$Content.find(".ok");n.on("click",function(t){t.preventDefault();var i=e.getOrCreateOCatSuggestObject($(this).data("id"));i&&(oPopup.close(),e.openCategoryReview(i,function(){e.openCategoriesReview()}))}),s.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent($Content),oPopup.show("auto")},setCatSuggestToLoading:function(e){!0!==e.bIsLoading&&(e.bIsLoading=!0,e.$Loading=$(t.render(this.oTemplates.cover_loader)),e.$Loading2=$(t.render(this.oTemplates.cover_loader)),e.$Html.find(".thumb-inside").append(e.$Loading),e.$Html2.find(".thumb-inside").append(e.$Loading2),e.$Html.add(e.$Html2).find("*").off("click"))},unsetCatSuggestToLoading:function(e,t){!0===e.bIsLoading&&(e.bIsLoading=!1,e.$Loading.remove(),e.$Loading2.remove(),!0===t&&this.setCategoryThumbActions(e))},setCategoryThumbActions:function(e){var t=this;e.$ThumbLink.add(e.$ThumbLink2).on("click",function(i){i.preventDefault(),t.openCategoryReview(e)})},getFiltersHTML:function(){var e=[],i=[{name:a.__(this.oTranslations.recent_videos),value:"0",href:"#recent",active:0===this.iFilterSort},{name:a.__(this.oTranslations.older_videos),value:"1",href:"#old",active:1===this.iFilterSort},{name:a.__(2===this.iFilterSort?this.oTranslations.randomize_again:this.oTranslations.random_order),label:a.__(this.oTranslations.random_order),value:"2",href:"#random",active:2===this.iFilterSort},{name:a.__(this.oTranslations.subscription_date),value:"3",href:"#sub-addition-date",active:3===this.iFilterSort}];e.push({filter:"sort",list:i});var n=[{name:a.__(this.oTranslations.see_all),value:"0",href:"#see-all",active:0===this.iFilterViewMode},{name:'<span class="icon-f icf-eye"></span> '+a.__(this.oTranslations.watched_videos_only),value:"1",href:"#watched",active:1===this.iFilterViewMode},{name:'<span class="icon-f icf-eye-blocked"></span> '+a.__(this.oTranslations.unwatched_videos_only),value:"2",href:"#unwatched",active:2===this.iFilterViewMode}];e.push({filter:"view_mode",list:n});var s=[{name:a.__(this.oTranslations.red_only),value:"0",href:this.oUrls.hash_red,active:0===this.iFilterShowFree},{name:a.__(this.oTranslations.free_only),value:"1",href:"#free",active:1===this.iFilterShowFree},{name:a.__(this.oTranslations.red_and_free),value:"2",href:this.oUrls.hash_red_and_free,active:2===this.iFilterShowFree}];e.push({filter:"show_free",list:s});var o=[{name:this.getMinLengthPremiumFilterLabelText(),filter:"premium_min_length",value:"",href:"#premium-min-length","class":"premium-min-length",active:this.iFilterMinLengthPremium>0},{name:this.getMinLengthFreeFilterLabelText(),filter:"free_min_length",value:"",href:"#free-min-length","class":"free-min-length",active:this.iFilterMinLengthFree>0}];e.push({filter:"min_length",list:o,forced_label:this.getMinLengthFilterLabelText()});var r=[{name:'<span class="icon-f icf-resolution"></span> '+a.__(this.oTranslations.all_qualities),value:"360P",href:"#360P",active:"360P"===this.sFilterQuality},{name:"480p+",value:"480P",href:"#480P",active:"480P"===this.sFilterQuality},{name:"720p+",value:"720P",href:"#720P",active:"720P"===this.sFilterQuality},{name:"1080p+",value:"1080P",href:"#1080P",active:"1080P"===this.sFilterQuality},{name:"1440p+",value:"1440P",href:"#1440P",active:"1440P"===this.sFilterQuality},{name:"4K",value:"4K",href:"#4K",active:"4K"===this.sFilterQuality}];return e.push({filter:"quality",list:r}),e.push({filter:"categories",forced_label:this.getCategoriesFilterLabelText()}),e.push({filter:"free_search",forced_label:this.getFreeSearchFilterLabelText()}),e.push({filter:"reset",forced_label:'<span class="icon-f icf-close-thin"></span> '+a.__(this.oTranslations.reset_filters),is_reset:!0}),t.render(this.oTemplates.simple_dropdown,{filters:e})},initVideoFilters:function(){this.$Filters=this.$PageContainer.find(".simple-dropdown .show-niv2 .label"),this.$FiltersLinks=this.$PageContainer.find(".simple-dropdown a");var t=this;this.$FiltersLinks.on("click",function(e){e.preventDefault(),t.filterLinkClick($(this))}),this.oSimpleDropdown.init(this.$PageContainer);var i=this.getFilterSelectLabel("categories"),n=i.parents(".show-niv2");e.data.categories&&e.data.categories.length>0?n.on("click",function(){t.openCategoriesFilterSelectNiv1()}).addClass("init-ok"):n.remove(),this.getFilterSelectLabel("free_search").parents(".show-niv2").on("click",function(){t.openFreeSearchFilter()}).addClass("init-ok");var s=this.getFilterSelectLabel("reset");this.$ResetFilters=s.parents(".niv1"),this.showHideResetBtn(),s.parents(".show-niv2").on("click",function(){t.resetFilters()}).addClass("init-ok")},resetFilters:function(){this.canResetFilters()&&(this.updateFilterSelect("view_mode",0),this.updateFilterSelect("show_free",0),this.updateFilterSelect("premium_min_length",0),this.updateFilterSelect("free_min_length",0),this.updateFilterSelect("quality","360P"),this.updateFilterSelect("free_search",!1),this.oFilterCategories.cats=[],this.oFilterCategories.excats=[],this.updateCategoriesFilter(),this.loadVideos())},canResetFilters:function(){return 0!==this.iFilterViewMode||0!==this.iFilterShowFree||0!==this.iFilterMinLengthPremium||0!==this.iFilterMinLengthFree||"360P"!==this.sFilterQuality||this.oFilterCategories.cats.length>0||this.oFilterCategories.excats.length>0||!1!==this.sFilterFreeSearch},showHideResetBtn:function(){this.canResetFilters()?this.$ResetFilters.show():this.$ResetFilters.hide()},isViewModeAvailable:function(){return"boolean"!=typeof this.bViewModeAvailable&&(this.bViewModeAvailable=p.isTracking()),this.bViewModeAvailable},getFilterSelectLabel:function(e){return"undefined"==typeof this.oFiltersLabels["f-"+e]&&(this.oFiltersLabels["f-"+e]=this.$Filters.filter("[data-filter="+e+"]")),this.oFiltersLabels["f-"+e]},filterLinkClick:function(e){var t=e.data("filter"),i=e.data("value");if("free_min_length"===t||"premium_min_length"===t)return this.oSimpleDropdown.close_all(),void this.openMinLengthFilterSelect(t);if("view_mode"!==t||this.isViewModeAvailable())return this.iFilterSortRandomize=2===this.iFilterSort&&"sort"===t&&2===i,this.oSimpleDropdown.close_all(),this.updateFilterSelect(t,i),void this.loadVideos();var n=this;f.confirm(a.__("premium_feed.filter_based_on_history_enabling"),function(){p.startTracking(function(){n.iFilterSortRandomize=2===n.iFilterSort&&"sort"===t&&2===i,n.updateFilterSelect(t,i),n.loadVideos()})})},updateFilterSelect:function(e,t){var i=!1;switch(e){case"view_mode":this.iFilterViewMode!==t&&(this.iFilterViewMode=t,i=!0);break;case"sort":this.iFilterSort!==t&&(this.iFilterSort=t,i=!0);break;case"premium_min_length":return this.iFilterMinLengthPremium!==t&&(this.iFilterMinLengthPremium=t,i=0===this.iFilterShowFree||2===this.iFilterShowFree),this.$FiltersLinks.filter("[data-filter=premium_min_length]").toggleClass("current",(0===this.iFilterShowFree||2===this.iFilterShowFree)&&this.iFilterMinLengthPremium>1).html(this.getMinLengthPremiumFilterLabelText()),this.updateFilterSelectLabel("min_length",this.getMinLengthFilterLabelText()),this.showHideResetBtn(),i;case"free_min_length":return this.iFilterMinLengthFree!==t&&(this.iFilterMinLengthFree=t,i=1===this.iFilterShowFree||2===this.iFilterShowFree),this.$FiltersLinks.filter("[data-filter=free_min_length]").toggleClass("current",(1===this.iFilterShowFree||2===this.iFilterShowFree)&&this.iFilterMinLengthFree>1).html(this.getMinLengthFreeFilterLabelText()),this.updateFilterSelectLabel("min_length",this.getMinLengthFilterLabelText()),this.showHideResetBtn(),i;case"show_free":this.iFilterShowFree!==t&&(this.iFilterShowFree=t,i=!0),this.$FiltersLinks.filter("[data-filter=premium_min_length]").toggleClass("current",(0===this.iFilterShowFree||2===this.iFilterShowFree)&&this.iFilterMinLengthPremium>1),this.$FiltersLinks.filter("[data-filter=free_min_length]").toggleClass("current",(1===this.iFilterShowFree||2===this.iFilterShowFree)&&this.iFilterMinLengthPremium>1),this.updateFilterSelectLabel("min_length",this.getMinLengthFilterLabelText());break;case"quality":this.sFilterQuality!==t&&(this.sFilterQuality=t,i=!0);break;case"free_search":return"string"==typeof t&&0!==t.length||(t=!1),this.sFilterFreeSearch!==t&&(this.sFilterFreeSearch=t,i=!0),this.updateFilterSelectLabel("free_search",this.getFreeSearchFilterLabelText()),this.showHideResetBtn(),i;default:return!1}this.$FiltersLinks.filter(".current[data-filter="+e+"]").removeClass("current");var s=this.$FiltersLinks.filter("[data-filter="+e+"][data-value="+t+"]");s.addClass("current");var o=s.html();return"sort"===e&&(2===t?(s.text(n.unescape(a.__(this.oTranslations.randomize_again))),o=n.unescape(a.__(this.oTranslations.random_order))):this.$FiltersLinks.filter("[data-filter="+e+"][data-value=2]").text(n.unescape(a.__(this.oTranslations.random_order)))),this.updateFilterSelectLabel(e,o),this.showHideResetBtn(),i},updateFilterSelectLabel:function(e,t){this.getFilterSelectLabel(e).html(t)},openMinLengthFilterSelect:function(e){var i=this;oPopup=r.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-min-length-filter-pop"),oPopup.onShow=function(){$("body").addClass("premium-feed-filter-opened")},oPopup.onClose=function(){$("body").removeClass("premium-feed-filter-opened")};var n="premium_min_length"===e?this.iFilterMinLengthPremium:this.iFilterMinLengthFree,s=n>0&&n<=30?n:0,o="premium_min_length"===e?"min_length_title_premium":"min_length_title_free";$Content=$(t.render(this.oTemplates.min_length_filter,{title:a.__(this.oTranslations[o],{"%site%":this.oTexts.premium_name}),min:0,max:30,min_label:0,max_label:a.__(this.oTranslations.duration_minutes_min,{"%count%":"30"}),value:s,ok:0===s?a.__(this.oTranslations.see_all):a.__(this.oTranslations.duration_minutes_min,{"%count%":s.toString()}),cancel:a.__(this.oTranslations.cancel)}));var l=$Content.find("input"),u=$Content.find(".ok"),f=$Content.find(".cancel");l.on("input change",function(){var e=parseInt(this.value);u.text(0===e?a.__(i.oTranslations.see_all):a.__(i.oTranslations.duration_minutes_min,{"%count%":e.toString()}))}),u.on("click",function(t){t.preventDefault(),i.updateFilterSelect(e,parseInt(l.prop("value")))&&i.loadVideos(),oPopup.close()}),f.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent($Content),oPopup.show("auto")},getMinLengthFilterLabelText:function(){return'<span class="icon-f icf-clock'+(this.iFilterMinLengthPremium>0&&(0===this.iFilterShowFree||2===this.iFilterShowFree)||this.iFilterMinLengthFree>0&&(1===this.iFilterShowFree||2===this.iFilterShowFree)?" has-duration-limit":"")+'"></span> '+a.__(this.oTranslations.minimum_duration)},getMinLengthPremiumFilterLabelText:function(){return this.oTexts.premium_name+" : "+(this.iFilterMinLengthPremium>0?a.__(this.oTranslations.nb_mins_long,{"%nb%":"<strong>"+this.iFilterMinLengthPremium.toLocaleString(e.dyn.locale)+"</strong>"}):a.__(this.oTranslations.all))},getMinLengthFreeFilterLabelText:function(){return a.__(this.oTranslations.free)+" : "+(this.iFilterMinLengthFree>0?a.__(this.oTranslations.nb_mins_long,{"%nb%":"<strong>"+this.iFilterMinLengthFree.toLocaleString(e.dyn.locale)+"</strong>"}):a.__(this.oTranslations.all))},openCategoriesFilterSelectNiv1:function(){var e=this;oPopup=r.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-categories-filter-pop"),oPopup.onShow=function(){$("body").addClass("premium-feed-filter-opened")},oPopup.onClose=function(){$("body").removeClass("premium-feed-filter-opened"),e.updateCategoriesFilter(!0)},this.initCategoriesFilterSelectNiv1Popup(oPopup),oPopup.show("auto")},initCategoriesFilterSelectNiv1Popup:function(i){var n=this,s=[],o=[];for(var r in e.data.categories){var l=e.data.categories[r];-1!==this.oFilterCategories.cats.indexOf(l.id)?s.push(l):-1!==this.oFilterCategories.excats.indexOf(l.id)&&o.push(l)}var u=$(t.render(this.oTemplates.categories_filter_resume,{title:a.__(this.oTranslations.categories),reset:a.__(this.oTranslations.reset_selection),add_list:s,exclude_list:o,empty_list_text:0===s.length&&0===o.length&&a.__(this.oTranslations.add_exclude_cats_to_result),ok:a.__(this.oTranslations.ok)}));u.find(".reset").on("click",function(e){e.preventDefault(),n.oFilterCategories.cats=[],n.oFilterCategories.excats=[],n.initCategoriesFilterSelectNiv1Popup(i)}),u.find(".add").on("click",function(e){e.preventDefault(),n.openCategoriesFilterSelectNiv2("add",i)}),u.find(".exclude").on("click",function(e){e.preventDefault(),n.openCategoriesFilterSelectNiv2("exclude",i)}),u.find(".remove").on("click",function(e){e.preventDefault(),n.toggleCatFilterClick($(this)),$(this).parents("[data-id="+$(this).data("id")+"]").remove()}),u.find(".close").on("click",function(e){e.preventDefault(),i.close()}),i.setContent(u)},openCategoriesFilterSelectNiv2:function(i,n){var s=Math.ceil(e.data.categories.length/3),o=Math.ceil(e.data.categories.length/2),l=[{list:[]},{list:[]},{list:[]}],u=[{list:[]},{list:[]}];for(var f in e.data.categories){var d=e.data.categories[f];d.status=-1!==this.oFilterCategories.cats.indexOf(d.id)?"add":-1!==this.oFilterCategories.excats.indexOf(d.id)?"exclude":"neutral",f<s?l[0].list.push(d):f<2*s?l[1].list.push(d):l[2].list.push(d),f<o?u[0].list.push(d):u[1].list.push(d)}var c=this,h=$(t.render(this.oTemplates.categories_filter_update,{title:a.__("add"===i?this.oTranslations.filter_add_categories:this.oTranslations.filter_exclude_categories),list_id:i,ok:a.__(this.oTranslations.ok),lists_3_cols:l,lists_2_cols:u})),p=r.get($("body"),!0,"close");p.setContent(h),p.setScrollAndResizeReposition("auto"),p.setOverlayClosable(!0),p.setEscapeClosable(!0),p.addClass("auto-width-popup premium-feed-categories-filter-pop"),p.onShow=function(){$("body").addClass("premium-feed-filter-niv2-opened")},p.onClose=function(){$("body").removeClass("premium-feed-filter-niv2-opened"),c.initCategoriesFilterSelectNiv1Popup(n)},p.show("auto"),h.find(".action").on("click",function(e){e.preventDefault();var t=c.toggleCatFilterClick($(this),i);$(this).parents("[data-id="+$(this).data("id")+"]").removeClass().addClass(t)}),h.find(".close").on("click",function(e){e.preventDefault(),p.close()})},hasCategoriesFilterChanged:function(e){if(void 0!==e&&"undefined"!=typeof e.cats&&"undefined"!=typeof e.excats||(e=_.get("premiumFeed_lastCatFilter")),!e&&(this.oFilterCategories.cats.length>1||this.oFilterCategories.excats.length>1)||e.cats.length!==this.oFilterCategories.cats.length||e.excats.length!==this.oFilterCategories.excats.length)return!0;var t;for(t=0;t<e.cats;t++)if(e.cats[t]!==this.oFilterCategories.cats[t])return!0;for(t=0;t<e.excats;t++)if(e.excats[t]!==this.oFilterCategories.excats[t])return!0;return!1},updateCategoriesFilter:function(e){if(this.showHideResetBtn(),this.hasCategoriesFilterChanged()){var t=this.getFilterSelectLabel("categories"),i=this.getCategoriesFilterLabelText();t.html(i),!0===e&&this.loadVideos()}},getCategoriesFilterLabelText:function(){return 0===this.oFilterCategories.cats.length&&0===this.oFilterCategories.excats.length?'<span class="icon-f icf-plus-square count-0"></span><span class="slash">/</span><span class="icon-f icf-minus-square count-0"></span> '+a.__(this.oTranslations.categories):'<span class="icon-f icf-plus-square'+(0===this.oFilterCategories.cats.length?" count-0":"")+'"></span><span>'+this.oFilterCategories.cats.length.toLocaleString(e.dyn.locale)+'</span> <span class="slash">/</span> <span class="icon-f icf-minus-square'+(0===this.oFilterCategories.excats.length?" count-0":"")+'"></span><span>'+this.oFilterCategories.excats.length.toLocaleString(e.dyn.locale)+"</span>"},toggleCatFilterClick:function(e,t){var i,n=parseInt(e.data("id")),s="";for(i=0;i<this.oFilterCategories.cats.length;i++)if(this.oFilterCategories.cats[i]===n){this.oFilterCategories.cats.splice(i,1),s="neutral","exclude"===t&&(this.oFilterCategories.excats.push(n),s="exclude");break}if(""===s)for(i=0;i<this.oFilterCategories.excats.length;i++)if(this.oFilterCategories.excats[i]===n){this.oFilterCategories.excats.splice(i,1),s="neutral","add"===t&&(this.oFilterCategories.cats.push(n),s="add");break}return""===s&&("add"===t?(this.oFilterCategories.cats.push(n),s="add"):"exclude"===t&&(this.oFilterCategories.excats.push(n),s="exclude")),""===s&&(s="neutral"),s},openFreeSearchFilter:function(){var e=this;oPopup=r.get($("body"),!0,"close"),oPopup.setScrollAndResizeReposition("auto"),oPopup.setOverlayClosable(!0),oPopup.setEscapeClosable(!0),oPopup.addClass("auto-width-popup premium-feed-free-search-filter-pop"),oPopup.onShow=function(){$("body").addClass("premium-feed-filter-opened")},oPopup.onClose=function(){$("body").removeClass("premium-feed-filter-opened")},$Content=$(t.render(this.oTemplates.free_search_filter,{title:a.__(this.oTranslations.search),ok:a.__(this.oTranslations.ok),value:"string"==typeof this.sFilterFreeSearch&&n.escape(n.unescape(this.sFilterFreeSearch).replace(/\ +/g," ").trim(),!0),placeholder:a.__(this.oTranslations.search_for),clear:a.__(this.oTranslations.clear),cancel:a.__(this.oTranslations.cancel)}));var i=$Content.find("input"),s=$Content.find(".ok"),o=$Content.find(".clear"),l=$Content.find(".cancel");i.on("keydown",function(t){27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),oPopup.close()),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.updateFilterSelect("free_search",i.prop("value"))&&e.loadVideos(),oPopup.close())}),s.on("click",function(t){t.preventDefault(),e.updateFilterSelect("free_search",i.prop("value"))&&e.loadVideos(),oPopup.close()}),o.on("click",function(t){t.preventDefault(),e.updateFilterSelect("free_search",!1)&&e.loadVideos(),oPopup.close()}),l.on("click",function(e){e.preventDefault(),oPopup.close()}),oPopup.setContent($Content),oPopup.show("auto"),i.focus()},getFreeSearchFilterLabelText:function(){if("string"==typeof this.sFilterFreeSearch&&this.sFilterFreeSearch.length>0){var e=n.unescape(this.sFilterFreeSearch).replace(/\ +/g," ").trim();return'<span class="icon-f icf-search has-search"></span> '+n.escape(e.length>26?e.substring(0,26)+"...":e,!0)}return'<span class="icon-f icf-search"></span> '+a.__(this.oTranslations.search)},resizeWindowEvt:function(e){!1!==this.tWindowResize&&(clearTimeout(this.tWindowResize),this.tWindowResize=!1);var t=this;if(!0===this.bResizingWindow)return void(this.tWindowResize=setTimeout(function(){t.resizeWindowEvt(e)},1e3));var i=s.getViewportWidth();if("increase-rows-1"!==e&&"increase-rows-2"!==e&&i===this.iLastViewportWidth)return void("string"==typeof e&&-1!==e.indexOf("same-width")||(this.tWindowResize=setTimeout(function(){t.resizeWindowEvt("same-width"+("string"==typeof e?e:""))},1e3)));"string"==typeof e&&0===e.indexOf("same-width")&&(e=e.replace("same-width","")),!1!==this.tWindowEndResize&&(clearTimeout(this.tWindowEndResize),this.tWindowEndResize=!1),this.bResizingWindow=!0,this.iLastViewportWidth=i;var n=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows()),o=this.countVisibleSuggestThumbsSpace(this.getSuggestsContainerNbRows2());if(n===this.iLastResizeChannelThumbsSpace&&o===this.iLastResizeChannelThumbsSpace2)return void(this.bResizingWindow=!1);this.iLastResizeChannelThumbsSpace=n,this.iLastResizeChannelThumbsSpace2=o,this.fillSuggestsContainers(e);var a=this.getOrCreateFirstCatSuggest();if(a&&(this.countChannelsLeftToLoad()>0||this.countVisibleUnreviewedChannels()>0)){var r=this.getSuggestsContainer(),l=this.getSuggestsContainer2(),u=this.countChannelsLeftToLoad()<1;"increase-rows-1"!==e&&"increase-rows-2"!==e||!a.bAdded||u?this.appendOCatSuggest(a,r,l):"increase-rows-2"===e&&this.appendOCatSuggest(a,null,l)}this.updateSuggestsPositionCut(),this.tWindowEndResize=setTimeout(function(){t.bResizingWindow=!1},500)},slideUpElem:function(e){"up"!==e.data("animSlide")&&(e.data("animSlide","up"),e.stop(!0,!0).animate({opacity:0}).slideUp())},slideDownElem:function(e,t){"down"!==e.data("animSlide")&&(e.data("animSlide","down"),e.stop(!0,!0).slideDown().animate({opacity:1},function(){!0===t&&$(this).css("display","")}))}},R}),define("text!skins/common/help_wizard/help_wizard_container.mustache",[],function(){return'<div class="help-wizard-cover">\n\t<div class="help-wizard-skip{{{ skip_class }}}"><span class="icon-f icf-angle-double-right"></span> {{{ skip }}}</div>\n</div>'}),define("text!skins/common/help_wizard/help_wizard_mask.mustache",[],function(){return'<div class="help-wizard-mask">\r\n\t<div class="help-wizard-focus">\r\n\t\t<div class="help-wizard-description">\r\n\t\t\t<div class="help-wizard-description-content"></div>\r\n\t\t\t<p class="help-wizard-next"><button class="btn btn-primary">{{{ next }}}</button></p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="help-wizard-layer"></div>\r\n</div>'}),define("text!skins/common/help_wizard/help_wizard_loading.mustache",[],function(){return'<div class="help-wizard-mask">\r\n\t<div class="help-wizard-layer loader-layer"></div>\r\n\t<span class="help-wizard-loading icon-f icf-spinner icf-anim-pulse"></span>\r\n</div>'}),define("text!skins/common/help_wizard/help_wizard_cursor.mustache",[],function(){return'<div class="help-wizard-cursor">\r\n\t<span class="icon-f icf-hand-pointer-o"></span>\r\n\t<span class="icon-f icf-hand-pointer"></span>\r\n</div>'}),define("skins/common/help_wizard/help_wizard",["config/main","lib/i18n!front","static/dom","mustache","skins/common/history/one_info_tracker","text!./help_wizard_container.mustache","text!./help_wizard_mask.mustache","text!./help_wizard_loading.mustache","text!./help_wizard_cursor.mustache"],function(e,t,i,n,s,o,a,r,l){var u=function(e,t,i,n){this.oWizard=e,this.$ToHighlight=t,this.$Description=void 0!==i&&!1!==i&&(this.isValidSelector(i)?$(i):$("<p>"+i+"</p>")),"object"!=typeof n&&(n={}),this.setEndFunction(n.end_function),this.oOptions=n};u.prototype={show:function(){if(!0!==this.bShowOK){this.bShowOK=!0,this.bClosed=!1;var e=this;this.setToHightLight($(this.$ToHighlight),function(){e.showStep2()})}},showStep2:function(){if(!0!==this.bShowStep2OK){if(this.bShowStep2OK=!0,this.create(),this.setShowCursorAnimOn(this.oOptions.show_cursor_anim_on),this.position(),!this.$ToHighlight&&!this.$Description)return void this.close();"undefined"!=typeof this.oOptions.skip_position&&this.oWizard.setSkinBtnPosition(this.oOptions.skip_position);var e=this;this.$Mask.css({opacity:"1",display:"none"}).fadeIn(function(){e.stopShowDesc(),e.resetCursorAnimation(),e.tShowDesc=setTimeout(function(){e.$MaskDescription.fadeIn("slow",function(){"undefined"!=typeof e.oOptions.auto_next&&e.setAutoNextWizard(e.oOptions.auto_next),"undefined"!=typeof e.oOptions.hide_cover_timer&&e.oWizard.hideMask(e.oOptions.hide_cover_timer)})},250)}),this.eWindowResize=function(){!1!==e.tWindowResize&&(clearTimeout(e.tWindowResize),e.tWindowResize=!1),e.$Mask.stop().hide(),e.tWindowResize=setTimeout(function(){e.tWindowResize=!1,e.setToHightLight($(e.$ToHighlight),function(){e.position(),e.resetCursorAnimation(),e.$Mask.fadeIn()})},200)},"function"==typeof this.oOptions.after_show_function&&this.oOptions.after_show_function(this),$(window).on("resize",this.eWindowResize)}},create:function(){if("undefined"==typeof this.$Mask&&!1!==this.$Mask){this.$Mask=$(n.render(a,{next:t.__("misc.got_it")})),this.shouldHaveCursor()&&(this.$Cursor=$(n.render(l)),this.$Mask.append(this.$Cursor));var e=this;this.eNextClick=function(t){t.stopPropagation(),t.preventDefault(),e.close()},this.eSkipAllClick=function(t){t.stopPropagation(),t.preventDefault(),e.oWizard.skipAll()},this.$MaskLayer=this.$Mask.children(".help-wizard-layer"),this.$MaskFocus=this.$Mask.children(".help-wizard-focus"),this.$MaskDescription=this.$MaskFocus.find(".help-wizard-description"),this.$MaskNextBtn=this.$Mask.find(".help-wizard-next button"),this.$MaskDescriptionContent=this.$MaskDescription.find(".help-wizard-description-content"),this.$MaskNextBtn.on("click",this.eNextClick),this.$MaskFocus.on("click",this.eNextClick),this.$MaskLayer.on("click",this.eSkipAllClick),!1!==this.$Description&&this.$Description.length>0?this.$MaskDescriptionContent.append(this.$Description):(this.$MaskDescriptionContent.hide(),this.$MaskDescription.addClass("no-text"))}},setToHightLight:function(e,t,n){if(n="boolean"!=typeof n||n,"string"==typeof e&&!this.isValidSelector(e))return!1;var s=$(e);if(0===s.length||!s.is(":visible"))return this.$ToHighlight=!1,"function"==typeof t&&t(),!1;if(this.$ToHighlight=s.first(),!n||i.isElementInView(this.$ToHighlight,!0))return"function"==typeof t&&t(),!0;var o=this.$ToHighlight.offset(),a=$("html, body").scrollTop(),r=Math.max(o.top-50,0);if(o.top>a){var l=$(window).height(),u=this.$ToHighlight.outerHeight();r=Math.min(r,o.top-l+u+50)}return $("html, body").animate({scrollTop:r},function(){"function"==typeof t&&t()}),!0},setShowCursorAnimOn:function(e,t){if(this.oOptions.show_cursor_anim_on=e,this.hasCursor())if("string"!=typeof e||this.isValidSelector(e)){var i=$(e).first();this.oOptions.show_cursor_anim_on=!!(i.length>0&&i.is(":visible"))&&i}else this.oOptions.show_cursor_anim_on=!1;else this.oOptions.show_cursor_anim_on=!1;"function"==typeof t&&t(!1)},resetCursorAnimation:function(){if(this.stopCursorAnimation(),!this.hasCursor())return!1;this.$Cursor.stop(),this.iCursorAnimationPlayed=0;var e=this,t=function(){if(e.iCursorAnimationPlayed>=10)return e.stopCursorAnimation(),!1;e.$Cursor.stop().css({display:"none",top:e.iCursorTopStart,left:e.iCursorLeftStart}).fadeIn(200).animate({top:e.iCursorTopEnd,left:e.iCursorLeftEnd},400).delay(250).animate({top:e.iCursorTopEnd+3},100,function(){e.$Cursor.addClass("click-pulse").animate({top:e.iCursorTopEnd},100).fadeOut(500,function(){e.iCursorAnimationPlayed++,(!0===e.oOptions.auto_next_after_cursor_anim||"number"==typeof e.oOptions.auto_next_after_cursor_anim&&e.oOptions.auto_next_after_cursor_anim<=e.iCursorAnimationPlayed)&&e.close(),e.$Cursor.removeClass("click-pulse")})})};t(),this.tCursorInterval=setInterval(t,2500)},stopCursorAnimation:function(){"undefined"!=typeof this.tCursorInterval&&!1!==this.tCursorInterval&&(clearInterval(this.tCursorInterval),this.tCursorInterval=!1)},setEndFunction:function(e){if("function"!=typeof e){var t=this;return void(this.fEnd=function(){t.showNextWizard()})}this.fEnd=e},setAutoNextWizard:function(e){if(this.stopAutoNextWizard(),!1===e)return void(this.oOptions.auto_next=!1);this.oOptions.auto_next="number"==typeof e?e:5e3;var t=this;this.tAutoNextWizard=setTimeout(function(){t.close()},this.oOptions.auto_next),this.$MaskNextBtn&&this.$MaskNextBtn.length>0&&this.$MaskNextBtn.css("transition-duration",this.oOptions.auto_next+"ms").addClass("auto-next")},stopAutoNextWizard:function(){"undefined"!=typeof this.tAutoNextWizard&&!1!==this.tAutoNextWizard&&(clearTimeout(this.tAutoNextWizard),this.tAutoNextWizard=!1),this.$MaskNextBtn&&this.$MaskNextBtn.length>0&&this.$MaskNextBtn.removeClass("auto-next").css("transition-duration","0")},stopShowDesc:function(){"undefined"!=typeof this.tShowDesc&&!1!==this.tShowDesc&&(clearTimeout(this.tShowDesc),this.tShowDesc=!1)},shouldHaveCursor:function(){return"undefined"!=typeof this.oOptions.show_cursor_anim_on&&!1!==this.oOptions.show_cursor_anim_on},hasCursor:function(){return this.shouldHaveCursor()&&"undefined"!=typeof this.$Cursor&&this.$Cursor.length>0},position:function(){if(!0!==this.bClosed&&"undefined"!=typeof this.$Mask){var e=this.oWizard.getContainer();if("object"==typeof e&&0!==e.length){e.is(this.$Mask.parent())||e.append(this.$Mask);var t=!(!this.$ToHighlight||0===this.$ToHighlight.length||!this.$ToHighlight.is(":visible"))&&this.$ToHighlight,i=$(window).height(),n=$(window).width(),s=$("html, body").scrollTop(),o=$("html, body").prop("scrollHeight");this.$Mask.css({bottom:"0",height:o+"px",left:"0",right:"0",top:"0",width:n+"px"});var a,r,l,u,f,d;if(!1!==t){var c=t.offset();f=Math.min(t.outerHeight()+30,o),d=Math.min(t.outerWidth()+30,n),a=Math.max(c.top-15,0),r=Math.max(c.left-15,0),l=a+f,u=r+d}else f=0,d=n,a=0,r=0,l=0,u=n;this.$MaskFocus.css({top:a+"px",left:r+"px",height:f+"px",width:d+"px"});var h=f>i,p=a-s>i-l+s,_=r>n-u,g={};if(iDescMinWidth=!1!==this.$Description&&this.$Description.length>0?300:10,iDescMaxWidth=500,h?(g.bottom="auto",g.top="15px"):p?(g.top="auto",g.bottom=f+15+"px"):(g.bottom="auto",g.top=f+15+"px"),_){var m=Math.max(n-u,15),b=n-u>15?15:15-(n-u);g.left="auto",g.right=b+"px",iDescMaxWidth=Math.min(iDescMaxWidth,n-m-15,Math.max(d,iDescMinWidth,d+.5*r))}else{var v=Math.max(r,15),D=r>15?15:30-v;g.right="auto",g.left=D+"px",iDescMaxWidth=Math.min(iDescMaxWidth,n-v-15,Math.max(d,iDescMinWidth,d+.5*(n-u)))}if(iDescMinWidth=Math.min(iDescMinWidth,iDescMaxWidth),g["max-width"]=iDescMaxWidth+"px",g["min-width"]=iDescMinWidth+"px",this.$MaskDescription.css(g),this.hasCursor()){var y=this.oOptions.show_cursor_anim_on.offset(),w=this.oOptions.show_cursor_anim_on.innerHeight(),C=this.oOptions.show_cursor_anim_on.innerWidth();this.iCursorTopEnd=y.top+w/2,this.iCursorLeftEnd=y.left+C/2,this.iCursorTopStart=i/2+s>this.iCursorTopEnd?this.iCursorTopEnd+i/6:this.iCursorTopEnd-i/6,this.iCursorLeftStart=n/2>this.iCursorLeftEnd?this.iCursorLeftEnd+n/6:this.iCursorLeftEnd-n/6}}}},showNextWizard:function(){this.oWizard.showNext()},
close:function(){if(this.stopAutoNextWizard(),this.stopCursorAnimation(),this.stopShowDesc(),!0!==this.bClosed){if(this.bClosed=!0,this.bShowOK=!1,this.bShowStep2OK=!1,"undefined"==typeof this.$Mask)return this.$Mask=!1,void this.fEnd(this);this.eWindowResize&&$(window).off("resize",this.eWindowResize),this.eNextClick&&(this.$MaskNextBtn.off("click",this.eNextClick),this.$MaskFocus.off("click",this.eNextClick)),this.eSkipAllClick&&this.$MaskLayer.off("click",this.eSkipAllClick);var e=this;this.$Mask.fadeOut("fast",function(){e.$Mask.remove(),e.$Mask=!1,e.oWizard.isEndindOrEnded()||e.fEnd(e)})}},isValidSelector:function(e){if("string"!=typeof e)return!1;try{if(0===$(e).length)return!1}catch(t){return!1}return!0}};var f=function(e,t,i){if("undefined"==typeof e[t])return!1;var n=e[t];if(this.aInstructions=[],this.sId=n.feature_id,!0!==i&&this.wasViewed())return!1;if(this.fBeforeEnd="function"==typeof n.before_end_function&&n.before_end_function,this.fEnd="function"==typeof n.end_function&&n.end_function,this.sEndRedirect="string"==typeof n.end_redirect&&n.end_redirect,this.oSkipPosition="undefined"!=typeof n.skip_position&&n.skip_position,this.bSaveViewed="boolean"!=typeof n.save_viewed||n.save_viewed,"object"==typeof n.instructions&&n.instructions.length>0)for(var s in n.instructions)this.addInstruction(n.instructions[s].zone,n.instructions[s].desc,n.instructions[s].options);("boolean"!=typeof n.auto_launch||n.auto_launch)&&this.launch()};return f.prototype={addInstruction:function(e,t,i){var n=new u(this,e,t,i);return this.aInstructions.push(n),n},launch:function(){if(0!==this.aInstructions.length){var e=this,i=("string"==typeof this.sSkipVPosition?" "+this.sSkipVPosition:"")+("string"===this.sSkipHPosition?" "+this.sSkipHPosition:"");this.$Container=$(n.render(o,{skip:t.__("misc.skip_all"),skip_class:i})),this.$Skip=this.$Container.find(".help-wizard-skip"),this.$Skip.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.skipAll()}),this.eEscapeKey=function(t){27===t.which&&e.skipAll()},$("body").append(this.$Container).on("keyup",this.eEscapeKey),this.showNext()}},wasViewed:function(){return aLocalSave=s.get("helpWizard_viewed"),aLocalSave||(aLocalSave=[]),-1!==aLocalSave.indexOf(this.sId)||e.dyn.donewizs&&-1!==e.dyn.donewizs.indexOf(this.sId)},setViewed:function(t,i){if((i="boolean"!=typeof i||i)===this.wasViewed())return"function"==typeof t&&t(),!1;if(e.dyn.donewizs||(e.dyn.donewizs=[]),aLocalSave=s.get("helpWizard_viewed"),aLocalSave||(aLocalSave=[]),!0===i)-1===e.dyn.donewizs.indexOf(this.sId)&&e.dyn.donewizs.push(this.sId),-1===aLocalSave.indexOf(this.sId)&&aLocalSave.push(this.sId);else{var n=e.dyn.donewizs.indexOf(this.sId);-1!==n&&e.dyn.donewizs.splice(n,1),n=aLocalSave.indexOf(this.sId),-1!==aLocalSave&&aLocalSave.splice(n,1)}s.set("helpWizard_viewed",aLocalSave),i&&$.post({url:"/account/wizard-done",data:{wizardid:this.sId},success:function(e){e.result||console.log("%cERROR : wizard not saved as "+(!0===i?"viewed":"unviewed"),"color:red;"),"function"==typeof t&&t()},error:function(e){console.log("%cERROR : ajax error","color:red;",e),"function"==typeof t&&t()},dataType:"json"})},showNext:function(e){if(!this.isEndindOrEnded()&&0!==this.aInstructions.length){if("number"==typeof e&&e<=this.aInstructions.length)this.iCurrentIndex1=e;else if("undefined"==typeof this.iCurrentIndex1)this.iCurrentIndex1=1;else if(++this.iCurrentIndex1>this.aInstructions.length)return this.iCurrentIndex1=0,void this.end();this.setSkinBtnPosition();this.aInstructions[this.iCurrentIndex1-1].show()}},skipAll:function(){this.sEndRedirect=!1,this.end()},getContainer:function(){return this.$Container},setSkinBtnPosition:function(e){if(void 0===e&&(e=this.oSkipPosition),!1===e||"undefined"==typeof this.$Skip||0===this.$Skip.length)return!1;if("object"==typeof e){if(!e.v||!e.h||"bottom"!==e.v&&"top"!==e.v||"right"!==e.h&&"left"!==e.h)return!1;this.sSkipVPosition=e.v,this.sSkipHPosition=e.h}else{if(e=e.split(" "),2!==e.length||"bottom"!==e[0]&&"top"!==e[0]||"right"!==e[1]&&"left"!==e[1])return!1;this.sSkipVPosition=e[0],this.sSkipHPosition=e[1]}return"top"===this.sSkipVPosition?(this.$Skip.addClass("top"),this.$Skip.removeClass("bottom")):(this.$Skip.removeClass("top"),this.$Skip.addClass("bottom")),"left"===this.sSkipHPosition?(this.$Skip.addClass("left"),this.$Skip.removeClass("right")):(this.$Skip.removeClass("left"),this.$Skip.addClass("right")),!0},killCurrentInstruction:function(){if(this.iCurrentIndex1&&this.iCurrentIndex1>0){this.aInstructions[this.iCurrentIndex1-1].close()}},hideMask:function(e){this.stopAutoHideMask();var t=this,i=this.getContainer();fHideMask=function(){"object"==typeof i&&0!==i.length&&(i.removeClass("help-wizard-no-mask help-wizard-hiding-mask").addClass("help-wizard-hiding-mask"),t.tAutoHideMask=setTimeout(function(){i.addClass("help-wizard-no-mask").removeClass("help-wizard-hiding-mask")},500))},fShowMask=function(){"object"==typeof i&&0!==i.length&&i.removeClass("help-wizard-no-mask help-wizard-hiding-mask")},"number"==typeof e?this.tAutoHideMask=setTimeout(fHideMask,e):!1===e?fShowMask():fHideMask()},stopAutoHideMask:function(){"undefined"!=typeof this.tAutoHideMask&&!1!==this.tAutoHideMask&&(clearTimeout(this.tAutoHideMask),this.tAutoHideMask=!1)},isEndindOrEnded:function(){return!0===this.bClosed||!0===this.bClosing},end:function(){if(!0!==this.bClosed){if(!0===this.bClosing)return void this.endStep2();this.bClosing=!0,this.killCurrentInstruction();var e=this;if("function"==typeof this.fBeforeEnd)return void this.fBeforeEnd(function(){e.endStep2()});e.endStep2()}},endStep2:function(){if(!1===this.bSaveViewed)return void this.endStep3();var e=this;this.setViewed(function(){e.endStep3()})},endStep3:function(){if("string"==typeof this.sEndRedirect)return void this.redirect(this.sEndRedirect);this.bClosed=!0;var e=this,t=$("body");this.eEscapeKey&&t.off("keyup",this.eEscapeKey),t.click(),this.$Container.fadeOut(function(){e.$Container.remove(),"function"==typeof e.fEnd&&e.fEnd()})},redirect:function(e){this.$Skip&&this.$Skip.length>0&&this.$Skip.remove();var t=$(n.render(r));this.$Container.append(t),t.css({opacity:"1",display:"none"}).fadeIn("fast",function(){window.location.href=e})}},f}),define("skins/default/help_wizard/wizard_info",["lib/i18n!front"],function(e){return{"premium-feed":{feature_id:"4",before_end_function:function(e){$(".premium-feed-channel-preview-pop").click(),e()},instructions:[{zone:"#sub-channels .thumb-block:first-child .thumb",desc:!1,options:{show_cursor_anim_on:"#sub-channels .thumb-block:first-child .thumb a",auto_next_after_cursor_anim:!0,end_function:function(e){$("#sub-channels .thumb-block:first-child .thumb a").click(),e.showNextWizard()}}},{zone:".premium-feed-channel-preview-pop .x-body",desc:e.__("premium_feed.preview_channel_tuto"),options:{}}]}}}),define("skins/default/premium_feed",["skins/common/premium_feed","skins/default/mozaique/thumb_block_common_init","skins/default/pagination","skins/default/mozaique/thumb_block_menu","lib/helpers/suggest_tracker","./header/header"],function(e,t,i,n){new e({functions:{add_pagination:function(e){i.add_all_in(e)},append_channel_videos:function(e,t){$Mozaique=t.find(".mozaique"),e.appendTo($Mozaique)},get_channel_top_title:function(e){return e.find(".header")},init_desktop_channel_videos:function(e){t.init_listing(e,{tb_menu:!1})},init_videos_list:function(e){t.init_listing(e)},launch_wizard:function(){require(["skins/common/help_wizard/help_wizard","skins/default/help_wizard/wizard_info"],function(e,t){new e(t,"premium-feed")})},page_init_end:function(e){n.disableSubscribeTooltip(),n.addSubscribeEndFunction(function(t,i){e.scrollToVideos(),e.loadVideos(),e.loadChannels(null,!0),t&&e.reloadChannel(t)})}}}),n.addEntryToDefaultOrder("report"),n.addEntryToDefaultOrder("not_interested")}),define("skins/default/profile/subscribe",["config/main","static/utils","lib/helpers/popup","lib/i18n!front"],function(e,t,i,n){var s=function(e){this.node=$(e),this.is_square=this.node.hasClass("video-subscribe-square"),this.has_label=this.node.find(".label").length>0,this.msg_popup=null};s.prototype={setLabel:function(e,i,n,s){if(this.node.removeClass("hidden"),this.has_label)return void this.node.children(".label").html(i).find("a").on("click",function(e){e.stopPropagation()});!1!==s&&this.node.is(":visible")&&this.showPopup("<strong>"+i+"</strong>",n);var o=i.indexOf("<a");-1!==o&&(i=i.substring(0,o)),this.node.prop("title",t.unescape(i)),this.node.find(".icon").toggleClass("feed-subscribed",e).toggleClass("feed red",!e)},showPopup:function(e,t){this.msg_popup?this.msg_popup.setContent(e):this.msg_popup=new i(this.node,e,{trigger:!1}),this.msg_popup.open(),t&&t(this.msg_popup.popup)},hidePopup:function(){this.msg_popup&&this.msg_popup.close()}};var o=function(e,t,i,n,o){this.nodes=e.map(function(){return new s(this)}).toArray(),this.profile=t,this.id_user=i,this.subscriber=n,this.csrf=o,this.setup()};return o.prototype={onSubscribe:null,onUnsubscribe:null,setLabel:function(e,t,i,n){for(var s in this.nodes)this.nodes[s].setLabel(e,t,i,n)},showPopup:function(e,t){for(var i in this.nodes)this.nodes[i].showPopup(e,t)},setOnClick:function(e){for(var t in this.nodes)this.nodes[t].node.on("click",e)},setOffClick:function(){for(var e in this.nodes)this.nodes[e].node.off("click")},setProp:function(e,t){for(var i in this.nodes)this.nodes[i].node.prop(e,t)},hidePopup:function(){for(var e in this.nodes)this.nodes[e].hidePopup()},setup:function(){var t=this,i="/profiles/"+this.profile+"/";if(e.dyn.login_info.is_logged&&e.dyn.login_info.profile)return void require(["skins/default/profile/action/link"],function(e){var s=t.subscriber?"unsubscribe":"subscribe";t.setLabel(t.subscriber,t.subscriber?n.__("subscriptions.unsubscribe"):n.__("subscriptions.subscribe"),!1,!1);var o=[];for(var a in t.nodes){var r=new e(t.nodes[a].node,i+"followers/"+s,"unsubscribe"===s,"subscribe"===s,t.csrf);r.setLoadingMessage(""),r.onSuccess=function(){t.setLabel("subscribe"===s,"subscribe"===s?n.__("subscriptions.subscribed")+' <a href="/my-subs/videos">'+n.__("subscriptions.view_activities")+"</a>":n.__("subscriptions.unsubscribed")),t.subscriber=!t.subscriber,s=t.subscriber?"unsubscribe":"subscribe";for(var e in o)o[e].setAction(i+"followers/"+s,"unsubscribe"===s,"subscribe"===s,t.csrf);t.subscriber&&t.onSubscribe&&t.onSubscribe(),!t.subscriber&&t.onUnsubscribe&&t.onUnsubscribe()},o.push(r)}});require(["skins/common/features_test/video_subs"],function(s){var o=s.isTracking()&&s.hasSubscribed(t.id_user);return t.setLabel(o,o?n.__("subscriptions.unsubscribe"):n.__("subscriptions.subscribe"),!1,!1),t.setOffClick(),s.canTrack()?s.isTracking()?void t.setOnClick(function(e){e.preventDefault(),s.hasSubscribed(t.id_user)?(s.unsubscribe(t.id_user),t.setLabel(!1,n.__("subscriptions.unsubscribed")),$.post(i+"followers/unsubscribe"),t.onUnsubscribe&&t.onUnsubscribe()):(s.subscribe(t.id_user),t.setLabel(!0,n.__("subscriptions.subscribed")+' <a href="/my-subs/videos">'+n.__("subscriptions.view_activities")+"</a>"),$.post(i+"followers/subscribe"),t.onSubscribe&&t.onSubscribe())}):void t.setOnClick(function(e){e.preventDefault(),t.showPopup("<span>"+n.__("profile.tracking.disabled",{"%start_login%":'<a href="#">',"%end_login%":"</a>","%start_enable%":'<a href="/my-subs/videos">',"%end_enable%":"</a>"})+"</span>",function(e){require(["skins/default/form/login"],function(i){var n=e.find(".x-popup-content a").first();n.on("click",function(){t.hidePopup()}),i.setupLinks(n)})})}):void t.setOnClick(function(i){i.preventDefault(),e.dyn.login_info.is_logged?t.setOnClick(function(e){e.preventDefault(),t.showPopup("<span>"+n.__("profile.tracking.device_not_compatible_create_profile",{"%start_create_profile%":'<a href="/account/create_profile">',"%end_login%":"</a>"})+"</span>")}):t.setOnClick(function(e){e.preventDefault(),t.showPopup("<span>"+n.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}+"</span>"),function(e){require(["skins/default/form/login"],function(t){t.setupLinks(e.find(".x-popup-content a").first())})})})})})}},o}),define("text!skins/default/profile/desc_page_thumb.html",[],function(){return'<div>\n\t<div class="prev" title="{{{ prev }}}">&lt;&lt;</div>\n\t<div class="next" title="{{{ next }}}">&gt;&gt;</div>\n\t<p>{{{ title }}}</p>\n\t<img class="img-responsive" src="{{ src }}" />\n</div>\n'}),define("skins/default/profile/desc_page",["lib/helpers/overlay/box","lib/helpers/inline_loader","mustache","text!./desc_page_thumb.html","lib/i18n!front"],function(e,t,i,n,s){var o={};return o.setup=function(){var a=$(".tab-description");if(a.length>0){var r,l,u,f,d,c=null;a.find(".thumbs").each(function(){var t=$(this),o=[];t.find("img").each(function(t){var a=$(this),h=t,p={node:a,src:a.prop("src").replace("-thumb",""),title:a.prop("title")};o.push(p),a.on("click",function(t){t.stopPropagation(),d=h,c?(r.prop("src",p.src),l.html(p.title)):(c=e.get("#main",!0,"hide").setClosable(!0,!0).setContent(i.render(n,{src:p.src,title:p.title,prev:s.__("misc.previous"),next:s.__("misc.next")})),r=c.container.find("img"),l=c.container.find("p"),u=c.container.find(".prev").on("click",function(){var e=d>0?d-1:o.length-1;o[e].node.trigger("click")}),f=c.container.find(".next").on("click",function(){var e=d<o.length-1?d+1:0;o[e].node.trigger("click")})),u.toggle(o.length>1),f.toggle(o.length>1),c.show(!1)})})})}var h=$("#login-link,#login-link-limit");h.length>0&&require(["skins/default/form/login"],function(e){e.setupLinks(h)});var p=!1,_=$();o.add_suball_btn=function(e){_=_.add(e),e.on("click",function(){if(!p&&confirm("Are you sure you want to subscribe to all uploaders of videos you like?")){p=!0;var e=t.get("after","Subscribing...").getNode().insertAfter(_);_.hide(),$.post("/videos-i-like/subscribe-all",function(e){e.result?(_.remove(),alert(e.message),window.location.reload()):(_.show(),p=!1,alert(e.message))},"json").fail(function(){_.show(),p=!1,alert("An error occured. Please retry.")}).always(function(){e.remove()})}})},o.add_suball_btn($(".subscribe-all-upvidsilike"))},o}),function(){function e(t,n){function o(e,t){try{e()}catch(i){t&&t()}}function a(e){if(null!=a[e])return a[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=a("json-stringify")&&a("date-serialization")&&a("json-parse");else if("date-serialization"==e){if(t=a("json-stringify")&&D){var i=n.stringify;o(function(){t='"-271821-04-20T00:00:00.000Z"'==i(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new d(-1))})}}else{var s,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=n.stringify,f="function"==typeof i;f&&((s=function(){return 1}).toJSON=s,o(function(){f="0"===i(0)&&"0"===i(new l)&&'""'==i(new u)&&i(b)===g&&i(g)===g&&i()===g&&"1"===i(s)&&"[1]"==i([s])&&"[null]"==i([g])&&"null"==i(null)&&"[null,null,null]"==i([g,b,null])&&i({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===i(null,s)&&"[\n 1,\n 2\n]"==i([1,2],null,1)},function(){f=!1})),t=f}if("json-parse"==e){var c,h=n.parse;"function"==typeof h&&o(function(){0!==h("0")||h(!1)||(s=h(r),(c=5==s.a.length&&1===s.a[0])&&(o(function(){c=!h('"\t"')}),c&&o(function(){c=1!==h("01")}),c&&o(function(){c=1!==h("1.")})))},function(){c=!1}),t=c}}return a[e]=!!t}function r(e){return x(this)}t||(t=s.Object()),n||(n=s.Object());var l=t.Number||s.Number,u=t.String||s.String,f=t.Object||s.Object,d=t.Date||s.Date,c=t.SyntaxError||s.SyntaxError,h=t.TypeError||s.TypeError,p=t.Math||s.Math,_=t.JSON||s.JSON;"object"==typeof _&&_&&(n.stringify=_.stringify,n.parse=_.parse);var g,m=f.prototype,b=m.toString,v=m.hasOwnProperty,D=new d(-0xc782b5b800cec);if(o(function(){D=-109252==D.getUTCFullYear()&&0===D.getUTCMonth()&&1===D.getUTCDate()&&10==D.getUTCHours()&&37==D.getUTCMinutes()&&6==D.getUTCSeconds()&&708==D.getUTCMilliseconds()}),a["bug-string-char-index"]=a["date-serialization"]=a.json=a["json-stringify"]=a["json-parse"]=null,!a("json")){var y=a("bug-string-char-index"),w=function(e,t){var n,s,o,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n;for(o in s)v.call(s,o)&&a++;return n=s=null,a?w=function(e,t){var i,n,s="[object Function]"==b.call(e);for(i in e)s&&"prototype"==i||!v.call(e,i)||(n="constructor"===i)||t(i);(n||v.call(e,i="constructor"))&&t(i)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],w=function(e,t){var n,o,a="[object Function]"==b.call(e),r=!a&&"function"!=typeof e.constructor&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||v;for(n in e)a&&"prototype"==n||!r.call(e,n)||t(n);for(o=s.length;n=s[--o];)r.call(e,n)&&t(n)}),w(e,t)};if(!a("json-stringify")&&!a("date-serialization")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},k=function(e,t){return("000000"+(t||0)).slice(-e)},x=function(e){var t,i,n,s,o,a,r,l,u;if(D)t=function(e){i=e.getUTCFullYear(),n=e.getUTCMonth(),s=e.getUTCDate(),a=e.getUTCHours(),r=e.getUTCMinutes(),l=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var f=p.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],c=function(e,t){return d[t]+365*(e-1970)+f((e-1969+(t=+(t>1)))/4)-f((e-1901+t)/100)+f((e-1601+t)/400)};t=function(e){for(s=f(e/864e5),i=f(s/365.2425)+1970-1;c(i+1,0)<=s;i++);for(n=f((s-c(i,0))/30.42);c(i,n+1)<=s;n++);s=1+s-c(i,n),o=(e%864e5+864e5)%864e5,a=f(o/36e5)%24,r=f(o/6e4)%60,l=f(o/1e3)%60,u=o%1e3}}return(x=function(e){return e>-1/0&&e<1/0?(t(e),e=(i<=0||i>=1e4?(i<0?"-":"+")+k(6,i<0?-i:i):k(4,i))+"-"+k(2,n+1)+"-"+k(2,s)+"T"+k(2,a)+":"+k(2,r)+":"+k(2,l)+"."+k(3,u)+"Z",i=n=s=a=r=l=u=null):e=null,e})(e)};if(a("json-stringify")&&!a("date-serialization")){var F=n.stringify;n.stringify=function(e,t,i){var n=d.prototype.toJSON;d.prototype.toJSON=r;var s=F(e,t,i);return d.prototype.toJSON=n,s}}else{var $=function(e){var t=e.charCodeAt(0),i=C[t];return i||"\\u00"+k(2,t.toString(16))},E=/[\x00-\x1f\x22\x5c]/g,T=function(e){return E.lastIndex=0,'"'+(E.test(e)?e.replace(E,$):e)+'"'},S=function(e,t,i,n,s,a,r){var l,u,f,c,p,_,m,v,D;if(o(function(){l=t[e]}),"object"==typeof l&&l&&(l.getUTCFullYear&&"[object Date]"==b.call(l)&&l.toJSON===d.prototype.toJSON?l=x(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),i&&(l=i.call(t,e,l)),l==g)return l===g?l:"null";switch(u=typeof l,"object"==u&&(f=b.call(l)),f||u){case"boolean":case"[object Boolean]":return""+l;case"number":case"[object Number]":return l>-1/0&&l<1/0?""+l:"null";case"string":case"[object String]":return T(""+l)}if("object"==typeof l){for(m=r.length;m--;)if(r[m]===l)throw h();if(r.push(l),c=[],v=a,a+=s,"[object Array]"==f){for(_=0,m=l.length;_<m;_++)p=S(_,l,i,n,s,a,r),c.push(p===g?"null":p);D=c.length?s?"[\n"+a+c.join(",\n"+a)+"\n"+v+"]":"["+c.join(",")+"]":"[]"}else w(n||l,function(e){var t=S(e,l,i,n,s,a,r);t!==g&&c.push(T(e)+":"+(s?" ":"")+t)}),D=c.length?s?"{\n"+a+c.join(",\n"+a)+"\n"+v+"}":"{"+c.join(",")+"}":"{}";return r.pop(),D}};n.stringify=function(e,t,n){var s,o,a,r;if(i[typeof t]&&t)if("[object Function]"==(r=b.call(t)))o=t;else if("[object Array]"==r){a={};for(var l,u=0,f=t.length;u<f;)l=t[u++],"[object String]"!=(r=b.call(l))&&"[object Number]"!=r||(a[l]=1)}if(n)if("[object Number]"==(r=b.call(n))){if((n-=n%1)>0)for(n>10&&(n=10),s="";s.length<n;)s+=" "}else"[object String]"==r&&(s=n.length<=10?n:n.slice(0,10));return S("",(l={},l[""]=e,l),o,a,s,"",[])}}}if(!a("json-parse")){var L,P,I=u.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw L=P=null,c()},O=function(){for(var e,t,i,n,s,o=P,a=o.length;L<a;)switch(s=o.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?o.charAt(L):o[L],L++,e;case 34:for(e="@",L++;L<a;)if((s=o.charCodeAt(L))<32)A();else if(92==s)switch(s=o.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[s],L++;break;case 117:for(t=++L,i=L+4;L<i;L++)(s=o.charCodeAt(L))>=48&&s<=57||s>=97&&s<=102||s>=65&&s<=70||A();e+=I("0x"+o.slice(t,L));break;default:A()}else{if(34==s)break;for(s=o.charCodeAt(L),t=L;s>=32&&92!=s&&34!=s;)s=o.charCodeAt(++L);e+=o.slice(t,L)}if(34==o.charCodeAt(L))return L++,e;A();default:if(t=L,45==s&&(n=!0,s=o.charCodeAt(++L)),s>=48&&s<=57){for(48==s&&(s=o.charCodeAt(L+1))>=48&&s<=57&&A(),n=!1;L<a&&(s=o.charCodeAt(L))>=48&&s<=57;L++);if(46==o.charCodeAt(L)){for(i=++L;i<a&&!((s=o.charCodeAt(i))<48||s>57);i++);i==L&&A(),L=i}if(101==(s=o.charCodeAt(L))||69==s){for(s=o.charCodeAt(++L),43!=s&&45!=s||L++,i=L;i<a&&!((s=o.charCodeAt(i))<48||s>57);i++);i==L&&A(),L=i}return+o.slice(t,L)}n&&A();var r=o.slice(L,L+4);if("true"==r)return L+=4,!0;if("fals"==r&&101==o.charCodeAt(L+4))return L+=5,!1;if("null"==r)return L+=4,null;A()}return"$"},B=function(e){var t,i;if("$"==e&&A(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=O());)i?","==e?"]"==(e=O())&&A():A():i=!0,","==e&&A(),t.push(B(e));return t}if("{"==e){for(t={};"}"!=(e=O());)i?","==e?"}"==(e=O())&&A():A():i=!0,","!=e&&"string"==typeof e&&"@"==(y?e.charAt(0):e[0])&&":"==O()||A(),t[e.slice(1)]=B(O());return t}A()}return e},R=function(e,t,i){var n=j(e,t,i);n===g?delete e[t]:e[t]=n},j=function(e,t,i){var n,s=e[t];if("object"==typeof s&&s)if("[object Array]"==b.call(s))for(n=s.length;n--;)R(b,w,s);else w(s,function(e){R(s,e,i)});return i.call(e,t,s)};n.parse=function(e,t){var i,n;return L=0,P=""+e,i=B(O()),"$"!=O()&&A(),L=P=null,t&&"[object Function]"==b.call(t)?j((n={},n[""]=i,n),"",t):i}}}return n.runInContext=e,n}var t="function"==typeof define&&define.amd,i={"function":!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,s=i[typeof window]&&window||this,o=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!o||o.global!==o&&o.window!==o&&o.self!==o||(s=o),n&&!t)e(s,n);else{var a=s.JSON,r=s.JSON3,l=!1,u=e(s,s.JSON3={noConflict:function(){return l||(l=!0,s.JSON=a,s.JSON3=r,a=r=null),u}});s.JSON={parse:u.parse,stringify:u.stringify}}t&&define("json3",[],function(){return u})}.call(this),define("lib/json",[],function(){"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse||require(["json3"])}),define("skins/default/prof_video_subs",["config/main","static/utils","lib/tools","lib/helpers/inline_loader","skins/default/mozaique/thumb_block_common_init","lib/helpers/overlay/box","skins/common/features_test/video_subs","skins/common/history/one_info_tracker","skins/default/profile/subscribe","./profile/desc_page","lib/i18n!front","lib/helpers/overlay/contextual_popup","./header/header","lib/json"],function(e,t,i,n,s,o,a,r,l,u,f,d){var c={};e.dyn.login_info.is_logged&&e.dyn.login_info.profile||a.isTracking()&&(c.ids=a.getIds()),$.post("/my-subs/videos/tab",c,function(o){$("#page-videos-content").html(o),u.setup();var c=$("#toggle-tracking");if(c.length>0){var h=function(e){c.html(f.__(e?"profile.tracking.stop_subs_and_del":"profile.tracking.store_subs"))},p=function(){var e=a.isTracking();if(e)window.confirm(t.unescape(f.__("misc.are_you_sure")))&&(a.stopTracking(),window.location.reload());else{if(!a.canTrack())return void window.alert(t.unescape(f.__("misc.device_not_compatible")));a.startTracking()}h(!e)};h(a.isTracking()),c.on("click",p)}var _=$("#content .eventslist");if(0!==_.length){var g,m,b,v,D,y=!1,w=["all","channels","models"],C=xv.header.is_mobile()?48:8,k=$(".tab-description").children(".hidden"),x=function(){var e=$(this),t=e.data("profile"),o=e.find(".user-subscribe");if("undefined"==typeof g[t])return void o.remove();var a=e.data("event");new l(o,t,g[t].u,!0,g[t].c||"").onUnsubscribe=function(){this.hidePopup(),e.remove(),_.children(".activity-"+a+"-"+t).remove()};btn_more=e.find("a.more"),btns_less=e.find("a.less"),0!==btn_more.length&&(g[t].loaded=g[t].n<=6,btns_less.on("click",function(t){t.preventDefault();var i=Math.min(100,$(window).height()/4),n=$("html, body").scrollTop(),s=$(window).innerHeight(),o=e.offset().top;e.addClass("show-less"),(o<n||o>n+s)&&$("html, body").scrollTop(e.offset().top-i)}),btn_more.on("click",function(){if(g[t].loaded)return void e.removeClass("show-less");var o=n.getSafe("after",f.__("loading.loading")).getNode().insertAfter(btn_more);$.post("/my-subs/videos/"+b+"/"+g[t].u+"/"+a+"/"+g[t].t+"/"+m+"/"+g[t].v.join(","),function(n){if(!n.result)return void d.alert('<strong class="text-danger">'+f.__("misc.loading_failed")+"</strong>");if(n.has_results){var o=$(i.replaceThumbcast(n.html.replace(/\\'/gi,"'"))).children(".mozaique").children(".thumb-block");e.find(".mozaique").append(o),i.executePendingPrepare(e.find(".thumb-block")),s.init_listing(o,{is_thumb_list:!0}),g[t].loaded=!0,o.addClass("extra-thumb-block")}btn_more.remove(),e.removeClass("show-less")},"json").fail(function(){d.alert('<strong class="text-danger">'+f.__("misc.loading_failed")+"</strong>")}).always(function(){o.remove()})}))},F=function(t){v&&v.abort(),"string"!=typeof t||-1===w.indexOf(t)?(t&&t.preventDefault(),t=b):b=t,_.html('<p class="text-center"><strong>'+n.getSafe("after",f.__("loading.loading")).getHtml()+"</strong></p>"),_.show(),k.addClass("hidden"),r.canTrack("profVidsSubs_lastWall")&&(t!==r.get("profVidsSubs_lastWall")&&r.unset("profVidsSubs_scrollPos"),r.set("profVidsSubs_lastWall",t)),y=t;var o={};e.dyn.login_info.is_logged&&e.dyn.login_info.profile||a.isTracking()&&(o.ids=a.getIds()),v=$.post("/my-subs/videos/"+t,o,function(e){if(!e.result)return void _.html('<p class="text-center"><a class="text-danger"><strong>'+f.__("loading.failed_retry")+"</strong></a></p>").find("a").on("click",F);if(e.mass_sub?D?D.show():(D=$(e.mass_sub).insertBefore("#content"),u.add_suball_btn(D.find(".subscribe-all-upvidsilike")),"object"==typeof window.xv&&"object"==typeof window.xv.messages&&"function"==typeof window.xv.messages.updateAjaxTabMessages&&window.xv.messages.updateAjaxTabMessages()):D&&D.hide(),$("#home-tabs .mysubs .navbadge,#mobile-filters-menu .nb-new-video-subs-badge,#mobile-login-menu .nb-new-video-subs-badge").remove(),!e.has_results)return a.canTrack()||d.alert(f.__("misc.device_not_compatible")),_.hide(),void k.removeClass("hidden");if(_.html(i.replaceThumbcast(e.html.replace(/\\'/gi,"'"))),i.executePendingPrepare(_.find(".thumb-block")),s.init_listing(_),g=e.users,m=e.last_ts,_.children(".activity-event").each(x),$(".profiles-shortcuts a").on("click",function(e){e.preventDefault();var t=$(this).data("profile"),i=Math.min(100,$(window).height()/4);if("string"==typeof t&&t.length>0){var n=_.find(".activity-event[data-profile="+t+"]").first();n.length>0&&$("html, body").scrollTop(n.offset().top-i)}}),r.canTrack("profVidsSubs_lastWall")){var t=r.get("profVidsSubs_scrollPos");if("string"==typeof t&&t.length>0){var n=_.children(".activity-event[data-profile="+t+"]").first();n.length>0&&$(window).scrollTop(n.offset().top-C)}}},"json").fail(function(){_.html('<p class="text-center"><a class="text-danger"><strong>'+f.__("loading.failed_retry")+"</strong></a></p>").find("a").on("click",F)})},E="all";if(window.location.hash&&window.location.hash.length>0&&-1!==w.indexOf(window.location.hash.substr(1))){E=window.location.hash.substr(1);var T=$("#video-subs-load-all,#video-subs-load-channels,#video-subs-load-models");T.removeClass("label"),"all"===E?$("#video-subs-load-all").addClass("label"):"channels"===E?$("#video-subs-load-channels").addClass("label"):"models"===E&&$("#video-subs-load-models").addClass("label")}else r.canTrack("profVidsSubs_lastWall")&&(r.unset("profVidsSubs_scrollPos"),r.unset("profVidsSubs_lastWall"));F(E);var S=!1;$(window).on("scroll",function(){!1!==S&&(clearTimeout(S),S=!1),S=setTimeout(function(){if(!1!==y&&(window.location.hash=y,r.canTrack("profVidsSubs_lastWall"))){var e=!1,t=!1,i=$(window).scrollTop()+C;_.children(".activity-event").each(function(){t||($(this).offset().top-i>0?t=!0:e=this)}),$(e).length>0&&r.set("profVidsSubs_scrollPos",$(e).data("profile"))}},500)});var T=$("#video-subs-load-all").on("click",function(e){e.preventDefault(),T.removeClass("label"),$(this).addClass("label"),window.location.hash="all",F("all")});T=T.add($("#video-subs-load-channels").on("click",function(e){e.preventDefault(),T.removeClass("label"),$(this).addClass("label"),window.location.hash="channels",F("channels")})),T=T.add($("#video-subs-load-models").on("click",function(e){e.preventDefault(),T.removeClass("label"),$(this).addClass("label"),window.location.hash="models",F("models")}))}})}),define("skins/common/video/playlist_random_order",["skins/common/features_test/tracker"],function(e){var t,i=function(i){return"string"!=typeof i&&(i="default"),t||(t=new e("playlist_random_manage_"+i,5e3)),t},n=function(){};return n.prototype={canTrack:function(e){return i(e).canTrack()},isTracking:function(e){return i(e).isTracking()},addId:function(e,t){i(e).addId(t)},addIds:function(e,t){i(e).addIds(t)},saveFullOrder:function(e,t){this.clear(e);for(var i in t)this.addId(e,t[i])},clear:function(e){return i(e).clear()},getIds:function(e){return i(e).getIdsList().reverse()}},new n}),define("skins/default/prof_videos_i_like",["config/main","static/utils","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front","lib/helpers/overlay/contextual_popup","skins/common/video/playlist_random_order","skins/common/history/one_info_tracker","skins/common/video/vote_manager","skins/default/features_test/videos_i_like","skins/default/mozaique/thumb_block_menu","skins/default/mozaique/thumb_block_common_init","skins/default/pagination","./profile/desc_page","./header/header"],function(e,t,i,n,s,o,a,r,l,u,f,d,c,h){var p=$("#page-videos-content"),_=!1,g=function(n){p.html('<p class="text-center"><strong>'+i.getSafe("after",s.__("misc.loading")).getHtml()+"</strong></p>");var m={};e.dyn.login_info.is_logged&&e.dyn.login_info.profile||u.isTracking()&&(m.ids=u.getIds()),r.canTrack("profVidsILike_lastPage")&&(n!==r.get("profVidsILike_lastPage")&&r.unset("profVidsILike_scrollPos"),r.set("profVidsILike_lastPage",n)),_=n,$.post("/videos-i-like/"+n,m,function(e){p.html(e),d.init_listing(p),h.setup(),p.find(".pagination a").on("click",function(e){if(e.preventDefault(),0!==$(this).attr("href").length){var t=parseInt($(this).attr("href").substr(1));window.location.hash=t,g(t)}});var i=$("#toggle-tracking");if(i.length>0){var n=function(e){i.html(s.__(e?"profile.tracking.stop_liked_and_del":"profile.tracking.store_liked"))},_=function(){var e=u.isTracking();if(e)window.confirm(t.unescape(s.__("misc.are_you_sure")))&&(u.stopTracking(),window.location.reload());else{if(!u.canTrack())return void window.alert(t.unescape(s.__("misc.device_not_compatible")));u.startTracking()}n(!e)};n(u.isTracking()),i.on("click",_)}var m=$(".mozaique .thumb-block");if(0===m.length&&!u.canTrack())return void o.alert(s.__("misc.device_not_compatible"));if(m.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e).toString(),i=e.find(".btn-action.remove"),n=f.getById(t);if(n){var s=function(t){t.target&&$(t.target).closest("a").length&&(t.stopPropagation(),t.preventDefault()),e.stop().fadeIn(10),e.off("click",s).find("a").off("click",s)},o=function(){e.fadeOut(7e3,function(){e.remove()}),e.on("click",s).find("a").on("click",s)};n.setVoteBadEndFunc(o),n.setUnvoteEndFunc(o),n.setOnOpenFunc(function(){e.stop().fadeIn(10),e.off("click",s).find("a").off("click",s)})}new l(null,i,"","/profiles/likes/likedvideo-remove/"+t,{pop_class:"no-arrow",disable_confirm_pop:!0,success_func:function(e){if(n){var t=n.getVote();"GOOD"!==t&&void 0!==t||n.setVote(!1)}return""},notlogged_func:function(e){if(u.voteBad(self.sId),n){var t=n.getVote();"GOOD"!==t&&void 0!==t||n.setVote(!1)}}})}),$(".play-all-rand").on("click",function(e){e.preventDefault(),a.clear("videosilike"),window.location.href=$(this).prop("href")}),c.add_all_in("#page-videos-content"),r.canTrack("profVidsILike_lastPage")){var b=parseInt(r.get("profVidsILike_scrollPos"));b>0&&$(window).scrollTop(b)}})},m=0
;window.location.hash&&window.location.hash.length>0&&parseInt(window.location.hash.substr(1))>=0?m=parseInt(window.location.hash.substr(1)):r.canTrack("profVidsILike_lastPage")&&(r.unset("profVidsILike_scrollPos"),r.unset("profVidsILike_lastPage")),g(m);var b=!1;$(window).on("scroll",function(){!1!==b&&(clearTimeout(b),b=!1),b=setTimeout(function(){!1!==_&&(window.location.hash=_,r.canTrack("profVidsILike_lastPage")&&r.set("profVidsILike_scrollPos",$(window).scrollTop()))},200)})}),define("skins/common/video/lastviews",["config/main","static/cookies"],function(e,t){var i=function(){};return i.prototype={storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},getLastViews:function(){var e=[],i=t.get("last_views");if(i){var n=JSON.parse(i);"object"==typeof n&&i.length&&(e=n)}return e},declareVideoView:function(i){var n=this.getLastViews(),s=[];for(var o in n)if(n.hasOwnProperty(o)&&n[o])if(n[o]!==i){if("string"==typeof n[o]&&"function"==typeof n[o].split){var a=n[o].split("-");if(a.length>1&&a[0]==i){console.log("Video "+i+" already registered ("+n[o]+"), removing");continue}}s.push(n[o])}else console.log("Video "+i+" already registered, removing");for(;s.length>70;)s.shift();s.push(i+"-"+e.dyn.gentime),t.setLocal("last_views",JSON.stringify(s),7776e6,"/",!0,"None"),console.log("Video "+i+" processed")},mergeVideoViews:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(s){return}if("object"==typeof e&&e.length){var i=this.mergeViews([],this.getLastViews());for(i=this.mergeViews(i,e),i.sort(function(e,t){return e.time-t.time});i.length>70;)i.shift();for(var n=0;n<i.length;n++)i[n]=i[n].id+(i[n].time>0?"-"+i[n].time:"");t.setLocal("last_views",JSON.stringify(i),7776e6,"/")}},mergeViews:function(e,t){e:for(var i=0;i<t.length;i++)if(t.hasOwnProperty(i)&&t[i]){var n=null,s=0;if("number"==typeof t[i])n=t[i];else{if("string"!=typeof t[i]||"function"!=typeof t[i].split)return;var o=t[i].split("-");if(o.length<2)continue;n=parseInt(o[0]),s=parseInt(o[1])}if(!(n<=0||s<0)){for(var a=0;a<e.length;a++)if(e[a].id===n){e[a].time=Math.max(e[a].time,s);continue e}e.push({id:n,time:s})}}return e},getHistory:function(){var e=t.get("last_views");if(!e)return[];var i=JSON.parse(e);return i||[]},resetRelated:function(){},increaseNumberVideoView:function(){var e=t.get("ucchecknb");e||(e=0),e++,t.setLocal("ucchecknb",e,432e5,"/")}},new i}),define("skins/default/prof_videos_history",["config/main","static/utils","lib/helpers/popup","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","lib/i18n!front","skins/default/mozaique/thumb_block_common_init","skins/common/history/page_view_history","skins/common/video/lastviews","./profile/desc_page","skins/default/pagination","./header/header"],function(e,t,i,n,s,o,a,r,l,u,f,d){var c=$("#page-videos-content"),h=$(".global-history-actions"),p=!1,_=function(t){c.html('<p class="text-center"><strong>'+n.getSafe("after",a.__("misc.loading")).getHtml()+"</strong></p>");var i={ids:l.getVideosIdsTimestamps()};e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&l.clearOlderThan(2),xv.storage&&(t!==xv.storage.get("last_page_scroll_pos","xv_prof_videos_history")&&xv.storage.remove("last_scroll_pos","xv_prof_videos_history"),xv.storage.set("last_page_scroll_pos",t,"xv_prof_videos_history")),p=t,$.post("/history/"+t,i,function(e){c.html(e),r.init_listing(c),f.setup();var t=$(".mozaique .thumb-block"),i=c.find(".pagination a");if(h.html(""),l.isTracking()){var n=$('<button class="btn btn-default"><span class="icon-f icf-ban"></span> '+a.__("history.disable")+"</button>");n.on("click",function(){l.stopTracking(function(){window.location.reload()})}),h.append(n)}else enable_btn=$('<button class="btn btn-default">'+a.__("history.enable")+"</button>"),enable_btn.on("click",function(){l.startTracking(function(){window.location.reload()})}),h.append(enable_btn);if(i.on("click",function(e){if(e.preventDefault(),0!==$(this).attr("href").length){var t=parseInt($(this).attr("href").substr(1));window.location.hash=t,_(t)}}),0===t.length)0===i.length&&(l.canTrack()||(h.hide(),o.alert(a.__("misc.device_not_compatible"))),$("#content").prepend($("<p class='big-message'>"+a.__("history.is_empty")+"</p>")));else{var s=$('<button class="btn btn-default"><span class="icon-f icf-trash"></span> '+a.__("history.clear_this_page")+"</button>");s.on("click",function(){var e=[];$(".mozaique .thumb-block").each(function(){var t=xv.thumbs.getVideoId($(this));e.push(t)}),l.removeIds(e,function(){window.location.reload()})}),h.append(s),t.each(function(){var e=$(this),t=xv.thumbs.getVideoId(e);e.find(".btn-action.remove-video").on("click",function(){l.removeId("video",t,function(){e.fadeOut(function(){e.remove(),0===$(".mozaique .thumb-block").length&&window.location.reload()})})})})}if(t.length>0||i.length>0){var u=$('<button class="btn btn-default"><span class="icon-f icf-trash"></span> '+a.__("history.clear")+"</button>");u.on("click",function(){l.clear(function(){window.location.reload()})}),h.append(u)}!l.isTracking()&&l.canTrack()&&$("#content").prepend($("<p class='big-message'>"+a.__("history.is_disabled")+"</p>")),d.add_all_in("#page-videos-content");var p=xv.storage?parseInt(xv.storage.get("last_scroll_pos","xv_prof_videos_history")):0;p>0&&$(window).scrollTop(p)})},g=0;window.location.hash&&window.location.hash.length>0&&parseInt(window.location.hash.substr(1))>=0?g=parseInt(window.location.hash.substr(1)):xv.storage&&(xv.storage.remove("last_scroll_pos","xv_prof_videos_history"),xv.storage.remove("last_page_scroll_pos","xv_prof_videos_history")),_(g);var m=new i($(".icon-history-actions"),"",{popup_class:"history-config-popup",autoclose:!0,mouseout_autoclose:5e3});m.setPosition({v:"below",h:"left"}),m.onOpen=function(){m.setContent(h.clone(!0))};var b=!1;$(window).on("scroll",function(){!1!==b&&(clearTimeout(b),b=!1),b=setTimeout(function(){!1!==p&&(window.location.hash=p,xv.storage&&xv.storage.set("last_scroll_pos",$(window).scrollTop(),"xv_prof_videos_history"))},200)})}),define("lib/tab",["config/main","static/dom","lib/tools","./history"],function(e,t,i,n){var s=function(s,o,a,r,l){this.node=$(s),this.closable=!!a,this.use_class="class"===l,this.use_func="function"==typeof l,this.open_func=this.use_func?l:null,this.no_first_tab_hash=!!r,this.no_tab_hash="no_tab_hash"===r,this.side_scrollable_tab_buttons=this.node.find(".side-scrollable-tab-buttons .tab-buttons").length>0&&this.node.find(".side-scrollable-tab-buttons");var u=this.node.find(".tab-buttons a").not(".notab"),f=this.node.find(".tabs .tab"),d=this;if(0===f.length||u.length<f.length)return void console.error("Invalid tabs number");var c=t.getViewportWidth()<=768;o=o||{},this.first_tab_id,this.active=!1,this.tabs={},f.each(function(e){var t=u.first(),i=t.data("target");u=i?u.filter(function(e){return 0!==e&&($(this).data("target")!==i||(t=t.add(this),!1))}):u.slice(1);var s=$(this),a=s.prop("id"),r={};if(d.first_tab_id||(d.first_tab_id=a),r.first=0===e,r.id=a,r.tab=s,r.btn=t,r.target=i,r.active=!1,d.active)d.use_class?s.removeClass("active"):d.use_func?d.open_func(d,s,!1):s.hide(),r.btn.removeClass("active");else{r.btn.hasClass("active")||c&&r.btn.hasClass("mobile-active")||!c&&r.btn.hasClass("desktop-active")?(r.active=!0,d.active=a,d.use_class?s.addClass("active"):d.use_func?d.open_func(d,s,!0):s.show()):d.use_class?s.removeClass("active"):d.use_func?d.open_func(d,s,!1):s.hide()}s.removeClass("mobile-active desktop-active"),r.btn.removeClass("mobile-active desktop-active"),r.action=!1;var l=[];"function"==typeof o[a]?r.action=o[a]:"object"==typeof o[a]&&("function"==typeof o[a].action&&(r.action=o[a].action),"object"==typeof o[a].subhashes&&(l=o[a].subhashes));var f="_"+a;(d.no_tab_hash||d.no_first_tab_hash&&0===e)&&(f=!1),n.registerHash(f,function(e){d._onhashchange(e)}),r.btn.on("click",function(e){e.preventDefault(),d.closable&&d.active===a?d.close():d.open(a)}),d.tabs[a.toLowerCase()]=r;for(var h in l){var p={};for(var _ in r)p[_]=r[_];p.id=p.active=!1,d.tabs[a.toLowerCase()+","+l[h]]=p,n.registerHash("_"+a+","+l[h],function(e){d._onhashchange(e)})}});var h=i.getUrlHash();if(h&&(h=h.substr(1),"undefined"!=typeof this.tabs[h.toLowerCase()]&&(this._close(),this.active=h)),a||this.active||(this.active=this.first_tab_id),!a||this.no_first_tab_hash||this.no_tab_hash||n.registerHash(!1,function(e){d._onhashchange(e)}),this.active&&this.open(this.active,!0),!1!==this.side_scrollable_tab_buttons){e.dyn.is_desktop||this.side_scrollable_tab_buttons.addClass("is_mobile"),this.side_scrollable_tab_buttons_left=this.node.find(".left-scroll"),this.side_scrollable_tab_buttons_right=this.node.find(".right-scroll"),d.side_scroll_window_resize();this.side_scrollable_tab_buttons_left.hover(function(){var e=d.side_scrollable_tab_buttons_full_width-d.side_scrollable_tab_buttons_width,t=d.side_scrollable_tab_buttons.scrollLeft();t<1?(d.side_scrollable_tab_buttons.scrollLeft(0),d.side_scroll_arrows_update()):d.side_scrollable_tab_buttons.stop(!0,!1).animate({scrollLeft:0},{duration:1e3-1e3*(e-t)/e,complete:function(){d.side_scroll_arrows_update()}})},function(){d.side_scrollable_tab_buttons.stop(!0,!1)}),this.side_scrollable_tab_buttons_right.hover(function(){var e=d.side_scrollable_tab_buttons_full_width-d.side_scrollable_tab_buttons_width,t=d.side_scrollable_tab_buttons.scrollLeft();t>e-1?(d.side_scrollable_tab_buttons.scrollLeft(e),d.side_scroll_arrows_update()):d.side_scrollable_tab_buttons.stop(!0,!1).animate({scrollLeft:e},{duration:1e3-1e3*t/e,complete:function(){d.side_scroll_arrows_update()}})},function(){d.side_scrollable_tab_buttons.stop(!0,!1)}),this.side_scrollable_tab_buttons.scroll(function(){d.side_scroll_arrows_update()}),$(window).resize(function(){d.side_scroll_window_resize()})}};return s.prototype={open:function(e,t){var i=e.toLowerCase(),s=!!this.active&&this.active.toLowerCase();if((t||s!==i)&&"undefined"!=typeof this.tabs[i]){t&&s===i||this._close();var o=this.tabs[i];o.active=!0,this.use_class?o.tab.addClass("active"):this.use_func?this.open_func(this,o.tab,!0):o.tab.show(),!1!==this.side_scrollable_tab_buttons&&this.side_scroll_to_button(o),o.btn.addClass("active"),o.action&&o.action(e);var a="_"+e;(this.no_tab_hash||this.no_first_tab_hash&&o.first&&-1===a.indexOf(","))&&(a=""),this.active=e,n.setUrlHash(a),this.node.addClass("disp-"+e.replace(",","-"))}},close:function(){this.closable&&this._close()},_close:function(){if(this.active){this.node.removeClass("disp-"+this.active.replace(",","-"));var e=this.tabs[this.active.toLowerCase()];e.active=!1,this.use_class?e.tab.removeClass("active"):this.use_func?this.open_func(this,e.tab,!1):e.tab.hide(),e.btn.removeClass("active"),this.active=!1}},_onhashchange:function(e){(this.no_tab_hash||this.no_first_tab_hash)&&e===n.getNoHashValue()&&(e="_"+this.first_tab_id),e!==n.getNoHashValue()?this.open(e.substr(1)):this.close()},side_scroll_to_button:function(e){var t=e.btn,i=!1,n=Math.ceil(t.position().left),s=Math.ceil(t.outerWidth()),o=this.side_scrollable_tab_buttons.width(),a=this.side_scrollable_tab_buttons.scrollLeft();if(n+s+20>o?i=a+n+s+20-o:n<20&&(i=a+n-20)<0&&(i=0),!1!==i){var r=this;this.side_scrollable_tab_buttons.animate({scrollLeft:i+"px"},{complete:function(){r.side_scroll_window_resize()}})}},side_scroll_arrows_update:function(){var e=this.side_scrollable_tab_buttons.scrollLeft(),t=e>0,i=this.side_scrollable_tab_buttons_width+e<this.side_scrollable_tab_buttons_full_width;t?this.side_scrollable_tab_buttons_left.fadeIn("fast"):this.side_scrollable_tab_buttons_left.fadeOut("fast"),i?this.side_scrollable_tab_buttons_right.fadeIn("fast"):this.side_scrollable_tab_buttons_right.fadeOut("fast")},side_scroll_window_resize:function(){this.side_scrollable_tab_buttons_width=this.side_scrollable_tab_buttons.width(),this.side_scrollable_tab_buttons_full_width=this.side_scrollable_tab_buttons[0].scrollWidth,this.side_scroll_arrows_update()}},s}),define("text!skins/default/profile/vote/votes_box.mustache",[],function(){return'<div class="rating-box">\n\t{{# closed_first }}\n\t<div class="show-more">+</div>\n\t<div class="rating-box-content">\n\t{{/ closed_first }}\n\t\t<span class="vote-actions">\n\t\t\t<a class="btn btn-default vote-action-good"><span class="icon thumb-up black">&nbsp;</span></a><a class="btn btn-default vote-action-bad"><span class="icon thumb-down red">&nbsp;</span></a>\n\t\t</span>\n\t\t<div class="rating-bar-block">\n\t\t\t{{# disp_good_bad }}\n\t\t\t<span class="icon thumb-up"></span> <span class="good">{{ vgood }}</span>\n\t\t\t<span class="icon thumb-down red"></span> <span class="bad">{{ vbad }}</span>\n\t\t\t{{/ disp_good_bad }}\n\t\t\t{{^ disp_good_bad }}\n\t\t\t<span class="total">{{ vtotal }}</span>\n\t\t\t{{/ disp_good_bad }}\n\t\t\t<div class="rating-bar"><div style="width:{{ vrating }}%;"></div></div>\n\t\t</div>\n\t\t<span class="rating">{{ rating }}</span>\n\t{{# closed_first }}\n\t</div>\n\t{{/ closed_first }}\n</div>'}),define("skins/default/profile/vote/total",["config/main","mustache","lib/tools","text!./votes_box.mustache","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/overlay/box","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=function(e,i,s,o,a,r,l,u,f){if(void 0!==e){this.vtotal=o,this.vrating=i,this.rating=s,this.visitor_vote=!1,this.is_owner=!1,this.closed_first="boolean"==typeof u&&u,this.related_users={},void 0===a||"GOOD"!==a&&"BAD"!==a||(this.visitor_vote=a),"boolean"==typeof f&&(this.is_owner=f),this.login_required="boolean"==typeof r&&r,this.login_container=l,this.node=$(t.render(n,this._get_tpl_vars())),e.replaceWith(this.node),this.closed_first&&(this.show_more=this.node.children(".show-more"),this.show_more_content=this.node.children(".rating-box-content"),this.show_more_open=!1,this.show_more.on("click",function(){d._toggle_show_more(!d.show_more_open)})),this.actions=this.node.find(".vote-actions"),this.yes_btn=this.actions.children(".vote-action-good"),this.no_btn=this.actions.children(".vote-action-bad"),!0===this.is_owner?(this.yes_btn.addClass("disabled"),this.no_btn.remove()):("GOOD"===this.visitor_vote&&this.yes_btn.addClass("is-voted"),"BAD"===this.visitor_vote&&this.no_btn.addClass("is-voted")),this.bar_good=this.node.find(".rating-bar div"),this.bar_rating=this.node.find(".rating"),this.total=this.node.find(".total"),this._init_counts();var d=this;this.voting=!1,this.popup=null,this.popup_pos={v:"below",h:"left"},this.yes_btn.on("click",function(){d._vote("GOOD")}),this.no_btn.on("click",function(){d._vote("BAD")})}};return l.prototype={initPostData:function(e,t,i,n){this.url_good=e,this.url_bad=t,this.post_data=i||{},this.url_remove=n},setPopupPosition:function(e,t){this.popup_pos.v=e,this.popup_pos.h=t},_init_counts:function(){this.counts_total=this.node.find(".total")},_get_tpl_vars:function(){return{vtotal:this.vtotal,rating:this.rating,vrating:this.vrating,closed_first:this.closed_first}},_update_counts:function(e){this.bar_rating.text(e.vrating),this.total.text(e.total),this.bar_good.css("width",e.rating+"%")},_get_popup:function(e,t){return this.popup?this.popup.setButton(e).setContent(t):this.popup=new o(e,t,{position:this.popup_pos,trigger:!1,popup_class:"profile-vote-popup"}),this.popup},_open_login:function(){require(["skins/default/form/login"],function(e){e.open()})},_vote:function(t){if("GOOD"!==t&&"BAD"!==t)return!1;if(this.voting)return!1;if(this.login_required&&!e.dyn.login_info.is_logged)return this._open_login(),!1;var i=this,n="GOOD"===t?this.yes_btn:this.no_btn,o=n.html(),a="GOOD"===t?this.url_good:this.url_bad;t===this.visitor_vote&&n.hasClass("is-voted")&&(a=this.url_remove),this.yes_btn.addClass("disabled"),this.no_btn.addClass("disabled"),n.html(s.getImg()),$.post(a,this.post_data,function(s){require(["mustache","static/utils","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(o,l,u,f){var d,c=[];if(s.result)if(i._update_counts(s),i.visitor_vote=t,"GOOD"===t&&$.isArray(s.related)){var h="",p=e.domains["static"]+"/v3/img/skins/default/profile_default_small.jpg";for(var _ in s.related)"undefined"==typeof i.related_users[s.related[_].id]&&(i.related_users[s.related[_].id]=s.related[_],s.related[_].img=xv.thumbs.replacePicThumbUrl('<img title="'+s.related[_].username_display+'" src="'+(s.related[_].thumb?s.related[_].thumb:p)+'" onerror="self.src=\''+p+"'; self.onerror=null;\" />"),s.related[_].div_id="profile-related-"+s.related[_].id+"-"+Math.ceil(1e4*Math.random()),c.push({user_id:s.related[_].id,user_name:s.related[_].username,nb_subs:s.related[_].nb_subs,append_btn_to:"#"+s.related[_].div_id,btn_class:"sub-strip"}),h+=o.render(f,s.related[_]));d=o.render(u,{subscribed:a!==i.url_remove?l.unescape(r.__("video.votes.thanks")):l.unescape(r.__("video.votes.remove")),view_activities:!1,also_like:l.unescape(r.__("user.you_may_also_like")),hide_view_activities:!0,has_related:c.length>0,related_html:h})}else d=a!==i.url_remove?"<strong>"+r.__("video.votes.thanks")+"</strong>":"<strong>"+r.__("video.votes.remove")+"</strong>";else d='<strong class="text-danger">'+s.message+"</strong>";i._get_popup(n,d).open(),c.length>0&&require(["skins/default/profile/subscribe/btns"],function(e){e(c,{sub_options:{add_relateds_to:i,tooltip_hide_after:1e3}})})})},"json").fail(function(){i._get_popup(n,'<strong class="text-danger">'+r.__("error.err_please_reload")+"</strong>").open()}).complete(function(){n.html(o),i.voting=!1,i.yes_btn.toggleClass("disabled",!e.dyn.login_info.is_logged),i.no_btn.toggleClass("disabled",!e.dyn.login_info.is_logged),i.yes_btn.toggleClass("is-voted",a===i.url_good),i.no_btn.toggleClass("is-voted",a===i.url_bad)})},_toggle_show_more:function(e){e=!!e,this.show_more_open!==e&&(this.show_more_open=e,this.show_more.html(e?"-":"+"),e?this.show_more_content.fadeIn():this.show_more_content.fadeOut())}},l}),define("skins/default/profile/action/aboutme_desc",["config/main","mustache","lib/helpers/overlay","lib/helpers/inline_loader","lib/i18n!front"],function(e,t,i,n,s){var o=$("#pinfo-aboutme");if(o.hasClass("editable")){var a=!1;o.on("click",function(){a||(o.addClass("editing").find("textarea").focus(),a=!0)});var r=o.find("button").on("click",function(){var l=r.prevAll("textarea"),u=o.find(".value"),f=$.trim(l.val());r.prev("p").remove();var d=i.get(o,!1).setContent(n.getSafe("after",s.__("misc.updating")).getHtml()).show();$.post("/profiles/"+e.data.user.username+"/update",{"profile[aboutme]":f,csrf:e.data.user.csrf.uupdate},function(e){if(e.result){a=!1,o.removeClass("missing editing"),0===f.length?(o.addClass("missing"),o.find(".tip span").html(s.__("profile.aboutme.click_write_desc"))):o.find(".tip span").html(s.__("profile.aboutme.click_edit_desc"));var i=t.render("{{ text }}",{text:f}).split("\n").join("\n<br>");u.html(i),$("#header-about-me").html(i)}else{var n;n=e.message?s.__("misc.update_failed_error")+" "+e.message:s.__("misc.update_failed_please_retry"),r.before('<p class="text-center"><strong class="text-danger">'+n+"</strong></p>")}},"json").fail(function(){d.close(),r.before('<p class="text-center"><strong class="text-danger">'+s.__("misc.error_please_retry")+"</strong></p>")}).always(function(){d.close()})})}}),define("text!skins/default/profile/action/link/user_blocked.html",[],function(){return'<button type="button" class="btn btn-default btn-xs btn-link" ><span class="icon blocked-user"></span> <strong class="label text-danger">{{{ label }}}</strong></button>'});define("text!skins/default/profile/action/report.mustache",[],function(){return'<div class="tab-form">\n\t<h2 class="text-center">{{{ title }}}</h2>\n\t<div class="row">\n\t\t<div class="col-sm-6">\n\t\t\t{{{ report_form }}}\n\t\t</div>\n\t\t<div class="col-sm-6 content-infrigment">\n\t\t\t<p><strong class="text-danger">{{{ content_removal.links }}}</strong></p>\n\t\t\t<p>{{{ content_removal.link_copyright }}}</p>\n\t\t\t<p>{{{ content_removal.link_privacy }}}</p>\n\t\t</div>\n\t</div>\n</div>'}),define("skins/default/profile/action/report",["config/main","mustache","static/utils","lib/tools","lib/helpers/overlay/box","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","skins/form/validator","lib/i18n!front","text!./report.mustache"],function(e,t,i,n,s,o,a,r,l,u){var f=function(e,t,i){this.type=e,this.btn=t,this.container=i,this.overlay=null,this.validator=null,this.title=null,this.pictures=[];var s=this;t.on("click",function(e){e.preventDefault(),s._handle()});var o=n.parseUrl(window.location.href,"query",!0);"profile"===this.type&&o.reportuser?s._handle():"gallery"===this.type&&o.reportuser&&s._handle()};return f.prototype={onReported:null,setPictures:function(e){this.pictures=e,this.title&&this.title.text(this.getTitle())},getTitle:function(){if("gallery"===this.type){var t="";return t=0===this.pictures.length?i.unescape(l.__("report_form.report_album",{},'Report the photo album "%title%" of %user%')):1===this.pictures.length?i.unescape(l.__("report_form.report_album_pic",{},'Report one picture of the photo album "%title%" of %user%')):i.unescape(l.__("report_form.report_album_pics",{},'Report %nb% pictures of the photo album "%title%" of %user%')).replace("%nb%",this.pictures.length.toString()),t.replace("%user%",e.data.user.display).replace("%title%",i.escape(e.data.gal.title))}return l.__("report_form.report_user",{"%user%":e.data.user.display},"Report user %user%")},_handle:function(){if(this.overlay)return this.overlay.show(),this.validator.resetSubmit(),void this.validator.refresh();this._load_form()},_load_form:function(){var n=this.getTitle(),f={title:n,report_form:"gallery"===this.type?e.data.gal.report_form:e.dyn.report_form,content_removal:l.__("content_removal.*",{"%start_copy_link%":'<a href="'+e.domains.info+'/takedown/" target="_blank">',"%start_privacy_link%":'<a href="'+e.domains.info+'/takedown-amateur" target="_blank">',"%end_link%":"</a>"})},d=$(t.render(u,f));this.title=d.find("h2");var c=d.find("form");this.overlay=s.get(this.container,!0,"hide").append(d).show();var h=this,p="gallery"===this.type?e.data.gal.report_form_rules:e.dyn.report_form_rules,_=function(){var t=null;h.validator=new r(c,p),c.find(".btn-cancel").on("click",function(e){e.preventDefault(),h.overlay.hide(),t&&t.hide()}),c.on("submit",function(i){i.preventDefault(),h.overlay.hide(),t||(t=s.get(h.container,!1).setContent(a.get("after",l.__("report_form.sending",{},"Sending report...")).getHtml()).show());var n=c.serializeArray();"gallery"===h.type&&h.pictures.length>0&&n.push({name:"pics",value:h.pictures.join(",")}),$.post("/profiles/"+e.data.user.username+"/report"+("gallery"===h.type?"/gallery/"+e.data.gal.id_gal:""),n,function(e){if(!e.result){if(12===e.code){var t=$(e.form);c.replaceWith(t),c=t,h.overlay.show(),p=e.js_rules,_();var i=$("div.g-recaptcha");return void(i.length>0&&grecaptcha.render(i[0]))}return void o.alert(e.message,function(){h.overlay.show(),h.validator.resetSubmit(),h.validator.refresh()},!0)}"gallery"!==h.type||0===h.pictures.length?(h.btn.remove(),d.replaceWith('<p class="text-center"><strong class="text-success">'+(e.message||l.__("report_form.thanks",{},"Thanks for your report!"))+"</strong></p>"),h.overlay.show(),h.overlay.autoclose(1e4)):o.alert(e.message||l.__("report_form.thanks",{},"Thanks for your report!"),null,!0),h.onReported&&h.onReported()},"json").fail(function(){o.alert(l.__("misc.error_please_retry"),function(){h.overlay.show(),h.validator.resetSubmit(),h.validator.refresh()},!0)}).done(function(){t.close()})})};_(),i.loadScript("https://www.google.com/recaptcha/api.js?hl="+e.dyn.locale,{async:!0})}},f}),define("text!skins/default/profile/action/popup_form.html",[],function(){return'<form class="form-horizontal">\n\t{{# title }}\n\t<div class="form-group title">\n\t\t<div class="col-sm-12">\n\t\t\t<p class="form-control-static">{{{ title }}}</p>\n\t\t</div>\n\t</div>\n\t{{/ title }}\n\t{{# inputs }}\n\t<div class="form-group">\n\t\t<label for="{{ base_id }}_{{ name }}" class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<input type="text" class="form-control" id="{{ id }}" name="{{ name }}" />\n\t\t</div>\n\t</div>\n\t{{/ inputs }}\n\t{{# settings }}\n\t<div class="form-group">\n\t\t<label for="{{ base_id }}_{{ name }}" class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<select class="form-control" id="{{ id }}" name="{{ name }}">\n\t\t\t\t{{# options }}<option value="{{ opt_value }}"{{# opt_cheked }} selected="selected"{{/ opt_cheked }}>{{{ opt_label }}}</option>{{/ options }}\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t{{/ settings }}\n\t{{# static_fields }}\n\t<div class="form-group">\n\t\t<label class="col-sm-6 control-label">{{{ label }}}</label>\n\t\t<div class="col-sm-6">\n\t\t\t<p class="form-control-static">{{{ content }}}</p>\n\t\t</div>\n\t</div>\n\t{{/ static_fields }}\n\t<div class="form-group actions">\n\t\t<div class="col-sm-12 text-right">\n\t\t\t<div>\n\t\t\t\t{{# csrf_token }}\n\t\t\t\t<input type="hidden" name="csrf" value="{{ csrf_token }}" />\n\t\t\t\t{{/ csrf_token }}\n\t\t\t\t<button type="button" class="btn btn-default btn-xs">{{{ btn_label }}}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>'}),define("skins/default/profile/action/popup_form",["config/main","mustache","lib/helpers/inline_loader","lib/helpers/popup","text!./popup_form.html","lib/i18n!front"],function(e,t,i,n,s,o){var a=function(e,t,i){this.btn=e,this.title=t,this.btn_label=i||o.__("misc.save"),this.msg_success,this.msg_updating,this.url=!1,this.validator=!1,this.csrf_token=!1,this.inputs=[],this.settings=[],this.static_fieds=[],this.popup=null;var n=this,s=this.btn.on("click",function(e){e.preventDefault(),n.btn.off("click",s),n._get_popup().open()});this.saving=!1};return a.prototype={setMessages:function(e,t){this.msg_success=e,this.msg_updating=t},setRequestParams:function(e,t,i){this.url=e,this.validator=t,this.csrf_token=i},addInput:function(e,t){this.inputs.push({label:e,name:t,id:this.btn.prop("id")+"-"+t.replace("[","-").replace("]","-")})},addSetting:function(e,t,i,n){for(var s in i)i[s].opt_cheked=i[s].opt_value===n;this.settings.push({label:e,name:t,id:this.btn.prop("id")+"-"+t.replace("[","-").replace("]","-"),options:i})},addStaticField:function(e,t){this.static_fieds.push({label:e,content:t})},_get_popup:function(){if(!this.popup){this.form=$(t.render(s,{title:this.title,inputs:this.inputs,settings:this.settings,static_fields:this.static_fieds,btn_label:this.btn_label,csrf_token:this.csrf_token||e.data.user.csrf.uupdate})),this.popup=new n(this.btn,this.form,{popup_class:"x-popup-white profile-privacy-popup"});var i=this;this.form.find(".actions button").on("click",function(){i._save_form()})}return this.popup},_save_form:function(){if(!this.saving&&(!this.validator||this.validator())){this.saving=!0,this.form.prevAll().remove();var t=this,n=this.form.serializeArray(),s=i.getSafe("after",this.msg_updating||o.__("profile.privacy.saving")).insertAfter(this.form.hide());$.post(this.url||"/profiles/"+e.data.user.username+"/update",n,function(e){if(e.result)t.form.before('<p class="text-success"><strong>'+(t.msg_success||o.__("profile.privacy.saved"))+"</strong></p>");else{var i;i=e.message?o.__("misc.update_failed_error")+" "+e.message:o.__("misc.update_failed_please_retry"),t.form.before('<p class="text-danger"><strong>'+i+"</strong></p>")}},"json").fail(function(){t.form.before('<p class="text-danger"><strong>'+o.__("misc.error_please_retry")+"</strong></p>")}).always(function(){t.saving=!1,s.remove(),t.form.show()})}}},a}),define("text!skins/default/profile/tabs/ranks.mustache",[],function(){return'<div class="ranks">\n\t{{#rankings}}\n\t\t<div class="ranking">\n\t\t\t<p class="psinfo-ranks"><strong>{{{label}}}:</strong></p>\n\t\t\t{{#ranks}}\n\t\t\t\t<p class="psinfo-ranks">\n\t\t\t\t\t<em>{{{label}}}:</em>\n\t\t\t\t\t{{#ranks}}\n\t\t\t\t\t\t<br><span>{{{geo}}} #<strong class="text-danger">{{#link}}\n\t\t\t\t\t\t<a href="{{{link}}}" title="{{{label}}}"\n\t\t\t\t\t\t   class="text-danger">{{{rank}}}</a>{{/link}}{{^link}}{{{rank}}}{{/link}}</strong></span>\n\t\t\t\t\t{{/ranks}}\n\t\t\t\t</p>\n\t\t\t{{/ranks}}\n\t\t</div>\n\t{{/rankings}}\n</div>'}),define("skins/default/profile/tabs/aboutme",["config/main","lib/tools","lib/helpers/popup","skins/default/profile/vote/total","lib/i18n!front","../action/aboutme_desc"],function(e,t,i,n,s){var o="/profiles/"+e.data.user.username+"/",a=function(e){var t=$("#pinfo-"+e+"-info-switch");if(0!==t.length){var i=t.parents(".pinfo-switch"),n=i.nextAll(".pinfo-"+e);t.on("click",function(e){e.preventDefault(),n.removeClass("pinfo-hidden"),i.remove()})}};a("personal"),a("physical");var r=$("#block-user");r.length>0&&require(["mustache","skins/default/profile/action/link","text!skins/default/profile/action/link/user_blocked.html"],function(t,i,n){new i(r,o+"block/add",s.__("profile.confirm_block",{"%user%":e.data.user.display}),!1,e.data.user.csrf.blockadd).onSuccess=function(){var e=this.link.parent();this.link.remove(),0===e.children().length&&e.remove();var i=$("#tabAboutMe"),o=i.children(".pfinfo-actions");0===o.length?o=$('<div class="pfinfo-actions"></div>').prependTo(i):o.empty(),o.prepend(t.render(n,{label:s.__("profile.blocked")})),window.setTimeout(function(){window.location.reload()},1e3)}});var l=$("#report-user");l.length>0&&require(["skins/default/profile/action/report"],function(e){new e("profile",l,$("#page"))});var u=e.data.user.pvote;if(void 0!==u){var f=e.dyn.login_info.is_logged&&e.dyn.login_info.id===e.data.user.id_user;new n($("#profile-vote"),u.vrating,u.rating,u.total,e.data.visitor.pvote.res,!e.data.visitor.pvote.allowed,$("#page"),null,f).initPostData(o+"vote/good",o+"vote/bad",{csrf:e.data.user.csrf.uvote},o+"vote/remove")}var d=$("#vote-info");if(d.length>0){var c=s.__("profile.vote.tip_good_vote_save_user",{"%start_link%":e.dyn.login_info.is_logged?'<a href="/account/people/ilike">':"","%end_link%":e.dyn.login_info.is_logged?"</a>":""});new i(d,"<div><strong>"+s.__("misc.tip")+": </strong>"+c+"</div>",{trigger:"click mouseenter"})}var h=$("#privacy-edit-aboutme");h.length>0&&require(["skins/default/profile/action/popup_form"],function(t){var i=new t(h),n=[];n.push({opt_value:"ANYONE",opt_label:s.__("misc.everybody")}),n.push({opt_value:"REGISTER",opt_label:s.__("profile.allow.only_registered")}),n.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),n.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.nobody")}),i.addSetting(s.__("profile.privacy.who_can_view_contact"),"profile[contact_access]",n,e.data.user.access.contact);var o=s.__("profile.privacy.no_country_blocked")+", ";if(e.data.user.blocked_countries.length>0){o="";for(var a in e.data.user.blocked_countries){var r=e.data.user.blocked_countries[a];o+='<span class="text-nowrap"><span class="flag-small flag-'+r.c.toLowerCase()+'"></span> '+r.n+"</span>, "}}o+='<a href="/account/profile/edit">'+s.__("misc.change")+"</a>",i.addStaticField(s.__("profile.privacy.blocked_countries"),o)});var p=$("#header-about-me");p.length>0&&(header_aboutme_expanded=!1,p.on("click",function(e){header_aboutme_expanded?$(e.target).hasClass("show-more")&&(p.removeClass("expanded").find(".show-more").html("+"),header_aboutme_expanded=!1):(p.addClass("expanded").find(".show-more").html("-"),header_aboutme_expanded=!0)}));var _=$("#pinfo-workedfor");if(_.length>0){var g=_.find("a");if(g.length>20){var m=_.find("span");m.html(""),g.each(function(e){var t=$(this);e<20?t.appendTo(m):(20===e&&$('<span class="see-more pinfo-hidden"></span> <div class="show-more">+</div>').appendTo(m),t.appendTo(m.children(".see-more"))),e!==g.length-1&&t.after(", ")}),_.find(".show-more").on("click",function(){var e=$(this),t=_.find(".see-more");t.hasClass("pinfo-hidden")?(e.html("-"),t.removeClass("pinfo-hidden")):(e.html("+"),t.addClass("pinfo-hidden"),
xv.dom.isElementInView(_)||xv.dom.scrollToTop($("#profile-tabs").offset().top-5))})}}var b=$("#pinfo-ranks");b.length>0&&$.getJSON(o+"ranks/"+(e.data.main_cat||e.dyn.pagefilter),function(e){e.result&&require(["mustache","text!skins/default/profile/tabs/ranks.mustache"],function(t,i){b.replaceWith(t.render(i,{rankings:e.rankings}))})});var v=$("#pinfo-aboutme");if(v.length>0){var D,y=!1,w=!1,C=function(){w||(y||(y=v.find(".show-more").on("click",function(){w=!0,v.css("max-height","none"),$(this).remove(),$(window).off("resize",D),y.off("click")})),y.css("display",v.outerHeight()>142?"block":""))};return D=$(window).on("resize",C),C}return function(){}}),define("text!skins/default/profile/action/link/friend_asked.html",[],function(){return'<button type="button" class="btn btn-default btn-xs btn-link" title="{{{ label }}}"><span class="icon-f icf-user-hourglass"></span> <span class="label mobile-hide">{{{ label }}}</span></button>'}),define("skins/common/profile/subscribe/btns_controler",["config/main","static/utils","mustache","lib/i18n!front","lib/helpers/popup","lib/helpers/overlay/contextual_popup","lib/helpers/inline_loader","skins/common/profile/sub_actions","skins/common/features_test/video_subs"],function(e,t,i,n,s,o,a,r,l){var u={btn_display:null,counter:null,append_to_channel:null,append_to_listing:null,btn_class:null,reject:null,sub:null,sub_tpl:null,tooltip:!1,tooltip_validation:!1},f={doIcon:null,doText:null,undoIcon:null,undoText:null},d={reject:null,sub:null,unreject:null,unsub:null},c={confirm_unfollow:null,confirm_unreject:null,reject:null,sub:null,sub_short:null,unreject:null,unsub:null},h=new r,p=function(e,t){this._init(e,t)};p.prototype={_init:function(e,t){if(this.oUsers=e,this.page=null,this.bDisplayNotIntersted=this.getDisplayBtnNotInterested(),this.aUserBtns=[],void 0!==t){if("undefined"!=typeof t.elts)for(var i in t.elts)"undefined"!=typeof u[i]&&(u[i]=t.elts[i]);if("undefined"!=typeof t.positions)for(var n in t.positions)"undefined"!=typeof f[n]&&(f[n]=t.positions[n]);if("undefined"!=typeof t.icons)for(var s in t.icons)"undefined"!=typeof d[s]&&(d[s]=t.icons[s]);if("undefined"!=typeof t.texts)for(var o in t.texts)"undefined"!=typeof c[o]&&(c[o]=t.texts[o])}this.elts=u,this.positions=f,this.icons=d,this.texts=c,this.checkProfiles()},getDisplayBtnNotInterested:function(){return!!(e.dyn.premium&&e.dyn.login_info.is_logged&&e.dyn.login_info.is_premium&&(e.data.user!==undefined&&e.data.user.channel!==undefined&&"boolean"==typeof e.data.user.channel&&e.data.user.channel||"profiles_index"===e.data.action||"xnxx_channels_premium_regular"===e.data.action))},checkProfiles:function(){if("xnxx"!==e.sitename||e.dyn.login_info.is_logged){var t,i=this,n=null;if(this.oUsers.hasOwnProperty("user_id"))this.page="channel",t="/profiles/"+this.oUsers.user_name+"/followers/check";else{if(this.page="listing",!e.dyn.login_info.is_logged){for(var s in this.oUsers){var o=this.oUsers[s];this.createBtns({append_to:"#profile_"+o.user_name,nb_subs:o.nb_subs,id:o.user_id,username:o.user_name})}return}t="/profiles/"+e.dyn.login_info.profile+"/followers/checks";var a=[],r={};for(var l in this.oUsers){var u=this.oUsers[l];a.push(u.user_id),r[u.user_id]=l}n={users:a}}$.post(t,n,function(t){if(t.result)if("listing"===i.page)for(var n in t.users){var s=i.oUsers[r[n]];i.createBtns({append_to:"#profile_"+s.user_name,csrf:t.users[n].csrf,id:n,is_follower:t.users[n].is_follower,is_owner:s.user_name===e.dyn.login_info.profile,is_rejected:t.users[n].is_rejected,nb_subs:s.nb_subs,result:t.result,username:s.user_name})}else t.id=e.data.user.id_user,t.append_to=i.elts.append_to_channel,t.username=i.oUsers.user_name,i.createBtns(t)},"json")}},createBtns:function(t){if(!e.dyn.login_info.is_logged||!t.is_owner&&t.result&&"boolean"==typeof t.is_follower&&"string"==typeof t.csrf){var i={elts:this.elts,display_reject:this.bDisplayNotIntersted,icons:this.icons,positions:this.positions,texts:this.texts,page:this.page};this.addUserBtns(new _(t,i))}},addUserBtns:function(e){this.aUserBtns.push(e)}};var _=function(e,t){this._init(e,t)};return _.prototype={_init:function(t,i){this.csrf=t.csrf,this.id=t.id,this.bIsFollower=!!t.is_follower,this.bIsRejected=!!t.is_rejected,this.username=t.username,this.nb_subs=t.nb_subs,this.options=i,this.counter=$(this.options.elts.counter),this.options.add_relateds_to="undefined"!=typeof this.options.add_relateds_to&&this.options.add_relateds_to,this.options.tooltip_hide_after="undefined"!=typeof this.options.tooltip_hide_after?this.options.tooltip_hide_after:-1,this.bIsLogged=e.dyn.login_info.is_logged,this.bIsLogged||(this.bIsFollower=l.isTracking()&&l.hasSubscribed(this.id)),this.bInit=!1,this.loader=null,this.$BtnsSub=null,this.$BtnsReject=null,this.clicked=!1,this.tooltip=!1,this.related=null,this.options.positions.doIcon=this.verifyAndCorrectPos(this.options.positions.doIcon,3,5),this.options.positions.doText=this.verifyAndCorrectPos(this.options.positions.doText,this.options.positions.doIcon,4),this.options.positions.undoIcon=this.verifyAndCorrectPos(this.options.positions.undoIcon,3,5),this.options.positions.undoText=this.verifyAndCorrectPos(this.options.positions.undoText,this.options.positions.undoIcon,4),this.options.elts.iconSub=$('<span class="icon-f"></span>'),this.options.elts.textSub=$('<span class="sub-state-text"></span>'),this.options.display_reject&&(this.options.elts.iconReject=$('<span class="icon-f"></span>'),this.options.elts.textReject=$('<span class="sub-state-text"></span>')),this.appendBtns()},verifyAndCorrectPos:function(e,t,i){if("number"==typeof e&&-1!==[1,2,4,5].indexOf(e)||(e=i),e!==t)return e;switch(t){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4}},appendBtns:function(){if("channel"===this.options.page)this.$BtnsSub=null!==this.options.elts.sub?$(this.options.elts.sub):$(i.render(this.options.elts.sub_tpl)),this.$BtnsSub.addClass(this.options.elts.btn_class),null!==this.options.elts.append_to_channel&&this.$BtnsSub.appendTo(this.options.elts.append_to_channel);else{this.$BtnsSub=$(i.render(this.options.elts.sub_tpl,{count:this.nb_subs})),this.$BtnsSub.addClass(this.options.elts.btn_class);var t=$(this.options.elts.append_to_listing.replace("%username%",this.username));"default"===e.sitename?t.append(this.$BtnsSub):(t.find(".thumb-inside").append('<span class="profile-sub"></span>'),t.find(".profile-sub").append(this.$BtnsSub))}if(this.options.display_reject)if(this.$BtnsReject=$(i.render(this.options.elts.reject)),this.$BtnsReject.addClass(this.options.elts.btn_class),"channel"===this.options.page)if(null!==this.options.elts.append_to_channel)this.$BtnsReject.appendTo(this.options.elts.append_to_channel);else if(this.$BtnsSub.length<2)this.$BtnsReject.insertAfter(this.$BtnsSub);else{this.options.elts.class_btn_reject="";var n=this;this.$BtnsSub.each(function(){var e=$(this),t=$(i.render(n.options.elts.reject));n.options.elts.class_btn_reject!==t.attr("class")&&(n.options.elts.class_btn_reject=t.attr("class")),t.insertAfter(e),t.addClass(n.options.elts.btn_class)}),this.$BtnsReject=$("."+this.options.elts.class_btn_reject)}else t.find(".profile-sub").append(this.$BtnsReject);if(e.dyn.login_info&&this.bIsLogged){this.$BtnsSub.addClass("logged-user"),this.options.display_reject&&this.$BtnsReject.addClass("logged-user")}this.initBtns()},initBtns:function(){"default"===e.sitename&&"listing"===this.options.page&&(this.options.positions.doText=4),this.setPositions(this.options.texts.sub,this.options.icons.sub,this.$BtnsSub,this.options.elts.iconSub,this.options.elts.textSub),"null"!==this.options.elts.btn_display&&this.$BtnsSub.css("display",this.options.elts.btn_display),this.$BtnsSub.prop("title",t.unescape(this.bIsFollower?this.options.texts.unsub:this.options.texts.sub)),this.options.display_reject&&(this.setPositions(this.options.texts.reject,this.options.icons.reject,this.$BtnsReject,this.options.elts.iconReject,this.options.elts.textReject),"null"!==this.options.elts.btn_display&&this.$BtnsReject.css("display",this.options.elts.btn_display),this.$BtnsReject.prop("title",t.unescape(this.bIsRejected?this.options.texts.unreject:this.options.texts.reject))),this.enableBtnsClick(),this.bInit=!0,this.onClickEnded(this.bIsFollower,this.bIsRejected,null,null)},setPositions:function(e,t,i,n,s){e?this.options.positions.doText<3?(this.options.positions.doIcon<3&&this.options.positions.doIcon>this.options.positions.doText&&i.prepend(n),i.prepend(s),this.options.positions.doIcon<3&&this.options.positions.doIcon<this.options.positions.doText&&i.prepend(n),this.options.positions.doIcon>3&&this.options.positions.doIcon>this.options.positions.doText&&i.append(n)):(this.options.positions.doIcon>3&&this.options.positions.doIcon<this.options.positions.doText&&i.append(n),i.append(s),this.options.positions.doIcon>3&&this.options.positions.doIcon>this.options.positions.doText&&i.append(n)):t&&(this.options.positions.doIcon<3?i.prepend(n):i.append(n))},disableBtnsClick:function(){this.$BtnsSub.off("click"),this.options.display_reject&&this.$BtnsReject.off("click")},enableBtnsClick:function(){var e=this;this.$BtnsSub.on("click",function(t){e.onClick(t,"sub-btn")}),this.options.display_reject&&this.$BtnsReject.on("click",function(t){e.onClick(t,"reject-btn")})},onClick:function(t,i){if(t.preventDefault(),this.bClicked)return!1;this.bClicked=!0;var s,a,r=this,u=$(t.currentTarget);if("sub-btn"===i?(s=!this.bIsFollower)&&(a=!1):(a=!this.bIsRejected)&&(s=!1),this.disableBtnsClick(),this.bIsLogged){var f=this.csrf,d=function(e){e.related&&(r.related="undefined"!=typeof e.related&&e.related),e.result&&r.onClickEnded(s,a,e.nb_subs_formatted,u)},c=function(){h.unfollow(r.username,f,d)},p=function(){r.onCancelEnded()};this.loadStart(u),"sub-btn"===i?this.bIsFollower?o.confirm(this.options.texts.confirm_unfollow,c,p):h.follow(this.username,f,d):this.bIsRejected?o.confirm(this.options.texts.confirm_unreject,c,p):h.reject(this.username,f,d)}else{if(!l.canTrack())return e.dyn.login_info.is_logged?this.set_tooltip(n.__("profile.tracking.device_not_compatible_create_profile",{"%start_create_profile%":'<a href="/account/create_profile">',"%end_login%":"</a>"}),!1,1e4,u):(this.set_tooltip(n.__("profile.tracking.device_not_compatible_login",{"%start_login%":'<a href="#">',"%end_login%":"</a>"}),!1,1e4,u),require(["skins/default/form/login"],function(e){var t=r.tooltip.popup.find(".x-popup-content a").first();t.on("click",function(){r.tooltip&&r.tooltip.close()}),e.setupLinks(t)})),void(this.bClicked=!1);if(!l.isTracking())return this.set_tooltip(n.__("profile.tracking.disabled",{"%start_login%":'<a href="#">',"%end_login%":"</a>","%start_enable%":'<a href="/my-subs/videos">',"%end_enable%":"</a>"}),!1,1e4,u),require(["skins/default/form/login"],function(e){e.setupLinks(r.tooltip.popup.find(".x-popup-content a").first())}),void(this.bClicked=!1);this.bIsFollower?l.unsubscribe(this.id):l.subscribe(this.id),this.onClickEnded(s,null,null,u)}},updateBtns:function(){this.bIsFollower?(this.$BtnsSub.prop("title",t.unescape(this.options.texts.unsub)).addClass("active"),this.$BtnsSub.find(".icon-f").addClass("icf-"+this.options.icons.unsub).removeClass("icf-"+this.options.icons.sub),this.$BtnsSub.find(".sub-state-text").text(t.unescape(this.options.texts.unsub)),"default"===e.sitename&&(this.$BtnsSub.find(".sub-state-text").addClass("hidden"),this.$BtnsSub.append($('<span class="sub-profile">'+n.__("profile.subscribed")+"</span>")))):(this.$BtnsSub.prop("title",t.unescape(this.options.texts.sub)).removeClass("active"),this.$BtnsSub.find(".icon-f").addClass("icf-"+this.options.icons.sub).removeClass("icf-"+this.options.icons.unsub),this.$BtnsSub.find(".sub-state-text").text(t.unescape(this.options.texts["default"===e.sitename&&"listing"===this.options.page?"sub_short":"sub"])),"default"===e.sitename&&this.$BtnsSub.find(".sub-state-text").removeClass("hidden")),this.options.display_reject&&(this.$BtnsReject.toggleClass("no-active",this.bIsFollower),this.bIsRejected?(this.$BtnsReject.prop("title",t.unescape(this.options.texts.unreject)).addClass("active"),this.$BtnsReject.find(".icon-f").addClass("icf-"+this.options.icons.unreject).removeClass("icf-"+this.options.icons.reject),this.$BtnsReject.find(".sub-state-text").text(t.unescape(this.options.texts.unreject)),this.$BtnsSub.addClass("no-active")):(this.$BtnsReject.prop("title",t.unescape(this.options.texts.reject)).removeClass("active"),this.$BtnsReject.find(".icon-f").addClass("icf-"+this.options.icons.reject).removeClass("icf-"+this.options.icons.unreject),this.$BtnsReject.find(".sub-state-text").text(t.unescape(this.options.texts.reject)),this.$BtnsSub.removeClass("no-active")))},onClickEnded:function(i,s,o,a){if(this.bInit?("boolean"==typeof i&&(this.bIsFollower=i,this.bIsFollower&&(this.bIsRejected=!1)),this.bIsLogged&&"boolean"==typeof s&&(this.bIsRejected=s,this.bIsRejected&&(this.bIsFollower=!1))):this.initBtns(),this.updateBtns(),this.bClicked){if(this.loader&&this.loadStop(),this.bIsLogged&&this.counter&&null!==o&&this.counter.text(o),this.enableBtnsClick(),null!==a&&this.options.elts.tooltip){var r=this;this.bIsFollower?require(["mustache","text!skins/common/profile/subscribe/subscribed.mustache","text!skins/common/profile/subscribe/related_profile.mustache"],function(i,s,o){var l=[],u="",f=0;if($.isArray(r.related)){var d=e.domains["static"]+"/v3/img/skins/default/profile_default_small.jpg",c=r.options.add_relateds_to?r.options.add_relateds_to.related_users:r.related_users;for(var h in r.related)"undefined"==typeof c[r.related[h].id]&&(c[r.related[h].id]=r.related[h],r.related[h].img=xv.thumbs.replacePicThumbUrl('<img title="'+r.related[h].username_display+'" src="'+(r.related[h].thumb?r.related[h].thumb:d)+'" onerror="self.src=\''+d+"'; self.onerror=null;\" />"),r.related[h].div_sub_id="profile-related-sub-"+r.related[h].id+"-"+Math.ceil(1e4*Math.random()),r.related[h].about_me&&(r.related[h].about_me=$("<div>").html(r.related[h].about_me).text()),l.push({user_id:r.related[h].id,user_name:r.related[h].username,nb_subs:r.related[h].nb_subs,append_btn_to:"#"+r.related[h].div_sub_id,btn_class:"sub-strip"}),u+=i.render(o,r.related[h]),f++)}var p=$(i.render(s,{subscribed:t.unescape(n.__("subscriptions.subscribed")),view_activities:t.unescape(n.__("subscriptions.view_activities")),also_like:t.unescape(n.__("user.you_may_also_like")),hide_view_activities:!1!==r.options.add_relateds_to,has_related:!1===r.options.add_relateds_to&&l.length>0,related_html:u})),_=Math.floor(($(window).width()-50)/140),g=f>_?_:f,m=140*g;if(p.find(".profileslist").css("width",m+"px").addClass("nb-profile-per-line-"+g),!0===r.options.elts.tooltip_validation&&r.set_tooltip(p,!0,-1!==r.options.tooltip_hide_after?r.options.tooltip_hide_after:!(l.length>0)&&3500,a),l.length>0){if(!1!==r.options.add_relateds_to){var b=r.options.add_relateds_to.tooltip?r.options.add_relateds_to.tooltip:!!r.options.add_relateds_to.popup&&r.options.add_relateds_to.popup;"object"==typeof b&&$(b.popup).length>0&&$(b.popup).find(".profileslist").append($(u))}require(["skins/default/profile/subscribe/btns"],function(e){e(l,{sub_options:{add_relateds_to:r.options.add_relateds_to?r.options.add_relateds_to:r,tooltip_hide_after:1e3}})})}"function"==typeof r.options.end_function&&r.options.end_function(r.username,is_follower)}):(!0===this.options.elts.tooltip_validation&&this.set_tooltip(n.__("subscriptions.unsubscribed"),!1,-1!==r.options.tooltip_hide_after?r.options.tooltip_hide_after:3e3,a),"function"==typeof this.options.end_function&&this.options.end_function(this.username,is_follower))}this.bClicked=!1}},onCancelEnded:function(){this.bClicked&&(this.loader&&this.loadStop(),this.enableBtnsClick(),this.bClicked=!1)},loadStart:function(e){e.addClass("wait").prop("title",""),this.loader||(this.loader=$('<span class="loader"></span>').appendTo(e)),this.loader.append(a.getSafe().getHtml())},loadStop:function(){this.loader.parents(".sub-strip").removeClass("wait"),this.loader.remove(),this.loader=null},set_tooltip:function(e,t,i,n){if(!0!==t&&(e="<strong>"+e+"</strong>"),this.tooltip)this.tooltip.setButton(n),this.tooltip.setContent(e),this.tooltip.options.autoclose="number"!=typeof i||i,this.tooltip.options.closebtn="number"!=typeof i||i>5500;else{this.tooltip=new s(n,e,{position:{v:"below",h:"left"},trigger:!1,autoclose:"number"!=typeof i||i,closebtn:"number"!=typeof i||i>5500,popup_class:"video-subscribe-popup"+("string"==typeof this.options.tooltip_class?" "+this.options.tooltip_class:""),autoclose_on_same_level:this.options.add_relateds_to?"profile_related_submit":"profile_submit"});var o=this;this.tooltip.onClose=function(){o.related_users={}}}this.tooltip.open()},close_tooltip:function(){this.tooltip&&this.tooltip.close()}},p}),define("text!skins/common/profile/subscribe/btn_reject.mustache",[],function(){return'<span class="user-reject"></span>'}),define("skins/default/profile/subscribe/btns_controler",["config/main","lib/i18n!front","skins/common/profile/subscribe/btns_controler","text!skins/common/profile/subscribe/btn_reject.mustache","text!skins/default/profile/subscribe/btn_sub.mustache"],function(e,t,i,n,s){var o={elts:{btn_display:"inline-block",counter:"#profile-title .count",append_to_listing:"#profile_%username% .profile-counts .with-sub",btn_class:"sub-strip",reject:n,sub:"#profile-title .user-subscribe",sub_tpl:s,tooltip:!0,tooltip_validation:!0},positions:{doText:1},icons:{unsub:"feed"},texts:{confirm_unfollow:t.__("subscriptions.confirm_subscribed"),confirm_unreject:t.__("misc.confirm_cancel_not_interested"),reject:t.__("misc.not_interested")+"&nbsp;",sub:t.__("subscriptions.subscribe")+"&nbsp;",sub_short:t.__("subscriptions.subs_short"),subed:t.__("subscriptions.subscribed")+"&nbsp;",unreject:t.__("misc.cancel_not_interested")+"&nbsp;",unsub:t.__("subscriptions.unsubscribe")+"&nbsp;"}},a=function(e){this._init(e)};return a.prototype={_init:function(e){new i(e,o)}},a}),define("skins/default/profile/title_actions",["config/main","mustache","./action/link","lib/i18n!front","text!./action/link/friend_asked.html","skins/default/profile/subscribe/btns_controler"],function(e,t,i,n,s,o){var a="/profiles/"+e.data.user.username+"/",r=$("#profile-title"),l=r.find(".friend-action-profile-add-to-friends");l.length>0&&(e.dyn.login_info.is_logged?l.each(function(){new i($(this),a+"friends/requests/ask",!1,!0,e.data.user.csrf.freqask).onSuccess=function(){this.disable(),this.link.replaceWith(t.render(s,{label:n.__("profile.friends.you_asked_friends",{"%name%":e.data.user.display})}))}}):require(["skins/default/form/login"],function(e){e.setupLinks(l)}));var u=r.find(".friend-action-pending-friend-req-confirm");if(u.length>0){new i(u,a+"friends/requests/confirm",!1,!1,e.data.user.csrf.freqconfirm).onSuccess=function(){this.link.next().remove();var e=this.link.parent().prev();this.link.remove(),e.children(".label").html('<strong class="text-success">'+n.__("misc.confirmed")+"</strong>"),window.setTimeout(function(){window.location.reload()},1e3)}}var f=r.find(".friend-action-pending-friend-req-ignore");if(f.length>0){new i(f,a+"friends/requests/ignore",!1,!1).onSuccess=function(){this.link.prev().remove();var e=this.link.parent().prev();this.link.remove(),e.children(".label").html('<strong class="text-success">'+n.__("misc.ignored")+"</strong>")}}var d=r.find(".friend-action-profile-unfriend");if(d.length>0){new i(d,a+"friends/remove",n.__("profile.friends.confirm_unfriend",{"%user%":e.data.user.display}),!1,e.data.user.csrf.frremove).onSuccess=function(){var e=this.link.prev();this.link.remove(),e.children(".label").html('<strong class="text-success">'+n.__("profile.friends.not_anymore")+"</strong>"),window.setTimeout(function(){window.location.reload()},1e3)}}var c=r.find(".friend-action-unblock-user");if(c.length>0){new i(c,a+"block/remove",!1,!1,e.data.user.csrf.blockremove).onSuccess=function(){var e=this.link.prev();this.link.remove(),e.children(".label").html('<strong class="text-success">'+n.__("profile.unblocked")+"</strong>"),window.setTimeout(function(){window.location.reload()},1e3)}}new o({user_id:e.data.user.id_user,user_name:e.data.user.username,btn_class:"sub-strip"})}),define("skins/common/listing/loader",["lib/tools","lib/helpers/inline_loader","lib/helpers/thumbs_rotator","static/console","lib/i18n!front","skins/common/history/one_info_tracker"],function(e,t,i,n,s,o){var a=function(e,t,i,n,s,o){this.type=e,this.container=t,this.url=i,this.is_video=!!n,this.is_pic=!!s,this.loading=!1,this.loaded=!1,this.error,this.storeLastPage=!(!o||"string"!=typeof o.storeLastPage)&&o.storeLastPage,this.storeScrollPos=!(!o||"string"!=typeof o.storeScrollPos)&&o.storeScrollPos,this.postParams=o&&"object"==typeof o.postParams?o.postParams:{}};return a.prototype={onLoaded:null,load:function(){if(!this.loading&&!this.loaded){this.loading=!0,this.error&&this.error.remove(),this._display_loader();var e=this,t=this._get_url(!0);n.print('POST "'+t+'"',"Listing loader "+this.type),$.post(t,this.postParams,function(t){n.print("Loaded!","Listing loader "+e.type),e._on_loaded(t)},"html").fail(function(t,i,s){e.storeScrollPos&&o.unset(e.storeScrollPos);var a=0;if(e.storeLastPage&&(a=parseInt(o.get(e.storeLastPage)),o.unset(e.storeLastPage)),n.print("ERROR: "+i+' - "'+s+'"',"Listing loader "+e.type,t),e._on_error(),a>0)return e.loading=!1,e.load(),!1}).always(function(){e.loading=!1})}},get_loader_containers:function(){return this.container},_display_loader:function(){this.get_loader_containers().html('<p class="text-center">'+t.getSafe("after",s.__("profile.loading_"+this.type)).getHtml()+"</p>")},_get_url:function(e){return e?this.url+this._get_url_pagin():this.url},_get_url_pagin:function(){if(this.storeLastPage){var e=o.get(this.storeLastPage);if(e)return"/"+e}return""},_on_error:function(){var e=this;this.container.html('<div class="text-center"><strong><a href="#" class="text-danger">'+s.__("loading.failed_retry")+"</a></strong></div>").find("a").on("click",function(t){return t.preventDefault(),e.load(),!1})},_windowOnScroll:function(){!1!==this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=!1);var e=this;this.scrollTimeout=setTimeout(function(){e.container.is(":visible")&&o.set(e.storeScrollPos,$(window).scrollTop())},250)},_removableOnScroll:!1,removeOnScroll:function(){$(window).off("scroll",this._removableOnScroll)},reinitOnScroll:function(){$(window).off("scroll",this._removableOnScroll),$(window).on("scroll",this._removableOnScroll)},scrollToStoredPos:function(){if(this.storeScrollPos&&o.canTrack(this.storeScrollPos)){var e=parseInt(o.get(this.storeScrollPos));return e>0&&$(window).scrollTop(e),this.reinitOnScroll(),e>0}return!1},_on_loaded:function(t){"string"==typeof t&&(t=e.stripStartScript(t),(this.is_video||this.is_pic)&&(t=e.replaceThumbcast(t)),this.container.html(t),e.executePendingPrepare(this.container.find(".thumb-block")),this.is_video&&i(this.container));var n=this;this._removableOnScroll=function(){n._windowOnScroll()},this.loaded=!0,"function"==typeof this.onLoaded&&this.onLoaded()}},a}),define("skins/common/listing/loader/paginated",["./../loader","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front","skins/common/history/one_info_tracker"],function(e,t,i,n,s){var o=function(t,i,n,o,a,r){if(e.apply(this,arguments),this.storeLastPage=!(!r||"string"!=typeof r.storeLastPage)&&r.storeLastPage,this.storeScrollPos=!(!r||"string"!=typeof r.storeScrollPos)&&r.storeScrollPos,this.page=0,this.storeLastPage){var l=s.get(this.storeLastPage);l&&(this.page=l)}this.loaded_once=!1,this.loading_overlay,this.error_overlay};return o.prototype=new e,o.prototype._get_url=function(){return this._get_url_without_pagin()+this._get_url_pagin()},o.prototype._get_url_without_pagin=function(){return this.url},o.prototype._get_url_pagin=function(){return"/"+this.page},o.prototype.loadPage=function(e){this.page=parseInt(e),this.loaded=!1,this.storeLastPage&&s.set(this.storeLastPage,this.page),this.load()},o.prototype._display_loader=function(){if(!this.loaded_once)return void e.prototype._display_loader.call(this);this.loading_overlay||(this.loading_overlay=i.get(this.container,!1).setContent('<p class="text-center">'+t.getSafe("after",n.__("profile.loading_"+this.type)).getHtml()+"</p>"));var s=this;window.setTimeout(function(){s.loading&&s.loading_overlay&&s.loading_overlay.show()},500),this.error_overlay&&this.error_overlay.hide()},o.prototype._show_overlay=function(){},o.prototype._on_error=function(){if(!this.loaded_once)return void e.prototype._on_error.call(this);if(!this.error_overlay){var t=this;this.error_overlay=i.get(this.container,!0).setContent($('<div class="text-center"><strong><a href="#" class="text-danger">'+n.__("loading.failed_retry")+"</a></strong></div>").find("a").on("click",function(e){return e.preventDefault(),t.load(),t.loading&&t.loading_overlay&&t.loading_overlay.show(),!1}))}this.error_overlay.show(),this.loading_overlay&&this.loading_overlay.hide()},o.prototype.scrollToStoredPos=function(){var e=0;if(this.storeScrollPos&&s.canTrack(this.storeScrollPos)&&(e=parseInt(s.get(this.storeScrollPos)))>0)return $(window).scrollTop(e),e;var t=this.container.find(".pagination").first();if(t.length>0){var i=Math.max(t.offset().top-50,0);$(window).scrollTop()>i&&$(window).scrollTop(i)}},o.prototype._on_loaded=function(t){this.loaded_once=!0,e.prototype._on_loaded.call(this,t);var i=this;this.container.find(".pagination li a:not(.no-pagin), .thumb-block-pagin-next .pagin-next").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("active")){var t=$(this).attr("href");t&&(i.storeScrollPos&&s.unset(i.storeScrollPos),i.loadPage(t.substr(1)))}}),this.scrollToStoredPos(),this.loading_overlay&&this.loading_overlay.hide(),this.error_overlay&&this.error_overlay.hide()},o}),define("skins/default/profile/listing/videos",["config/main","static/dom","lib/tools","lib/i18n!front","skins/common/listing/loader","skins/common/listing/loader/paginated","skins/default/pagination","skins/default/mozaique/thumb_block_common_init"],function(e,t,i,n,s,o,a,r){var l=function(t){var i=e.data.user.url+"/videos/"+t;if(e.data.main_cat){var n="/uploads-only",s=i.indexOf(n);-1!==s?i=i.substr(0,s)+"/"+e.data.main_cat+n+i.substr(s+n.length):i+="/"+e.data.main_cat}return i},u=function(e){var n=e.children().first();t.isElementInView(n,!1)||i.scrollTo(n,35)},f={},d=function(e,t,n,s,o,l){if(this.container=e,this.inner_node_id=t,this.loaders={},this.ups_sort=!1,this.status="not_loaded",this.has_uploads=!1,this.base_id=n,this.default_sort=o,this.sort_opts=s,this.storeLastPage=!(!l||"string"!=typeof l.storeLastPage)&&l.storeLastPage,this.storeScrollPos=!(!l||"string"!=typeof l.storeScrollPos)&&l.storeScrollPos,this.aOnLoadedFuncs=[],this.sId=!(!l||"string"!=typeof l.id)&&l.id,this.sId){var u=this.sId.indexOf(",");-1!==u&&(this.sId=this.sId.substr(u+1))}l&&"function"==typeof l.onLoaded&&this.aOnLoadedFuncs.push(l.onLoaded),i.addPendingPrepareList(function(e){r.init_listing(e,{rotator:!1});var t=e.first().parents(".tab").length>0?e.first().parents(".tab"):$(".tabs").find(".tab.active"),i=t.find("#video_type");t.length>0&&a.add_all_in(t),i.length>0&&!$._data(i[0],"events")&&i.on("change",function(){this.value.length>0&&(window.location.href=this.value)})}),!1!==this.sId&&(f[this.sId]=this)};return d.prototype={load:function(t,i,n){this.sId=t;var a=this.default_sort,r=this.ups_sort?this.ups_sort:this.default_sort,f=i===undefined?this.sId.indexOf(","):-1;if(-1!==f){var d=this.sId.substr(f+1),c=d.substr(this.base_id.length+1);-1!==$.inArray(a,this.sort_opts)?(a=c,r=c):r=a}if(i!==undefined&&(this.status="not_loaded"),"not_loaded"===this.status){this.status="loading",this.ups_sort=r;var h={postParams:{is_first:!0,main_cats:e.data.main_cats}},p={postParams:{main_cats:e.data.main_cats}};!1!==this.storeLastPage&&(h.storeLastPage=this.storeLastPage,p.storeLastPage=this.storeLastPage),!1!==this.storeScrollPos&&(h.storeScrollPos=this.storeScrollPos,p.storeScrollPos=this.storeScrollPos);var _=this,g=new s("videos",n===undefined?this.container:n,i===undefined?l(a):i,!0,!1,h);return g._get_url=function(e){var t=s.prototype._get_url.call(this,e);if(e&&(t+=s.prototype._get_url_pagin()),"string"==typeof document.referrer&&-1!==document.referrer.indexOf("/red/videos")){var i=document.referrer.indexOf("?pmsc=head_mob_chans_tab");t+=(-1===t.indexOf("?")?"?":"&")+"from="+(i>-1?"headermob":"redtab")}return t},g._on_loaded=function(e){s.prototype._on_loaded.call(this,e);var t=_.container.find("#"+_.inner_node_id);if(t.length>0){_.has_uploads=!0;for(var i in _.sort_opts)_.loaders[_.sort_opts[i]]=new o("videos",t,l(_.sort_opts[i]),!0,!1,p),_.loaders[_.sort_opts[i]].loaded_once=r!==_.sort_opts[i],_.loaders[_.sort_opts[i]]._get_url=function(){var e=o.prototype._get_url.call(this);return"string"==typeof document.referrer&&-1!==document.referrer.indexOf("/red/videos")&&(e+=(-1===e.indexOf("?")?"?":"&")+"from=redtab"),e},_.sort_opts[i]===a?_.loaders[a].onLoaded=function(){g.reinitOnScroll(),this.scrollToStoredPos()||u(t),_.onLoaded()}:(_.sort_opts[i]===r&&_.loaders[r]._on_loaded(),_.loaders[_.sort_opts[i]].onLoaded=function(){this.scrollToStoredPos()||u(t),_.onLoaded()})}else"undefined"!=typeof sort_psv&&(a=sort_psv);"undefined"!=typeof _.loaders[a]&&"function"==typeof _.loaders[a]._on_loaded&&_.loaders[a]._on_loaded(),_.status="loaded",_.ups_sort!==r&&_.load("tabVideos,"+_.ups_sort)},void g.load()}"loaded"===this.status&&this.ups_sort!==r&&(this.ups_sort=r,this.loaders[r].loadPage(0),u(this.loaders[this.ups_sort].container)),this.ups_sort=r},onLoaded:function(){for(var e in this.aOnLoadedFuncs){var t=this.aOnLoadedFuncs[e];"function"==typeof t&&t()}},addOnLoaded:function(e){"function"==typeof e&&this.aOnLoadedFuncs.push(e)}},d}),define("text!skins/default/profile/main_cats_switch.mustache",[],function(){return'<div class="profile-maincat-switch-cont{{#mobile_hide}} mobile-hide{{/mobile_hide}}">\n\t<button type="button" class="profile-maincat-switch btn btn-clear">\n\t\t<span class="profile-maincat-switch-label">{{{ txt }}}</span> <span class="icon-f icf-caret-down"></span>\n\t</button>\n</div>'}),define("skins/default/profile/main_cats_switch",["config/main","mustache","static/utils","lib/i18n!front","lib/helpers/popup","text!skins/default/profile/main_cats_switch.mustache"],function(e,t,i,n,s,o){var a=function(e,t,i,n,s){this._init(e,t,i,n,s)};return a.prototype={_init:function(i,n,a,r,l){if(!(i.length<1)&&(this.$container=i,this.$switch=null,this.$label=null,this.oNbVideos=n,this.oListing=l,this.oMainCats=null,this.bMobileHide=r,this.sConfig="",this.sUrlHash=a,this.sLinks="",(!1!==e.data.main_cats||e.data.main_cats.length>=2)&&(this.sConfig="main_cat"),""!==this.sConfig)){if(this.$switch=$(t.render(o,{txt:this.getSwitchLabel(),mobile_hide:!!this.bMobileHide})),this.$label=this.$switch.find(".profile-maincat-switch-label"),"string"!=typeof this.sUrlHash&&(this.sUrlHash=""),"main_cat"===this.sConfig){this.oMainCats=e.dyn.main_cats;for(var u in e.data.main_cats_url){var f=e.data.main_cats_url[u],d="undefined"!=typeof this.oMainCats[u]?this.oMainCats[u]:{};this.sLinks+='<a href="'+f+this.sUrlHash+'"'+(u===e.data.main_cat?' class="current"':"")+"><span>"+d.picto+"</span> "+d.name+("object"==typeof this.oNbVideos&&null!==this.oNbVideos&&"undefined"!=typeof this.oNbVideos[u]?" <small>("+parseInt(this.oNbVideos[u]).toLocaleString(e.dyn.locale)+")</small>":"")+"</a>"}}var c="rtl"===$("html").prop("dir"),h=new s(this.$switch.children("button"),this.sLinks,{relative_to:$("#page"),popup_class:"profile-maincat-switch-pop",trigger:!1,autoclose:!0,mouseout_autoclose:3e3,mouseout_autoclose_openevents:["mouseover_btn_timer","no_event"],position:{v:"below",h:c?"left":"right"}});this.$switch.on("click",function(){h.toggle()}).addClass("init-ok"),this.$container.prepend(this.$switch)}},getSwitchLabel:function(){return n.__("profile.content_"+e.data.main_cat)}},a}),
define("skins/common/profile/last_channels_visited",["static/cookies"],function(e){var t=function(){};return t.prototype={set:function(t){if(t=parseInt(t),isNaN(t)||t<1)return!1;for(var i=e.get("freechvws")||"",n=i.split(","),s=[t],o=0;o<n.length&&5!==s.length;o++)iSavedIdChannel=parseInt(n[o]),iSavedIdChannel===t||isNaN(iSavedIdChannel)||iSavedIdChannel<1||s.push(iSavedIdChannel);e.setLocal("freechvws",s.join(","),2592e6,"/",!0,"None")},setFullCookie:function(t){e.setLocal("freechvws",t,2592e6,"/",!0,"None")}},new t}),define("skins/common/listing/loader/infinite",["lib/tools","lib/helpers/inline_loader"],function(e,t){var i=$(document),n=$(window),s=function(e,t,i,s,o,a,r){this.btn=e,this.btn_content=this.btn.html(),this.list=t,this.autoload=!!a,this.loading=!1,this.loading_msg=o,this.last_timestamp=s,this.url=i,this.postParams="object"==typeof r?r:{};var l=this,u=function(){l.loadNext()};this.last_child=t.children().last().prev(),this.autoload&&(this.last_child_pos=this.last_child.offset().top,this.scroll_handler=n.on("scroll",u),this.resize_handler=n.on("resize",function(){l.last_child_pos=l.last_child.offset().top,u()})),this.btn.on("click",u)};return s.prototype={onLoaded:function(t){var i=t.indexOf("--\x3e");this.last_timestamp=parseInt(t.substring(5,i)),t=t.substr(i+3),t=e.stripStartScript(t),this.list.append(e.replaceThumbcast(t.replace(/\\'/gi,"'"))),e.executePendingPrepare(this.list.find(".thumb-block")),this.last_child=this.list.children().last().prev(),this.autoload&&(this.last_child_pos=this.last_child.offset().top),0===this.last_timestamp&&(this.btn.remove(),this.autoload&&(n.off("scroll",this.scroll_handler),n.off("resize",this.resize_handler)))},loadNext:function(){if(!(this.loading||!this.last_timestamp||this.autoload&&i.scrollTop()+2*n.height()<this.last_child_pos)){this.btn.prop("disabled",!0).addClass("disabled").html(t.getSafe("after",this.loading_msg).getHtml()),this.loading=!0;var e=this;$.post(this.url+this.last_timestamp,this.postParams,function(t){e.onLoaded(t)},"html").always(function(){e.loading=!1,e.btn.prop("disabled",!1).removeClass("disabled").html(e.btn_content)})}}},s}),define("skins/default/profile/listing/infinite",["lib/tools","skins/common/listing/loader","skins/common/listing/loader/infinite","skins/default/mozaique/thumb_block_common_init"],function(e,t,i,n){var s=function(t,i,s,o,a,r,l,u){this.type=t,this.node=i,this.url=s,this.is_video=o,this.btn_id=a,this.loading_msg=r,this.list_id=l,this.postParams="object"==typeof u?u:{},e.addPendingPrepareList(function(e){n.init_listing(e,{rotator:!1})})};return s.prototype={on_first_load:null,on_next_load:null,load:function(){var n=this;this.list_loader=new t(this.type,this.node,this.url,this.is_video,null,{postParams:this.postParams}),this.list_loader._on_loaded=function(s){var o=s.indexOf("--\x3e"),a=parseInt(s.substring(5,o));s=s.substr(o+3),s=e.stripStartScript(s),t.prototype._on_loaded.call(this,s);var r=$("#"+n.btn_id),l=$("#"+n.list_id);if(0===r.length||0===l.length)return void("function"==typeof n.on_first_load&&n.on_first_load());n.infinite_loader=new i(r,l,n.url+"/",a,n.loading_msg,!1,n.postParams),n.infinite_loader.onLoaded=function(e){var t=this.last_child;i.prototype.onLoaded.call(this,e),"function"==typeof n.on_next_load&&n.on_next_load(t.nextAll())},"function"==typeof n.on_first_load&&n.on_first_load()},n.list_loader.load()}},s}),define("skins/default/profile/images",[],function(){var e=$(".img-block .gif-tag"),t=function(e){e.each(function(){var e=$(this),t=e.prev(),i=t.position();e.css({left:i.left+3,top:i.top+3})})},i=function(i){if(i){if(0===i.length)return;return i.prev().one("load",function(){t($(this).next())}),t(i),void(e=e.add(i))}t(e)};return e.prev().one("load",function(){t($(this).next())}),i(),$(window).resize(function(){i()}),i}),define("lib/helpers/viewer/lightgallery-manager",["libs/lightgallery.min"],function(){var e=function(){this.is_loaded=!1,this.onLoad=!1},t=new e;return require(["config/main","static/utils","lib/i18n!front","skins/common/history/page_view_history","skins/default/profile/vote/total","libs/lg-zoom.min","libs/lg-fullscreen.min","libs/lg-hash.min"],function(e,i,n,s,o){function a(){h=!0,$.get(e.domains["static"]+"/v-"+e.dyn.thvers.lg+"/v3/css/"+e.sitename+"/lightgallery.css",function(e){l.append('<style id="lg-styles">'+e+"</style>"),p=!0})}function r(e,t,i){if(e&&"string"==typeof i.vrating){var n=new o($("<div></div>").appendTo($(".lg")),i.rating,i.vrating,i.total,i.visitor_vote);n.initPostData("/profiles/"+i.owner+"/galleries/"+t+"/vote/good","/profiles/"+i.owner+"/galleries/"+t+"/vote/bad",{csrf:i.csrf}),n.setPopupPosition("above","left")}}var l=$("body"),u=$(".mozaique.profileslist"),f=u.find(".thumb-block.img-block"),d="undefined"==typeof e.data.galleries,c=!1,h=!1,p=!1,_=null,g=null,m={selector:".lightgallery-item",closeOnClick:!1,download:!1,fullScreen:!0,hash:d};d&&u.addClass("lightgallery"),f.each(function(){var t=$(this),i=t.find("a").attr("href");i.match(/^(http|https)/g)&&(t.attr("data-src",i).addClass("lightgallery-item"),d||t.wrap('<div class="lightgallery"></div>').on("click",function(){_=$(this).data("galid"),g=e.data.galleries[_],1===g.nb_pics&&(0===_?s.addId("verified_picture",e.data.user.id_user):_>0&&(s.addId("photo_gallery",_),$.post("/profiles/"+g.owner+"/photos-view/"+_+"/")))}))});var b=$(".lightgallery").lightGallery(m).on("onBeforeOpen.lg",function(){h||p||a()}).on("onAfterOpen.lg",function(){h||p||a(),c=!0,l.addClass("no-scroll"),"undefined"!=typeof e.data.gal&&$("#lg-counter").prepend("<span>"+i.escape(e.data.gal.title)+" : </span>"),$("#lg-zoom-in").attr("title",i.unescape(n.__("misc.image_larger"))).append('<span class="icon-f icf-search-plus"></span>'),$("#lg-zoom-out").attr("title",i.unescape(n.__("misc.image_reduce"))).append('<span class="icon-f icf-search-minus"></span>'),$("#lg-actual-size").attr("title",i.unescape(n.__("misc.image_normal_size"))).append('<span class="icon-f icf-resolution"></span>'),$(".lg-close").attr("title",i.unescape(n.__("misc.close"))).append('<span class="icon-f icf-close"></span>'),$(".lg-fullscreen").attr("title",i.unescape(n.__("misc.fullscreen"))).append('<span class="icon-f icf-fullscreen"></span>'),$(".lg-prev").attr("title",i.unescape(n.__("misc.previous"))).append('<span class="icon-f icf-chevron-left"></span>'),$(".lg-next").attr("title",i.unescape(n.__("misc.next"))).append('<span class="icon-f icf-chevron-right"></span>'),$(".lg-item").each(function(){$(this).append('<span class="loader icon-f icf-spinner icf-anim-pulse"></span>')}),"undefined"!=typeof e.data.galleries&&null!==_&&null!==g&&r(c,_,g)}).on("onCloseAfter.lg",function(){c=!1,l.removeClass("no-scroll")});b.length>0&&(document.addEventListener("fullscreenchange",function(){var e=$(".lg-fullscreen").find(".icon-f");e.hasClass("icf-fullscreen")?e.addClass("icf-fullscreen-back").removeClass("icf-fullscreen"):e.addClass("icf-fullscreen").removeClass("icf-fullscreen-back")}),t.is_loaded=!0,"function"==typeof t.onLoad&&t.onLoad(b))}),t}),define("skins/default/profile/listing/friends",["config/main","static/dom","skins/common/listing/loader"],function(e,t,i){var n=["friends","fans"],s=function(t){return e.data.user.url+"/"+t},o=function(e){this.container=e,this.loaders={},this.nodes={},this.type=!1,this.status="not_loaded"};return o.prototype={load:function(e){var o="friends",a=e.indexOf(",");if(-1!==a){var r=e.substr(a+1);"fans"===r&&(o=r)}if("not_loaded"===this.status){this.status="loading",this.type=o,this.nodes[o]=$("<div></div>").prependTo(this.container);var l=this,u=new i(o,this.nodes[o],s(o),!1,!0);return u.onLoaded=function(){l.loaders[o]=u,u.onLoaded=null;for(var e in n)o!==n[e]&&(l.nodes[n[e]]=$("<div></div>").prependTo(l.container).hide(),l.loaders[n[e]]=new i(n[e],l.nodes[n[e]],s(n[e]),!1,!0));l.status="loaded",l.type!==o?l.load("tabFriends,"+l.type):t.scrollToTop()},void u.load()}if("loaded"===this.status){if(this.type===o)return;this.nodes[this.type].hide(),this.nodes[o].show(),this.type=o,this.loaders[o].load(),t.scrollToTop()}this.type=o}},o}),define("skins/default/profile/vote/good_bad",["./total"],function(e){var t=function(t,i,n,s,o,a,r,l,u,f){this.vgood=i,this.vbad=n,e.apply(this,[t,s,o,a,r,l,u,f])};return t.prototype=new e,t.prototype._init_counts=function(){e.prototype._init_counts.call(this),this.counts_vgood=this.node.find(".rating-bar-block .good"),this.counts_vbad=this.node.find(".rating-bar-block .bad")},t.prototype._get_tpl_vars=function(){var t=e.prototype._get_tpl_vars.call(this);return t.vgood=this.vgood,t.vbad=this.vbad,t.disp_good_bad=!0,t},t.prototype._update_counts=function(t){e.prototype._update_counts.call(this,t),this.counts_vgood.text(t.vgood),this.counts_vbad.text(t.vbad)},t}),define("skins/common/thread/node",["config/main","static/console","lib/helpers/overlay/contextual_popup","lib/i18n!front"],function(e,t,i,n){var s=function(e,t,i,n){void 0!==e&&(this.thread=e,this.parent=t,this.id_post=i,this.level=-1,this.parent&&(this.level=this.parent.level+1),this.children={},this.nb_children=0,this.user_posts={},this.id_post_end=0,this.loading=!1,this.loaded=!1,this.children_loading=!1,this.children_loaded=!1,this.all_children_loaded=!1,this.nb_per_page=10,this.deleted=!1,this["private"]=!1,this.editing=!1,this.can_edit=!1,this.edit_csrf="",this.edit_text=null,this.edit_user=null,this.pending_delete=!1,this.can_delete=!1,this.delete_csrf="",this.deleting=!1,this.can_undelete=!1,this.undelete_csrf="",this.undeleting=!1,this.can_report=!1,this.report_csrf="",this.report_form=null,this.current_vote=!1,this.vote_csrf="",this.voting=!1,this.form=null,this.parent&&(this.ui_node=this.parent.ui_node.createChild(i,this),this.setNbChildren(n)))};return s.prototype={load:function(e){return this.ui_node.hideError(),this.deleted=!1,this["private"]=!1,e.deleted?(this.deleted=!0,void this.ui_node.hide()):e["private"]?(this["private"]=!0,void this.ui_node.hide()):(this.pending_delete=!!e.pending_delete,this.ui_node.show(),this.ui_node.render(e),this.can_edit=e.edit,this.can_edit&&(this.edit_csrf=e.edit_csrf,this.edit_text=e.edit_text,this.edit_user=e.edit_user),this.can_delete=e["delete"],this.can_delete&&(this.delete_csrf=e.delete_csrf),this.can_undelete=e.undelete,this.can_undelete&&(this.undelete_csrf=e.undelete_csrf),this.can_report=e.report,this.can_report&&(this.report_csrf=e.report_csrf),this.current_vote=e.votes.user,this.vote_csrf=e.votes.csrf,this.loading=!1,this.loaded=!0,void("object"==typeof e.replies&&e.replies.ids.length>0&&this.onLoaded({result:!0,posts:e.replies})))},getRoot:function(){return this.parent?this.parent.getRoot():this},canPost:function(){return this.thread.can_post&&this.level<this.thread.max_level&&!this.pending_delete},canLoadChildren:function(){return!this.children_loaded&&!this.children_loading&&this.nb_children>0},isFormOpened:function(){return!!this.form&&this.form.isFormOpened()},isEditing:function(){return this.editing},isDeleting:function(){return this.deleting},isUndeleting:function(){return this.undeleting},addUserPost:function(e){var t=new s(this.thread,this,e.id,0);t.load(e),this.ui_node.appendChild(t.ui_node),this.user_posts[e.id]=t,this.setNbChildren(this.nb_children+1),this.parent&&this.getRoot().setNbChildren(this.getRoot().nb_children+1),this.ui_node.toggleChildren(!0),this.children_loaded=!0},setNbChildren:function(e){this.nb_children=e,this.ui_node.setNbChildren(e)},destroy:function(){this.destroyChildren(),this.ui_node.destroy()},destroyChild:function(e){if("object"==typeof this.children[e])this.children[e].destroy(),delete this.children[e];else{if("object"!=typeof this.user_posts[e])return;this.user_posts[e].destroy(),delete this.user_posts[e]}this.setNbChildren(this.nb_children-1),this.ui_node.toggleChildren(!this.parent||this.nb_children>0)},destroyChildren:function(){for(var e in this.children)this.children.hasOwnProperty(e)&&(this.children[e].destroy(),delete this.children[e]);for(var e in this.user_posts)this.user_posts.hasOwnProperty(e)&&(this.user_posts[e].destroy(),delete this.user_posts[e]);this.nb_children=0,this.children_loaded=!1,this.id_post_end=0},loadChildren:function(e,i,n){if(!this.all_children_loaded&&!(this.children_loading||this.editing||this.deleting||this.undeleting)){this.children_loading=!0,this.ui_node.hideChildrenError(),this.ui_node.showChildrenLoader();var s,o=this,a=[];for(s in this.children)this.children.hasOwnProperty(s)&&a.push(s);for(s in this.user_posts)this.user_posts.hasOwnProperty(s)&&a.push(s);window.setTimeout(function(){var s=o.thread.getThreadUrl(o.parent?o.id_post:"0",o.id_post_end),r={loaded_ids:a.join(","),load_all:e?1:0};o.thread.shouldSendLoginCookie(s)&&(r.session_token=o.thread.getLoginCookie()),o.thread.is_admin&&(r.is_admin=1),$.post(s,r,function(t){o.onLoaded(t,i,n||function(){o.loadChildren(e)})},"json").fail(function(i,s,a){t.log("Failed to load","Thread "+o.thread.type,i),o.ui_node.showChildrenError(null,n||function(){o.loadChildren(e)})}).complete(function(){o.children_loading=!1,o.ui_node.hideChildrenLoader(),window.setTimeout(function(){window.xv!==undefined&&window.xv.videopage!==undefined&&"function"==typeof window.xv.videopage.displayRelatedVideos&&window.xv.videopage.displayRelatedVideos()},200)})})}},loadChildrenIds:function(e,i,n){if(!this.all_children_loaded&&!(this.children_loading||this.editing||this.deleting||this.undeleting)){this.children_loading=!0,this.ui_node.hideChildrenError(),this.ui_node.showChildrenLoader();var s=this;window.setTimeout(function(){var o=s.thread.getPostsUrl(),a={admin_posts:e};s.thread.shouldSendLoginCookie(o)&&(a.session_token=s.thread.getLoginCookie()),$.post(o,a,function(e){s.onLoaded(e,i,n||function(){s.loadChildrenIds(id_posts)})},"json").fail(function(e,i,o){t.log("Failed to load","Thread "+s.thread.type,e),s.ui_node.showChildrenError(null,n||function(){s.loadChildrenIds(id_posts)})}).complete(function(){s.children_loading=!1,s.ui_node.hideChildrenLoader()})})}},onLoaded:function(e,t,i){if(!e.result)return void this.ui_node.showChildrenError(e.message,i);"function"==typeof t&&t(e),this.ui_node.hideChildrenLoader(),e=e.posts;var n,o,a={},r=[];for(n in e.ids){o=e.ids[n];var l;if("object"==typeof this.children[o]?(l=this.children[o],delete this.children[o]):"object"==typeof this.user_posts[o]?(l=this.user_posts[o],delete this.user_posts[o]):l=new s(this.thread,this,o,e.children[o]||0),"object"==typeof e.posts[o]&&l.load(e.posts[o]),a[o]=l,l.loaded||r.push(o),o===e.id_post_end)break}for(var u in this.children)this.children.hasOwnProperty(u)&&this.children[u].destroy();this.children=a;for(n in e.ids)if(o=e.ids[n],this.ui_node.appendChild(this.children[o].ui_node),o===e.id_post_end)break;if(this.parent)for(n in this.user_posts)this.ui_node.appendChild(this.user_posts[n].ui_node);this.loadPosts(r),this.setNbChildren(this.parent?e.ids.length:e.nb_posts_total),this.id_post_end=e.nb_after>0&&e.id_post_end,this.children_loaded=!0,this.all_children_loaded=0===e.nb_after,this.ui_node.toggleChildren(e.ids.length>0),this.ui_node.setNbNext(e.nb_after,e.nb_by_page),e.nb_by_page>0&&(this.nb_per_page=e.nb_by_page)},loadPosts:function(e){var i=[],n=[];for(var s in e){var o=this.children[e[s]];"object"!=typeof o||o.loading||(o.loading=!0,o.ui_node.hideError(),o.ui_node.showLoader(),i.push(e[s]),n.push(o))}if(0===i.length)return!0;var a=this,r=[],l=this.thread.getPostsUrl(),u={posts:i};this.thread.is_admin&&(u.is_admin=1),this.thread.shouldSendLoginCookie(l)&&(u.session_token=this.thread.getLoginCookie()),$.post(l,u,function(e){if(e.result)for(var t in n){var s=n[t];"object"==typeof e.posts[s.id_post]?(s.load(e.posts[s.id_post]),"number"==typeof e.posts[s.id_post].nb_children&&s.setNbChildren(e.posts[s.id_post].nb_children)):(r.push(s.id_post),s.ui_node.showError(null,function(){a.loadPosts(r)}))}else for(var t in n)n[t].ui_node.showError(e.messsage,function(){a.loadPosts(i)})},"json").fail(function(e,s,o){t.log("Failed to load","Thread "+a.thread.type,e);for(var r in n)n[r].ui_node.showError(null,function(){a.loadPosts(i)})}).complete(function(){for(var e in n)n[e].loading=!1,n[e].ui_node.hideLoader()})},getForm:function(){if(this.pending_delete)return!1;if(!this.thread.allow_anonymous){if(!e.dyn.login_info.is_logged)return require([this.thread.login_form_mod],function(e){e.open()}),!1;if(!e.dyn.login_info.profile)return i.alert(n.__("video.need_profile_to_comment",{"%link_start%":'<a href="/account/create-profile">',"%link_end%":"</a>"},"You must have a profile to comment on this video. You can create it %link_start%here%link_end%.")),!1}return null===this.form&&(this.form=this.thread.createForm(this)),this.form},"delete":function(e){if(!(!this.can_delete||this.deleting||this.undeleting||this.children_loading||this.voting||this.editing)){var t=this;if(!e){var s,o;return this.nb_children>0?(s="misc.confirm_delete_message_replies",o="Are you sure you want to delete this message and its replies ?"):(s="misc.confirm_delete_message",o="Are you sure you want to delete this message ?"),void i.confirm(n.__(s,{},o),function(){t["delete"](!0)})}this.deleting=!0,this.ui_node.toggleVotesDelete(!1),this.ui_node.toggleChildrenShowHide(!1),this.ui_node.renderPostBtn(),this.ui_node.renderEditBtn(),this.form&&this.form.close();var a=this.thread.getDeleteUrl(this.id_post),r={csrf:this.delete_csrf};this.thread.shouldSendLoginCookie(a)&&(r.session_token=this.thread.getLoginCookie()),this.thread.is_admin&&(r.is_admin=1),$.post(a,r,function(e){if(!e.result)return void t.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."));e.post?t.load(e.post):t.parent.destroyChild(t.id_post),t.getRoot().setNbChildren(e.nb_posts)},"json").fail(function(){t.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."))}).complete(function(){t.deleting=!1,t.ui_node.toggleVotesDelete(!0),t.ui_node.toggleChildrenShowHide(!0),t.ui_node.renderPostBtn(),t.ui_node.renderEditBtn()})}},undelete:function(){if(!(!this.can_undelete||this.deleting||this.undeleting||this.children_loading||this.voting||this.editing)){var e=this;this.undeleting=!0,this.ui_node.toggleVotesDelete(!1),this.ui_node.toggleChildrenShowHide(!1),this.ui_node.renderPostBtn(),this.ui_node.renderEditBtn(),this.form&&this.form.close();var t=this.thread.getUndeleteUrl(this.id_post),i={csrf:this.undelete_csrf};this.thread.shouldSendLoginCookie(t)&&(i.session_token=this.thread.getLoginCookie()),this.thread.is_admin&&(i.is_admin=1),$.post(t,i,function(t){if(!t.result)return void e.ui_node.setDeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."));e.load(t.post),e.getRoot().setNbChildren(t.nb_posts)},"json").fail(function(){e.ui_node.setUndeleteError(n.__("misc.error_please_retry",{},"Error! Please retry..."))}).complete(function(){e.undeleting=!1,e.ui_node.toggleVotesDelete(!0),e.ui_node.toggleChildrenShowHide(!0),e.ui_node.renderPostBtn(),e.ui_node.renderEditBtn()})}},report:function(){!this.can_report||this.deleting||this.undeleting||this.editing||(this.report_form||(this.report_form=this.thread.createReportForm(this)),this.report_form.open())},disableReport:function(){this.can_report=!1,this.report_csrf="",this.ui_node.disableReport()},vote:function(e){if(!(this.voting||this.deleting||this.undeleting||this.pending_delete||this.editing)){this.current_vote===e&&(e="CANCEL"),this.voting=!0,this.ui_node.toggleVotesDelete(!1);var t=this,i=this.thread.getVoteUrl(this.id_post,e),n={csrf:this.vote_csrf};this.thread.shouldSendLoginCookie(i)&&(n.session_token=this.thread.getLoginCookie()),$.post(i,n,function(e){if(e.result&&(t.current_vote=e.votes.user,t.ui_node.renderVotes(e.votes),"object"==typeof e.ids)){for(var i=t.id_post,n=0,s=e.ids.length-1;s>=0;s--){if("undefined"!=typeof t.parent.children[e.ids[s]]){i=e.ids[s];break}n++}t.parent.onLoaded({result:!0,posts:{ids:e.ids,posts:{},children:{},nb_after:n,id_post_end:i,nb_posts_total:e.nb_posts_total,nb_by_page:t.parent.nb_per_page}})}},"json").complete(function(){t.voting=!1,t.ui_node.toggleVotesDelete(!0)})}}},s}),define("text!skins/common/thread/ui/form.mustache",[],function(){return'<div class="thread-node thread-node-form hidden">\r\n\t{{^force_anonymous}}\r\n\t<div class="thread-node-picture">\r\n\t\t<img src="{{{ img }}}"{{#img_error}} onerror="this.src=\'{{{ img_error }}}\';this.onerror=null;"{{/img_error}} />\r\n\t\t{{#profile_name}}\r\n\t\t<div class="thread-node-poster">\r\n\t\t\t<span class="thread-node-poster-name">{{{ profile_name }}}</span>\r\n\t\t</div>\r\n\t\t{{/profile_name}}\r\n\t</div>\r\n\t{{/force_anonymous}}\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t<div class="thread-node-content">\r\n\t\t{{{ form }}}\r\n\t</div>\r\n</div>'}),define("text!skins/common/thread/ui/form_message.mustache",[],function(){return'<div class="alert alert-{{{ alert_type }}} form-error-list-contener">\r\n\t<ul class="form-error-list"><li>{{{ message }}}</li></ul>\r\n\t<span class="icon-f icf-{{{ icon }}}"></span>\r\n</div>'}),define("skins/common/thread/ui/form",["config/main","mustache","static/utils","lib/tools","static/dom","lib/helpers/inline_loader","skins/form/validator","text!./form.mustache","text!./form_message.mustache"],function(e,t,i,n,s,o,a,r,l){var u=function(e,t,i,n){void 0!==e&&(this.logic_node=e,this.force_anonymous=i,this.default_form_html=this.updateFormHtml(t),this.validation_rules=this.updateValidationRules(n),this.node=null,this.createNode(),this.opened=!1,this.submitted=!1,this.message=null)};return u.prototype={getTemplate:function(){return r},getTemplateVars:function(){var t=!this.force_anonymous&&e.dyn.login_info.profile;return{form:this.default_form_html,force_anonymous:this.force_anonymous,img:t?"/profiles-picture/"+e.dyn.login_info.profile:this.getDefaultPictureUrl(),img_error:!!t&&this.getDefaultPictureUrl(),profile_name:!!t&&n.ucwords(t.replace(/_/g," "))}},getDefaultPictureUrl:function(){return window.location.protocol+"//static-hw.xvideos.com/img/profile_default_small.jpg"},createNode:function(e){this.node||(this.node=$(t.render(this.getTemplate(),this.getTemplateVars(e))),this.getNodes())},getNodes:function(){this.form=this.node.find("form"),this.form_validator=new a(this.form,this.validation_rules,{no_errors_shortcuts:!0,no_init_focus:!0}),this.inputs=this.node.find('input[type="text"],textarea'),this.radios=this.node.find('input[type="checkbox"],input[type="radio"]');var e=this;this.cancel_btn=this.form.find("a").on("click",function(t){t.preventDefault(),e.logic_node.reset(),e.logic_node.close()}),this.form.on("submit",function(t){return t.preventDefault(),t.stopPropagation(),e.logic_node.submit(),e.submitted=!0,!1}),this.inputs.filter("textarea").on("keyup",function(){e.message&&(e.message.remove(),e.message=null),$(this).height(5).height($(this).prop("scrollHeight"))})},updateFormHtml:function(e){var t=e.indexOf(' id="');if(-1===t)return e;var i=e.substr(t+5);return-1===(t=i.indexOf('"'))?e:(i=i.substr(0,t),e.replace(new RegExp('id="'+i,"g"),'id="'+i+(this.logic_node.node.id_post.length>0?"_"+this.logic_node.node.id_post:"")))},updateValidationRules:function(e){if(0===this.logic_node.node.id_post.length)return e;for(var t in e)e[t].elt_id=e[t].elt_id.replace(/post/g,"post_"+this.logic_node.node.id_post);return e},updateForm:function(e,t){this.form.html(this.updateFormHtml(e)),this.validation_rules=this.updateValidationRules(t),this.getNodes()},open:function(){if(this.opened)return this.inputs.eq(0).focus(),this.logic_node.node.ui_node.renderPostBtn(),void this.logic_node.node.ui_node.renderEditBtn();this.node.removeClass("hidden"),this.opened=!0,this.logic_node.node.parent||s.isElementInView(this.form,!0)||n.scrollTo(this.form,50),this.inputs.eq(0).focus(),this.logic_node.node.ui_node.renderPostBtn(),this.logic_node.node.ui_node.renderEditBtn()},close:function(){this.opened&&(this.node.addClass("hidden"),this.opened=!1,this.logic_node.node.ui_node.renderPostBtn(),this.logic_node.node.ui_node.renderEditBtn(!0))},showMessage:function(e,i){this.message&&(this.message.remove(),this.message=null),this.message=$(t.render(l,{message:e,alert_type:i?"danger":"success",icon:i?"warning":"check-circle-thin"})).prependTo(this.form)},toggleSubmitting:function(e){this.inputs.prop("disabled",e),this.radios.prop("disabled",e),this.cancel_btn.toggleClass("hidden",e)},reset:function(e){this.submitted?(this.submitted=!1,this.form.html(this.default_form_html),this.getNodes()):(this.inputs.val(""),this.setText(""),this.radios.prop("checked",!1)),e&&this.showMessage(e,!1)},setText:function(e){var t=this.inputs.filter('[name="post[text]"]');return 0!==t.length&&(t[0].emojioneArea?(t[0].emojioneArea.setText(e),!0):(t.val(e),!0))},setDefault:function(e,t){this.setText(e),this.inputs.filter('[name="post[user]"]').val(t)}},u}),define("skins/common/thread/form",["config/main","./ui/form","lib/i18n!front"],function(e,t,i){var n=function(e,i,n,s){this.node=e,this.ui_node=new t(this,i,n,s),this.posting=!1,this.mode="create",this.edit_csrf=null};return n.prototype={submit:function(){if(!this.posting){this.posting=!0;var e,t=this,n=this.ui_node.form.serializeArray();"edit"===this.mode?(e=this.node.thread.getEditUrl(this.node.id_post),n.push({name:"csrf",value:this.edit_csrf})):e=this.node.thread.getPostUrl(this.node.parent?this.node.id_post:"0"),this.node.thread.shouldSendLoginCookie(e)&&n.push({name:"session_token",value:this.node.thread.getLoginCookie()}),this.node.thread.is_admin&&(n.is_admin=1),$.post(e,n,function(e){if(!e.result)return 50===e.code?void t.ui_node.updateForm(e.form,e.validation_rules):(t.ui_node.showMessage(e.message,!0),void t.ui_node.form_validator.resetSubmit());"edit"===t.mode?t.node.load(e.post):t.node.addUserPost(e.post),t.reset(e.message),t.close()},"json").fail(function(){t.ui_node.showMessage(i.__("loading.error"),!0),t.ui_node.form_validator.resetSubmit()}).complete(function(){t.posting=!1,t.ui_node.toggleSubmitting(!1)}),this.ui_node.toggleSubmitting(!0)}},isFormOpened:function(){return this.ui_node.opened},open:function(){this.node.thread.closeOpenedForms(),this.node.thread.opened_form=this,this.ui_node.open()},close:function(){this.ui_node.close()},reset:function(e){this.mode="create",this.ui_node.reset(e)},setEditMode:function(e,t,i){this.mode="edit",this.edit_csrf=i,this.ui_node.setDefault(e,t)}},n}),define("text!skins/common/thread/ui/report_form.mustache",[],function(){return'<div>\n\t<h2 class="text-center">{{{ title }}}</h2>\n\t{{{ form }}}\n</div>'}),define("skins/common/thread/ui/report_form",["lib/helpers/overlay/box","./form","text!./report_form.mustache","lib/i18n!front"],function(e,t,i,n){var s=function(e,i,n){t.apply(this,[e,i,!1,n]),this.overlay=null};return s.prototype=new t,s.prototype.getTemplate=function(){return i},s.prototype.getTemplateVars=function(){return{title:n.__(this.logic_node.node.ui_node.getMessageKey("report_this_post"),{},"Report this post"),form:this.default_form_html}},s.prototype.open=function(){if(this.opened)return void this.inputs.eq(0).focus();if(!this.overlay){var t=this;this.overlay=e.get($("body"),!0,"hide").setContent(this.node).show("auto"),this.overlay.setOverlayClosable(!0),this.overlay.setEscapeClosable(!0),this.overlay.onHide=function(){t.opened=!1},this.overlay.node.addClass("thread-post-report-form-popup")}this.overlay.show(),this.opened=!0,this.inputs.eq(0).focus()},s.prototype.close=function(){this.opened=!1,this.overlay.hide()},s}),define("skins/common/thread/report_form",["static/cookies","./ui/report_form","lib/i18n!front"],function(e,t,i){var n=function(e,i,n){this.node=e,this.ui_node=new t(this,i,n),this.reporting=!1};return n.prototype={submit:function(){if(!this.reporting){this.reporting=!0;var e=this,t=this.node.thread.getReportUrl(this.node.id_post),n=this.ui_node.form.serializeArray();this.node.thread.shouldSendLoginCookie(t)&&(n.session_token=this.node.thread.getLoginCookie()),n.push({name:"csrf",value:this.node.report_csrf}),$.post(t,n,function(t){if(!t.result)return 50===t.code?void e.ui_node.updateForm(t.report_form,t.report_js_validation_rules):(e.ui_node.showMessage(t.message,!0),void e.ui_node.form_validator.resetSubmit());e.ui_node.close(),e.node.disableReport()},"json").fail(function(){e.ui_node.showMessage(i.__("loading.error"),!0),e.ui_node.form_validator.resetSubmit()}).complete(function(){e.reporting=!1,e.ui_node.toggleSubmitting(!1)}),this.ui_node.toggleSubmitting(!0)}},isFormOpened:function(){return this.ui_node.opened},reset:function(){this.ui_node.reset()},open:function(){this.ui_node.open()},close:function(){this.ui_node.close()}},n}),define("skins/common/thread/root",["config/main","static/cookies","./node","./form","./report_form"],function(e,t,i,n,s){var o=function(e,t,n,s){void 0!==e&&(this.thread=this,this.type=e,this.id_related=t,this.sort=o.SORT_TOP,this.is_admin=!1,this.max_level=0,this.init=!1,this.node=new i(this,null,"",0),n.logic_node=this,this.node.ui_node=n,this.setSort(),this.allow_anonymous=!1,this.force_anonymous=!1,this.show_emojis=!1,this.login_form_mod=s,this.form_html=null,this.form_validation_rules=null,this.opened_form=!1,this.report_form_html=null,this.report_form_validation_rules=null,this.domain=null,this.cookie=null)};return o.SORT_NEW="new",o.SORT_OLD="old",o.SORT_TOP="top",o.SORT_WORST="worst",o.SORT_AUTHOR="author",o.prototype={SORT_NEW:"new",SORT_OLD:"old",SORT_TOP:"top",SORT_WORST:"worst",SORT_AUTHOR:"author",canPost:function(){return this.init&&!this.is_admin&&this.node.canPost()},canLoadChildren:function(){return this.node.canLoadChildren()},isFormOpened:function(){return this.node.isFormOpened()},isDeleting:function(){return!1},isUndeleting:function(){return!1},getNbChildren:function(){return this.node.nb_children},closeOpenedForms:function(){this.opened_form&&(this.opened_form.close(),this.opened_form=null)},load:function(e,t,i){if(!this.init){this.domain=t||"",this.cookie=i||null,this.loading=!1,this.loaded=!0;var n=this;this.node.ui_node.render(),this.node.all_children_loaded=!1,void 0===e?this.node.loadChildren(!1,function(e){n.onFirstLoaded(e)},function(){n.init=!1,n.load()}):(this.is_admin=!0,this.setSort(o.SORT_NEW),this.node.loadChildrenIds(e,function(e){n.onFirstLoaded(e)},function(){n.init=!1,n.load(e)}))}},loadChildren:function(e){this.node.loadChildren(e)},onFirstLoaded:function(e){this.init=!0,this.show_emojis=e.show_emojis,this.allow_anonymous=e.allow_anonymous,this.force_anonymous=e.force_anonymous,this.form_html=e.form,this.form_validation_rules=e.js_validation_rules,this.report_form_html=e.report_form,this.report_form_validation_rules=e.report_js_validation_rules,this.max_level=e.max_level,this.can_post=e.can_post},shouldSendLoginCookie:function(e){if("https://"===e.substr(0,8))e=e.substr(8);else if("http://"===e.substr(0,7))e=e.substr(7);else if("/"===e.substr(0,1))return!1;var t=e.indexOf("/");return t>0&&(e=e.substr(0,t)),e.toLowerCase()!==window.location.hostname.toLowerCase()},getLoginCookie:function(){return this.cookie?this.cookie:t.get(e.dyn.dev?"session_token_dev":"session_token")},getThreadUrl:function(e,t){return this.domain+"/threads/"+this.type+"/get-posts/"+this.sort+"/"+this.id_related+"/"+e+"/"+t},getPostsUrl:function(){return this.domain+"/threads/"+this.type+"/get-posts/"+this.id_related},getVoteUrl:function(e,t){return this.domain+"/threads/"+this.type+"/vote/"+this.sort+"/"+this.id_related+"/"+e+"/"+t},getPostUrl:function(e){return this.domain+"/threads/"+this.type+"/post/"+this.id_related+"/"+e},getEditUrl:function(e){return this.domain+"/threads/"+this.type+"/edit/"+this.id_related+"/"+e},getDeleteUrl:function(e){return this.domain+"/threads/"+this.type+"/delete/"+this.id_related+"/"+e},getUndeleteUrl:function(e){return this.domain+"/threads/"+this.type+"/undelete/"+this.id_related+"/"+e},getReportUrl:function(e){return this.domain+"/threads/"+this.type+"/report/"+this.id_related+"/"+e},setSort:function(e){
return"string"!=typeof e||e!==o.SORT_NEW&&e!==o.SORT_OLD&&e!==o.SORT_TOP&&e!==o.SORT_WORST&&e!==o.SORT_AUTHOR?(this.node.ui_node.setSort(this.sort),!1):(this.sort=e,this.node.ui_node.setSort(this.sort),!0)},updateSort:function(e){return"string"==typeof e&&(e===o.SORT_NEW||e===o.SORT_OLD||e===o.SORT_TOP||e===o.SORT_WORST||e===o.SORT_AUTHOR)&&(this.sort===e||(this.node.destroyChildren(),this.setSort(e),this.init=!1,void this.load()))},getForm:function(){return this.node.getForm()},createForm:function(e){return new n(e,this.form_html,this.force_anonymous,JSON.parse(JSON.stringify(this.form_validation_rules)))},createReportForm:function(e){return new s(e,this.report_form_html,JSON.parse(JSON.stringify(this.report_form_validation_rules)))}},o}),define("text!skins/common/thread/ui/node.mustache",[],function(){return'<div class="thread-node">\r\n\t<div class="thread-node-nb-before hidden"></div>\r\n\t{{#has_profile}}\r\n\t<div class="thread-node-picture">\r\n\t\t<img src="{{{ default_img }}}" />\r\n\t\t<span class="flag-small hidden"></span>\r\n\t</div>\r\n\t{{/has_profile}}\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t<div class="thread-node-content hidden">\r\n\t\t<div class="thread-node-poster">\r\n\t\t\t{{^has_profile}}<span class="flag-small hidden"></span>{{/has_profile}}\r\n\t\t\t<span class="thread-node-poster-name"></span>\r\n\t\t\t<span class="thread-node-date"></span>\r\n\t\t</div>\r\n\t\t<div class="thread-node-message"></div>\r\n\t\t<div class="thread-node-metadata">\r\n\t\t\t<span class="icon-f icf-thumb-up"></span>\r\n\t\t\t<span class="thread-node-nb-votes votes-up"></span>\r\n\t\t\t<span class="icon-f icf-thumb-down"></span>\r\n\t\t\t<span class="thread-node-nb-votes votes-down"></span>\r\n\t\t\t<a class="thread-node-btn-post hidden">{{{ lbl_reply }}}</a>\r\n\t\t\t<a class="thread-node-btn-edit hidden">{{{ lbl_edit }}}</a>\r\n\t\t\t<a class="thread-node-btn-delete hidden">{{{ lbl_delete }}}</a>\r\n\t\t\t<a class="thread-node-btn-restore hidden">{{{ lbl_undelete }}}</a>\r\n\t\t\t<a class="thread-node-btn-report hidden">{{{ lbl_report }}}</a>\r\n\t\t</div>\r\n\t\t{{> children}}\r\n\t</div>\r\n\t<div class="thread-node-nb-after hidden"></div>\r\n</div>'}),define("text!skins/common/thread/ui/children.mustache",[],function(){return'<div class="thread-node-children hidden">\r\n\t<div class="thread-node-children-show"><span></span></div>\r\n\t<div class="thread-node-children-hide"><span>{{{ lbl_hide_replies }}}</span></div>\r\n\t<div class="thread-node-children-nodes" style="display:none"></div>\r\n</div>\r\n<div class="thread-node-children-loader hidden"></div>\r\n<div class="thread-node-children-error hidden"></div>\r\n<div class="thread-node-children-load-next">\r\n\t<a href="#" class="thread-node-btn thread-node-children-load-next-btn hidden"></a>\r\n\t<a href="#" class="thread-node-btn thread-node-children-load-all-btn hidden">{{{ lbl_load_all }}}</a>\r\n\t<a href="#" class="thread-node-btn thread-node-btn-post hidden">{{{ lbl_post_reply }}}</a>\r\n</div>'}),define("text!skins/common/thread/ui/message.mustache",[],function(){return'{{#is_video}}<span class="icon uploads"></span>{{/is_video}}\n{{#is_gallery}}<span class="icon albums"></span>{{/is_gallery}}\n{{#is_playlist}}<span class="icon playlist"></span>{{/is_playlist}}\n<a class="preview preview-{{ t }}" href="{{ u }}" data-thumb="{{{ i }}}">{{{ n }}}</a>\n{{#v}}<span class="icon-f icf-check-circle verified"></span>{{/v}}'}),define("text!skins/common/thread/ui/friend_button.mustache",[],function(){return'{{#is_friend}}\n\t<div class="thread-node-pic-bottom" title="{{{ lbl_already_friends }}}"><span class="icon-f icf-user-check"></span></div>\n{{/is_friend}}\n{{#friend_req_asked}}\n\t<div class="thread-node-pic-bottom" title="{{{ lbl_friend_req_asked }}}"><span class="icon-f icf-user-hourglass"></span></div>\n{{/friend_req_asked}}\n{{#can_ask_friend}}\n\t<div class="thread-node-pic-bottom">\n\t\t<button type="button" class="btn btn-default btn-xs thread-node-friend-ask-btn" title="{{{ lbl_add_to_friends }}}">\n\t\t\t<span class="icon-f icf-user-plus"></span>\n\t\t</button>\n\t</div>\n{{/can_ask_friend}}'}),function(e){if("function"==typeof define&&define.amd)define("jquery.textcomplete.min",["jquery"],e);else if("object"==typeof module&&module.exports){var t=require("jquery");module.exports=e(t)}else e(jQuery)}(function(e){if(void 0===e)throw new Error("jQuery.textcomplete requires jQuery");return function(e){"use strict";var t=function(e){console.warn&&console.warn(e)},i=1;e.fn.textcomplete=function(n,s){var o=Array.prototype.slice.call(arguments);return this.each(function(){var a=this,r=e(this),l=r.data("textComplete");if(l||(s||(s={}),s._oid=i++,l=new e.fn.textcomplete.Completer(this,s),r.data("textComplete",l)),"string"==typeof n){if(!l)return;o.shift(),l[n].apply(l,o),"destroy"===n&&r.removeData("textComplete")}else e.each(n,function(i){e.each(["header","footer","placement","maxCount"],function(e){i[e]&&(l.option[e]=i[e],t(e+"as a strategy param is deprecated. Use option."),delete i[e])})}),l.register(e.fn.textcomplete.Strategy.parse(n,{el:a,$el:r}))})}}(e),function(e){"use strict";function t(i,o){if(this.$el=e(i),this.id="textcomplete"+n++,this.strategies=[],this.views=[],this.option=e.extend({},t.defaults,o),!(this.$el.is("input[type=text]")||this.$el.is("input[type=search]")||this.$el.is("textarea")||i.isContentEditable||"true"==i.contentEditable))throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(i===i.ownerDocument.activeElement)this.initialize();else{var a=this;this.$el.one("focus."+this.id,function(){a.initialize()}),this.option.adapter&&"CKEditor"!=this.option.adapter||"undefined"==typeof CKEDITOR||!this.$el.is("textarea")||CKEDITOR.on("instanceReady",function(t){-1==e.inArray(t.editor.id,s)&&(s.push(t.editor.id),t.editor.on("focus",function(i){a.$el=e(t.editor.editable().$),a.option.adapter||(a.option.adapter=e.fn.textcomplete.CKEditor),a.option.ckeditor_instance=t.editor,a.initialize()}))})}}var i=function(e){return"[object String]"===Object.prototype.toString.call(e)},n=0,s=[];t.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30},e.extend(t.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var t=this.$el.get(0);if(this.$el.prop("ownerDocument")!==document&&window.frames.length)for(var i=0;i<window.frames.length;i++)if(this.$el.prop("ownerDocument")===window.frames[i].document){this.$iframe=e(window.frames[i].frameElement);break}this.dropdown=new e.fn.textcomplete.Dropdown(t,this,this.option);var n,s;this.option.adapter?n=this.option.adapter:(s=this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")?"number"==typeof t.selectionEnd?"Textarea":"IETextarea":"ContentEditable",n=e.fn.textcomplete[s]),this.adapter=new n(t,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},deactivate:function(){this.dropdown&&this.dropdown.deactivate()},trigger:function(e,t){this.dropdown||this.initialize(),null!=e||(e=this.adapter.getTextFromHeadToCaret());var i=this._extractSearchQuery(e);if(i.length){var n=i[1];if(t&&this._term===n&&""!==n)return;this._term=n,this._search.apply(this,i)}else this._term=null,this.dropdown.deactivate()},fire:function(e){var t=Array.prototype.slice.call(arguments,1);return this.$el.trigger(e,t),this},register:function(e){Array.prototype.push.apply(this.strategies,e)},select:function(e,t,i){this._term=null,this.adapter.select(e,t,i),this.fire("change").fire("textComplete:select",e,t),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(t){for(var n=0;n<this.strategies.length;n++){var s=this.strategies[n],o=s.context(t);if(o||""===o){var a=e.isFunction(s.match)?s.match(t):s.match;i(o)&&(t=o);var r=t.match(a);if(r)return[s,r[s.index],r]}}return[]},_search:function(e){var t,i;return function(){var n=Array.prototype.slice.call(arguments);if(t)return void(i=n);t=!0;var s=this;n.unshift(function o(){if(i){var n=i;i=void 0,n.unshift(o),e.apply(s,n)}else t=!1}),e.apply(this,n)}}(function(e,t,i,n){var s=this;t.search(i,function(n,o){s.dropdown.shown||s.dropdown.activate(),s._clearAtNext&&(s.dropdown.clear(),s._clearAtNext=!1),s.dropdown.setPosition(s.adapter.getCaretPosition()),s.dropdown.render(s._zip(n,t,i)),o||(e(),s._clearAtNext=!0)},n)}),_zip:function(t,i,n){return e.map(t,function(e){return{value:e,strategy:i,term:n}})}}),e.fn.textcomplete.Completer=t}(e),function(e){"use strict";function t(i,n,o){this.$el=t.createElement(o),this.completer=n,this.id=n.id+"dropdown",this._data=[],this.$inputEl=e(i),this.option=o,o.listPosition&&(this.setPosition=o.listPosition),o.height&&this.$el.height(o.height);var a=this;e.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(e,t){null!=o[t]&&(a[t]=o[t])}),this._bindEvents(i),s[this.id]=this}var i=e(window),n=function(e,t){var i,n,s=t.strategy.idProperty;for(i=0;i<e.length;i++)if(n=e[i],n.strategy===t.strategy)if(s){if(n.value[s]===t.value[s])return!0}else if(n.value===t.value)return!0;return!1},s={};e(document).on("click",function(t){var i=t.originalEvent&&t.originalEvent.keepTextCompleteDropdown;e.each(s,function(e,t){e!==i&&t.deactivate()})});var o={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};e.extend(t,{createElement:function(t){var i=t.appendTo;return i instanceof e||(i=e(i)),e("<ul></ul>").addClass(t.dropdownClassName).attr("id","textcomplete-dropdown-"+t._oid).css({display:"none",left:0,position:"absolute",zIndex:t.zIndex}).appendTo(i)}}),e.extend(t.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el.remove(),this.$el=this.$inputEl=this.completer=null,delete s[this.id]},render:function(t){var i=this._buildContents(t),n=e.map(t,function(e){return e.value});if(t.length){var s=t[0].strategy;s.id?this.$el.attr("data-strategy",s.id):this.$el.removeAttr("data-strategy"),this._renderHeader(n),this._renderFooter(n),i&&(this._renderContents(i),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(n):this.shown&&this.deactivate()},setPosition:function(t){var n="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==e(this).css("position")&&("fixed"===e(this).css("position")?(t.top-=i.scrollTop(),t.left-=i.scrollLeft(),n="fixed",!1):void 0)}),this.$el.css(this._applyPlacement(t)),this.$el.css({position:n}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(e){return 38===e.keyCode||e.ctrlKey&&80===e.keyCode},isDown:function(e){return 40===e.keyCode||e.ctrlKey&&78===e.keyCode},isEnter:function(e){return!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&(13===e.keyCode||9===e.keyCode||!0===this.option.completeOnSpace&&32===e.keyCode)},isPageup:function(e){return 33===e.keyCode},isPagedown:function(e){return 34===e.keyCode},isEscape:function(e){return 27===e.keyCode},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("touchstart."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",e.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,e.proxy(this._onKeydown,this))},_onClick:function(t){var i=e(t.target);t.preventDefault(),t.originalEvent.keepTextCompleteDropdown=this.id,i.hasClass("textcomplete-item")||(i=i.closest(".textcomplete-item"));var n=this.data[parseInt(i.data("index"),10)];this.completer.select(n.value,n.strategy,t);var s=this;setTimeout(function(){s.deactivate(),"touchstart"===t.type&&s.$inputEl.focus()},0)},_onMouseover:function(t){var i=e(t.target);t.preventDefault(),i.hasClass("textcomplete-item")||(i=i.closest(".textcomplete-item")),this._index=parseInt(i.data("index"),10),this._activateIndexedItem()},_onKeydown:function(t){if(this.shown){var i;switch(e.isFunction(this.option.onKeydown)&&(i=this.option.onKeydown(t,o)),null==i&&(i=this._defaultKeydown(t)),i){case o.KEY_UP:t.preventDefault(),this._up();break;case o.KEY_DOWN:t.preventDefault(),this._down();break;case o.KEY_ENTER:t.preventDefault(),this._enter(t);break;case o.KEY_PAGEUP:t.preventDefault(),this._pageup();break;case o.KEY_PAGEDOWN:t.preventDefault(),this._pagedown();break;case o.KEY_ESCAPE:t.preventDefault(),this.deactivate()}}},_defaultKeydown:function(e){return this.isUp(e)?o.KEY_UP:this.isDown(e)?o.KEY_DOWN:this.isEnter(e)?o.KEY_ENTER:this.isPageup(e)?o.KEY_PAGEUP:this.isPagedown(e)?o.KEY_PAGEDOWN:this.isEscape(e)?o.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(e){var t=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(t.value,t.strategy,e),this.deactivate()},_pageup:function(){var t=0,i=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(n){return e(this).position().top+e(this).outerHeight()>i?(t=n,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var t=this.data.length-1,i=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(n){return e(this).position().top>i?(t=n,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var e=this._getActiveElement(),t=e.position().top,i=e.outerHeight(),n=this.$el.innerHeight(),s=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||0>t?this.$el.scrollTop(t+s):t+i>n&&this.$el.scrollTop(t+i+s-n)},_buildContents:function(e){var t,i,s,o="";for(i=0;i<e.length&&this.data.length!==this.maxCount;i++)t=e[i],n(this.data,t)||(s=this.data.length,this.data.push(t),o+='<li class="textcomplete-item" data-index="'+s+'"><a>',o+=t.strategy.template(t.value,t.term),o+="</a></li>");return o},_renderHeader:function(t){if(this.header){this._$header||(this._$header=e('<li class="textcomplete-header"></li>').prependTo(this.$el));var i=e.isFunction(this.header)?this.header(t):this.header;this._$header.html(i)}},_renderFooter:function(t){if(this.footer){this._$footer||(this._$footer=e('<li class="textcomplete-footer"></li>').appendTo(this.$el));var i=e.isFunction(this.footer)?this.footer(t):this.footer;this._$footer.html(i)}},_renderNoResultsMessage:function(t){if(this.noResultsMessage){this._$noResultsMessage||(this._$noResultsMessage=e('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el));var i=e.isFunction(this.noResultsMessage)?this.noResultsMessage(t):this.noResultsMessage;this._$noResultsMessage.html(i)}},_renderContents:function(e){this._$footer?this._$footer.before(e):this.$el.append(e)},_fitToBottom:function(){var e=i.scrollTop()+i.height(),t=this.$el.height();this.$el.position().top+t>e&&(this.completer.$iframe||this.$el.offset({top:e-t}))},_fitToRight:function(){for(var e,t=this.option.rightEdgeOffset,n=this.$el.offset().left,s=this.$el.width(),o=i.width()-t;n+s>o&&(this.$el.offset({left:n-t}),!((e=this.$el.offset().left)>=n));)n=e},_applyPlacement:function(e){return-1!==this.placement.indexOf("top")?e={top:"auto",bottom:this.$el.parent().height()-e.top+e.lineHeight,left:e.left}:(e.bottom="auto",delete e.lineHeight),-1!==this.placement.indexOf("absleft")?e.left=0:-1!==this.placement.indexOf("absright")&&(e.right=0,e.left="auto"),e}}),e.fn.textcomplete.Dropdown=t,e.extend(e.fn.textcomplete,o)}(e),function(e){"use strict";function t(t){e.extend(this,t),this.cache&&(this.search=i(this.search))}var i=function(e){var t={};return function(i,n){t[i]?n(t[i]):e.call(this,i,function(e){t[i]=(t[i]||[]).concat(e),n.apply(null,arguments)})}};t.parse=function(i,n){return e.map(i,function(e){var i=new t(e);return i.el=n.el,i.$el=n.$el,i})},e.extend(t.prototype,{match:null,replace:null,search:null,id:null,cache:!1,context:function(){return!0},index:2,template:function(e){return e},idProperty:null}),e.fn.textcomplete.Strategy=t}(e),function(e){"use strict";function t(){}var i=Date.now||function(){return(new Date).getTime()},n=function(e,t){var n,s,o,a,r,l=function(){var u=i()-a;t>u?n=setTimeout(l,t-u):(n=null,r=e.apply(o,s),o=s=null)};return function(){return o=this,s=arguments,a=i(),n||(n=setTimeout(l,t)),r}};e.extend(t.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(t,i,s){this.el=t,this.$el=e(t),this.id=i.id+this.constructor.name,this.completer=i,this.option=s,this.option.debounce&&(this._onKeyup=n(this._onKeyup,this.option.debounce)),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var t=this._getCaretRelativePosition(),i=this.$el.offset(),n=this.option.appendTo;if(n){n instanceof e||(n=e(n));var s=n.offsetParent().offset();i.top-=s.top,i.left-=s.left}return t.top+=i.top,t.left+=i.left,t},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))},_onKeyup:function(e){this._skipSearch(e)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(e){switch(e.keyCode){case 9:case 13:case 16:case 17:case 18:case 33:case 34:case 40:case 38:case 27:return!0}if(e.ctrlKey)switch(e.keyCode){case 78:case 80:return!0}}}),e.fn.textcomplete.Adapter=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,i,n){var s,o=this.getTextFromHeadToCaret(),a=this.el.value.substring(this.el.selectionEnd),r=i.replace(t,n);void 0!==r&&(e.isArray(r)&&(a=r[1]+a,r=r[0]),s=e.isFunction(i.match)?i.match(o):i.match,o=o.replace(s,r),this.$el.val(o+a),this.el.selectionStart=this.el.selectionEnd=o.length)},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var t=e.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:t.top+this._calculateLineHeight()-this.$el.scrollTop(),left:t.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()}},_calculateLineHeight:function(){var e=parseInt(this.$el.css("line-height"),10);if(isNaN(e)){var t=this.el.parentNode,i=document.createElement(this.el.nodeName),n=this.el.style;i.setAttribute("style","margin:0px;padding:0px;font-family:"+n.fontFamily+";font-size:"+n.fontSize),i.innerHTML="test",t.appendChild(i),e=i.clientHeight,t.removeChild(i)}return e}}),e.fn.textcomplete.Textarea=t}(e),function(e){"use strict";function t(t,n,s){this.initialize(t,n,s),e("<span>"+i+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(t)}var i="吶";e.extend(t.prototype,e.fn.textcomplete.Textarea.prototype,{select:function(t,i,n){var s,o=this.getTextFromHeadToCaret(),a=this.el.value.substring(o.length),r=i.replace(t,n);if(void 0!==r){e.isArray(r)&&(a=r[1]+a,r=r[0]),s=e.isFunction(i.match)?i.match(o):i.match,o=o.replace(s,r),this.$el.val(o+a),this.el.focus();var l=this.el.createTextRange();l.collapse(!0),l.moveEnd("character",o.length),l.moveStart("character",o.length),l.select()}},getTextFromHeadToCaret:function(){this.el.focus();var e=document.selection.createRange();e.moveStart("character",-this.el.value.length);var t=e.text.split(i);return 1===t.length?t[0]:t[1]}}),e.fn.textcomplete.IETextarea=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,i,n){var s=this.getTextFromHeadToCaret(),o=this.el.ownerDocument.getSelection(),a=o.getRangeAt(0),r=a.cloneRange();r.selectNodeContents(a.startContainer);var l,u=r.toString(),f=u.substring(a.startOffset),d=i.replace(t,n);if(void 0!==d){e.isArray(d)&&(f=d[1]+f,d=d[0]),l=e.isFunction(i.match)?i.match(s):i.match,s=s.replace(l,d).replace(/ $/,"&nbsp"),a.selectNodeContents(a.startContainer),a.deleteContents();var c=this.el.ownerDocument.createElement("div");c.innerHTML=s;var h=this.el.ownerDocument.createElement("div");h.innerHTML=f;for(var p,_,g=this.el.ownerDocument.createDocumentFragment();p=c.firstChild;)_=g.appendChild(p);for(;p=h.firstChild;)g.appendChild(p);a.insertNode(g),a.setStartAfter(_),a.collapse(!0),o.removeAllRanges(),o.addRange(a)}},_getCaretRelativePosition:function(){var t=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange(),i=t.endContainer.parentNode,n=this.el.ownerDocument.createElement("span");t.insertNode(n),t.selectNodeContents(n),t.deleteContents(),setTimeout(function(){i.normalize()},0);var s=e(n),o=s.offset();if(o.left-=this.$el.offset().left,o.top+=s.height()-this.$el.offset().top,o.lineHeight=s.height(),this.completer.$iframe){var a=this.completer.$iframe.offset();o.top+=a.top,o.left+=a.left,o.top-=e(this.completer.$iframe[0].contentWindow.document).scrollTop()}return s.remove(),o},getTextFromHeadToCaret:function(){var e=this.el.ownerDocument.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(e.startContainer),t.toString().substring(0,e.startOffset)}}),e.fn.textcomplete.ContentEditable=t}(e),function(e){"use strict";function t(e,t,i){this.initialize(e,t,i)}e.extend(t.prototype,e.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var t=this;this.option.ckeditor_instance.on("key",function(e){var i=e.data;return t._onKeyup(i),(!t.completer.dropdown.shown||!t._skipSearch(i))&&void 0},null,null,1),this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))}}),e.fn.textcomplete.CKEditor=t}(e),function(e){function t(e,t,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var r=document.querySelector("#input-textarea-caret-position-mirror-div");r&&r.parentNode.removeChild(r)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var u=l.style,f=window.getComputedStyle?getComputedStyle(e):e.currentStyle;u.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(u.wordWrap="break-word"),u.position="absolute",a||(u.visibility="hidden"),i.forEach(function(e){u[e]=f[e]}),s?e.scrollHeight>parseInt(f.height)&&(u.overflowY="scroll"):u.overflow="hidden",l.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(l.textContent=l.textContent.replace(/\s/g," "));var d=document.createElement("span");d.textContent=e.value.substring(t)||".",l.appendChild(d);var c={top:d.offsetTop+parseInt(f.borderTopWidth),left:d.offsetLeft+parseInt(f.borderLeftWidth)};return a?d.style.backgroundColor="#aaa":document.body.removeChild(l),c}var i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,s=n&&null!=window.mozInnerScreenX;e.fn.textcomplete.getCaretCoordinates=t}(e),e}),!function(e){e.emojioneList={":kiss_ww:":["1f469-200d-2764-fe0f-200d-1f48b-200d-1f469","1f469-2764-1f48b-1f469"],":couplekiss_ww:":["1f469-200d-2764-fe0f-200d-1f48b-200d-1f469","1f469-2764-1f48b-1f469"],":kiss_mm:":["1f468-200d-2764-fe0f-200d-1f48b-200d-1f468","1f468-2764-1f48b-1f468"],":couplekiss_mm:":["1f468-200d-2764-fe0f-200d-1f48b-200d-1f468","1f468-2764-1f48b-1f468"],":family_mmbb:":["1f468-200d-1f468-200d-1f466-200d-1f466","1f468-1f468-1f466-1f466"],":family_mmgb:":["1f468-200d-1f468-200d-1f467-200d-1f466","1f468-1f468-1f467-1f466"],":family_mmgg:":["1f468-200d-1f468-200d-1f467-200d-1f467","1f468-1f468-1f467-1f467"],":family_mwbb:":["1f468-200d-1f469-200d-1f466-200d-1f466","1f468-1f469-1f466-1f466"],":family_mwgb:":["1f468-200d-1f469-200d-1f467-200d-1f466","1f468-1f469-1f467-1f466"],":family_mwgg:":["1f468-200d-1f469-200d-1f467-200d-1f467","1f468-1f469-1f467-1f467"],":family_wwbb:":["1f469-200d-1f469-200d-1f466-200d-1f466","1f469-1f469-1f466-1f466"],":family_wwgb:":["1f469-200d-1f469-200d-1f467-200d-1f466","1f469-1f469-1f467-1f466"],":family_wwgg:":["1f469-200d-1f469-200d-1f467-200d-1f467","1f469-1f469-1f467-1f467"],":couple_ww:":["1f469-200d-2764-fe0f-200d-1f469","1f469-2764-1f469"],":couple_with_heart_ww:":["1f469-200d-2764-fe0f-200d-1f469","1f469-2764-1f469"],":couple_mm:":["1f468-200d-2764-fe0f-200d-1f468","1f468-2764-1f468"],":couple_with_heart_mm:":["1f468-200d-2764-fe0f-200d-1f468","1f468-2764-1f468"],":family_mmb:":["1f468-200d-1f468-200d-1f466","1f468-1f468-1f466"],":family_mmg:":["1f468-200d-1f468-200d-1f467","1f468-1f468-1f467"],":family_mwg:":["1f468-200d-1f469-200d-1f467","1f468-1f469-1f467"],":family_wwb:":["1f469-200d-1f469-200d-1f466","1f469-1f469-1f466"],":family_wwg:":["1f469-200d-1f469-200d-1f467","1f469-1f469-1f467"],":eye_in_speech_bubble:":["1f441-200d-1f5e8","1f441-1f5e8"],":hash:":["0023-fe0f-20e3","0023-20e3"],":zero:":["0030-fe0f-20e3","0030-20e3"],":one:":["0031-fe0f-20e3","0031-20e3"],":two:":["0032-fe0f-20e3","0032-20e3"],":three:":["0033-fe0f-20e3","0033-20e3"],":four:":["0034-fe0f-20e3","0034-20e3"],":five:":["0035-fe0f-20e3","0035-20e3"],":six:":["0036-fe0f-20e3","0036-20e3"],":seven:":["0037-fe0f-20e3","0037-20e3"],":eight:":["0038-fe0f-20e3","0038-20e3"],":nine:":["0039-fe0f-20e3","0039-20e3"],":asterisk:":["002a-fe0f-20e3","002a-20e3"],":keycap_asterisk:":["002a-fe0f-20e3","002a-20e3"],":metal_tone5:":["1f918-1f3ff"],":sign_of_the_horns_tone5:":["1f918-1f3ff"],":metal_tone4:":["1f918-1f3fe"],":sign_of_the_horns_tone4:":["1f918-1f3fe"],":metal_tone3:":["1f918-1f3fd"],":sign_of_the_horns_tone3:":["1f918-1f3fd"],":metal_tone2:":["1f918-1f3fc"],":sign_of_the_horns_tone2:":["1f918-1f3fc"],":metal_tone1:":["1f918-1f3fb"],":sign_of_the_horns_tone1:":["1f918-1f3fb"],":bath_tone5:":["1f6c0-1f3ff"],":bath_tone4:":["1f6c0-1f3fe"],":bath_tone3:":["1f6c0-1f3fd"],":bath_tone2:":["1f6c0-1f3fc"],":bath_tone1:":["1f6c0-1f3fb"],":walking_tone5:":["1f6b6-1f3ff"],":walking_tone4:":["1f6b6-1f3fe"],":walking_tone3:":["1f6b6-1f3fd"],":walking_tone2:":["1f6b6-1f3fc"],":walking_tone1:":["1f6b6-1f3fb"],":mountain_bicyclist_tone5:":["1f6b5-1f3ff"],":mountain_bicyclist_tone4:":["1f6b5-1f3fe"],":mountain_bicyclist_tone3:":["1f6b5-1f3fd"],":mountain_bicyclist_tone2:":["1f6b5-1f3fc"],":mountain_bicyclist_tone1:":["1f6b5-1f3fb"],":bicyclist_tone5:":["1f6b4-1f3ff"],":bicyclist_tone4:":["1f6b4-1f3fe"],":bicyclist_tone3:":["1f6b4-1f3fd"],":bicyclist_tone2:":["1f6b4-1f3fc"],":bicyclist_tone1:":["1f6b4-1f3fb"],":rowboat_tone5:":["1f6a3-1f3ff"],":rowboat_tone4:":["1f6a3-1f3fe"],":rowboat_tone3:":["1f6a3-1f3fd"],":rowboat_tone2:":["1f6a3-1f3fc"],":rowboat_tone1:":["1f6a3-1f3fb"],":pray_tone5:":["1f64f-1f3ff"],":pray_tone4:":["1f64f-1f3fe"],":pray_tone3:":["1f64f-1f3fd"],":pray_tone2:":["1f64f-1f3fc"],":pray_tone1:":["1f64f-1f3fb"],":person_with_pouting_face_tone5:":["1f64e-1f3ff"],":person_with_pouting_face_tone4:":["1f64e-1f3fe"],":person_with_pouting_face_tone3:":["1f64e-1f3fd"],":person_with_pouting_face_tone2:":["1f64e-1f3fc"],":person_with_pouting_face_tone1:":["1f64e-1f3fb"],":person_frowning_tone5:":["1f64d-1f3ff"],":person_frowning_tone4:":["1f64d-1f3fe"],":person_frowning_tone3:":["1f64d-1f3fd"],":person_frowning_tone2:":["1f64d-1f3fc"],":person_frowning_tone1:":["1f64d-1f3fb"],":raised_hands_tone5:":["1f64c-1f3ff"],":raised_hands_tone4:":["1f64c-1f3fe"],":raised_hands_tone3:":["1f64c-1f3fd"],":raised_hands_tone2:":["1f64c-1f3fc"],":raised_hands_tone1:":["1f64c-1f3fb"],":raising_hand_tone5:":["1f64b-1f3ff"],":raising_hand_tone4:":["1f64b-1f3fe"],":raising_hand_tone3:":["1f64b-1f3fd"],":raising_hand_tone2:":["1f64b-1f3fc"],":raising_hand_tone1:":["1f64b-1f3fb"],":bow_tone5:":["1f647-1f3ff"],":bow_tone4:":["1f647-1f3fe"],":bow_tone3:":["1f647-1f3fd"],":bow_tone2:":["1f647-1f3fc"],":bow_tone1:":["1f647-1f3fb"],":ok_woman_tone5:":["1f646-1f3ff"],":ok_woman_tone4:":["1f646-1f3fe"],":ok_woman_tone3:":["1f646-1f3fd"],":ok_woman_tone2:":["1f646-1f3fc"],":ok_woman_tone1:":["1f646-1f3fb"],":no_good_tone5:":["1f645-1f3ff"],":no_good_tone4:":["1f645-1f3fe"],":no_good_tone3:":["1f645-1f3fd"],":no_good_tone2:":["1f645-1f3fc"],":no_good_tone1:":["1f645-1f3fb"],":vulcan_tone5:":["1f596-1f3ff"],":raised_hand_with_part_between_middle_and_ring_fingers_tone5:":["1f596-1f3ff"],":vulcan_tone4:":["1f596-1f3fe"],":raised_hand_with_part_between_middle_and_ring_fingers_tone4:":["1f596-1f3fe"],":vulcan_tone3:":["1f596-1f3fd"],":raised_hand_with_part_between_middle_and_ring_fingers_tone3:":["1f596-1f3fd"],":vulcan_tone2:":["1f596-1f3fc"],":raised_hand_with_part_between_middle_and_ring_fingers_tone2:":["1f596-1f3fc"],":vulcan_tone1:":["1f596-1f3fb"],":raised_hand_with_part_between_middle_and_ring_fingers_tone1:":["1f596-1f3fb"],":middle_finger_tone5:":["1f595-1f3ff"],":reversed_hand_with_middle_finger_extended_tone5:":["1f595-1f3ff"],":middle_finger_tone4:":["1f595-1f3fe"],":reversed_hand_with_middle_finger_extended_tone4:":["1f595-1f3fe"],":middle_finger_tone3:":["1f595-1f3fd"],":reversed_hand_with_middle_finger_extended_tone3:":["1f595-1f3fd"],":middle_finger_tone2:":["1f595-1f3fc"],":reversed_hand_with_middle_finger_extended_tone2:":["1f595-1f3fc"],":middle_finger_tone1:":["1f595-1f3fb"],":reversed_hand_with_middle_finger_extended_tone1:":["1f595-1f3fb"],":hand_splayed_tone5:":["1f590-1f3ff"],":raised_hand_with_fingers_splayed_tone5:":["1f590-1f3ff"],":hand_splayed_tone4:":["1f590-1f3fe"],":raised_hand_with_fingers_splayed_tone4:":["1f590-1f3fe"],":hand_splayed_tone3:":["1f590-1f3fd"],":raised_hand_with_fingers_splayed_tone3:":["1f590-1f3fd"],":hand_splayed_tone2:":["1f590-1f3fc"],":raised_hand_with_fingers_splayed_tone2:":["1f590-1f3fc"],":hand_splayed_tone1:":["1f590-1f3fb"],":raised_hand_with_fingers_splayed_tone1:":["1f590-1f3fb"],":spy_tone5:":["1f575-1f3ff"],":sleuth_or_spy_tone5:":["1f575-1f3ff"],":spy_tone4:":["1f575-1f3fe"],":sleuth_or_spy_tone4:":["1f575-1f3fe"],":spy_tone3:":["1f575-1f3fd"],":sleuth_or_spy_tone3:":["1f575-1f3fd"],":spy_tone2:":["1f575-1f3fc"],":sleuth_or_spy_tone2:":["1f575-1f3fc"],":spy_tone1:":["1f575-1f3fb"],":sleuth_or_spy_tone1:":["1f575-1f3fb"],":muscle_tone5:":["1f4aa-1f3ff"],":muscle_tone4:":["1f4aa-1f3fe"],":muscle_tone3:":["1f4aa-1f3fd"],":muscle_tone2:":["1f4aa-1f3fc"],":muscle_tone1:":["1f4aa-1f3fb"],":haircut_tone5:":["1f487-1f3ff"],":haircut_tone4:":["1f487-1f3fe"],":haircut_tone3:":["1f487-1f3fd"],":haircut_tone2:":["1f487-1f3fc"],":haircut_tone1:":["1f487-1f3fb"],":massage_tone5:":["1f486-1f3ff"],":massage_tone4:":["1f486-1f3fe"],
":massage_tone3:":["1f486-1f3fd"],":massage_tone2:":["1f486-1f3fc"],":massage_tone1:":["1f486-1f3fb"],":nail_care_tone5:":["1f485-1f3ff"],":nail_care_tone4:":["1f485-1f3fe"],":nail_care_tone3:":["1f485-1f3fd"],":nail_care_tone2:":["1f485-1f3fc"],":nail_care_tone1:":["1f485-1f3fb"],":dancer_tone5:":["1f483-1f3ff"],":dancer_tone4:":["1f483-1f3fe"],":dancer_tone3:":["1f483-1f3fd"],":dancer_tone2:":["1f483-1f3fc"],":dancer_tone1:":["1f483-1f3fb"],":guardsman_tone5:":["1f482-1f3ff"],":guardsman_tone4:":["1f482-1f3fe"],":guardsman_tone3:":["1f482-1f3fd"],":guardsman_tone2:":["1f482-1f3fc"],":guardsman_tone1:":["1f482-1f3fb"],":information_desk_person_tone5:":["1f481-1f3ff"],":information_desk_person_tone4:":["1f481-1f3fe"],":information_desk_person_tone3:":["1f481-1f3fd"],":information_desk_person_tone2:":["1f481-1f3fc"],":information_desk_person_tone1:":["1f481-1f3fb"],":angel_tone5:":["1f47c-1f3ff"],":angel_tone4:":["1f47c-1f3fe"],":angel_tone3:":["1f47c-1f3fd"],":angel_tone2:":["1f47c-1f3fc"],":angel_tone1:":["1f47c-1f3fb"],":princess_tone5:":["1f478-1f3ff"],":princess_tone4:":["1f478-1f3fe"],":princess_tone3:":["1f478-1f3fd"],":princess_tone2:":["1f478-1f3fc"],":princess_tone1:":["1f478-1f3fb"],":construction_worker_tone5:":["1f477-1f3ff"],":construction_worker_tone4:":["1f477-1f3fe"],":construction_worker_tone3:":["1f477-1f3fd"],":construction_worker_tone2:":["1f477-1f3fc"],":construction_worker_tone1:":["1f477-1f3fb"],":baby_tone5:":["1f476-1f3ff"],":baby_tone4:":["1f476-1f3fe"],":baby_tone3:":["1f476-1f3fd"],":baby_tone2:":["1f476-1f3fc"],":baby_tone1:":["1f476-1f3fb"],":older_woman_tone5:":["1f475-1f3ff"],":grandma_tone5:":["1f475-1f3ff"],":older_woman_tone4:":["1f475-1f3fe"],":grandma_tone4:":["1f475-1f3fe"],":older_woman_tone3:":["1f475-1f3fd"],":grandma_tone3:":["1f475-1f3fd"],":older_woman_tone2:":["1f475-1f3fc"],":grandma_tone2:":["1f475-1f3fc"],":older_woman_tone1:":["1f475-1f3fb"],":grandma_tone1:":["1f475-1f3fb"],":older_man_tone5:":["1f474-1f3ff"],":older_man_tone4:":["1f474-1f3fe"],":older_man_tone3:":["1f474-1f3fd"],":older_man_tone2:":["1f474-1f3fc"],":older_man_tone1:":["1f474-1f3fb"],":man_with_turban_tone5:":["1f473-1f3ff"],":man_with_turban_tone4:":["1f473-1f3fe"],":man_with_turban_tone3:":["1f473-1f3fd"],":man_with_turban_tone2:":["1f473-1f3fc"],":man_with_turban_tone1:":["1f473-1f3fb"],":man_with_gua_pi_mao_tone5:":["1f472-1f3ff"],":man_with_gua_pi_mao_tone4:":["1f472-1f3fe"],":man_with_gua_pi_mao_tone3:":["1f472-1f3fd"],":man_with_gua_pi_mao_tone2:":["1f472-1f3fc"],":man_with_gua_pi_mao_tone1:":["1f472-1f3fb"],":person_with_blond_hair_tone5:":["1f471-1f3ff"],":person_with_blond_hair_tone4:":["1f471-1f3fe"],":person_with_blond_hair_tone3:":["1f471-1f3fd"],":person_with_blond_hair_tone2:":["1f471-1f3fc"],":person_with_blond_hair_tone1:":["1f471-1f3fb"],":bride_with_veil_tone5:":["1f470-1f3ff"],":bride_with_veil_tone4:":["1f470-1f3fe"],":bride_with_veil_tone3:":["1f470-1f3fd"],":bride_with_veil_tone2:":["1f470-1f3fc"],":bride_with_veil_tone1:":["1f470-1f3fb"],":cop_tone5:":["1f46e-1f3ff"],":cop_tone4:":["1f46e-1f3fe"],":cop_tone3:":["1f46e-1f3fd"],":cop_tone2:":["1f46e-1f3fc"],":cop_tone1:":["1f46e-1f3fb"],":woman_tone5:":["1f469-1f3ff"],":woman_tone4:":["1f469-1f3fe"],":woman_tone3:":["1f469-1f3fd"],":woman_tone2:":["1f469-1f3fc"],":woman_tone1:":["1f469-1f3fb"],":man_tone5:":["1f468-1f3ff"],":man_tone4:":["1f468-1f3fe"],":man_tone3:":["1f468-1f3fd"],":man_tone2:":["1f468-1f3fc"],":man_tone1:":["1f468-1f3fb"],":girl_tone5:":["1f467-1f3ff"],":girl_tone4:":["1f467-1f3fe"],":girl_tone3:":["1f467-1f3fd"],":girl_tone2:":["1f467-1f3fc"],":girl_tone1:":["1f467-1f3fb"],":boy_tone5:":["1f466-1f3ff"],":boy_tone4:":["1f466-1f3fe"],":boy_tone3:":["1f466-1f3fd"],":boy_tone2:":["1f466-1f3fc"],":boy_tone1:":["1f466-1f3fb"],":open_hands_tone5:":["1f450-1f3ff"],":open_hands_tone4:":["1f450-1f3fe"],":open_hands_tone3:":["1f450-1f3fd"],":open_hands_tone2:":["1f450-1f3fc"],":open_hands_tone1:":["1f450-1f3fb"],":clap_tone5:":["1f44f-1f3ff"],":clap_tone4:":["1f44f-1f3fe"],":clap_tone3:":["1f44f-1f3fd"],":clap_tone2:":["1f44f-1f3fc"],":clap_tone1:":["1f44f-1f3fb"],":thumbsdown_tone5:":["1f44e-1f3ff"],":-1_tone5:":["1f44e-1f3ff"],":thumbsdown_tone4:":["1f44e-1f3fe"],":-1_tone4:":["1f44e-1f3fe"],":thumbsdown_tone3:":["1f44e-1f3fd"],":-1_tone3:":["1f44e-1f3fd"],":thumbsdown_tone2:":["1f44e-1f3fc"],":-1_tone2:":["1f44e-1f3fc"],":thumbsdown_tone1:":["1f44e-1f3fb"],":-1_tone1:":["1f44e-1f3fb"],":thumbsup_tone5:":["1f44d-1f3ff"],":+1_tone5:":["1f44d-1f3ff"],":thumbsup_tone4:":["1f44d-1f3fe"],":+1_tone4:":["1f44d-1f3fe"],":thumbsup_tone3:":["1f44d-1f3fd"],":+1_tone3:":["1f44d-1f3fd"],":thumbsup_tone2:":["1f44d-1f3fc"],":+1_tone2:":["1f44d-1f3fc"],":thumbsup_tone1:":["1f44d-1f3fb"],":+1_tone1:":["1f44d-1f3fb"],":ok_hand_tone5:":["1f44c-1f3ff"],":ok_hand_tone4:":["1f44c-1f3fe"],":ok_hand_tone3:":["1f44c-1f3fd"],":ok_hand_tone2:":["1f44c-1f3fc"],":ok_hand_tone1:":["1f44c-1f3fb"],":wave_tone5:":["1f44b-1f3ff"],":wave_tone4:":["1f44b-1f3fe"],":wave_tone3:":["1f44b-1f3fd"],":wave_tone2:":["1f44b-1f3fc"],":wave_tone1:":["1f44b-1f3fb"],":punch_tone5:":["1f44a-1f3ff"],":punch_tone4:":["1f44a-1f3fe"],":punch_tone3:":["1f44a-1f3fd"],":punch_tone2:":["1f44a-1f3fc"],":punch_tone1:":["1f44a-1f3fb"],":point_right_tone5:":["1f449-1f3ff"],":point_right_tone4:":["1f449-1f3fe"],":point_right_tone3:":["1f449-1f3fd"],":point_right_tone2:":["1f449-1f3fc"],":point_right_tone1:":["1f449-1f3fb"],":point_left_tone5:":["1f448-1f3ff"],":point_left_tone4:":["1f448-1f3fe"],":point_left_tone3:":["1f448-1f3fd"],":point_left_tone2:":["1f448-1f3fc"],":point_left_tone1:":["1f448-1f3fb"],":point_down_tone5:":["1f447-1f3ff"],":point_down_tone4:":["1f447-1f3fe"],":point_down_tone3:":["1f447-1f3fd"],":point_down_tone2:":["1f447-1f3fc"],":point_down_tone1:":["1f447-1f3fb"],":point_up_2_tone5:":["1f446-1f3ff"],":point_up_2_tone4:":["1f446-1f3fe"],":point_up_2_tone3:":["1f446-1f3fd"],":point_up_2_tone2:":["1f446-1f3fc"],":point_up_2_tone1:":["1f446-1f3fb"],":nose_tone5:":["1f443-1f3ff"],":nose_tone4:":["1f443-1f3fe"],":nose_tone3:":["1f443-1f3fd"],":nose_tone2:":["1f443-1f3fc"],":nose_tone1:":["1f443-1f3fb"],":ear_tone5:":["1f442-1f3ff"],":ear_tone4:":["1f442-1f3fe"],":ear_tone3:":["1f442-1f3fd"],":ear_tone2:":["1f442-1f3fc"],":ear_tone1:":["1f442-1f3fb"],":lifter_tone5:":["1f3cb-1f3ff"],":weight_lifter_tone5:":["1f3cb-1f3ff"],":lifter_tone4:":["1f3cb-1f3fe"],":weight_lifter_tone4:":["1f3cb-1f3fe"],":lifter_tone3:":["1f3cb-1f3fd"],":weight_lifter_tone3:":["1f3cb-1f3fd"],":lifter_tone2:":["1f3cb-1f3fc"],":weight_lifter_tone2:":["1f3cb-1f3fc"],":lifter_tone1:":["1f3cb-1f3fb"],":weight_lifter_tone1:":["1f3cb-1f3fb"],":swimmer_tone5:":["1f3ca-1f3ff"],":swimmer_tone4:":["1f3ca-1f3fe"],":swimmer_tone3:":["1f3ca-1f3fd"],":swimmer_tone2:":["1f3ca-1f3fc"],":swimmer_tone1:":["1f3ca-1f3fb"],":horse_racing_tone5:":["1f3c7-1f3ff"],":horse_racing_tone4:":["1f3c7-1f3fe"],":horse_racing_tone3:":["1f3c7-1f3fd"],":horse_racing_tone2:":["1f3c7-1f3fc"],":horse_racing_tone1:":["1f3c7-1f3fb"],":surfer_tone5:":["1f3c4-1f3ff"],":surfer_tone4:":["1f3c4-1f3fe"],":surfer_tone3:":["1f3c4-1f3fd"],":surfer_tone2:":["1f3c4-1f3fc"],":surfer_tone1:":["1f3c4-1f3fb"],":runner_tone5:":["1f3c3-1f3ff"],":runner_tone4:":["1f3c3-1f3fe"],":runner_tone3:":["1f3c3-1f3fd"],":runner_tone2:":["1f3c3-1f3fc"],":runner_tone1:":["1f3c3-1f3fb"],":santa_tone5:":["1f385-1f3ff"],":santa_tone4:":["1f385-1f3fe"],":santa_tone3:":["1f385-1f3fd"],":santa_tone2:":["1f385-1f3fc"],":santa_tone1:":["1f385-1f3fb"],":flag_zw:":["1f1ff-1f1fc"],":zw:":["1f1ff-1f1fc"],":flag_zm:":["1f1ff-1f1f2"],":zm:":["1f1ff-1f1f2"],":flag_za:":["1f1ff-1f1e6"],":za:":["1f1ff-1f1e6"],":flag_yt:":["1f1fe-1f1f9"],":yt:":["1f1fe-1f1f9"],":flag_ye:":["1f1fe-1f1ea"],":ye:":["1f1fe-1f1ea"],":flag_xk:":["1f1fd-1f1f0"],":xk:":["1f1fd-1f1f0"],":flag_ws:":["1f1fc-1f1f8"],":ws:":["1f1fc-1f1f8"],":flag_wf:":["1f1fc-1f1eb"],":wf:":["1f1fc-1f1eb"],":flag_vu:":["1f1fb-1f1fa"],":vu:":["1f1fb-1f1fa"],":flag_vn:":["1f1fb-1f1f3"],":vn:":["1f1fb-1f1f3"],":flag_vi:":["1f1fb-1f1ee"],":vi:":["1f1fb-1f1ee"],":flag_vg:":["1f1fb-1f1ec"],":vg:":["1f1fb-1f1ec"],":flag_ve:":["1f1fb-1f1ea"],":ve:":["1f1fb-1f1ea"],":flag_vc:":["1f1fb-1f1e8"],":vc:":["1f1fb-1f1e8"],":flag_va:":["1f1fb-1f1e6"],":va:":["1f1fb-1f1e6"],":flag_uz:":["1f1fa-1f1ff"],":uz:":["1f1fa-1f1ff"],":flag_uy:":["1f1fa-1f1fe"],":uy:":["1f1fa-1f1fe"],":flag_us:":["1f1fa-1f1f8"],":us:":["1f1fa-1f1f8"],":flag_um:":["1f1fa-1f1f2"],":um:":["1f1fa-1f1f2"],":flag_ug:":["1f1fa-1f1ec"],":ug:":["1f1fa-1f1ec"],":flag_ua:":["1f1fa-1f1e6"],":ua:":["1f1fa-1f1e6"],":flag_tz:":["1f1f9-1f1ff"],":tz:":["1f1f9-1f1ff"],":flag_tw:":["1f1f9-1f1fc"],":tw:":["1f1f9-1f1fc"],":flag_tv:":["1f1f9-1f1fb"],":tuvalu:":["1f1f9-1f1fb"],":flag_tt:":["1f1f9-1f1f9"],":tt:":["1f1f9-1f1f9"],":flag_tr:":["1f1f9-1f1f7"],":tr:":["1f1f9-1f1f7"],":flag_to:":["1f1f9-1f1f4"],":to:":["1f1f9-1f1f4"],":flag_tn:":["1f1f9-1f1f3"],":tn:":["1f1f9-1f1f3"],":flag_tm:":["1f1f9-1f1f2"],":turkmenistan:":["1f1f9-1f1f2"],":flag_tl:":["1f1f9-1f1f1"],":tl:":["1f1f9-1f1f1"],":flag_tk:":["1f1f9-1f1f0"],":tk:":["1f1f9-1f1f0"],":flag_tj:":["1f1f9-1f1ef"],":tj:":["1f1f9-1f1ef"],":flag_th:":["1f1f9-1f1ed"],":th:":["1f1f9-1f1ed"],":flag_tg:":["1f1f9-1f1ec"],":tg:":["1f1f9-1f1ec"],":flag_tf:":["1f1f9-1f1eb"],":tf:":["1f1f9-1f1eb"],":flag_td:":["1f1f9-1f1e9"],":td:":["1f1f9-1f1e9"],":flag_tc:":["1f1f9-1f1e8"],":tc:":["1f1f9-1f1e8"],":flag_ta:":["1f1f9-1f1e6"],":ta:":["1f1f9-1f1e6"],":flag_sz:":["1f1f8-1f1ff"],":sz:":["1f1f8-1f1ff"],":flag_sy:":["1f1f8-1f1fe"],":sy:":["1f1f8-1f1fe"],":flag_sx:":["1f1f8-1f1fd"],":sx:":["1f1f8-1f1fd"],":flag_sv:":["1f1f8-1f1fb"],":sv:":["1f1f8-1f1fb"],":flag_st:":["1f1f8-1f1f9"],":st:":["1f1f8-1f1f9"],":flag_ss:":["1f1f8-1f1f8"],":ss:":["1f1f8-1f1f8"],":flag_sr:":["1f1f8-1f1f7"],":sr:":["1f1f8-1f1f7"],":flag_so:":["1f1f8-1f1f4"],":so:":["1f1f8-1f1f4"],":flag_sn:":["1f1f8-1f1f3"],":sn:":["1f1f8-1f1f3"],":flag_sm:":["1f1f8-1f1f2"],":sm:":["1f1f8-1f1f2"],":flag_sl:":["1f1f8-1f1f1"],":sl:":["1f1f8-1f1f1"],":flag_sk:":["1f1f8-1f1f0"],":sk:":["1f1f8-1f1f0"],":flag_sj:":["1f1f8-1f1ef"],":sj:":["1f1f8-1f1ef"],":flag_si:":["1f1f8-1f1ee"],":si:":["1f1f8-1f1ee"],":flag_sh:":["1f1f8-1f1ed"],":sh:":["1f1f8-1f1ed"],":flag_sg:":["1f1f8-1f1ec"],":sg:":["1f1f8-1f1ec"],":flag_se:":["1f1f8-1f1ea"],":se:":["1f1f8-1f1ea"],":flag_sd:":["1f1f8-1f1e9"],":sd:":["1f1f8-1f1e9"],":flag_sc:":["1f1f8-1f1e8"],":sc:":["1f1f8-1f1e8"],":flag_sb:":["1f1f8-1f1e7"],":sb:":["1f1f8-1f1e7"],":flag_sa:":["1f1f8-1f1e6"],":saudiarabia:":["1f1f8-1f1e6"],":saudi:":["1f1f8-1f1e6"],":flag_rw:":["1f1f7-1f1fc"],":rw:":["1f1f7-1f1fc"],":flag_ru:":["1f1f7-1f1fa"],":ru:":["1f1f7-1f1fa"],":flag_rs:":["1f1f7-1f1f8"],":rs:":["1f1f7-1f1f8"],":flag_ro:":["1f1f7-1f1f4"],":ro:":["1f1f7-1f1f4"],":flag_re:":["1f1f7-1f1ea"],":re:":["1f1f7-1f1ea"],":flag_qa:":["1f1f6-1f1e6"],":qa:":["1f1f6-1f1e6"],":flag_py:":["1f1f5-1f1fe"],":py:":["1f1f5-1f1fe"],":flag_pw:":["1f1f5-1f1fc"],":pw:":["1f1f5-1f1fc"],":flag_pt:":["1f1f5-1f1f9"],":pt:":["1f1f5-1f1f9"],":flag_ps:":["1f1f5-1f1f8"],":ps:":["1f1f5-1f1f8"],":flag_pr:":["1f1f5-1f1f7"],":pr:":["1f1f5-1f1f7"],":flag_pn:":["1f1f5-1f1f3"],":pn:":["1f1f5-1f1f3"],":flag_pm:":["1f1f5-1f1f2"],":pm:":["1f1f5-1f1f2"],":flag_pl:":["1f1f5-1f1f1"],":pl:":["1f1f5-1f1f1"],":flag_pk:":["1f1f5-1f1f0"],":pk:":["1f1f5-1f1f0"],":flag_ph:":["1f1f5-1f1ed"],":ph:":["1f1f5-1f1ed"],":flag_pg:":["1f1f5-1f1ec"],":pg:":["1f1f5-1f1ec"],":flag_pf:":["1f1f5-1f1eb"],":pf:":["1f1f5-1f1eb"],":flag_pe:":["1f1f5-1f1ea"],":pe:":["1f1f5-1f1ea"],":flag_pa:":["1f1f5-1f1e6"],":pa:":["1f1f5-1f1e6"],":flag_om:":["1f1f4-1f1f2"],":om:":["1f1f4-1f1f2"],":flag_nz:":["1f1f3-1f1ff"],":nz:":["1f1f3-1f1ff"],":flag_nu:":["1f1f3-1f1fa"],":nu:":["1f1f3-1f1fa"],":flag_nr:":["1f1f3-1f1f7"],":nr:":["1f1f3-1f1f7"],":flag_np:":["1f1f3-1f1f5"],":np:":["1f1f3-1f1f5"],":flag_no:":["1f1f3-1f1f4"],":no:":["1f1f3-1f1f4"],":flag_nl:":["1f1f3-1f1f1"],":nl:":["1f1f3-1f1f1"],":flag_ni:":["1f1f3-1f1ee"],":ni:":["1f1f3-1f1ee"],":flag_ng:":["1f1f3-1f1ec"],":nigeria:":["1f1f3-1f1ec"],":flag_nf:":["1f1f3-1f1eb"],":nf:":["1f1f3-1f1eb"],":flag_ne:":["1f1f3-1f1ea"],":ne:":["1f1f3-1f1ea"],":flag_nc:":["1f1f3-1f1e8"],":nc:":["1f1f3-1f1e8"],":flag_na:":["1f1f3-1f1e6"],":na:":["1f1f3-1f1e6"],":flag_mz:":["1f1f2-1f1ff"],":mz:":["1f1f2-1f1ff"],":flag_my:":["1f1f2-1f1fe"],":my:":["1f1f2-1f1fe"],":flag_mx:":["1f1f2-1f1fd"],":mx:":["1f1f2-1f1fd"],":flag_mw:":["1f1f2-1f1fc"],":mw:":["1f1f2-1f1fc"],":flag_mv:":["1f1f2-1f1fb"],":mv:":["1f1f2-1f1fb"],":flag_mu:":["1f1f2-1f1fa"],":mu:":["1f1f2-1f1fa"],":flag_mt:":["1f1f2-1f1f9"],":mt:":["1f1f2-1f1f9"],":flag_ms:":["1f1f2-1f1f8"],":ms:":["1f1f2-1f1f8"],":flag_mr:":["1f1f2-1f1f7"],":mr:":["1f1f2-1f1f7"],":flag_mq:":["1f1f2-1f1f6"],":mq:":["1f1f2-1f1f6"],":flag_mp:":["1f1f2-1f1f5"],":mp:":["1f1f2-1f1f5"],":flag_mo:":["1f1f2-1f1f4"],":mo:":["1f1f2-1f1f4"],":flag_mn:":["1f1f2-1f1f3"],":mn:":["1f1f2-1f1f3"],":flag_mm:":["1f1f2-1f1f2"],":mm:":["1f1f2-1f1f2"],":flag_ml:":["1f1f2-1f1f1"],":ml:":["1f1f2-1f1f1"],":flag_mk:":["1f1f2-1f1f0"],":mk:":["1f1f2-1f1f0"],":flag_mh:":["1f1f2-1f1ed"],":mh:":["1f1f2-1f1ed"],":flag_mg:":["1f1f2-1f1ec"],":mg:":["1f1f2-1f1ec"],":flag_mf:":["1f1f2-1f1eb"],":mf:":["1f1f2-1f1eb"],":flag_me:":["1f1f2-1f1ea"],":me:":["1f1f2-1f1ea"],":flag_md:":["1f1f2-1f1e9"],":md:":["1f1f2-1f1e9"],":flag_mc:":["1f1f2-1f1e8"],":mc:":["1f1f2-1f1e8"],":flag_ma:":["1f1f2-1f1e6"],":ma:":["1f1f2-1f1e6"],":flag_ly:":["1f1f1-1f1fe"],":ly:":["1f1f1-1f1fe"],":flag_lv:":["1f1f1-1f1fb"],":lv:":["1f1f1-1f1fb"],":flag_lu:":["1f1f1-1f1fa"],":lu:":["1f1f1-1f1fa"],":flag_lt:":["1f1f1-1f1f9"],":lt:":["1f1f1-1f1f9"],":flag_ls:":["1f1f1-1f1f8"],":ls:":["1f1f1-1f1f8"],":flag_lr:":["1f1f1-1f1f7"],":lr:":["1f1f1-1f1f7"],":flag_lk:":["1f1f1-1f1f0"],":lk:":["1f1f1-1f1f0"],":flag_li:":["1f1f1-1f1ee"],":li:":["1f1f1-1f1ee"],":flag_lc:":["1f1f1-1f1e8"],":lc:":["1f1f1-1f1e8"],":flag_lb:":["1f1f1-1f1e7"],":lb:":["1f1f1-1f1e7"],":flag_la:":["1f1f1-1f1e6"],":la:":["1f1f1-1f1e6"],":flag_kz:":["1f1f0-1f1ff"],":kz:":["1f1f0-1f1ff"],":flag_ky:":["1f1f0-1f1fe"],":ky:":["1f1f0-1f1fe"],":flag_kw:":["1f1f0-1f1fc"],":kw:":["1f1f0-1f1fc"],":flag_kr:":["1f1f0-1f1f7"],":kr:":["1f1f0-1f1f7"],":flag_kp:":["1f1f0-1f1f5"],":kp:":["1f1f0-1f1f5"],":flag_kn:":["1f1f0-1f1f3"],":kn:":["1f1f0-1f1f3"],":flag_km:":["1f1f0-1f1f2"],":km:":["1f1f0-1f1f2"],":flag_ki:":["1f1f0-1f1ee"],":ki:":["1f1f0-1f1ee"],":flag_kh:":["1f1f0-1f1ed"],":kh:":["1f1f0-1f1ed"],":flag_kg:":["1f1f0-1f1ec"],":kg:":["1f1f0-1f1ec"],":flag_ke:":["1f1f0-1f1ea"],":ke:":["1f1f0-1f1ea"],":flag_jp:":["1f1ef-1f1f5"],":jp:":["1f1ef-1f1f5"],":flag_jo:":["1f1ef-1f1f4"],":jo:":["1f1ef-1f1f4"],":flag_jm:":["1f1ef-1f1f2"],":jm:":["1f1ef-1f1f2"],":flag_je:":["1f1ef-1f1ea"],":je:":["1f1ef-1f1ea"],":flag_it:":["1f1ee-1f1f9"],":it:":["1f1ee-1f1f9"],":flag_is:":["1f1ee-1f1f8"],":is:":["1f1ee-1f1f8"],":flag_ir:":["1f1ee-1f1f7"],":ir:":["1f1ee-1f1f7"],":flag_iq:":["1f1ee-1f1f6"],":iq:":["1f1ee-1f1f6"],":flag_io:":["1f1ee-1f1f4"],":io:":["1f1ee-1f1f4"],":flag_in:":["1f1ee-1f1f3"],":in:":["1f1ee-1f1f3"],":flag_im:":["1f1ee-1f1f2"],":im:":["1f1ee-1f1f2"],":flag_il:":["1f1ee-1f1f1"],":il:":["1f1ee-1f1f1"],":flag_ie:":["1f1ee-1f1ea"],":ie:":["1f1ee-1f1ea"],":flag_id:":["1f1ee-1f1e9"],":indonesia:":["1f1ee-1f1e9"],":flag_ic:":["1f1ee-1f1e8"],":ic:":["1f1ee-1f1e8"],":flag_hu:":["1f1ed-1f1fa"],":hu:":["1f1ed-1f1fa"],":flag_ht:":["1f1ed-1f1f9"],":ht:":["1f1ed-1f1f9"],":flag_hr:":["1f1ed-1f1f7"],":hr:":["1f1ed-1f1f7"],":flag_hn:":["1f1ed-1f1f3"],":hn:":["1f1ed-1f1f3"],":flag_hm:":["1f1ed-1f1f2"],":hm:":["1f1ed-1f1f2"],":flag_hk:":["1f1ed-1f1f0"],":hk:":["1f1ed-1f1f0"],":flag_gy:":["1f1ec-1f1fe"],":gy:":["1f1ec-1f1fe"],":flag_gw:":["1f1ec-1f1fc"],":gw:":["1f1ec-1f1fc"],":flag_gu:":["1f1ec-1f1fa"],":gu:":["1f1ec-1f1fa"],":flag_gt:":["1f1ec-1f1f9"],":gt:":["1f1ec-1f1f9"],":flag_gs:":["1f1ec-1f1f8"],":gs:":["1f1ec-1f1f8"],":flag_gr:":["1f1ec-1f1f7"],":gr:":["1f1ec-1f1f7"],":flag_gq:":["1f1ec-1f1f6"],":gq:":["1f1ec-1f1f6"],":flag_gp:":["1f1ec-1f1f5"],":gp:":["1f1ec-1f1f5"],":flag_gn:":["1f1ec-1f1f3"],":gn:":["1f1ec-1f1f3"],":flag_gm:":["1f1ec-1f1f2"],":gm:":["1f1ec-1f1f2"],":flag_gl:":["1f1ec-1f1f1"],":gl:":["1f1ec-1f1f1"],":flag_gi:":["1f1ec-1f1ee"],":gi:":["1f1ec-1f1ee"],":flag_gh:":["1f1ec-1f1ed"],":gh:":["1f1ec-1f1ed"],":flag_gg:":["1f1ec-1f1ec"],":gg:":["1f1ec-1f1ec"],":flag_gf:":["1f1ec-1f1eb"],":gf:":["1f1ec-1f1eb"],":flag_ge:":["1f1ec-1f1ea"],":ge:":["1f1ec-1f1ea"],":flag_gd:":["1f1ec-1f1e9"],":gd:":["1f1ec-1f1e9"],":flag_gb:":["1f1ec-1f1e7"],":gb:":["1f1ec-1f1e7"],":flag_ga:":["1f1ec-1f1e6"],":ga:":["1f1ec-1f1e6"],":flag_fr:":["1f1eb-1f1f7"],":fr:":["1f1eb-1f1f7"],":flag_fo:":["1f1eb-1f1f4"],":fo:":["1f1eb-1f1f4"],":flag_fm:":["1f1eb-1f1f2"],":fm:":["1f1eb-1f1f2"],":flag_fk:":["1f1eb-1f1f0"],":fk:":["1f1eb-1f1f0"],":flag_fj:":["1f1eb-1f1ef"],":fj:":["1f1eb-1f1ef"],":flag_fi:":["1f1eb-1f1ee"],":fi:":["1f1eb-1f1ee"],":flag_eu:":["1f1ea-1f1fa"],":eu:":["1f1ea-1f1fa"],":flag_et:":["1f1ea-1f1f9"],":et:":["1f1ea-1f1f9"],":flag_es:":["1f1ea-1f1f8"],":es:":["1f1ea-1f1f8"],":flag_er:":["1f1ea-1f1f7"],":er:":["1f1ea-1f1f7"],":flag_eh:":["1f1ea-1f1ed"],":eh:":["1f1ea-1f1ed"],":flag_eg:":["1f1ea-1f1ec"],":eg:":["1f1ea-1f1ec"],":flag_ee:":["1f1ea-1f1ea"],":ee:":["1f1ea-1f1ea"],":flag_ec:":["1f1ea-1f1e8"],":ec:":["1f1ea-1f1e8"],":flag_ea:":["1f1ea-1f1e6"],":ea:":["1f1ea-1f1e6"],":flag_dz:":["1f1e9-1f1ff"],":dz:":["1f1e9-1f1ff"],":flag_do:":["1f1e9-1f1f4"],":do:":["1f1e9-1f1f4"],":flag_dm:":["1f1e9-1f1f2"],":dm:":["1f1e9-1f1f2"],":flag_dk:":["1f1e9-1f1f0"],":dk:":["1f1e9-1f1f0"],":flag_dj:":["1f1e9-1f1ef"],":dj:":["1f1e9-1f1ef"],":flag_dg:":["1f1e9-1f1ec"],":dg:":["1f1e9-1f1ec"],":flag_de:":["1f1e9-1f1ea"],":de:":["1f1e9-1f1ea"],":flag_cz:":["1f1e8-1f1ff"],":cz:":["1f1e8-1f1ff"],":flag_cy:":["1f1e8-1f1fe"],":cy:":["1f1e8-1f1fe"],":flag_cx:":["1f1e8-1f1fd"],":cx:":["1f1e8-1f1fd"],":flag_cw:":["1f1e8-1f1fc"],":cw:":["1f1e8-1f1fc"],":flag_cv:":["1f1e8-1f1fb"],":cv:":["1f1e8-1f1fb"],":flag_cu:":["1f1e8-1f1fa"],":cu:":["1f1e8-1f1fa"],":flag_cr:":["1f1e8-1f1f7"],":cr:":["1f1e8-1f1f7"],":flag_cp:":["1f1e8-1f1f5"],":cp:":["1f1e8-1f1f5"],":flag_co:":["1f1e8-1f1f4"],":co:":["1f1e8-1f1f4"],":flag_cn:":["1f1e8-1f1f3"],":cn:":["1f1e8-1f1f3"],":flag_cm:":["1f1e8-1f1f2"],":cm:":["1f1e8-1f1f2"],":flag_cl:":["1f1e8-1f1f1"],":chile:":["1f1e8-1f1f1"],":flag_ck:":["1f1e8-1f1f0"],":ck:":["1f1e8-1f1f0"],":flag_ci:":["1f1e8-1f1ee"],":ci:":["1f1e8-1f1ee"],":flag_ch:":["1f1e8-1f1ed"],":ch:":["1f1e8-1f1ed"],":flag_cg:":["1f1e8-1f1ec"],":cg:":["1f1e8-1f1ec"],":flag_cf:":["1f1e8-1f1eb"],":cf:":["1f1e8-1f1eb"],":flag_cd:":["1f1e8-1f1e9"],":congo:":["1f1e8-1f1e9"],":flag_cc:":["1f1e8-1f1e8"],":cc:":["1f1e8-1f1e8"],":flag_ca:":["1f1e8-1f1e6"],":ca:":["1f1e8-1f1e6"],":flag_bz:":["1f1e7-1f1ff"],":bz:":["1f1e7-1f1ff"],":flag_by:":["1f1e7-1f1fe"],":by:":["1f1e7-1f1fe"],":flag_bw:":["1f1e7-1f1fc"],":bw:":["1f1e7-1f1fc"],":flag_bv:":["1f1e7-1f1fb"],":bv:":["1f1e7-1f1fb"],":flag_bt:":["1f1e7-1f1f9"],":bt:":["1f1e7-1f1f9"],":flag_bs:":["1f1e7-1f1f8"],":bs:":["1f1e7-1f1f8"],":flag_br:":["1f1e7-1f1f7"],":br:":["1f1e7-1f1f7"],":flag_bq:":["1f1e7-1f1f6"],":bq:":["1f1e7-1f1f6"],":flag_bo:":["1f1e7-1f1f4"],":bo:":["1f1e7-1f1f4"],":flag_bn:":["1f1e7-1f1f3"],":bn:":["1f1e7-1f1f3"],":flag_bm:":["1f1e7-1f1f2"],":bm:":["1f1e7-1f1f2"],":flag_bl:":["1f1e7-1f1f1"],":bl:":["1f1e7-1f1f1"],":flag_bj:":["1f1e7-1f1ef"],":bj:":["1f1e7-1f1ef"],":flag_bi:":["1f1e7-1f1ee"],":bi:":["1f1e7-1f1ee"],":flag_bh:":["1f1e7-1f1ed"],":bh:":["1f1e7-1f1ed"],":flag_bg:":["1f1e7-1f1ec"],":bg:":["1f1e7-1f1ec"],":flag_bf:":["1f1e7-1f1eb"],":bf:":["1f1e7-1f1eb"],":flag_be:":["1f1e7-1f1ea"],":be:":["1f1e7-1f1ea"],":flag_bd:":["1f1e7-1f1e9"],":bd:":["1f1e7-1f1e9"],":flag_bb:":["1f1e7-1f1e7"],":bb:":["1f1e7-1f1e7"],":flag_ba:":["1f1e7-1f1e6"],":ba:":["1f1e7-1f1e6"],":flag_az:":["1f1e6-1f1ff"],":az:":["1f1e6-1f1ff"],":flag_ax:":["1f1e6-1f1fd"],":ax:":["1f1e6-1f1fd"],":flag_aw:":["1f1e6-1f1fc"],":aw:":["1f1e6-1f1fc"],":flag_au:":["1f1e6-1f1fa"],":au:":["1f1e6-1f1fa"],":flag_at:":["1f1e6-1f1f9"],":at:":["1f1e6-1f1f9"],":flag_as:":["1f1e6-1f1f8"],":as:":["1f1e6-1f1f8"],":flag_ar:":["1f1e6-1f1f7"],":ar:":["1f1e6-1f1f7"],":flag_aq:":["1f1e6-1f1f6"],":aq:":["1f1e6-1f1f6"],":flag_ao:":["1f1e6-1f1f4"],":ao:":["1f1e6-1f1f4"],":flag_am:":["1f1e6-1f1f2"],":am:":["1f1e6-1f1f2"],":flag_al:":["1f1e6-1f1f1"],":al:":["1f1e6-1f1f1"],":flag_ai:":["1f1e6-1f1ee"],":ai:":["1f1e6-1f1ee"],":flag_ag:":["1f1e6-1f1ec"],":ag:":["1f1e6-1f1ec"],":flag_af:":["1f1e6-1f1eb"],":af:":["1f1e6-1f1eb"],":flag_ae:":["1f1e6-1f1ea"],":ae:":["1f1e6-1f1ea"],":flag_ad:":["1f1e6-1f1e9"],":ad:":["1f1e6-1f1e9"],":flag_ac:":["1f1e6-1f1e8"],":ac:":["1f1e6-1f1e8"],":mahjong:":["1f004-fe0f","1f004"],":parking:":["1f17f-fe0f","1f17f"],":sa:":["1f202-fe0f","1f202"],":u7121:":["1f21a-fe0f","1f21a"],":u6307:":["1f22f-fe0f","1f22f"],":u6708:":["1f237-fe0f","1f237"],":film_frames:":["1f39e-fe0f","1f39e"],":tickets:":["1f39f-fe0f","1f39f"],":admission_tickets:":["1f39f-fe0f","1f39f"],":lifter:":["1f3cb-fe0f","1f3cb"],":weight_lifter:":["1f3cb-fe0f","1f3cb"],":golfer:":["1f3cc-fe0f","1f3cc"],":motorcycle:":["1f3cd-fe0f","1f3cd"],":racing_motorcycle:":["1f3cd-fe0f","1f3cd"],":race_car:":["1f3ce-fe0f","1f3ce"],":racing_car:":["1f3ce-fe0f","1f3ce"],":military_medal:":["1f396-fe0f","1f396"],":reminder_ribbon:":["1f397-fe0f","1f397"],":hot_pepper:":["1f336-fe0f","1f336"],":cloud_rain:":["1f327-fe0f","1f327"],":cloud_with_rain:":["1f327-fe0f","1f327"],":cloud_snow:":["1f328-fe0f","1f328"],":cloud_with_snow:":["1f328-fe0f","1f328"],":cloud_lightning:":["1f329-fe0f","1f329"],":cloud_with_lightning:":["1f329-fe0f","1f329"],":cloud_tornado:":["1f32a-fe0f","1f32a"],":cloud_with_tornado:":["1f32a-fe0f","1f32a"],":fog:":["1f32b-fe0f","1f32b"],":wind_blowing_face:":["1f32c-fe0f","1f32c"],":chipmunk:":["1f43f-fe0f","1f43f"],":spider:":["1f577-fe0f","1f577"],":spider_web:":["1f578-fe0f","1f578"],":thermometer:":["1f321-fe0f","1f321"],":microphone2:":["1f399-fe0f","1f399"],":studio_microphone:":["1f399-fe0f","1f399"],":level_slider:":["1f39a-fe0f","1f39a"],":control_knobs:":["1f39b-fe0f","1f39b"],":flag_white:":["1f3f3-fe0f","1f3f3"],":waving_white_flag:":["1f3f3-fe0f","1f3f3"],":rosette:":["1f3f5-fe0f","1f3f5"],":label:":["1f3f7-fe0f","1f3f7"],":projector:":["1f4fd-fe0f","1f4fd"],":film_projector:":["1f4fd-fe0f","1f4fd"],":om_symbol:":["1f549-fe0f","1f549"],":dove:":["1f54a-fe0f","1f54a"],":dove_of_peace:":["1f54a-fe0f","1f54a"],":candle:":["1f56f-fe0f","1f56f"],":clock:":["1f570-fe0f","1f570"],":mantlepiece_clock:":["1f570-fe0f","1f570"],":hole:":["1f573-fe0f","1f573"],":dark_sunglasses:":["1f576-fe0f","1f576"],":joystick:":["1f579-fe0f","1f579"],":paperclips:":["1f587-fe0f","1f587"],":linked_paperclips:":["1f587-fe0f","1f587"],":pen_ballpoint:":["1f58a-fe0f","1f58a"],":lower_left_ballpoint_pen:":["1f58a-fe0f","1f58a"],":pen_fountain:":["1f58b-fe0f","1f58b"],":lower_left_fountain_pen:":["1f58b-fe0f","1f58b"],":paintbrush:":["1f58c-fe0f","1f58c"],":lower_left_paintbrush:":["1f58c-fe0f","1f58c"],":crayon:":["1f58d-fe0f","1f58d"],":lower_left_crayon:":["1f58d-fe0f","1f58d"],":desktop:":["1f5a5-fe0f","1f5a5"],":desktop_computer:":["1f5a5-fe0f","1f5a5"],":printer:":["1f5a8-fe0f","1f5a8"],":trackball:":["1f5b2-fe0f","1f5b2"],":frame_photo:":["1f5bc-fe0f","1f5bc"],":frame_with_picture:":["1f5bc-fe0f","1f5bc"],":dividers:":["1f5c2-fe0f","1f5c2"],":card_index_dividers:":["1f5c2-fe0f","1f5c2"],":card_box:":["1f5c3-fe0f","1f5c3"],":card_file_box:":["1f5c3-fe0f","1f5c3"],":file_cabinet:":["1f5c4-fe0f","1f5c4"],":wastebasket:":["1f5d1-fe0f","1f5d1"],":notepad_spiral:":["1f5d2-fe0f","1f5d2"],":spiral_note_pad:":["1f5d2-fe0f","1f5d2"],":calendar_spiral:":["1f5d3-fe0f","1f5d3"],":spiral_calendar_pad:":["1f5d3-fe0f","1f5d3"],":compression:":["1f5dc-fe0f","1f5dc"],":key2:":["1f5dd-fe0f","1f5dd"],":old_key:":["1f5dd-fe0f","1f5dd"],":newspaper2:":["1f5de-fe0f","1f5de"],":rolled_up_newspaper:":["1f5de-fe0f","1f5de"],":dagger:":["1f5e1-fe0f","1f5e1"],":dagger_knife:":["1f5e1-fe0f","1f5e1"],":speaking_head:":["1f5e3-fe0f","1f5e3"],":speaking_head_in_silhouette:":["1f5e3-fe0f","1f5e3"],":anger_right:":["1f5ef-fe0f","1f5ef"],":right_anger_bubble:":["1f5ef-fe0f","1f5ef"],":ballot_box:":["1f5f3-fe0f","1f5f3"],":ballot_box_with_ballot:":["1f5f3-fe0f","1f5f3"],":map:":["1f5fa-fe0f","1f5fa"],":world_map:":["1f5fa-fe0f","1f5fa"],":tools:":["1f6e0-fe0f","1f6e0"],":hammer_and_wrench:":["1f6e0-fe0f","1f6e0"],":shield:":["1f6e1-fe0f","1f6e1"],":oil:":["1f6e2-fe0f","1f6e2"],":oil_drum:":["1f6e2-fe0f","1f6e2"],":satellite_orbital:":["1f6f0-fe0f","1f6f0"],":fork_knife_plate:":["1f37d-fe0f","1f37d"],":fork_and_knife_with_plate:":["1f37d-fe0f","1f37d"],":eye:":["1f441-fe0f","1f441"],":levitate:":["1f574-fe0f","1f574"],":man_in_business_suit_levitating:":["1f574-fe0f","1f574"],":spy:":["1f575-fe0f","1f575"],":sleuth_or_spy:":["1f575-fe0f","1f575"],":hand_splayed:":["1f590-fe0f","1f590"],":raised_hand_with_fingers_splayed:":["1f590-fe0f","1f590"],":mountain_snow:":["1f3d4-fe0f","1f3d4"],":snow_capped_mountain:":["1f3d4-fe0f","1f3d4"],":camping:":["1f3d5-fe0f","1f3d5"],":beach:":["1f3d6-fe0f","1f3d6"],":beach_with_umbrella:":["1f3d6-fe0f","1f3d6"],":construction_site:":["1f3d7-fe0f","1f3d7"],":building_construction:":["1f3d7-fe0f","1f3d7"],":homes:":["1f3d8-fe0f","1f3d8"],":house_buildings:":["1f3d8-fe0f","1f3d8"],":cityscape:":["1f3d9-fe0f","1f3d9"],":house_abandoned:":["1f3da-fe0f","1f3da"],":derelict_house_building:":["1f3da-fe0f","1f3da"],":classical_building:":["1f3db-fe0f","1f3db"],":desert:":["1f3dc-fe0f","1f3dc"],":island:":["1f3dd-fe0f","1f3dd"],":desert_island:":["1f3dd-fe0f","1f3dd"],":park:":["1f3de-fe0f","1f3de"],":national_park:":["1f3de-fe0f","1f3de"],":stadium:":["1f3df-fe0f","1f3df"],":couch:":["1f6cb-fe0f","1f6cb"],":couch_and_lamp:":["1f6cb-fe0f","1f6cb"],":shopping_bags:":["1f6cd-fe0f","1f6cd"],":bellhop:":["1f6ce-fe0f","1f6ce"],":bellhop_bell:":["1f6ce-fe0f","1f6ce"],":bed:":["1f6cf-fe0f","1f6cf"],":motorway:":["1f6e3-fe0f","1f6e3"],":railway_track:":["1f6e4-fe0f","1f6e4"],":railroad_track:":["1f6e4-fe0f","1f6e4"],":motorboat:":["1f6e5-fe0f","1f6e5"],":airplane_small:":["1f6e9-fe0f","1f6e9"],":small_airplane:":["1f6e9-fe0f","1f6e9"],":cruise_ship:":["1f6f3-fe0f","1f6f3"],":passenger_ship:":["1f6f3-fe0f","1f6f3"],":white_sun_small_cloud:":["1f324-fe0f","1f324"],":white_sun_with_small_cloud:":["1f324-fe0f","1f324"],":white_sun_cloud:":["1f325-fe0f","1f325"],":white_sun_behind_cloud:":["1f325-fe0f","1f325"],":white_sun_rain_cloud:":["1f326-fe0f","1f326"],":white_sun_behind_cloud_with_rain:":["1f326-fe0f","1f326"],":mouse_three_button:":["1f5b1-fe0f","1f5b1"],":three_button_mouse:":["1f5b1-fe0f","1f5b1"],":point_up_tone1:":["261d-1f3fb"],":point_up_tone2:":["261d-1f3fc"],":point_up_tone3:":["261d-1f3fd"],":point_up_tone4:":["261d-1f3fe"],":copyright:":["00a9-fe0f","00a9"],":registered:":["00ae-fe0f","00ae"],":bangbang:":["203c-fe0f","203c"],":interrobang:":["2049-fe0f","2049"],":tm:":["2122-fe0f","2122"],":information_source:":["2139-fe0f","2139"],":left_right_arrow:":["2194-fe0f","2194"],":arrow_up_down:":["2195-fe0f","2195"],":arrow_upper_left:":["2196-fe0f","2196"],":arrow_upper_right:":["2197-fe0f","2197"],":arrow_lower_right:":["2198-fe0f","2198"],":arrow_lower_left:":["2199-fe0f","2199"],":leftwards_arrow_with_hook:":["21a9-fe0f","21a9"],":arrow_right_hook:":["21aa-fe0f","21aa"],":watch:":["231a-fe0f","231a"],":hourglass:":["231b-fe0f","231b"],":m:":["24c2-fe0f","24c2"],":black_small_square:":["25aa-fe0f","25aa"],":white_small_square:":["25ab-fe0f","25ab"],":arrow_forward:":["25b6-fe0f","25b6"],":arrow_backward:":["25c0-fe0f","25c0"],":white_medium_square:":["25fb-fe0f","25fb"],":black_medium_square:":["25fc-fe0f","25fc"],":white_medium_small_square:":["25fd-fe0f","25fd"],":black_medium_small_square:":["25fe-fe0f","25fe"],":sunny:":["2600-fe0f","2600"],":cloud:":["2601-fe0f","2601"],":telephone:":["260e-fe0f","260e"],":ballot_box_with_check:":["2611-fe0f","2611"],":umbrella:":["2614-fe0f","2614"],":coffee:":["2615-fe0f","2615"],":point_up:":["261d-fe0f","261d"],":relaxed:":["263a-fe0f","263a"],":aries:":["2648-fe0f","2648"],":taurus:":["2649-fe0f","2649"],":gemini:":["264a-fe0f","264a"],":cancer:":["264b-fe0f","264b"],":leo:":["264c-fe0f","264c"],":virgo:":["264d-fe0f","264d"],":libra:":["264e-fe0f","264e"],":scorpius:":["264f-fe0f","264f"],":sagittarius:":["2650-fe0f","2650"],":capricorn:":["2651-fe0f","2651"],":aquarius:":["2652-fe0f","2652"],":pisces:":["2653-fe0f","2653"],":spades:":["2660-fe0f","2660"],":clubs:":["2663-fe0f","2663"],":hearts:":["2665-fe0f","2665"],":diamonds:":["2666-fe0f","2666"],":hotsprings:":["2668-fe0f","2668"],":recycle:":["267b-fe0f","267b"],":wheelchair:":["267f-fe0f","267f"],":anchor:":["2693-fe0f","2693"],":warning:":["26a0-fe0f","26a0"],":zap:":["26a1-fe0f","26a1"],":white_circle:":["26aa-fe0f","26aa"],":black_circle:":["26ab-fe0f","26ab"],":soccer:":["26bd-fe0f","26bd"],":baseball:":["26be-fe0f","26be"],":snowman:":["26c4-fe0f","26c4"],":partly_sunny:":["26c5-fe0f","26c5"],":no_entry:":["26d4-fe0f","26d4"],":church:":["26ea-fe0f","26ea"],":fountain:":["26f2-fe0f","26f2"],":golf:":["26f3-fe0f","26f3"],":sailboat:":["26f5-fe0f","26f5"],":tent:":["26fa-fe0f","26fa"],":fuelpump:":["26fd-fe0f","26fd"],":scissors:":["2702-fe0f","2702"],":airplane:":["2708-fe0f","2708"],":envelope:":["2709-fe0f","2709"],":v:":["270c-fe0f","270c"],":pencil2:":["270f-fe0f","270f"],":black_nib:":["2712-fe0f","2712"],":heavy_check_mark:":["2714-fe0f","2714"],":heavy_multiplication_x:":["2716-fe0f","2716"],":eight_spoked_asterisk:":["2733-fe0f","2733"],":eight_pointed_black_star:":["2734-fe0f","2734"],":snowflake:":["2744-fe0f","2744"],":sparkle:":["2747-fe0f","2747"],":exclamation:":["2757-fe0f","2757"],":heart:":["2764-fe0f","2764"],":arrow_right:":["27a1-fe0f","27a1"],":arrow_heading_up:":["2934-fe0f","2934"],":arrow_heading_down:":["2935-fe0f","2935"],":arrow_left:":["2b05-fe0f","2b05"],":arrow_up:":["2b06-fe0f","2b06"],":arrow_down:":["2b07-fe0f","2b07"],":black_large_square:":["2b1b-fe0f","2b1b"],":white_large_square:":["2b1c-fe0f","2b1c"],":star:":["2b50-fe0f","2b50"],":o:":["2b55-fe0f","2b55"],":wavy_dash:":["3030-fe0f","3030"],":part_alternation_mark:":["303d-fe0f","303d"],":congratulations:":["3297-fe0f","3297"],":secret:":["3299-fe0f","3299"],":cross:":["271d-fe0f","271d"],":latin_cross:":["271d-fe0f","271d"],":keyboard:":["2328-fe0f","2328"],":writing_hand:":["270d-fe0f","270d"],":track_next:":["23ed-fe0f","23ed"],":next_track:":["23ed-fe0f","23ed"],":track_previous:":["23ee-fe0f","23ee"],":previous_track:":["23ee-fe0f","23ee"],":play_pause:":["23ef-fe0f","23ef"],":stopwatch:":["23f1-fe0f","23f1"],":timer:":["23f2-fe0f","23f2"],":timer_clock:":["23f2-fe0f","23f2"],":pause_button:":["23f8-fe0f","23f8"],":double_vertical_bar:":["23f8-fe0f","23f8"],":stop_button:":["23f9-fe0f","23f9"],":record_button:":["23fa-fe0f","23fa"],":umbrella2:":["2602-fe0f","2602"],":snowman2:":["2603-fe0f","2603"],":comet:":["2604-fe0f","2604"],":shamrock:":["2618-fe0f","2618"],":skull_crossbones:":["2620-fe0f","2620"],":skull_and_crossbones:":["2620-fe0f","2620"],":radioactive:":["2622-fe0f","2622"],":radioactive_sign:":["2622-fe0f","2622"],":biohazard:":["2623-fe0f","2623"],":biohazard_sign:":["2623-fe0f","2623"],":orthodox_cross:":["2626-fe0f","2626"],":star_and_crescent:":["262a-fe0f","262a"],":peace:":["262e-fe0f","262e"],":peace_symbol:":["262e-fe0f","262e"],":yin_yang:":["262f-fe0f","262f"],":wheel_of_dharma:":["2638-fe0f","2638"],":frowning2:":["2639-fe0f","2639"],":white_frowning_face:":["2639-fe0f","2639"],":hammer_pick:":["2692-fe0f","2692"],":hammer_and_pick:":["2692-fe0f","2692"],":crossed_swords:":["2694-fe0f","2694"],":scales:":["2696-fe0f","2696"],":alembic:":["2697-fe0f","2697"],":gear:":["2699-fe0f","2699"],":atom:":["269b-fe0f","269b"],":atom_symbol:":["269b-fe0f","269b"],":fleur-de-lis:":["269c-fe0f","269c"],":coffin:":["26b0-fe0f","26b0"],
":urn:":["26b1-fe0f","26b1"],":funeral_urn:":["26b1-fe0f","26b1"],":thunder_cloud_rain:":["26c8-fe0f","26c8"],":thunder_cloud_and_rain:":["26c8-fe0f","26c8"],":pick:":["26cf-fe0f","26cf"],":helmet_with_cross:":["26d1-fe0f","26d1"],":helmet_with_white_cross:":["26d1-fe0f","26d1"],":chains:":["26d3-fe0f","26d3"],":shinto_shrine:":["26e9-fe0f","26e9"],":mountain:":["26f0-fe0f","26f0"],":beach_umbrella:":["26f1-fe0f","26f1"],":umbrella_on_ground:":["26f1-fe0f","26f1"],":ferry:":["26f4-fe0f","26f4"],":skier:":["26f7-fe0f","26f7"],":ice_skate:":["26f8-fe0f","26f8"],":basketball_player:":["26f9-fe0f","26f9"],":person_with_ball:":["26f9-fe0f","26f9"],":star_of_david:":["2721-fe0f","2721"],":heart_exclamation:":["2763-fe0f","2763"],":heavy_heart_exclamation_mark_ornament:":["2763-fe0f","2763"],":black_joker:":["1f0cf"],":a:":["1f170"],":b:":["1f171"],":o2:":["1f17e"],":ab:":["1f18e"],":cl:":["1f191"],":cool:":["1f192"],":free:":["1f193"],":id:":["1f194"],":new:":["1f195"],":ng:":["1f196"],":ok:":["1f197"],":sos:":["1f198"],":up:":["1f199"],":vs:":["1f19a"],":koko:":["1f201"],":u7981:":["1f232"],":u7a7a:":["1f233"],":u5408:":["1f234"],":u6e80:":["1f235"],":u6709:":["1f236"],":u7533:":["1f238"],":u5272:":["1f239"],":u55b6:":["1f23a"],":ideograph_advantage:":["1f250"],":accept:":["1f251"],":cyclone:":["1f300"],":foggy:":["1f301"],":closed_umbrella:":["1f302"],":night_with_stars:":["1f303"],":sunrise_over_mountains:":["1f304"],":sunrise:":["1f305"],":city_dusk:":["1f306"],":city_sunset:":["1f307"],":city_sunrise:":["1f307"],":rainbow:":["1f308"],":bridge_at_night:":["1f309"],":ocean:":["1f30a"],":volcano:":["1f30b"],":milky_way:":["1f30c"],":earth_asia:":["1f30f"],":new_moon:":["1f311"],":first_quarter_moon:":["1f313"],":waxing_gibbous_moon:":["1f314"],":full_moon:":["1f315"],":crescent_moon:":["1f319"],":first_quarter_moon_with_face:":["1f31b"],":star2:":["1f31f"],":stars:":["1f320"],":chestnut:":["1f330"],":seedling:":["1f331"],":palm_tree:":["1f334"],":cactus:":["1f335"],":tulip:":["1f337"],":cherry_blossom:":["1f338"],":rose:":["1f339"],":hibiscus:":["1f33a"],":sunflower:":["1f33b"],":blossom:":["1f33c"],":corn:":["1f33d"],":ear_of_rice:":["1f33e"],":herb:":["1f33f"],":four_leaf_clover:":["1f340"],":maple_leaf:":["1f341"],":fallen_leaf:":["1f342"],":leaves:":["1f343"],":mushroom:":["1f344"],":tomato:":["1f345"],":eggplant:":["1f346"],":grapes:":["1f347"],":melon:":["1f348"],":watermelon:":["1f349"],":tangerine:":["1f34a"],":banana:":["1f34c"],":pineapple:":["1f34d"],":apple:":["1f34e"],":green_apple:":["1f34f"],":peach:":["1f351"],":cherries:":["1f352"],":strawberry:":["1f353"],":hamburger:":["1f354"],":pizza:":["1f355"],":meat_on_bone:":["1f356"],":poultry_leg:":["1f357"],":rice_cracker:":["1f358"],":rice_ball:":["1f359"],":rice:":["1f35a"],":curry:":["1f35b"],":ramen:":["1f35c"],":spaghetti:":["1f35d"],":bread:":["1f35e"],":fries:":["1f35f"],":sweet_potato:":["1f360"],":dango:":["1f361"],":oden:":["1f362"],":sushi:":["1f363"],":fried_shrimp:":["1f364"],":fish_cake:":["1f365"],":icecream:":["1f366"],":shaved_ice:":["1f367"],":ice_cream:":["1f368"],":doughnut:":["1f369"],":cookie:":["1f36a"],":chocolate_bar:":["1f36b"],":candy:":["1f36c"],":lollipop:":["1f36d"],":custard:":["1f36e"],":honey_pot:":["1f36f"],":cake:":["1f370"],":bento:":["1f371"],":stew:":["1f372"],":egg:":["1f373"],":fork_and_knife:":["1f374"],":tea:":["1f375"],":sake:":["1f376"],":wine_glass:":["1f377"],":cocktail:":["1f378"],":tropical_drink:":["1f379"],":beer:":["1f37a"],":beers:":["1f37b"],":ribbon:":["1f380"],":gift:":["1f381"],":birthday:":["1f382"],":jack_o_lantern:":["1f383"],":christmas_tree:":["1f384"],":santa:":["1f385"],":fireworks:":["1f386"],":sparkler:":["1f387"],":balloon:":["1f388"],":tada:":["1f389"],":confetti_ball:":["1f38a"],":tanabata_tree:":["1f38b"],":crossed_flags:":["1f38c"],":bamboo:":["1f38d"],":dolls:":["1f38e"],":flags:":["1f38f"],":wind_chime:":["1f390"],":rice_scene:":["1f391"],":school_satchel:":["1f392"],":mortar_board:":["1f393"],":carousel_horse:":["1f3a0"],":ferris_wheel:":["1f3a1"],":roller_coaster:":["1f3a2"],":fishing_pole_and_fish:":["1f3a3"],":microphone:":["1f3a4"],":movie_camera:":["1f3a5"],":cinema:":["1f3a6"],":headphones:":["1f3a7"],":art:":["1f3a8"],":tophat:":["1f3a9"],":circus_tent:":["1f3aa"],":ticket:":["1f3ab"],":clapper:":["1f3ac"],":performing_arts:":["1f3ad"],":video_game:":["1f3ae"],":dart:":["1f3af"],":slot_machine:":["1f3b0"],":8ball:":["1f3b1"],":game_die:":["1f3b2"],":bowling:":["1f3b3"],":flower_playing_cards:":["1f3b4"],":musical_note:":["1f3b5"],":notes:":["1f3b6"],":saxophone:":["1f3b7"],":guitar:":["1f3b8"],":musical_keyboard:":["1f3b9"],":trumpet:":["1f3ba"],":violin:":["1f3bb"],":musical_score:":["1f3bc"],":running_shirt_with_sash:":["1f3bd"],":tennis:":["1f3be"],":ski:":["1f3bf"],":basketball:":["1f3c0"],":checkered_flag:":["1f3c1"],":snowboarder:":["1f3c2"],":runner:":["1f3c3"],":surfer:":["1f3c4"],":trophy:":["1f3c6"],":football:":["1f3c8"],":swimmer:":["1f3ca"],":house:":["1f3e0"],":house_with_garden:":["1f3e1"],":office:":["1f3e2"],":post_office:":["1f3e3"],":hospital:":["1f3e5"],":bank:":["1f3e6"],":atm:":["1f3e7"],":hotel:":["1f3e8"],":love_hotel:":["1f3e9"],":convenience_store:":["1f3ea"],":school:":["1f3eb"],":department_store:":["1f3ec"],":factory:":["1f3ed"],":izakaya_lantern:":["1f3ee"],":japanese_castle:":["1f3ef"],":european_castle:":["1f3f0"],":snail:":["1f40c"],":snake:":["1f40d"],":racehorse:":["1f40e"],":sheep:":["1f411"],":monkey:":["1f412"],":chicken:":["1f414"],":boar:":["1f417"],":elephant:":["1f418"],":octopus:":["1f419"],":shell:":["1f41a"],":bug:":["1f41b"],":ant:":["1f41c"],":bee:":["1f41d"],":beetle:":["1f41e"],":fish:":["1f41f"],":tropical_fish:":["1f420"],":blowfish:":["1f421"],":turtle:":["1f422"],":hatching_chick:":["1f423"],":baby_chick:":["1f424"],":hatched_chick:":["1f425"],":bird:":["1f426"],":penguin:":["1f427"],":koala:":["1f428"],":poodle:":["1f429"],":camel:":["1f42b"],":dolphin:":["1f42c"],":mouse:":["1f42d"],":cow:":["1f42e"],":tiger:":["1f42f"],":rabbit:":["1f430"],":cat:":["1f431"],":dragon_face:":["1f432"],":whale:":["1f433"],":horse:":["1f434"],":monkey_face:":["1f435"],":dog:":["1f436"],":pig:":["1f437"],":frog:":["1f438"],":hamster:":["1f439"],":wolf:":["1f43a"],":bear:":["1f43b"],":panda_face:":["1f43c"],":pig_nose:":["1f43d"],":feet:":["1f43e"],":paw_prints:":["1f43e"],":eyes:":["1f440"],":ear:":["1f442"],":nose:":["1f443"],":lips:":["1f444"],":tongue:":["1f445"],":point_up_2:":["1f446"],":point_down:":["1f447"],":point_left:":["1f448"],":point_right:":["1f449"],":punch:":["1f44a"],":wave:":["1f44b"],":ok_hand:":["1f44c"],":thumbsup:":["1f44d"],":+1:":["1f44d"],":thumbsdown:":["1f44e"],":-1:":["1f44e"],":clap:":["1f44f"],":open_hands:":["1f450"],":crown:":["1f451"],":womans_hat:":["1f452"],":eyeglasses:":["1f453"],":necktie:":["1f454"],":shirt:":["1f455"],":jeans:":["1f456"],":dress:":["1f457"],":kimono:":["1f458"],":bikini:":["1f459"],":womans_clothes:":["1f45a"],":purse:":["1f45b"],":handbag:":["1f45c"],":pouch:":["1f45d"],":mans_shoe:":["1f45e"],":athletic_shoe:":["1f45f"],":high_heel:":["1f460"],":sandal:":["1f461"],":boot:":["1f462"],":footprints:":["1f463"],":bust_in_silhouette:":["1f464"],":boy:":["1f466"],":girl:":["1f467"],":man:":["1f468"],":woman:":["1f469"],":family:":["1f46a"],":couple:":["1f46b"],":cop:":["1f46e"],":dancers:":["1f46f"],":bride_with_veil:":["1f470"],":person_with_blond_hair:":["1f471"],":man_with_gua_pi_mao:":["1f472"],":man_with_turban:":["1f473"],":older_man:":["1f474"],":older_woman:":["1f475"],":grandma:":["1f475"],":baby:":["1f476"],":construction_worker:":["1f477"],":princess:":["1f478"],":japanese_ogre:":["1f479"],":japanese_goblin:":["1f47a"],":ghost:":["1f47b"],":angel:":["1f47c"],":alien:":["1f47d"],":space_invader:":["1f47e"],":imp:":["1f47f"],":skull:":["1f480"],":skeleton:":["1f480"],":card_index:":["1f4c7"],":information_desk_person:":["1f481"],":guardsman:":["1f482"],":dancer:":["1f483"],":lipstick:":["1f484"],":nail_care:":["1f485"],":ledger:":["1f4d2"],":massage:":["1f486"],":notebook:":["1f4d3"],":haircut:":["1f487"],":notebook_with_decorative_cover:":["1f4d4"],":barber:":["1f488"],":closed_book:":["1f4d5"],":syringe:":["1f489"],":book:":["1f4d6"],":pill:":["1f48a"],":green_book:":["1f4d7"],":kiss:":["1f48b"],":blue_book:":["1f4d8"],":love_letter:":["1f48c"],":orange_book:":["1f4d9"],":ring:":["1f48d"],":books:":["1f4da"],":gem:":["1f48e"],":name_badge:":["1f4db"],":couplekiss:":["1f48f"],":scroll:":["1f4dc"],":bouquet:":["1f490"],":pencil:":["1f4dd"],":couple_with_heart:":["1f491"],":telephone_receiver:":["1f4de"],":wedding:":["1f492"],":pager:":["1f4df"],":fax:":["1f4e0"],":heartbeat:":["1f493"],":satellite:":["1f4e1"],":loudspeaker:":["1f4e2"],":broken_heart:":["1f494"],":mega:":["1f4e3"],":outbox_tray:":["1f4e4"],":two_hearts:":["1f495"],":inbox_tray:":["1f4e5"],":package:":["1f4e6"],":sparkling_heart:":["1f496"],":e-mail:":["1f4e7"],":email:":["1f4e7"],":incoming_envelope:":["1f4e8"],":heartpulse:":["1f497"],":envelope_with_arrow:":["1f4e9"],":mailbox_closed:":["1f4ea"],":cupid:":["1f498"],":mailbox:":["1f4eb"],":postbox:":["1f4ee"],":blue_heart:":["1f499"],":newspaper:":["1f4f0"],":iphone:":["1f4f1"],":green_heart:":["1f49a"],":calling:":["1f4f2"],":vibration_mode:":["1f4f3"],":yellow_heart:":["1f49b"],":mobile_phone_off:":["1f4f4"],":signal_strength:":["1f4f6"],":purple_heart:":["1f49c"],":camera:":["1f4f7"],":video_camera:":["1f4f9"],":gift_heart:":["1f49d"],":tv:":["1f4fa"],":radio:":["1f4fb"],":revolving_hearts:":["1f49e"],":vhs:":["1f4fc"],":arrows_clockwise:":["1f503"],":heart_decoration:":["1f49f"],":loud_sound:":["1f50a"],":battery:":["1f50b"],":diamond_shape_with_a_dot_inside:":["1f4a0"],":electric_plug:":["1f50c"],":mag:":["1f50d"],":bulb:":["1f4a1"],":mag_right:":["1f50e"],":lock_with_ink_pen:":["1f50f"],":anger:":["1f4a2"],":closed_lock_with_key:":["1f510"],":key:":["1f511"],":bomb:":["1f4a3"],":lock:":["1f512"],":unlock:":["1f513"],":zzz:":["1f4a4"],":bell:":["1f514"],":bookmark:":["1f516"],":boom:":["1f4a5"],":link:":["1f517"],":radio_button:":["1f518"],":sweat_drops:":["1f4a6"],":back:":["1f519"],":end:":["1f51a"],":droplet:":["1f4a7"],":on:":["1f51b"],":soon:":["1f51c"],":dash:":["1f4a8"],":top:":["1f51d"],":underage:":["1f51e"],":poop:":["1f4a9"],":shit:":["1f4a9"],":hankey:":["1f4a9"],":poo:":["1f4a9"],":ten:":["1f51f"],":muscle:":["1f4aa"],":capital_abcd:":["1f520"],":abcd:":["1f521"],":dizzy:":["1f4ab"],":1234:":["1f522"],":symbols:":["1f523"],":speech_balloon:":["1f4ac"],":abc:":["1f524"],":fire:":["1f525"],":flame:":["1f525"],":white_flower:":["1f4ae"],":flashlight:":["1f526"],":wrench:":["1f527"],":100:":["1f4af"],":hammer:":["1f528"],":nut_and_bolt:":["1f529"],":moneybag:":["1f4b0"],":knife:":["1f52a"],":gun:":["1f52b"],":currency_exchange:":["1f4b1"],":crystal_ball:":["1f52e"],":heavy_dollar_sign:":["1f4b2"],":six_pointed_star:":["1f52f"],":credit_card:":["1f4b3"],":beginner:":["1f530"],":trident:":["1f531"],":yen:":["1f4b4"],":black_square_button:":["1f532"],":white_square_button:":["1f533"],":dollar:":["1f4b5"],":red_circle:":["1f534"],":large_blue_circle:":["1f535"],":money_with_wings:":["1f4b8"],":large_orange_diamond:":["1f536"],":large_blue_diamond:":["1f537"],":chart:":["1f4b9"],":small_orange_diamond:":["1f538"],":small_blue_diamond:":["1f539"],":seat:":["1f4ba"],":small_red_triangle:":["1f53a"],":small_red_triangle_down:":["1f53b"],":computer:":["1f4bb"],":arrow_up_small:":["1f53c"],":briefcase:":["1f4bc"],":arrow_down_small:":["1f53d"],":clock1:":["1f550"],":minidisc:":["1f4bd"],":clock2:":["1f551"],":floppy_disk:":["1f4be"],":clock3:":["1f552"],":cd:":["1f4bf"],":clock4:":["1f553"],":dvd:":["1f4c0"],":clock5:":["1f554"],":clock6:":["1f555"],":file_folder:":["1f4c1"],":clock7:":["1f556"],":clock8:":["1f557"],":open_file_folder:":["1f4c2"],":clock9:":["1f558"],":clock10:":["1f559"],":page_with_curl:":["1f4c3"],":clock11:":["1f55a"],":clock12:":["1f55b"],":page_facing_up:":["1f4c4"],":mount_fuji:":["1f5fb"],":tokyo_tower:":["1f5fc"],":date:":["1f4c5"],":statue_of_liberty:":["1f5fd"],":japan:":["1f5fe"],":calendar:":["1f4c6"],":moyai:":["1f5ff"],":grin:":["1f601"],":joy:":["1f602"],":smiley:":["1f603"],":chart_with_upwards_trend:":["1f4c8"],":smile:":["1f604"],":sweat_smile:":["1f605"],":chart_with_downwards_trend:":["1f4c9"],":laughing:":["1f606"],":satisfied:":["1f606"],":wink:":["1f609"],":bar_chart:":["1f4ca"],":blush:":["1f60a"],":yum:":["1f60b"],":clipboard:":["1f4cb"],":relieved:":["1f60c"],":heart_eyes:":["1f60d"],":pushpin:":["1f4cc"],":smirk:":["1f60f"],":unamused:":["1f612"],":round_pushpin:":["1f4cd"],":sweat:":["1f613"],":pensive:":["1f614"],":paperclip:":["1f4ce"],":confounded:":["1f616"],":kissing_heart:":["1f618"],":straight_ruler:":["1f4cf"],":kissing_closed_eyes:":["1f61a"],":stuck_out_tongue_winking_eye:":["1f61c"],":triangular_ruler:":["1f4d0"],":stuck_out_tongue_closed_eyes:":["1f61d"],":disappointed:":["1f61e"],":bookmark_tabs:":["1f4d1"],":angry:":["1f620"],":rage:":["1f621"],":cry:":["1f622"],":persevere:":["1f623"],":triumph:":["1f624"],":disappointed_relieved:":["1f625"],":fearful:":["1f628"],":weary:":["1f629"],":sleepy:":["1f62a"],":tired_face:":["1f62b"],":sob:":["1f62d"],":cold_sweat:":["1f630"],":scream:":["1f631"],":astonished:":["1f632"],":flushed:":["1f633"],":dizzy_face:":["1f635"],":mask:":["1f637"],":smile_cat:":["1f638"],":joy_cat:":["1f639"],":smiley_cat:":["1f63a"],":heart_eyes_cat:":["1f63b"],":smirk_cat:":["1f63c"],":kissing_cat:":["1f63d"],":pouting_cat:":["1f63e"],":crying_cat_face:":["1f63f"],":scream_cat:":["1f640"],":no_good:":["1f645"],":ok_woman:":["1f646"],":bow:":["1f647"],":see_no_evil:":["1f648"],":hear_no_evil:":["1f649"],":speak_no_evil:":["1f64a"],":raising_hand:":["1f64b"],":raised_hands:":["1f64c"],":person_frowning:":["1f64d"],":person_with_pouting_face:":["1f64e"],":pray:":["1f64f"],":rocket:":["1f680"],":railway_car:":["1f683"],":bullettrain_side:":["1f684"],":bullettrain_front:":["1f685"],":metro:":["1f687"],":station:":["1f689"],":bus:":["1f68c"],":busstop:":["1f68f"],":ambulance:":["1f691"],":fire_engine:":["1f692"],":police_car:":["1f693"],":taxi:":["1f695"],":red_car:":["1f697"],":blue_car:":["1f699"],":truck:":["1f69a"],":ship:":["1f6a2"],":speedboat:":["1f6a4"],":traffic_light:":["1f6a5"],":construction:":["1f6a7"],":rotating_light:":["1f6a8"],":triangular_flag_on_post:":["1f6a9"],":door:":["1f6aa"],":no_entry_sign:":["1f6ab"],":smoking:":["1f6ac"],":no_smoking:":["1f6ad"],":bike:":["1f6b2"],":walking:":["1f6b6"],":mens:":["1f6b9"],":womens:":["1f6ba"],":restroom:":["1f6bb"],":baby_symbol:":["1f6bc"],":toilet:":["1f6bd"],":wc:":["1f6be"],":bath:":["1f6c0"],":metal:":["1f918"],":sign_of_the_horns:":["1f918"],":grinning:":["1f600"],":innocent:":["1f607"],":smiling_imp:":["1f608"],":sunglasses:":["1f60e"],":neutral_face:":["1f610"],":expressionless:":["1f611"],":confused:":["1f615"],":kissing:":["1f617"],":kissing_smiling_eyes:":["1f619"],":stuck_out_tongue:":["1f61b"],":worried:":["1f61f"],":frowning:":["1f626"],":anguished:":["1f627"],":grimacing:":["1f62c"],":open_mouth:":["1f62e"],":hushed:":["1f62f"],":sleeping:":["1f634"],":no_mouth:":["1f636"],":helicopter:":["1f681"],":steam_locomotive:":["1f682"],":train2:":["1f686"],":light_rail:":["1f688"],":tram:":["1f68a"],":oncoming_bus:":["1f68d"],":trolleybus:":["1f68e"],":minibus:":["1f690"],":oncoming_police_car:":["1f694"],":oncoming_taxi:":["1f696"],":oncoming_automobile:":["1f698"],":articulated_lorry:":["1f69b"],":tractor:":["1f69c"],":monorail:":["1f69d"],":mountain_railway:":["1f69e"],":suspension_railway:":["1f69f"],":mountain_cableway:":["1f6a0"],":aerial_tramway:":["1f6a1"],":rowboat:":["1f6a3"],":vertical_traffic_light:":["1f6a6"],":put_litter_in_its_place:":["1f6ae"],":do_not_litter:":["1f6af"],":potable_water:":["1f6b0"],":non-potable_water:":["1f6b1"],":no_bicycles:":["1f6b3"],":bicyclist:":["1f6b4"],":mountain_bicyclist:":["1f6b5"],":no_pedestrians:":["1f6b7"],":children_crossing:":["1f6b8"],":shower:":["1f6bf"],":bathtub:":["1f6c1"],":passport_control:":["1f6c2"],":customs:":["1f6c3"],":baggage_claim:":["1f6c4"],":left_luggage:":["1f6c5"],":earth_africa:":["1f30d"],":earth_americas:":["1f30e"],":globe_with_meridians:":["1f310"],":waxing_crescent_moon:":["1f312"],":waning_gibbous_moon:":["1f316"],":last_quarter_moon:":["1f317"],":waning_crescent_moon:":["1f318"],":new_moon_with_face:":["1f31a"],":last_quarter_moon_with_face:":["1f31c"],":full_moon_with_face:":["1f31d"],":sun_with_face:":["1f31e"],":evergreen_tree:":["1f332"],":deciduous_tree:":["1f333"],":lemon:":["1f34b"],":pear:":["1f350"],":baby_bottle:":["1f37c"],":horse_racing:":["1f3c7"],":rugby_football:":["1f3c9"],":european_post_office:":["1f3e4"],":rat:":["1f400"],":mouse2:":["1f401"],":ox:":["1f402"],":water_buffalo:":["1f403"],":cow2:":["1f404"],":tiger2:":["1f405"],":leopard:":["1f406"],":rabbit2:":["1f407"],":cat2:":["1f408"],":dragon:":["1f409"],":crocodile:":["1f40a"],":whale2:":["1f40b"],":ram:":["1f40f"],":goat:":["1f410"],":rooster:":["1f413"],":dog2:":["1f415"],":pig2:":["1f416"],":dromedary_camel:":["1f42a"],":busts_in_silhouette:":["1f465"],":two_men_holding_hands:":["1f46c"],":two_women_holding_hands:":["1f46d"],":thought_balloon:":["1f4ad"],":euro:":["1f4b6"],":pound:":["1f4b7"],":mailbox_with_mail:":["1f4ec"],":mailbox_with_no_mail:":["1f4ed"],":postal_horn:":["1f4ef"],":no_mobile_phones:":["1f4f5"],":twisted_rightwards_arrows:":["1f500"],":repeat:":["1f501"],":repeat_one:":["1f502"],":arrows_counterclockwise:":["1f504"],":low_brightness:":["1f505"],":high_brightness:":["1f506"],":mute:":["1f507"],":sound:":["1f509"],":no_bell:":["1f515"],":microscope:":["1f52c"],":telescope:":["1f52d"],":clock130:":["1f55c"],":clock230:":["1f55d"],":clock330:":["1f55e"],":clock430:":["1f55f"],":clock530:":["1f560"],":clock630:":["1f561"],":clock730:":["1f562"],":clock830:":["1f563"],":clock930:":["1f564"],":clock1030:":["1f565"],":clock1130:":["1f566"],":clock1230:":["1f567"],":speaker:":["1f508"],":train:":["1f68b"],":medal:":["1f3c5"],":sports_medal:":["1f3c5"],":flag_black:":["1f3f4"],":waving_black_flag:":["1f3f4"],":camera_with_flash:":["1f4f8"],":sleeping_accommodation:":["1f6cc"],":middle_finger:":["1f595"],":reversed_hand_with_middle_finger_extended:":["1f595"],":vulcan:":["1f596"],":raised_hand_with_part_between_middle_and_ring_fingers:":["1f596"],":slight_frown:":["1f641"],":slightly_frowning_face:":["1f641"],":slight_smile:":["1f642"],":slightly_smiling_face:":["1f642"],":airplane_departure:":["1f6eb"],":airplane_arriving:":["1f6ec"],":tone1:":["1f3fb"],":tone2:":["1f3fc"],":tone3:":["1f3fd"],":tone4:":["1f3fe"],":tone5:":["1f3ff"],":upside_down:":["1f643"],":upside_down_face:":["1f643"],":money_mouth:":["1f911"],":money_mouth_face:":["1f911"],":nerd:":["1f913"],":nerd_face:":["1f913"],":hugging:":["1f917"],":hugging_face:":["1f917"],":rolling_eyes:":["1f644"],":face_with_rolling_eyes:":["1f644"],":thinking:":["1f914"],":thinking_face:":["1f914"],":zipper_mouth:":["1f910"],":zipper_mouth_face:":["1f910"],":thermometer_face:":["1f912"],":face_with_thermometer:":["1f912"],":head_bandage:":["1f915"],":face_with_head_bandage:":["1f915"],":robot:":["1f916"],":robot_face:":["1f916"],":lion_face:":["1f981"],":lion:":["1f981"],":unicorn:":["1f984"],":unicorn_face:":["1f984"],":scorpion:":["1f982"],":crab:":["1f980"],":turkey:":["1f983"],":cheese:":["1f9c0"],":cheese_wedge:":["1f9c0"],":hotdog:":["1f32d"],":hot_dog:":["1f32d"],":taco:":["1f32e"],":burrito:":["1f32f"],":popcorn:":["1f37f"],":champagne:":["1f37e"],":bottle_with_popping_cork:":["1f37e"],":bow_and_arrow:":["1f3f9"],":archery:":["1f3f9"],":amphora:":["1f3fa"],":place_of_worship:":["1f6d0"],":worship_symbol:":["1f6d0"],":kaaba:":["1f54b"],":mosque:":["1f54c"],":synagogue:":["1f54d"],":menorah:":["1f54e"],":prayer_beads:":["1f4ff"],":cricket:":["1f3cf"],":cricket_bat_ball:":["1f3cf"],":volleyball:":["1f3d0"],":field_hockey:":["1f3d1"],":hockey:":["1f3d2"],":ping_pong:":["1f3d3"],":table_tennis:":["1f3d3"],":badminton:":["1f3f8"],":fast_forward:":["23e9"],":rewind:":["23ea"],":arrow_double_up:":["23eb"],":arrow_double_down:":["23ec"],":alarm_clock:":["23f0"],":hourglass_flowing_sand:":["23f3"],":ophiuchus:":["26ce"],":white_check_mark:":["2705"],":fist:":["270a"],":raised_hand:":["270b"],":sparkles:":["2728"],":x:":["274c"],":negative_squared_cross_mark:":["274e"],":question:":["2753"],":grey_question:":["2754"],":grey_exclamation:":["2755"],":heavy_plus_sign:":["2795"],":heavy_minus_sign:":["2796"],":heavy_division_sign:":["2797"],":curly_loop:":["27b0"],":loop:":["27bf"]};var t,i=[];for(t in e.emojioneList)e.emojioneList.hasOwnProperty(t)&&i.push(t.replace(/[+]/g,"\\$&"));e.shortnames=i.join("|"),e.asciiList={"<3":"2764","</3":"1f494",":')":"1f602",":'-)":"1f602",":D":"1f603",":-D":"1f603","=D":"1f603",":)":"1f604",":-)":"1f604","=]":"1f604","=)":"1f604",":]":"1f604","':)":"1f605","':-)":"1f605","'=)":"1f605","':D":"1f605","':-D":"1f605","'=D":"1f605",">:)":"1f606",">;)":"1f606",">:-)":"1f606",">=)":"1f606",";)":"1f609",";-)":"1f609","*-)":"1f609","*)":"1f609",";-]":"1f609",";]":"1f609",";D":"1f609",";^)":"1f609","':(":"1f613","':-(":"1f613","'=(":"1f613",":*":"1f618",":-*":"1f618","=*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c","x-p":"1f61c",">:[":"1f61e",":-(":"1f61e",":(":"1f61e",":-[":"1f61e",":[":"1f61e","=(":"1f61e",">:(":"1f620",">:-(":"1f620",":@":"1f620",":'(":"1f622",":'-(":"1f622",";(":"1f622",";-(":"1f622",">.<":"1f623","D:":"1f628",":$":"1f633","=$":"1f633","#-)":"1f635","#)":"1f635","%-)":"1f635","%)":"1f635","X)":"1f635","X-)":"1f635","*\\0/*":"1f646","\\0/":"1f646","*\\O/*":"1f646","\\O/":"1f646","O:-)":"1f607","0:-3":"1f607","0:3":"1f607","0:-)":"1f607","0:)":"1f607","0;^)":"1f607","O:)":"1f607","O;-)":"1f607","O=)":"1f607","0;-)":"1f607","O:-3":"1f607","O:3":"1f607","B-)":"1f60e","B)":"1f60e","8)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e","-_-":"1f611","-__-":"1f611","-___-":"1f611",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":/":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",":P":"1f61b",":-P":"1f61b","=P":"1f61b",":-p":"1f61b",":p":"1f61b","=p":"1f61b",":-Þ":"1f61b",":Þ":"1f61b",":þ":"1f61b",":-þ":"1f61b",":-b":"1f61b",":b":"1f61b","d:":"1f61b",":-O":"1f62e",":O":"1f62e",":-o":"1f62e",":o":"1f62e",O_O:"1f62e",">:O":"1f62e",":-X":"1f636",":X":"1f636",":-#":"1f636",":#":"1f636","=X":"1f636","=x":"1f636",":x":"1f636",":-x":"1f636","=#":"1f636"},e.asciiRegexp="(\\<3|&lt;3|\\<\\/3|&lt;\\/3|\\:'\\)|\\:'\\-\\)|\\:D|\\:\\-D|\\=D|\\:\\)|\\:\\-\\)|\\=\\]|\\=\\)|\\:\\]|'\\:\\)|'\\:\\-\\)|'\\=\\)|'\\:D|'\\:\\-D|'\\=D|\\>\\:\\)|&gt;\\:\\)|\\>;\\)|&gt;;\\)|\\>\\:\\-\\)|&gt;\\:\\-\\)|\\>\\=\\)|&gt;\\=\\)|;\\)|;\\-\\)|\\*\\-\\)|\\*\\)|;\\-\\]|;\\]|;D|;\\^\\)|'\\:\\(|'\\:\\-\\(|'\\=\\(|\\:\\*|\\:\\-\\*|\\=\\*|\\:\\^\\*|\\>\\:P|&gt;\\:P|X\\-P|x\\-p|\\>\\:\\[|&gt;\\:\\[|\\:\\-\\(|\\:\\(|\\:\\-\\[|\\:\\[|\\=\\(|\\>\\:\\(|&gt;\\:\\(|\\>\\:\\-\\(|&gt;\\:\\-\\(|\\:@|\\:'\\(|\\:'\\-\\(|;\\(|;\\-\\(|\\>\\.\\<|&gt;\\.&lt;|D\\:|\\:\\$|\\=\\$|#\\-\\)|#\\)|%\\-\\)|%\\)|X\\)|X\\-\\)|\\*\\\\0\\/\\*|\\\\0\\/|\\*\\\\O\\/\\*|\\\\O\\/|O\\:\\-\\)|0\\:\\-3|0\\:3|0\\:\\-\\)|0\\:\\)|0;\\^\\)|O\\:\\-\\)|O\\:\\)|O;\\-\\)|O\\=\\)|0;\\-\\)|O\\:\\-3|O\\:3|B\\-\\)|B\\)|8\\)|8\\-\\)|B\\-D|8\\-D|\\-_\\-|\\-__\\-|\\-___\\-|\\>\\:\\\\|&gt;\\:\\\\|\\>\\:\\/|&gt;\\:\\/|\\:\\-\\/|\\:\\-\\.|\\:\\/|\\:\\\\|\\=\\/|\\=\\\\|\\:L|\\=L|\\:P|\\:\\-P|\\=P|\\:\\-p|\\:p|\\=p|\\:\\-Þ|\\:\\-&THORN;|\\:Þ|\\:&THORN;|\\:þ|\\:&thorn;|\\:\\-þ|\\:\\-&thorn;|\\:\\-b|\\:b|d\\:|\\:\\-O|\\:O|\\:\\-o|\\:o|O_O|\\>\\:O|&gt;\\:O|\\:\\-X|\\:X|\\:\\-#|\\:#|\\=X|\\=x|\\:x|\\:\\-x|\\=#)",
e.unicodeRegexp="(\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC8B\\u200D\\uD83D\\uDC69|\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC8B\\u200D\\uD83D\\uDC68|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC68|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC67|\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69|\\uD83D\\uDC68\\u200D\\uD83D\\uDC68\\u200D\\uD83D\\uDC66|\\uD83D\\uDC41\\u200D\\uD83D\\uDDE8|\\uD83C\\uDDE6\\uD83C\\uDDE9|\\uD83C\\uDDE6\\uD83C\\uDDEA|\\uD83C\\uDDE6\\uD83C\\uDDEB|\\uD83C\\uDDE6\\uD83C\\uDDEC|\\uD83C\\uDDE6\\uD83C\\uDDEE|\\uD83C\\uDDE6\\uD83C\\uDDF1|\\uD83C\\uDDE6\\uD83C\\uDDF2|\\uD83C\\uDDE6\\uD83C\\uDDF4|\\uD83C\\uDDE6\\uD83C\\uDDF6|\\uD83C\\uDDE6\\uD83C\\uDDF7|\\uD83C\\uDDE6\\uD83C\\uDDF8|\\uD83E\\uDD18\\uD83C\\uDFFF|\\uD83E\\uDD18\\uD83C\\uDFFE|\\uD83E\\uDD18\\uD83C\\uDFFD|\\uD83E\\uDD18\\uD83C\\uDFFC|\\uD83E\\uDD18\\uD83C\\uDFFB|\\uD83D\\uDEC0\\uD83C\\uDFFF|\\uD83D\\uDEC0\\uD83C\\uDFFE|\\uD83D\\uDEC0\\uD83C\\uDFFD|\\uD83D\\uDEC0\\uD83C\\uDFFC|\\uD83D\\uDEC0\\uD83C\\uDFFB|\\uD83D\\uDEB6\\uD83C\\uDFFF|\\uD83D\\uDEB6\\uD83C\\uDFFE|\\uD83D\\uDEB6\\uD83C\\uDFFD|\\uD83D\\uDEB6\\uD83C\\uDFFC|\\uD83D\\uDEB6\\uD83C\\uDFFB|\\uD83D\\uDEB5\\uD83C\\uDFFF|\\uD83D\\uDEB5\\uD83C\\uDFFE|\\uD83D\\uDEB5\\uD83C\\uDFFD|\\uD83D\\uDEB5\\uD83C\\uDFFC|\\uD83D\\uDEB5\\uD83C\\uDFFB|\\uD83D\\uDEB4\\uD83C\\uDFFF|\\uD83D\\uDEB4\\uD83C\\uDFFE|\\uD83D\\uDEB4\\uD83C\\uDFFD|\\uD83D\\uDEB4\\uD83C\\uDFFC|\\uD83D\\uDEB4\\uD83C\\uDFFB|\\uD83D\\uDEA3\\uD83C\\uDFFF|\\uD83D\\uDEA3\\uD83C\\uDFFE|\\uD83D\\uDEA3\\uD83C\\uDFFD|\\uD83D\\uDEA3\\uD83C\\uDFFC|\\uD83D\\uDEA3\\uD83C\\uDFFB|\\uD83D\\uDE4F\\uD83C\\uDFFF|\\uD83D\\uDE4F\\uD83C\\uDFFE|\\uD83D\\uDE4F\\uD83C\\uDFFD|\\uD83D\\uDE4F\\uD83C\\uDFFC|\\uD83D\\uDE4F\\uD83C\\uDFFB|\\uD83D\\uDE4E\\uD83C\\uDFFF|\\uD83D\\uDE4E\\uD83C\\uDFFE|\\uD83D\\uDE4E\\uD83C\\uDFFD|\\uD83D\\uDE4E\\uD83C\\uDFFC|\\uD83D\\uDE4E\\uD83C\\uDFFB|\\uD83D\\uDE4D\\uD83C\\uDFFF|\\uD83D\\uDE4D\\uD83C\\uDFFE|\\uD83D\\uDE4D\\uD83C\\uDFFD|\\uD83D\\uDE4D\\uD83C\\uDFFC|\\uD83D\\uDE4D\\uD83C\\uDFFB|\\uD83D\\uDE4C\\uD83C\\uDFFF|\\uD83D\\uDE4C\\uD83C\\uDFFE|\\uD83D\\uDE4C\\uD83C\\uDFFD|\\uD83D\\uDE4C\\uD83C\\uDFFC|\\uD83D\\uDE4C\\uD83C\\uDFFB|\\uD83D\\uDE4B\\uD83C\\uDFFF|\\uD83D\\uDE4B\\uD83C\\uDFFE|\\uD83D\\uDE4B\\uD83C\\uDFFD|\\uD83D\\uDE4B\\uD83C\\uDFFC|\\uD83D\\uDE4B\\uD83C\\uDFFB|\\uD83D\\uDE47\\uD83C\\uDFFF|\\uD83D\\uDE47\\uD83C\\uDFFE|\\uD83D\\uDE47\\uD83C\\uDFFD|\\uD83D\\uDE47\\uD83C\\uDFFC|\\uD83D\\uDE47\\uD83C\\uDFFB|\\uD83D\\uDE46\\uD83C\\uDFFF|\\uD83D\\uDE46\\uD83C\\uDFFE|\\uD83D\\uDE46\\uD83C\\uDFFD|\\uD83D\\uDE46\\uD83C\\uDFFC|\\uD83D\\uDE46\\uD83C\\uDFFB|\\uD83D\\uDE45\\uD83C\\uDFFF|\\uD83D\\uDE45\\uD83C\\uDFFE|\\uD83D\\uDE45\\uD83C\\uDFFD|\\uD83D\\uDE45\\uD83C\\uDFFC|\\uD83D\\uDE45\\uD83C\\uDFFB|\\uD83D\\uDD96\\uD83C\\uDFFF|\\uD83D\\uDD96\\uD83C\\uDFFE|\\uD83D\\uDD96\\uD83C\\uDFFD|\\uD83D\\uDD96\\uD83C\\uDFFC|\\uD83D\\uDD96\\uD83C\\uDFFB|\\uD83D\\uDD95\\uD83C\\uDFFF|\\uD83D\\uDD95\\uD83C\\uDFFE|\\uD83D\\uDD95\\uD83C\\uDFFD|\\uD83D\\uDD95\\uD83C\\uDFFC|\\uD83D\\uDD95\\uD83C\\uDFFB|\\uD83D\\uDD90\\uD83C\\uDFFF|\\uD83D\\uDD90\\uD83C\\uDFFE|\\uD83D\\uDD90\\uD83C\\uDFFD|\\uD83D\\uDD90\\uD83C\\uDFFC|\\uD83D\\uDD90\\uD83C\\uDFFB|\\uD83D\\uDD75\\uD83C\\uDFFF|\\uD83D\\uDD75\\uD83C\\uDFFE|\\uD83D\\uDD75\\uD83C\\uDFFD|\\uD83D\\uDD75\\uD83C\\uDFFC|\\uD83D\\uDD75\\uD83C\\uDFFB|\\uD83D\\uDCAA\\uD83C\\uDFFF|\\uD83D\\uDCAA\\uD83C\\uDFFE|\\uD83D\\uDCAA\\uD83C\\uDFFD|\\uD83D\\uDCAA\\uD83C\\uDFFC|\\uD83D\\uDCAA\\uD83C\\uDFFB|\\uD83D\\uDC87\\uD83C\\uDFFF|\\uD83D\\uDC87\\uD83C\\uDFFE|\\uD83D\\uDC87\\uD83C\\uDFFD|\\uD83D\\uDC87\\uD83C\\uDFFC|\\uD83D\\uDC87\\uD83C\\uDFFB|\\uD83D\\uDC86\\uD83C\\uDFFF|\\uD83D\\uDC86\\uD83C\\uDFFE|\\uD83D\\uDC86\\uD83C\\uDFFD|\\uD83D\\uDC86\\uD83C\\uDFFC|\\uD83D\\uDC86\\uD83C\\uDFFB|\\uD83D\\uDC85\\uD83C\\uDFFF|\\uD83D\\uDC85\\uD83C\\uDFFE|\\uD83D\\uDC85\\uD83C\\uDFFD|\\uD83D\\uDC85\\uD83C\\uDFFC|\\uD83D\\uDC85\\uD83C\\uDFFB|\\uD83D\\uDC83\\uD83C\\uDFFF|\\uD83D\\uDC83\\uD83C\\uDFFE|\\uD83D\\uDC83\\uD83C\\uDFFD|\\uD83D\\uDC83\\uD83C\\uDFFC|\\uD83D\\uDC83\\uD83C\\uDFFB|\\uD83D\\uDC82\\uD83C\\uDFFF|\\uD83D\\uDC82\\uD83C\\uDFFE|\\uD83D\\uDC82\\uD83C\\uDFFD|\\uD83D\\uDC82\\uD83C\\uDFFC|\\uD83D\\uDC82\\uD83C\\uDFFB|\\uD83D\\uDC81\\uD83C\\uDFFF|\\uD83D\\uDC81\\uD83C\\uDFFE|\\uD83D\\uDC81\\uD83C\\uDFFD|\\uD83D\\uDC81\\uD83C\\uDFFC|\\uD83D\\uDC81\\uD83C\\uDFFB|\\uD83D\\uDC7C\\uD83C\\uDFFF|\\uD83D\\uDC7C\\uD83C\\uDFFE|\\uD83D\\uDC7C\\uD83C\\uDFFD|\\uD83D\\uDC7C\\uD83C\\uDFFC|\\uD83D\\uDC7C\\uD83C\\uDFFB|\\uD83D\\uDC78\\uD83C\\uDFFF|\\uD83D\\uDC78\\uD83C\\uDFFE|\\uD83D\\uDC78\\uD83C\\uDFFD|\\uD83D\\uDC78\\uD83C\\uDFFC|\\uD83D\\uDC78\\uD83C\\uDFFB|\\uD83D\\uDC77\\uD83C\\uDFFF|\\uD83D\\uDC77\\uD83C\\uDFFE|\\uD83D\\uDC77\\uD83C\\uDFFD|\\uD83D\\uDC77\\uD83C\\uDFFC|\\uD83D\\uDC77\\uD83C\\uDFFB|\\uD83D\\uDC76\\uD83C\\uDFFF|\\uD83D\\uDC76\\uD83C\\uDFFE|\\uD83D\\uDC76\\uD83C\\uDFFD|\\uD83D\\uDC76\\uD83C\\uDFFC|\\uD83D\\uDC76\\uD83C\\uDFFB|\\uD83D\\uDC75\\uD83C\\uDFFF|\\uD83D\\uDC75\\uD83C\\uDFFE|\\uD83D\\uDC75\\uD83C\\uDFFD|\\uD83D\\uDC75\\uD83C\\uDFFC|\\uD83D\\uDC75\\uD83C\\uDFFB|\\uD83D\\uDC74\\uD83C\\uDFFF|\\uD83D\\uDC74\\uD83C\\uDFFE|\\uD83D\\uDC74\\uD83C\\uDFFD|\\uD83D\\uDC74\\uD83C\\uDFFC|\\uD83D\\uDC74\\uD83C\\uDFFB|\\uD83D\\uDC73\\uD83C\\uDFFF|\\uD83D\\uDC73\\uD83C\\uDFFE|\\uD83D\\uDC73\\uD83C\\uDFFD|\\uD83D\\uDC73\\uD83C\\uDFFC|\\uD83D\\uDC73\\uD83C\\uDFFB|\\uD83D\\uDC72\\uD83C\\uDFFF|\\uD83D\\uDC72\\uD83C\\uDFFE|\\uD83D\\uDC72\\uD83C\\uDFFD|\\uD83D\\uDC72\\uD83C\\uDFFC|\\uD83D\\uDC72\\uD83C\\uDFFB|\\uD83D\\uDC71\\uD83C\\uDFFF|\\uD83D\\uDC71\\uD83C\\uDFFE|\\uD83D\\uDC71\\uD83C\\uDFFD|\\uD83D\\uDC71\\uD83C\\uDFFC|\\uD83D\\uDC71\\uD83C\\uDFFB|\\uD83D\\uDC70\\uD83C\\uDFFF|\\uD83D\\uDC70\\uD83C\\uDFFE|\\uD83D\\uDC70\\uD83C\\uDFFD|\\uD83D\\uDC70\\uD83C\\uDFFC|\\uD83D\\uDC70\\uD83C\\uDFFB|\\uD83D\\uDC6E\\uD83C\\uDFFF|\\uD83D\\uDC6E\\uD83C\\uDFFE|\\uD83D\\uDC6E\\uD83C\\uDFFD|\\uD83D\\uDC6E\\uD83C\\uDFFC|\\uD83D\\uDC6E\\uD83C\\uDFFB|\\uD83D\\uDC69\\uD83C\\uDFFF|\\uD83D\\uDC69\\uD83C\\uDFFE|\\uD83D\\uDC69\\uD83C\\uDFFD|\\uD83D\\uDC69\\uD83C\\uDFFC|\\uD83D\\uDC69\\uD83C\\uDFFB|\\uD83D\\uDC68\\uD83C\\uDFFF|\\uD83D\\uDC68\\uD83C\\uDFFE|\\uD83D\\uDC68\\uD83C\\uDFFD|\\uD83D\\uDC68\\uD83C\\uDFFC|\\uD83D\\uDC68\\uD83C\\uDFFB|\\uD83D\\uDC67\\uD83C\\uDFFF|\\uD83D\\uDC67\\uD83C\\uDFFE|\\uD83D\\uDC67\\uD83C\\uDFFD|\\uD83D\\uDC67\\uD83C\\uDFFC|\\uD83D\\uDC67\\uD83C\\uDFFB|\\uD83D\\uDC66\\uD83C\\uDFFF|\\uD83D\\uDC66\\uD83C\\uDFFE|\\uD83D\\uDC66\\uD83C\\uDFFD|\\uD83D\\uDC66\\uD83C\\uDFFC|\\uD83D\\uDC66\\uD83C\\uDFFB|\\uD83D\\uDC50\\uD83C\\uDFFF|\\uD83D\\uDC50\\uD83C\\uDFFE|\\uD83D\\uDC50\\uD83C\\uDFFD|\\uD83D\\uDC50\\uD83C\\uDFFC|\\uD83D\\uDC50\\uD83C\\uDFFB|\\uD83D\\uDC4F\\uD83C\\uDFFF|\\uD83D\\uDC4F\\uD83C\\uDFFE|\\uD83D\\uDC4F\\uD83C\\uDFFD|\\uD83D\\uDC4F\\uD83C\\uDFFC|\\uD83D\\uDC4F\\uD83C\\uDFFB|\\uD83D\\uDC4E\\uD83C\\uDFFF|\\uD83D\\uDC4E\\uD83C\\uDFFE|\\uD83D\\uDC4E\\uD83C\\uDFFD|\\uD83D\\uDC4E\\uD83C\\uDFFC|\\uD83D\\uDC4E\\uD83C\\uDFFB|\\uD83D\\uDC4D\\uD83C\\uDFFF|\\uD83D\\uDC4D\\uD83C\\uDFFE|\\uD83D\\uDC4D\\uD83C\\uDFFD|\\uD83D\\uDC4D\\uD83C\\uDFFC|\\uD83D\\uDC4D\\uD83C\\uDFFB|\\uD83D\\uDC4C\\uD83C\\uDFFF|\\uD83D\\uDC4C\\uD83C\\uDFFE|\\uD83D\\uDC4C\\uD83C\\uDFFD|\\uD83D\\uDC4C\\uD83C\\uDFFC|\\uD83D\\uDC4C\\uD83C\\uDFFB|\\uD83D\\uDC4B\\uD83C\\uDFFF|\\uD83D\\uDC4B\\uD83C\\uDFFE|\\uD83D\\uDC4B\\uD83C\\uDFFD|\\uD83D\\uDC4B\\uD83C\\uDFFC|\\uD83D\\uDC4B\\uD83C\\uDFFB|\\uD83D\\uDC4A\\uD83C\\uDFFF|\\uD83D\\uDC4A\\uD83C\\uDFFE|\\uD83D\\uDC4A\\uD83C\\uDFFD|\\uD83D\\uDC4A\\uD83C\\uDFFC|\\uD83D\\uDC4A\\uD83C\\uDFFB|\\uD83D\\uDC49\\uD83C\\uDFFF|\\uD83D\\uDC49\\uD83C\\uDFFE|\\uD83D\\uDC49\\uD83C\\uDFFD|\\uD83D\\uDC49\\uD83C\\uDFFC|\\uD83D\\uDC49\\uD83C\\uDFFB|\\uD83D\\uDC48\\uD83C\\uDFFF|\\uD83D\\uDC48\\uD83C\\uDFFE|\\uD83D\\uDC48\\uD83C\\uDFFD|\\uD83D\\uDC48\\uD83C\\uDFFC|\\uD83D\\uDC48\\uD83C\\uDFFB|\\uD83D\\uDC47\\uD83C\\uDFFF|\\uD83D\\uDC47\\uD83C\\uDFFE|\\uD83D\\uDC47\\uD83C\\uDFFD|\\uD83D\\uDC47\\uD83C\\uDFFC|\\uD83D\\uDC47\\uD83C\\uDFFB|\\uD83D\\uDC46\\uD83C\\uDFFF|\\uD83D\\uDC46\\uD83C\\uDFFE|\\uD83D\\uDC46\\uD83C\\uDFFD|\\uD83D\\uDC46\\uD83C\\uDFFC|\\uD83D\\uDC46\\uD83C\\uDFFB|\\uD83D\\uDC43\\uD83C\\uDFFF|\\uD83D\\uDC43\\uD83C\\uDFFE|\\uD83D\\uDC43\\uD83C\\uDFFD|\\uD83D\\uDC43\\uD83C\\uDFFC|\\uD83D\\uDC43\\uD83C\\uDFFB|\\uD83D\\uDC42\\uD83C\\uDFFF|\\uD83D\\uDC42\\uD83C\\uDFFE|\\uD83D\\uDC42\\uD83C\\uDFFD|\\uD83D\\uDC42\\uD83C\\uDFFC|\\uD83D\\uDC42\\uD83C\\uDFFB|\\uD83C\\uDFCB\\uD83C\\uDFFF|\\uD83C\\uDFCB\\uD83C\\uDFFE|\\uD83C\\uDFCB\\uD83C\\uDFFD|\\uD83C\\uDFCB\\uD83C\\uDFFC|\\uD83C\\uDFCB\\uD83C\\uDFFB|\\uD83C\\uDFCA\\uD83C\\uDFFF|\\uD83C\\uDFCA\\uD83C\\uDFFE|\\uD83C\\uDFCA\\uD83C\\uDFFD|\\uD83C\\uDFCA\\uD83C\\uDFFC|\\uD83C\\uDFCA\\uD83C\\uDFFB|\\uD83C\\uDFC7\\uD83C\\uDFFF|\\uD83C\\uDFC7\\uD83C\\uDFFE|\\uD83C\\uDFC7\\uD83C\\uDFFD|\\uD83C\\uDFC7\\uD83C\\uDFFC|\\uD83C\\uDFC7\\uD83C\\uDFFB|\\uD83C\\uDFC4\\uD83C\\uDFFF|\\uD83C\\uDFC4\\uD83C\\uDFFE|\\uD83C\\uDFC4\\uD83C\\uDFFD|\\uD83C\\uDFC4\\uD83C\\uDFFC|\\uD83C\\uDFC4\\uD83C\\uDFFB|\\uD83C\\uDFC3\\uD83C\\uDFFF|\\uD83C\\uDFC3\\uD83C\\uDFFE|\\uD83C\\uDFC3\\uD83C\\uDFFD|\\uD83C\\uDFC3\\uD83C\\uDFFC|\\uD83C\\uDFC3\\uD83C\\uDFFB|\\uD83C\\uDF85\\uD83C\\uDFFF|\\uD83C\\uDF85\\uD83C\\uDFFE|\\uD83C\\uDF85\\uD83C\\uDFFD|\\uD83C\\uDF85\\uD83C\\uDFFC|\\uD83C\\uDF85\\uD83C\\uDFFB|\\uD83C\\uDDFF\\uD83C\\uDDFC|\\uD83C\\uDDFF\\uD83C\\uDDF2|\\uD83C\\uDDFF\\uD83C\\uDDE6|\\uD83C\\uDDFE\\uD83C\\uDDF9|\\uD83C\\uDDFE\\uD83C\\uDDEA|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDFC\\uD83C\\uDDF8|\\uD83C\\uDDFC\\uD83C\\uDDEB|\\uD83C\\uDDFB\\uD83C\\uDDFA|\\uD83C\\uDDFB\\uD83C\\uDDF3|\\uD83C\\uDDFB\\uD83C\\uDDEE|\\uD83C\\uDDFB\\uD83C\\uDDEC|\\uD83C\\uDDFB\\uD83C\\uDDEA|\\uD83C\\uDDFB\\uD83C\\uDDE8|\\uD83C\\uDDFB\\uD83C\\uDDE6|\\uD83C\\uDDFA\\uD83C\\uDDFF|\\uD83C\\uDDFA\\uD83C\\uDDFE|\\uD83C\\uDDFA\\uD83C\\uDDF8|\\uD83C\\uDDFA\\uD83C\\uDDF2|\\uD83C\\uDDFA\\uD83C\\uDDEC|\\uD83C\\uDDFA\\uD83C\\uDDE6|\\uD83C\\uDDF9\\uD83C\\uDDFF|\\uD83C\\uDDE6\\uD83C\\uDDE8|\\uD83C\\uDDF9\\uD83C\\uDDFB|\\uD83C\\uDDF9\\uD83C\\uDDF9|\\uD83C\\uDDF9\\uD83C\\uDDF7|\\uD83C\\uDDF9\\uD83C\\uDDF4|\\uD83C\\uDDF9\\uD83C\\uDDF3|\\uD83C\\uDDF9\\uD83C\\uDDF2|\\uD83C\\uDDF9\\uD83C\\uDDF1|\\uD83C\\uDDF9\\uD83C\\uDDF0|\\uD83C\\uDDF9\\uD83C\\uDDEF|\\uD83C\\uDDF9\\uD83C\\uDDED|\\uD83C\\uDDF9\\uD83C\\uDDEC|\\uD83C\\uDDF9\\uD83C\\uDDEB|\\uD83C\\uDDF9\\uD83C\\uDDE9|\\uD83C\\uDDF9\\uD83C\\uDDE8|\\uD83C\\uDDF9\\uD83C\\uDDE6|\\uD83C\\uDDF8\\uD83C\\uDDFF|\\uD83C\\uDDF8\\uD83C\\uDDFE|\\uD83C\\uDDF8\\uD83C\\uDDFD|\\uD83C\\uDDF8\\uD83C\\uDDFB|\\uD83C\\uDDF8\\uD83C\\uDDF9|\\uD83C\\uDDF8\\uD83C\\uDDF8|\\uD83C\\uDDF8\\uD83C\\uDDF7|\\uD83C\\uDDF8\\uD83C\\uDDF4|\\uD83C\\uDDF8\\uD83C\\uDDF3|\\uD83C\\uDDF8\\uD83C\\uDDF2|\\uD83C\\uDDF8\\uD83C\\uDDF1|\\uD83C\\uDDF8\\uD83C\\uDDF0|\\uD83C\\uDDF8\\uD83C\\uDDEF|\\uD83C\\uDDF8\\uD83C\\uDDEE|\\uD83C\\uDDF8\\uD83C\\uDDED|\\uD83C\\uDDF8\\uD83C\\uDDEC|\\uD83C\\uDDF8\\uD83C\\uDDEA|\\uD83C\\uDDF8\\uD83C\\uDDE9|\\uD83C\\uDDF8\\uD83C\\uDDE8|\\uD83C\\uDDF8\\uD83C\\uDDE7|\\uD83C\\uDDF8\\uD83C\\uDDE6|\\uD83C\\uDDF7\\uD83C\\uDDFC|\\uD83C\\uDDF7\\uD83C\\uDDFA|\\uD83C\\uDDF7\\uD83C\\uDDF8|\\uD83C\\uDDF7\\uD83C\\uDDF4|\\uD83C\\uDDF7\\uD83C\\uDDEA|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF5\\uD83C\\uDDFE|\\uD83C\\uDDF5\\uD83C\\uDDFC|\\uD83C\\uDDF5\\uD83C\\uDDF9|\\uD83C\\uDDF5\\uD83C\\uDDF8|\\uD83C\\uDDF5\\uD83C\\uDDF7|\\uD83C\\uDDF5\\uD83C\\uDDF3|\\uD83C\\uDDF5\\uD83C\\uDDF2|\\uD83C\\uDDF5\\uD83C\\uDDF1|\\uD83C\\uDDF5\\uD83C\\uDDF0|\\uD83C\\uDDF5\\uD83C\\uDDED|\\uD83C\\uDDF5\\uD83C\\uDDEC|\\uD83C\\uDDF5\\uD83C\\uDDEB|\\uD83C\\uDDF5\\uD83C\\uDDEA|\\uD83C\\uDDF5\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83C\\uDDF3\\uD83C\\uDDFF|\\uD83C\\uDDF3\\uD83C\\uDDFA|\\uD83C\\uDDF3\\uD83C\\uDDF7|\\uD83C\\uDDF3\\uD83C\\uDDF5|\\uD83C\\uDDF3\\uD83C\\uDDF4|\\uD83C\\uDDF3\\uD83C\\uDDF1|\\uD83C\\uDDF3\\uD83C\\uDDEE|\\uD83C\\uDDF3\\uD83C\\uDDEC|\\uD83C\\uDDF3\\uD83C\\uDDEB|\\uD83C\\uDDF3\\uD83C\\uDDEA|\\uD83C\\uDDF3\\uD83C\\uDDE8|\\uD83C\\uDDF3\\uD83C\\uDDE6|\\uD83C\\uDDF2\\uD83C\\uDDFF|\\uD83C\\uDDF2\\uD83C\\uDDFE|\\uD83C\\uDDF2\\uD83C\\uDDFD|\\uD83C\\uDDF2\\uD83C\\uDDFC|\\uD83C\\uDDF2\\uD83C\\uDDFB|\\uD83C\\uDDF2\\uD83C\\uDDFA|\\uD83C\\uDDF2\\uD83C\\uDDF9|\\uD83C\\uDDF2\\uD83C\\uDDF8|\\uD83C\\uDDF2\\uD83C\\uDDF7|\\uD83C\\uDDF2\\uD83C\\uDDF6|\\uD83C\\uDDF2\\uD83C\\uDDF5|\\uD83C\\uDDF2\\uD83C\\uDDF4|\\uD83C\\uDDF2\\uD83C\\uDDF3|\\uD83C\\uDDF2\\uD83C\\uDDF2|\\uD83C\\uDDF2\\uD83C\\uDDF1|\\uD83C\\uDDF2\\uD83C\\uDDF0|\\uD83C\\uDDF2\\uD83C\\uDDED|\\uD83C\\uDDF2\\uD83C\\uDDEC|\\uD83C\\uDDF2\\uD83C\\uDDEB|\\uD83C\\uDDF2\\uD83C\\uDDEA|\\uD83C\\uDDF2\\uD83C\\uDDE9|\\uD83C\\uDDF2\\uD83C\\uDDE8|\\uD83C\\uDDF2\\uD83C\\uDDE6|\\uD83C\\uDDF1\\uD83C\\uDDFE|\\uD83C\\uDDF1\\uD83C\\uDDFB|\\uD83C\\uDDF1\\uD83C\\uDDFA|\\uD83C\\uDDF1\\uD83C\\uDDF9|\\uD83C\\uDDF1\\uD83C\\uDDF8|\\uD83C\\uDDF1\\uD83C\\uDDF7|\\uD83C\\uDDF1\\uD83C\\uDDF0|\\uD83C\\uDDF1\\uD83C\\uDDEE|\\uD83C\\uDDF1\\uD83C\\uDDE8|\\uD83C\\uDDF1\\uD83C\\uDDE7|\\uD83C\\uDDF1\\uD83C\\uDDE6|\\uD83C\\uDDF0\\uD83C\\uDDFF|\\uD83C\\uDDF0\\uD83C\\uDDFE|\\uD83C\\uDDF0\\uD83C\\uDDFC|\\uD83C\\uDDF0\\uD83C\\uDDF7|\\uD83C\\uDDF0\\uD83C\\uDDF5|\\uD83C\\uDDF0\\uD83C\\uDDF3|\\uD83C\\uDDF0\\uD83C\\uDDF2|\\uD83C\\uDDF0\\uD83C\\uDDEE|\\uD83C\\uDDF0\\uD83C\\uDDED|\\uD83C\\uDDF0\\uD83C\\uDDEC|\\uD83C\\uDDF0\\uD83C\\uDDEA|\\uD83C\\uDDEF\\uD83C\\uDDF5|\\uD83C\\uDDEF\\uD83C\\uDDF4|\\uD83C\\uDDEF\\uD83C\\uDDF2|\\uD83C\\uDDEF\\uD83C\\uDDEA|\\uD83C\\uDDEE\\uD83C\\uDDF9|\\uD83C\\uDDEE\\uD83C\\uDDF8|\\uD83C\\uDDEE\\uD83C\\uDDF7|\\uD83C\\uDDEE\\uD83C\\uDDF6|\\uD83C\\uDDEE\\uD83C\\uDDF4|\\uD83C\\uDDEE\\uD83C\\uDDF3|\\uD83C\\uDDEE\\uD83C\\uDDF2|\\uD83C\\uDDEE\\uD83C\\uDDF1|\\uD83C\\uDDEE\\uD83C\\uDDEA|\\uD83C\\uDDEE\\uD83C\\uDDE9|\\uD83C\\uDDEE\\uD83C\\uDDE8|\\uD83C\\uDDED\\uD83C\\uDDFA|\\uD83C\\uDDED\\uD83C\\uDDF9|\\uD83C\\uDDED\\uD83C\\uDDF7|\\uD83C\\uDDED\\uD83C\\uDDF3|\\uD83C\\uDDED\\uD83C\\uDDF2|\\uD83C\\uDDED\\uD83C\\uDDF0|\\uD83C\\uDDEC\\uD83C\\uDDFE|\\uD83C\\uDDEC\\uD83C\\uDDFC|\\uD83C\\uDDEC\\uD83C\\uDDFA|\\uD83C\\uDDEC\\uD83C\\uDDF9|\\uD83C\\uDDEC\\uD83C\\uDDF8|\\uD83C\\uDDEC\\uD83C\\uDDF7|\\uD83C\\uDDEC\\uD83C\\uDDF6|\\uD83C\\uDDEC\\uD83C\\uDDF5|\\uD83C\\uDDEC\\uD83C\\uDDF3|\\uD83C\\uDDEC\\uD83C\\uDDF2|\\uD83C\\uDDEC\\uD83C\\uDDF1|\\uD83C\\uDDEC\\uD83C\\uDDEE|\\uD83C\\uDDEC\\uD83C\\uDDED|\\uD83C\\uDDEC\\uD83C\\uDDEC|\\uD83C\\uDDEC\\uD83C\\uDDEB|\\uD83C\\uDDEC\\uD83C\\uDDEA|\\uD83C\\uDDEC\\uD83C\\uDDE9|\\uD83C\\uDDEC\\uD83C\\uDDE7|\\uD83C\\uDDEC\\uD83C\\uDDE6|\\uD83C\\uDDEB\\uD83C\\uDDF7|\\uD83C\\uDDEB\\uD83C\\uDDF4|\\uD83C\\uDDEB\\uD83C\\uDDF2|\\uD83C\\uDDEB\\uD83C\\uDDF0|\\uD83C\\uDDEB\\uD83C\\uDDEF|\\uD83C\\uDDEB\\uD83C\\uDDEE|\\uD83C\\uDDEA\\uD83C\\uDDFA|\\uD83C\\uDDEA\\uD83C\\uDDF9|\\uD83C\\uDDEA\\uD83C\\uDDF8|\\uD83C\\uDDEA\\uD83C\\uDDF7|\\uD83C\\uDDEA\\uD83C\\uDDED|\\uD83C\\uDDEA\\uD83C\\uDDEC|\\uD83C\\uDDEA\\uD83C\\uDDEA|\\uD83C\\uDDEA\\uD83C\\uDDE8|\\uD83C\\uDDEA\\uD83C\\uDDE6|\\uD83C\\uDDE9\\uD83C\\uDDFF|\\uD83C\\uDDE9\\uD83C\\uDDF4|\\uD83C\\uDDE9\\uD83C\\uDDF2|\\uD83C\\uDDE9\\uD83C\\uDDF0|\\uD83C\\uDDE9\\uD83C\\uDDEF|\\uD83C\\uDDE9\\uD83C\\uDDEC|\\uD83C\\uDDE9\\uD83C\\uDDEA|\\uD83C\\uDDE8\\uD83C\\uDDFF|\\uD83C\\uDDE8\\uD83C\\uDDFE|\\uD83C\\uDDE8\\uD83C\\uDDFD|\\uD83C\\uDDE8\\uD83C\\uDDFC|\\uD83C\\uDDE8\\uD83C\\uDDFB|\\uD83C\\uDDE8\\uD83C\\uDDFA|\\uD83C\\uDDE8\\uD83C\\uDDF7|\\uD83C\\uDDE8\\uD83C\\uDDF5|\\uD83C\\uDDE8\\uD83C\\uDDF4|\\uD83C\\uDDE8\\uD83C\\uDDF3|\\uD83C\\uDDE8\\uD83C\\uDDF2|\\uD83C\\uDDE8\\uD83C\\uDDF1|\\uD83C\\uDDE8\\uD83C\\uDDF0|\\uD83C\\uDDE8\\uD83C\\uDDEE|\\uD83C\\uDDE8\\uD83C\\uDDED|\\uD83C\\uDDE8\\uD83C\\uDDEC|\\uD83C\\uDDE8\\uD83C\\uDDEB|\\uD83C\\uDDE8\\uD83C\\uDDE9|\\uD83C\\uDDE8\\uD83C\\uDDE8|\\uD83C\\uDDE8\\uD83C\\uDDE6|\\uD83C\\uDDE7\\uD83C\\uDDFF|\\uD83C\\uDDE7\\uD83C\\uDDFE|\\uD83C\\uDDE7\\uD83C\\uDDFC|\\uD83C\\uDDE7\\uD83C\\uDDFB|\\uD83C\\uDDE7\\uD83C\\uDDF9|\\uD83C\\uDDE7\\uD83C\\uDDF8|\\uD83C\\uDDE7\\uD83C\\uDDF7|\\uD83C\\uDDE7\\uD83C\\uDDF6|\\uD83C\\uDDE7\\uD83C\\uDDF4|\\uD83C\\uDDE7\\uD83C\\uDDF3|\\uD83C\\uDDE7\\uD83C\\uDDF2|\\uD83C\\uDDE7\\uD83C\\uDDF1|\\uD83C\\uDDE7\\uD83C\\uDDEF|\\uD83C\\uDDE7\\uD83C\\uDDEE|\\uD83C\\uDDE7\\uD83C\\uDDED|\\uD83C\\uDDE7\\uD83C\\uDDEC|\\uD83C\\uDDE7\\uD83C\\uDDEB|\\uD83C\\uDDE7\\uD83C\\uDDEA|\\uD83C\\uDDE7\\uD83C\\uDDE9|\\uD83C\\uDDE7\\uD83C\\uDDE7|\\uD83C\\uDDE7\\uD83C\\uDDE6|\\uD83C\\uDDE6\\uD83C\\uDDFF|\\uD83C\\uDDE6\\uD83C\\uDDFD|\\uD83C\\uDDE6\\uD83C\\uDDFC|\\uD83C\\uDDE6\\uD83C\\uDDFA|\\uD83C\\uDDE6\\uD83C\\uDDF9|\\uD83C\\uDDF9\\uD83C\\uDDFC|\\uD83D\\uDDA5\\uFE0F|\\u261D\\uD83C\\uDFFE|\\u261D\\uD83C\\uDFFD|\\u261D\\uD83C\\uDFFC|\\u261D\\uD83C\\uDFFB|\\uD83D\\uDDB1\\uFE0F|\\uD83C\\uDF26\\uFE0F|\\uD83C\\uDF25\\uFE0F|\\uD83C\\uDF24\\uFE0F|\\uD83D\\uDEF3\\uFE0F|\\uD83D\\uDEE9\\uFE0F|\\uD83C\\uDC04\\uFE0F|\\uD83C\\uDD7F\\uFE0F|\\uD83C\\uDE02\\uFE0F|\\uD83C\\uDE1A\\uFE0F|\\uD83C\\uDE2F\\uFE0F|\\uD83C\\uDE37\\uFE0F|\\uD83C\\uDF9E\\uFE0F|\\uD83C\\uDF9F\\uFE0F|\\uD83C\\uDFCB\\uFE0F|\\uD83C\\uDFCC\\uFE0F|\\uD83C\\uDFCD\\uFE0F|\\uD83C\\uDFCE\\uFE0F|\\uD83C\\uDF96\\uFE0F|\\uD83C\\uDF97\\uFE0F|\\uD83C\\uDF36\\uFE0F|\\uD83C\\uDF27\\uFE0F|\\uD83C\\uDF28\\uFE0F|\\uD83C\\uDF29\\uFE0F|\\uD83C\\uDF2A\\uFE0F|\\uD83C\\uDF2B\\uFE0F|\\uD83C\\uDF2C\\uFE0F|\\uD83D\\uDC3F\\uFE0F|\\uD83D\\uDD77\\uFE0F|\\uD83D\\uDD78\\uFE0F|\\uD83C\\uDF21\\uFE0F|\\uD83C\\uDF99\\uFE0F|\\uD83C\\uDF9A\\uFE0F|\\uD83C\\uDF9B\\uFE0F|\\uD83C\\uDFF3\\uFE0F|\\uD83C\\uDFF5\\uFE0F|\\uD83C\\uDFF7\\uFE0F|\\uD83D\\uDCFD\\uFE0F|\\uD83D\\uDD49\\uFE0F|\\uD83D\\uDD4A\\uFE0F|\\uD83D\\uDD6F\\uFE0F|\\uD83D\\uDD70\\uFE0F|\\uD83D\\uDD73\\uFE0F|\\uD83D\\uDD76\\uFE0F|\\uD83D\\uDD79\\uFE0F|\\uD83D\\uDD87\\uFE0F|\\uD83D\\uDD8A\\uFE0F|\\uD83D\\uDD8B\\uFE0F|\\uD83D\\uDD8C\\uFE0F|\\uD83D\\uDD8D\\uFE0F|\\uD83D\\uDEE5\\uFE0F|\\uD83D\\uDDA8\\uFE0F|\\uD83D\\uDDB2\\uFE0F|\\uD83D\\uDDBC\\uFE0F|\\uD83D\\uDDC2\\uFE0F|\\uD83D\\uDDC3\\uFE0F|\\uD83D\\uDDC4\\uFE0F|\\uD83D\\uDDD1\\uFE0F|\\uD83D\\uDDD2\\uFE0F|\\uD83D\\uDDD3\\uFE0F|\\uD83D\\uDDDC\\uFE0F|\\uD83D\\uDDDD\\uFE0F|\\uD83D\\uDDDE\\uFE0F|\\uD83D\\uDDE1\\uFE0F|\\uD83D\\uDDE3\\uFE0F|\\uD83D\\uDDEF\\uFE0F|\\uD83D\\uDDF3\\uFE0F|\\uD83D\\uDDFA\\uFE0F|\\uD83D\\uDEE0\\uFE0F|\\uD83D\\uDEE1\\uFE0F|\\uD83D\\uDEE2\\uFE0F|\\uD83D\\uDEF0\\uFE0F|\\uD83C\\uDF7D\\uFE0F|\\uD83D\\uDC41\\uFE0F|\\uD83D\\uDD74\\uFE0F|\\uD83D\\uDD75\\uFE0F|\\uD83D\\uDD90\\uFE0F|\\uD83C\\uDFD4\\uFE0F|\\uD83C\\uDFD5\\uFE0F|\\uD83C\\uDFD6\\uFE0F|\\uD83C\\uDFD7\\uFE0F|\\uD83C\\uDFD8\\uFE0F|\\uD83C\\uDFD9\\uFE0F|\\uD83C\\uDFDA\\uFE0F|\\uD83C\\uDFDB\\uFE0F|\\uD83C\\uDFDC\\uFE0F|\\uD83C\\uDFDD\\uFE0F|\\uD83C\\uDFDE\\uFE0F|\\uD83C\\uDFDF\\uFE0F|\\uD83D\\uDECB\\uFE0F|\\uD83D\\uDECD\\uFE0F|\\uD83D\\uDECE\\uFE0F|\\uD83D\\uDECF\\uFE0F|\\uD83D\\uDEE3\\uFE0F|\\uD83D\\uDEE4\\uFE0F|4\\uFE0F\\u20E3|9\\uFE0F\\u20E3|0\\uFE0F\\u20E3|1\\uFE0F\\u20E3|2\\uFE0F\\u20E3|3\\uFE0F\\u20E3|#\\uFE0F\\u20E3|5\\uFE0F\\u20E3|6\\uFE0F\\u20E3|7\\uFE0F\\u20E3|8\\uFE0F\\u20E3|\\*\\uFE0F\\u20E3|\\u00A9\\uFE0F|\\u00AE\\uFE0F|\\u203C\\uFE0F|\\u2049\\uFE0F|\\u2122\\uFE0F|\\u2139\\uFE0F|\\u2194\\uFE0F|\\u2195\\uFE0F|\\u2196\\uFE0F|\\u2197\\uFE0F|\\u2198\\uFE0F|\\u2199\\uFE0F|\\u21A9\\uFE0F|\\u21AA\\uFE0F|\\u231A\\uFE0F|\\u231B\\uFE0F|\\u24C2\\uFE0F|\\u25AA\\uFE0F|\\u25AB\\uFE0F|\\u25B6\\uFE0F|\\u25C0\\uFE0F|\\u25FB\\uFE0F|\\u25FC\\uFE0F|\\u25FD\\uFE0F|\\u25FE\\uFE0F|\\u2600\\uFE0F|\\u2601\\uFE0F|\\u260E\\uFE0F|\\u2611\\uFE0F|\\u2614\\uFE0F|\\u2615\\uFE0F|\\u261D\\uFE0F|\\u263A\\uFE0F|\\u2648\\uFE0F|\\u2649\\uFE0F|\\u264A\\uFE0F|\\u264B\\uFE0F|\\u264C\\uFE0F|\\u264D\\uFE0F|\\u264E\\uFE0F|\\u264F\\uFE0F|\\u2650\\uFE0F|\\u2651\\uFE0F|\\u2652\\uFE0F|\\u2653\\uFE0F|\\u2660\\uFE0F|\\u2663\\uFE0F|\\u2665\\uFE0F|\\u2666\\uFE0F|\\u2668\\uFE0F|\\u267B\\uFE0F|\\u267F\\uFE0F|\\u2693\\uFE0F|\\u26A0\\uFE0F|\\u26A1\\uFE0F|\\u26AA\\uFE0F|\\u26AB\\uFE0F|\\u26BD\\uFE0F|\\u26BE\\uFE0F|\\u26C4\\uFE0F|\\u26C5\\uFE0F|\\u26D4\\uFE0F|\\u26EA\\uFE0F|\\u26F2\\uFE0F|\\u26F3\\uFE0F|\\u26F5\\uFE0F|\\u26FA\\uFE0F|\\u26FD\\uFE0F|\\u2702\\uFE0F|\\u2708\\uFE0F|\\u2709\\uFE0F|\\u270C\\uFE0F|\\u270F\\uFE0F|\\u2712\\uFE0F|\\u2714\\uFE0F|\\u2716\\uFE0F|\\u2733\\uFE0F|\\u2734\\uFE0F|\\u2744\\uFE0F|\\u2747\\uFE0F|\\u2757\\uFE0F|\\u2764\\uFE0F|\\u27A1\\uFE0F|\\u2934\\uFE0F|\\u2935\\uFE0F|\\u2B05\\uFE0F|\\u2B06\\uFE0F|\\u2B07\\uFE0F|\\u2B1B\\uFE0F|\\u2B1C\\uFE0F|\\u2B50\\uFE0F|\\u2B55\\uFE0F|\\u3030\\uFE0F|\\u303D\\uFE0F|\\u3297\\uFE0F|\\u3299\\uFE0F|\\u271D\\uFE0F|\\u2328\\uFE0F|\\u270D\\uFE0F|\\u23ED\\uFE0F|\\u23EE\\uFE0F|\\u23EF\\uFE0F|\\u23F1\\uFE0F|\\u23F2\\uFE0F|\\u23F8\\uFE0F|\\u23F9\\uFE0F|\\u23FA\\uFE0F|\\u2602\\uFE0F|\\u2603\\uFE0F|\\u2604\\uFE0F|\\u2618\\uFE0F|\\u2620\\uFE0F|\\u2622\\uFE0F|\\u2623\\uFE0F|\\u2626\\uFE0F|\\u262A\\uFE0F|\\u262E\\uFE0F|\\u262F\\uFE0F|\\u2638\\uFE0F|\\u2639\\uFE0F|\\u2692\\uFE0F|\\u2694\\uFE0F|\\u2696\\uFE0F|\\u2697\\uFE0F|\\u2699\\uFE0F|\\u269B\\uFE0F|\\u269C\\uFE0F|\\u26B0\\uFE0F|\\u26B1\\uFE0F|\\u26C8\\uFE0F|\\u26CF\\uFE0F|\\u26D1\\uFE0F|\\u26D3\\uFE0F|\\u26E9\\uFE0F|\\u26F0\\uFE0F|\\u26F1\\uFE0F|\\u26F4\\uFE0F|\\u26F7\\uFE0F|\\u26F8\\uFE0F|\\u26F9\\uFE0F|\\u2721\\uFE0F|\\u2763\\uFE0F|\\uD83C\\uDCCF|\\uD83C\\uDD70|\\uD83C\\uDD71|\\uD83C\\uDD7E|\\uD83C\\uDD8E|\\uD83C\\uDD91|\\uD83C\\uDD92|\\uD83C\\uDD93|\\uD83C\\uDD94|\\uD83C\\uDD95|\\uD83C\\uDD96|\\uD83C\\uDD97|\\uD83C\\uDD98|\\uD83C\\uDD99|\\uD83C\\uDD9A|\\uD83C\\uDE01|\\uD83C\\uDE32|\\uD83C\\uDE33|\\uD83C\\uDE34|\\uD83C\\uDE35|\\uD83C\\uDE36|\\uD83C\\uDE38|\\uD83C\\uDE39|\\uD83C\\uDE3A|\\uD83D\\uDDB1|\\uD83C\\uDE51|\\uD83C\\uDF00|\\uD83C\\uDF01|\\uD83C\\uDF02|\\uD83C\\uDF03|\\uD83C\\uDF04|\\uD83C\\uDF05|\\uD83C\\uDF06|\\uD83C\\uDF07|\\uD83C\\uDF08|\\uD83C\\uDF09|\\uD83C\\uDF0A|\\uD83C\\uDF0B|\\uD83C\\uDF0C|\\uD83C\\uDF0F|\\uD83C\\uDF11|\\uD83C\\uDF13|\\uD83C\\uDF14|\\uD83C\\uDF15|\\uD83C\\uDF19|\\uD83C\\uDF1B|\\uD83C\\uDF1F|\\uD83C\\uDF20|\\uD83C\\uDF30|\\uD83C\\uDF31|\\uD83C\\uDF34|\\uD83C\\uDF35|\\uD83C\\uDF37|\\uD83C\\uDF38|\\uD83C\\uDF39|\\uD83C\\uDF3A|\\uD83C\\uDF3B|\\uD83C\\uDF3C|\\uD83C\\uDF3D|\\uD83C\\uDF3E|\\uD83C\\uDF3F|\\uD83C\\uDF40|\\uD83C\\uDF41|\\uD83C\\uDF42|\\uD83C\\uDF43|\\uD83C\\uDF44|\\uD83C\\uDF45|\\uD83C\\uDF46|\\uD83C\\uDF47|\\uD83C\\uDF48|\\uD83C\\uDF49|\\uD83C\\uDF4A|\\uD83C\\uDF4C|\\uD83C\\uDF4D|\\uD83C\\uDF4E|\\uD83C\\uDF4F|\\uD83C\\uDF51|\\uD83C\\uDF52|\\uD83C\\uDF53|\\uD83C\\uDF54|\\uD83C\\uDF55|\\uD83C\\uDF56|\\uD83C\\uDF57|\\uD83C\\uDF58|\\uD83C\\uDF59|\\uD83C\\uDF5A|\\uD83C\\uDF5B|\\uD83C\\uDF5C|\\uD83C\\uDF5D|\\uD83C\\uDF5E|\\uD83C\\uDF5F|\\uD83C\\uDF60|\\uD83C\\uDF61|\\uD83C\\uDF62|\\uD83C\\uDF63|\\uD83C\\uDF64|\\uD83C\\uDF65|\\uD83C\\uDF66|\\uD83C\\uDF67|\\uD83C\\uDF68|\\uD83C\\uDF69|\\uD83C\\uDF6A|\\uD83C\\uDF6B|\\uD83C\\uDF6C|\\uD83C\\uDF6D|\\uD83C\\uDF6E|\\uD83C\\uDF6F|\\uD83C\\uDF70|\\uD83C\\uDF71|\\uD83C\\uDF72|\\uD83C\\uDF73|\\uD83C\\uDF74|\\uD83C\\uDF75|\\uD83C\\uDF76|\\uD83C\\uDF77|\\uD83C\\uDF78|\\uD83C\\uDF79|\\uD83C\\uDF7A|\\uD83C\\uDF7B|\\uD83C\\uDF80|\\uD83C\\uDF81|\\uD83C\\uDF82|\\uD83C\\uDF83|\\uD83C\\uDF84|\\uD83C\\uDF85|\\uD83C\\uDF86|\\uD83C\\uDF87|\\uD83C\\uDF88|\\uD83C\\uDF89|\\uD83C\\uDF8A|\\uD83C\\uDF8B|\\uD83C\\uDF8C|\\uD83C\\uDF8D|\\uD83C\\uDF8E|\\uD83C\\uDF8F|\\uD83C\\uDF90|\\uD83C\\uDF91|\\uD83C\\uDF92|\\uD83C\\uDF93|\\uD83C\\uDFA0|\\uD83C\\uDFA1|\\uD83C\\uDFA2|\\uD83C\\uDFA3|\\uD83C\\uDFA4|\\uD83C\\uDFA5|\\uD83C\\uDFA6|\\uD83C\\uDFA7|\\uD83C\\uDFA8|\\uD83C\\uDFA9|\\uD83C\\uDFAA|\\uD83C\\uDFAB|\\uD83C\\uDFAC|\\uD83C\\uDFAD|\\uD83C\\uDFAE|\\uD83C\\uDFAF|\\uD83C\\uDFB0|\\uD83C\\uDFB1|\\uD83C\\uDFB2|\\uD83C\\uDFB3|\\uD83C\\uDFB4|\\uD83C\\uDFB5|\\uD83C\\uDFB6|\\uD83C\\uDFB7|\\uD83C\\uDFB8|\\uD83C\\uDFB9|\\uD83C\\uDFBA|\\uD83C\\uDFBB|\\uD83C\\uDFBC|\\uD83C\\uDFBD|\\uD83C\\uDFBE|\\uD83C\\uDFBF|\\uD83C\\uDFC0|\\uD83C\\uDFC1|\\uD83C\\uDFC2|\\uD83C\\uDFC3|\\uD83C\\uDFC4|\\uD83C\\uDFC6|\\uD83C\\uDFC8|\\uD83C\\uDFCA|\\uD83C\\uDFE0|\\uD83C\\uDFE1|\\uD83C\\uDFE2|\\uD83C\\uDFE3|\\uD83C\\uDFE5|\\uD83C\\uDFE6|\\uD83C\\uDFE7|\\uD83C\\uDFE8|\\uD83C\\uDFE9|\\uD83C\\uDFEA|\\uD83C\\uDFEB|\\uD83C\\uDFEC|\\uD83C\\uDFED|\\uD83C\\uDFEE|\\uD83C\\uDFEF|\\uD83C\\uDFF0|\\uD83D\\uDC0C|\\uD83D\\uDC0D|\\uD83D\\uDC0E|\\uD83D\\uDC11|\\uD83D\\uDC12|\\uD83D\\uDC14|\\uD83D\\uDC17|\\uD83D\\uDC18|\\uD83D\\uDC19|\\uD83D\\uDC1A|\\uD83D\\uDC1B|\\uD83D\\uDC1C|\\uD83D\\uDC1D|\\uD83D\\uDC1E|\\uD83D\\uDC1F|\\uD83D\\uDC20|\\uD83D\\uDC21|\\uD83D\\uDC22|\\uD83D\\uDC23|\\uD83D\\uDC24|\\uD83D\\uDC25|\\uD83D\\uDC26|\\uD83D\\uDC27|\\uD83D\\uDC28|\\uD83D\\uDC29|\\uD83D\\uDC2B|\\uD83D\\uDC2C|\\uD83D\\uDC2D|\\uD83D\\uDC2E|\\uD83D\\uDC2F|\\uD83D\\uDC30|\\uD83D\\uDC31|\\uD83D\\uDC32|\\uD83D\\uDC33|\\uD83D\\uDC34|\\uD83D\\uDC35|\\uD83D\\uDC36|\\uD83D\\uDC37|\\uD83D\\uDC38|\\uD83D\\uDC39|\\uD83D\\uDC3A|\\uD83D\\uDC3B|\\uD83D\\uDC3C|\\uD83D\\uDC3D|\\uD83D\\uDC3E|\\uD83D\\uDC40|\\uD83D\\uDC42|\\uD83D\\uDC43|\\uD83D\\uDC44|\\uD83D\\uDC45|\\uD83D\\uDC46|\\uD83D\\uDC47|\\uD83D\\uDC48|\\uD83D\\uDC49|\\uD83D\\uDC4A|\\uD83D\\uDC4B|\\uD83D\\uDC4C|\\uD83D\\uDC4D|\\uD83D\\uDC4E|\\uD83D\\uDC4F|\\uD83D\\uDC50|\\uD83D\\uDC51|\\uD83D\\uDC52|\\uD83D\\uDC53|\\uD83D\\uDC54|\\uD83D\\uDC55|\\uD83D\\uDC56|\\uD83D\\uDC57|\\uD83D\\uDC58|\\uD83D\\uDC59|\\uD83D\\uDC5A|\\uD83D\\uDC5B|\\uD83D\\uDC5C|\\uD83D\\uDC5D|\\uD83D\\uDC5E|\\uD83D\\uDC5F|\\uD83D\\uDC60|\\uD83D\\uDC61|\\uD83D\\uDC62|\\uD83D\\uDC63|\\uD83D\\uDC64|\\uD83D\\uDC66|\\uD83D\\uDC67|\\uD83D\\uDC68|\\uD83D\\uDC69|\\uD83D\\uDC6A|\\uD83D\\uDC6B|\\uD83D\\uDC6E|\\uD83D\\uDC6F|\\uD83D\\uDC70|\\uD83D\\uDC71|\\uD83D\\uDC72|\\uD83D\\uDC73|\\uD83D\\uDC74|\\uD83D\\uDC75|\\uD83D\\uDC76|\\uD83D\\uDC77|\\uD83D\\uDC78|\\uD83D\\uDC79|\\uD83D\\uDC7A|\\uD83D\\uDC7B|\\uD83D\\uDC7C|\\uD83D\\uDC7D|\\uD83D\\uDC7E|\\uD83D\\uDC7F|\\uD83D\\uDC80|\\uD83D\\uDCC7|\\uD83D\\uDC81|\\uD83D\\uDC82|\\uD83D\\uDC83|\\uD83D\\uDC84|\\uD83D\\uDC85|\\uD83D\\uDCD2|\\uD83D\\uDC86|\\uD83D\\uDCD3|\\uD83D\\uDC87|\\uD83D\\uDCD4|\\uD83D\\uDC88|\\uD83D\\uDCD5|\\uD83D\\uDC89|\\uD83D\\uDCD6|\\uD83D\\uDC8A|\\uD83D\\uDCD7|\\uD83D\\uDC8B|\\uD83D\\uDCD8|\\uD83D\\uDC8C|\\uD83D\\uDCD9|\\uD83D\\uDC8D|\\uD83D\\uDCDA|\\uD83D\\uDC8E|\\uD83D\\uDCDB|\\uD83D\\uDC8F|\\uD83D\\uDCDC|\\uD83D\\uDC90|\\uD83D\\uDCDD|\\uD83D\\uDC91|\\uD83D\\uDCDE|\\uD83D\\uDC92|\\uD83D\\uDCDF|\\uD83D\\uDCE0|\\uD83D\\uDC93|\\uD83D\\uDCE1|\\uD83D\\uDCE2|\\uD83D\\uDC94|\\uD83D\\uDCE3|\\uD83D\\uDCE4|\\uD83D\\uDC95|\\uD83D\\uDCE5|\\uD83D\\uDCE6|\\uD83D\\uDC96|\\uD83D\\uDCE7|\\uD83D\\uDCE8|\\uD83D\\uDC97|\\uD83D\\uDCE9|\\uD83D\\uDCEA|\\uD83D\\uDC98|\\uD83D\\uDCEB|\\uD83D\\uDCEE|\\uD83D\\uDC99|\\uD83D\\uDCF0|\\uD83D\\uDCF1|\\uD83D\\uDC9A|\\uD83D\\uDCF2|\\uD83D\\uDCF3|\\uD83D\\uDC9B|\\uD83D\\uDCF4|\\uD83D\\uDCF6|\\uD83D\\uDC9C|\\uD83D\\uDCF7|\\uD83D\\uDCF9|\\uD83D\\uDC9D|\\uD83D\\uDCFA|\\uD83D\\uDCFB|\\uD83D\\uDC9E|\\uD83D\\uDCFC|\\uD83D\\uDD03|\\uD83D\\uDC9F|\\uD83D\\uDD0A|\\uD83D\\uDD0B|\\uD83D\\uDCA0|\\uD83D\\uDD0C|\\uD83D\\uDD0D|\\uD83D\\uDCA1|\\uD83D\\uDD0E|\\uD83D\\uDD0F|\\uD83D\\uDCA2|\\uD83D\\uDD10|\\uD83D\\uDD11|\\uD83D\\uDCA3|\\uD83D\\uDD12|\\uD83D\\uDD13|\\uD83D\\uDCA4|\\uD83D\\uDD14|\\uD83D\\uDD16|\\uD83D\\uDCA5|\\uD83D\\uDD17|\\uD83D\\uDD18|\\uD83D\\uDCA6|\\uD83D\\uDD19|\\uD83D\\uDD1A|\\uD83D\\uDCA7|\\uD83D\\uDD1B|\\uD83D\\uDD1C|\\uD83D\\uDCA8|\\uD83D\\uDD1D|\\uD83D\\uDD1E|\\uD83D\\uDCA9|\\uD83D\\uDD1F|\\uD83D\\uDCAA|\\uD83D\\uDD20|\\uD83D\\uDD21|\\uD83D\\uDCAB|\\uD83D\\uDD22|\\uD83D\\uDD23|\\uD83D\\uDCAC|\\uD83D\\uDD24|\\uD83D\\uDD25|\\uD83D\\uDCAE|\\uD83D\\uDD26|\\uD83D\\uDD27|\\uD83D\\uDCAF|\\uD83D\\uDD28|\\uD83D\\uDD29|\\uD83D\\uDCB0|\\uD83D\\uDD2A|\\uD83D\\uDD2B|\\uD83D\\uDCB1|\\uD83D\\uDD2E|\\uD83D\\uDCB2|\\uD83D\\uDD2F|\\uD83D\\uDCB3|\\uD83D\\uDD30|\\uD83D\\uDD31|\\uD83D\\uDCB4|\\uD83D\\uDD32|\\uD83D\\uDD33|\\uD83D\\uDCB5|\\uD83D\\uDD34|\\uD83D\\uDD35|\\uD83D\\uDCB8|\\uD83D\\uDD36|\\uD83D\\uDD37|\\uD83D\\uDCB9|\\uD83D\\uDD38|\\uD83D\\uDD39|\\uD83D\\uDCBA|\\uD83D\\uDD3A|\\uD83D\\uDD3B|\\uD83D\\uDCBB|\\uD83D\\uDD3C|\\uD83D\\uDCBC|\\uD83D\\uDD3D|\\uD83D\\uDD50|\\uD83D\\uDCBD|\\uD83D\\uDD51|\\uD83D\\uDCBE|\\uD83D\\uDD52|\\uD83D\\uDCBF|\\uD83D\\uDD53|\\uD83D\\uDCC0|\\uD83D\\uDD54|\\uD83D\\uDD55|\\uD83D\\uDCC1|\\uD83D\\uDD56|\\uD83D\\uDD57|\\uD83D\\uDCC2|\\uD83D\\uDD58|\\uD83D\\uDD59|\\uD83D\\uDCC3|\\uD83D\\uDD5A|\\uD83D\\uDD5B|\\uD83D\\uDCC4|\\uD83D\\uDDFB|\\uD83D\\uDDFC|\\uD83D\\uDCC5|\\uD83D\\uDDFD|\\uD83D\\uDDFE|\\uD83D\\uDCC6|\\uD83D\\uDDFF|\\uD83D\\uDE01|\\uD83D\\uDE02|\\uD83D\\uDE03|\\uD83D\\uDCC8|\\uD83D\\uDE04|\\uD83D\\uDE05|\\uD83D\\uDCC9|\\uD83D\\uDE06|\\uD83D\\uDE09|\\uD83D\\uDCCA|\\uD83D\\uDE0A|\\uD83D\\uDE0B|\\uD83D\\uDCCB|\\uD83D\\uDE0C|\\uD83D\\uDE0D|\\uD83D\\uDCCC|\\uD83D\\uDE0F|\\uD83D\\uDE12|\\uD83D\\uDCCD|\\uD83D\\uDE13|\\uD83D\\uDE14|\\uD83D\\uDCCE|\\uD83D\\uDE16|\\uD83D\\uDE18|\\uD83D\\uDCCF|\\uD83D\\uDE1A|\\uD83D\\uDE1C|\\uD83D\\uDCD0|\\uD83D\\uDE1D|\\uD83D\\uDE1E|\\uD83D\\uDCD1|\\uD83D\\uDE20|\\uD83D\\uDE21|\\uD83D\\uDE22|\\uD83D\\uDE23|\\uD83D\\uDE24|\\uD83D\\uDE25|\\uD83D\\uDE28|\\uD83D\\uDE29|\\uD83D\\uDE2A|\\uD83D\\uDE2B|\\uD83D\\uDE2D|\\uD83D\\uDE30|\\uD83D\\uDE31|\\uD83D\\uDE32|\\uD83D\\uDE33|\\uD83D\\uDE35|\\uD83D\\uDE37|\\uD83D\\uDE38|\\uD83D\\uDE39|\\uD83D\\uDE3A|\\uD83D\\uDE3B|\\uD83D\\uDE3C|\\uD83D\\uDE3D|\\uD83D\\uDE3E|\\uD83D\\uDE3F|\\uD83D\\uDE40|\\uD83D\\uDE45|\\uD83D\\uDE46|\\uD83D\\uDE47|\\uD83D\\uDE48|\\uD83D\\uDE49|\\uD83D\\uDE4A|\\uD83D\\uDE4B|\\uD83D\\uDE4C|\\uD83D\\uDE4D|\\uD83D\\uDE4E|\\uD83D\\uDE4F|\\uD83D\\uDE80|\\uD83D\\uDE83|\\uD83D\\uDE84|\\uD83D\\uDE85|\\uD83D\\uDE87|\\uD83D\\uDE89|\\uD83D\\uDE8C|\\uD83D\\uDE8F|\\uD83D\\uDE91|\\uD83D\\uDE92|\\uD83D\\uDE93|\\uD83D\\uDE95|\\uD83D\\uDE97|\\uD83D\\uDE99|\\uD83D\\uDE9A|\\uD83D\\uDEA2|\\uD83D\\uDEA4|\\uD83D\\uDEA5|\\uD83D\\uDEA7|\\uD83D\\uDEA8|\\uD83D\\uDEA9|\\uD83D\\uDEAA|\\uD83D\\uDEAB|\\uD83D\\uDEAC|\\uD83D\\uDEAD|\\uD83D\\uDEB2|\\uD83D\\uDEB6|\\uD83D\\uDEB9|\\uD83D\\uDEBA|\\uD83D\\uDEBB|\\uD83D\\uDEBC|\\uD83D\\uDEBD|\\uD83D\\uDEBE|\\uD83D\\uDEC0|\\uD83E\\uDD18|\\uD83D\\uDE00|\\uD83D\\uDE07|\\uD83D\\uDE08|\\uD83D\\uDE0E|\\uD83D\\uDE10|\\uD83D\\uDE11|\\uD83D\\uDE15|\\uD83D\\uDE17|\\uD83D\\uDE19|\\uD83D\\uDE1B|\\uD83D\\uDE1F|\\uD83D\\uDE26|\\uD83D\\uDE27|\\uD83D\\uDE2C|\\uD83D\\uDE2E|\\uD83D\\uDE2F|\\uD83D\\uDE34|\\uD83D\\uDE36|\\uD83D\\uDE81|\\uD83D\\uDE82|\\uD83D\\uDE86|\\uD83D\\uDE88|\\uD83D\\uDE8A|\\uD83D\\uDE8D|\\uD83D\\uDE8E|\\uD83D\\uDE90|\\uD83D\\uDE94|\\uD83D\\uDE96|\\uD83D\\uDE98|\\uD83D\\uDE9B|\\uD83D\\uDE9C|\\uD83D\\uDE9D|\\uD83D\\uDE9E|\\uD83D\\uDE9F|\\uD83D\\uDEA0|\\uD83D\\uDEA1|\\uD83D\\uDEA3|\\uD83D\\uDEA6|\\uD83D\\uDEAE|\\uD83D\\uDEAF|\\uD83D\\uDEB0|\\uD83D\\uDEB1|\\uD83D\\uDEB3|\\uD83D\\uDEB4|\\uD83D\\uDEB5|\\uD83D\\uDEB7|\\uD83D\\uDEB8|\\uD83D\\uDEBF|\\uD83D\\uDEC1|\\uD83D\\uDEC2|\\uD83D\\uDEC3|\\uD83D\\uDEC4|\\uD83D\\uDEC5|\\uD83C\\uDF0D|\\uD83C\\uDF0E|\\uD83C\\uDF10|\\uD83C\\uDF12|\\uD83C\\uDF16|\\uD83C\\uDF17|\\uD83C\\uDF18|\\uD83C\\uDF1A|\\uD83C\\uDF1C|\\uD83C\\uDF1D|\\uD83C\\uDF1E|\\uD83C\\uDF32|\\uD83C\\uDF33|\\uD83C\\uDF4B|\\uD83C\\uDF50|\\uD83C\\uDF7C|\\uD83C\\uDFC7|\\uD83C\\uDFC9|\\uD83C\\uDFE4|\\uD83D\\uDC00|\\uD83D\\uDC01|\\uD83D\\uDC02|\\uD83D\\uDC03|\\uD83D\\uDC04|\\uD83D\\uDC05|\\uD83D\\uDC06|\\uD83D\\uDC07|\\uD83D\\uDC08|\\uD83D\\uDC09|\\uD83D\\uDC0A|\\uD83D\\uDC0B|\\uD83D\\uDC0F|\\uD83D\\uDC10|\\uD83D\\uDC13|\\uD83D\\uDC15|\\uD83D\\uDC16|\\uD83D\\uDC2A|\\uD83D\\uDC65|\\uD83D\\uDC6C|\\uD83D\\uDC6D|\\uD83D\\uDCAD|\\uD83D\\uDCB6|\\uD83D\\uDCB7|\\uD83D\\uDCEC|\\uD83D\\uDCED|\\uD83D\\uDCEF|\\uD83D\\uDCF5|\\uD83D\\uDD00|\\uD83D\\uDD01|\\uD83D\\uDD02|\\uD83D\\uDD04|\\uD83D\\uDD05|\\uD83D\\uDD06|\\uD83D\\uDD07|\\uD83D\\uDD09|\\uD83D\\uDD15|\\uD83D\\uDD2C|\\uD83D\\uDD2D|\\uD83D\\uDD5C|\\uD83D\\uDD5D|\\uD83D\\uDD5E|\\uD83D\\uDD5F|\\uD83D\\uDD60|\\uD83D\\uDD61|\\uD83D\\uDD62|\\uD83D\\uDD63|\\uD83D\\uDD64|\\uD83D\\uDD65|\\uD83D\\uDD66|\\uD83D\\uDD67|\\uD83D\\uDD08|\\uD83D\\uDE8B|\\uD83C\\uDFC5|\\uD83C\\uDFF4|\\uD83D\\uDCF8|\\uD83D\\uDECC|\\uD83D\\uDD95|\\uD83D\\uDD96|\\uD83D\\uDE41|\\uD83D\\uDE42|\\uD83D\\uDEEB|\\uD83D\\uDEEC|\\uD83C\\uDFFB|\\uD83C\\uDFFC|\\uD83C\\uDFFD|\\uD83C\\uDFFE|\\uD83C\\uDFFF|\\uD83D\\uDE43|\\uD83E\\uDD11|\\uD83E\\uDD13|\\uD83E\\uDD17|\\uD83D\\uDE44|\\uD83E\\uDD14|\\uD83E\\uDD10|\\uD83E\\uDD12|\\uD83E\\uDD15|\\uD83E\\uDD16|\\uD83E\\uDD81|\\uD83E\\uDD84|\\uD83E\\uDD82|\\uD83E\\uDD80|\\uD83E\\uDD83|\\uD83E\\uDDC0|\\uD83C\\uDF2D|\\uD83C\\uDF2E|\\uD83C\\uDF2F|\\uD83C\\uDF7F|\\uD83C\\uDF7E|\\uD83C\\uDFF9|\\uD83C\\uDFFA|\\uD83D\\uDED0|\\uD83D\\uDD4B|\\uD83D\\uDD4C|\\uD83D\\uDD4D|\\uD83D\\uDD4E|\\uD83D\\uDCFF|\\uD83C\\uDFCF|\\uD83C\\uDFD0|\\uD83C\\uDFD1|\\uD83C\\uDFD2|\\uD83C\\uDFD3|\\uD83C\\uDFF8|\\uD83C\\uDF26|\\uD83C\\uDF25|\\uD83C\\uDF24|\\uD83D\\uDEF3|\\uD83D\\uDEE9|\\uD83D\\uDEE5|\\uD83D\\uDEE4|\\uD83D\\uDEE3|\\uD83D\\uDECF|\\uD83D\\uDECE|\\uD83D\\uDECD|\\uD83D\\uDECB|\\uD83C\\uDFDF|\\uD83C\\uDFDE|\\uD83C\\uDFDD|\\uD83C\\uDFDC|\\uD83C\\uDFDB|\\uD83C\\uDFDA|\\uD83C\\uDFD9|\\uD83C\\uDFD8|\\uD83C\\uDFD7|\\uD83C\\uDFD6|\\uD83C\\uDFD5|\\uD83C\\uDFD4|\\uD83D\\uDD90|\\uD83D\\uDD75|\\uD83D\\uDD74|\\uD83D\\uDC41|\\uD83C\\uDF7D|\\uD83D\\uDEF0|\\uD83D\\uDEE2|\\uD83D\\uDEE1|\\uD83D\\uDEE0|\\uD83D\\uDDFA|\\uD83D\\uDDF3|\\uD83D\\uDDEF|\\uD83D\\uDDE3|\\uD83D\\uDDE1|\\uD83D\\uDDDE|\\uD83D\\uDDDD|\\uD83D\\uDDDC|\\uD83D\\uDDD3|\\uD83D\\uDDD2|\\uD83D\\uDDD1|\\uD83D\\uDDC4|\\uD83D\\uDDC3|\\uD83D\\uDDC2|\\uD83D\\uDDBC|\\uD83D\\uDDB2|\\uD83D\\uDDA8|\\uD83D\\uDDA5|\\uD83D\\uDD8D|\\uD83D\\uDD8C|\\uD83D\\uDD8B|\\uD83D\\uDD8A|\\uD83D\\uDD87|\\uD83D\\uDD79|\\uD83D\\uDD76|\\uD83D\\uDD73|\\uD83D\\uDD70|\\uD83D\\uDD6F|\\uD83D\\uDD4A|\\uD83D\\uDD49|\\uD83D\\uDCFD|\\uD83C\\uDFF7|\\uD83C\\uDFF5|\\uD83C\\uDFF3|\\uD83C\\uDF9B|\\uD83C\\uDF9A|\\uD83C\\uDF99|\\uD83C\\uDF21|\\uD83D\\uDD78|\\uD83D\\uDD77|\\uD83D\\uDC3F|\\uD83C\\uDF2C|\\uD83C\\uDF2B|\\uD83C\\uDF2A|\\uD83C\\uDF29|\\uD83C\\uDF28|\\uD83C\\uDF27|\\uD83C\\uDF36|\\uD83C\\uDF97|\\uD83C\\uDF96|\\uD83C\\uDFCE|\\uD83C\\uDFCD|\\uD83C\\uDFCC|\\uD83C\\uDFCB|\\uD83C\\uDF9F|\\uD83C\\uDF9E|\\uD83C\\uDE37|\\uD83C\\uDE2F|\\uD83C\\uDE1A|\\uD83C\\uDE02|\\uD83C\\uDD7F|\\uD83C\\uDC04|\\uD83C\\uDE50|\\u2714|\\u2733|\\u2734|\\u2744|\\u2747|\\u2757|\\u2764|\\u27A1|\\u2934|\\u2935|\\u2B05|\\u2B06|\\u2B07|\\u2B1B|\\u2B1C|\\u2B50|\\u2B55|\\u3030|\\u303D|\\u3297|\\u3299|\\u2712|\\u270F|\\u270C|\\u2709|\\u2708|\\u2702|\\u26FD|\\u26FA|\\u26F5|\\u26F3|\\u26F2|\\u26EA|\\u26D4|\\u26C5|\\u26C4|\\u26BE|\\u26BD|\\u26AB|\\u26AA|\\u26A1|\\u26A0|\\u2693|\\u267F|\\u267B|\\u2668|\\u2666|\\u2665|\\u2663|\\u2660|\\u2653|\\u2652|\\u2651|\\u271D|\\u2650|\\u264F|\\u264E|\\u264D|\\u264C|\\u264B|\\u264A|\\u2649|\\u2648|\\u263A|\\u261D|\\u2615|\\u2614|\\u2611|\\u2328|\\u260E|\\u2601|\\u2600|\\u25FE|\\u25FD|\\u25FC|\\u25FB|\\u25C0|\\u25B6|\\u25AB|\\u25AA|\\u24C2|\\u2716|\\u231A|\\u21AA|\\u21A9|\\u2199|\\u2198|\\u2197|\\u2196|\\u2195|\\u2194|\\u2139|\\u2122|\\u270D|\\u2049|\\u203C|\\u00AE|\\u00A9|\\u27BF|\\u27B0|\\u2797|\\u2796|\\u2795|\\u2755|\\u2754|\\u2753|\\u274E|\\u274C|\\u2728|\\u270B|\\u270A|\\u2705|\\u26CE|\\u23F3|\\u23F0|\\u23EC|\\u23ED|\\u23EE|\\u23EF|\\u23F1|\\u23F2|\\u23F8|\\u23F9|\\u23FA|\\u2602|\\u2603|\\u2604|\\u2618|\\u2620|\\u2622|\\u2623|\\u2626|\\u262A|\\u262E|\\u262F|\\u2638|\\u2639|\\u2692|\\u2694|\\u2696|\\u2697|\\u2699|\\u269B|\\u269C|\\u26B0|\\u26B1|\\u26C8|\\u26CF|\\u26D1|\\u26D3|\\u26E9|\\u26F0|\\u26F1|\\u26F4|\\u26F7|\\u26F8|\\u26F9|\\u2721|\\u2763|\\u23EB|\\u23EA|\\u23E9|\\u231B)",
e.jsEscapeMap={"👩‍❤️‍💋‍👩":"1f469-2764-1f48b-1f469","👨‍❤️‍💋‍👨":"1f468-2764-1f48b-1f468","👨‍👨‍👦‍👦":"1f468-1f468-1f466-1f466","👨‍👨‍👧‍👦":"1f468-1f468-1f467-1f466","👨‍👨‍👧‍👧":"1f468-1f468-1f467-1f467","👨‍👩‍👦‍👦":"1f468-1f469-1f466-1f466","👨‍👩‍👧‍👦":"1f468-1f469-1f467-1f466","👨‍👩‍👧‍👧":"1f468-1f469-1f467-1f467","👩‍👩‍👦‍👦":"1f469-1f469-1f466-1f466","👩‍👩‍👧‍👦":"1f469-1f469-1f467-1f466","👩‍👩‍👧‍👧":"1f469-1f469-1f467-1f467","👩‍❤️‍👩":"1f469-2764-1f469","👨‍❤️‍👨":"1f468-2764-1f468","👨‍👨‍👦":"1f468-1f468-1f466","👨‍👨‍👧":"1f468-1f468-1f467","👨‍👩‍👧":"1f468-1f469-1f467","👩‍👩‍👦":"1f469-1f469-1f466","👩‍👩‍👧":"1f469-1f469-1f467","👁‍🗨":"1f441-1f5e8","#️⃣":"0023-20e3","0️⃣":"0030-20e3","1️⃣":"0031-20e3","2️⃣":"0032-20e3","3️⃣":"0033-20e3","4️⃣":"0034-20e3","5️⃣":"0035-20e3","6️⃣":"0036-20e3","7️⃣":"0037-20e3","8️⃣":"0038-20e3","9️⃣":"0039-20e3","*️⃣":"002a-20e3","🤘🏿":"1f918-1f3ff","🤘🏾":"1f918-1f3fe","🤘🏽":"1f918-1f3fd","🤘🏼":"1f918-1f3fc","🤘🏻":"1f918-1f3fb","🛀🏿":"1f6c0-1f3ff","🛀🏾":"1f6c0-1f3fe","🛀🏽":"1f6c0-1f3fd","🛀🏼":"1f6c0-1f3fc","🛀🏻":"1f6c0-1f3fb","🚶🏿":"1f6b6-1f3ff","🚶🏾":"1f6b6-1f3fe","🚶🏽":"1f6b6-1f3fd","🚶🏼":"1f6b6-1f3fc","🚶🏻":"1f6b6-1f3fb","🚵🏿":"1f6b5-1f3ff","🚵🏾":"1f6b5-1f3fe","🚵🏽":"1f6b5-1f3fd","🚵🏼":"1f6b5-1f3fc","🚵🏻":"1f6b5-1f3fb","🚴🏿":"1f6b4-1f3ff","🚴🏾":"1f6b4-1f3fe","🚴🏽":"1f6b4-1f3fd","🚴🏼":"1f6b4-1f3fc","🚴🏻":"1f6b4-1f3fb","🚣🏿":"1f6a3-1f3ff","🚣🏾":"1f6a3-1f3fe","🚣🏽":"1f6a3-1f3fd","🚣🏼":"1f6a3-1f3fc","🚣🏻":"1f6a3-1f3fb","🙏🏿":"1f64f-1f3ff","🙏🏾":"1f64f-1f3fe","🙏🏽":"1f64f-1f3fd","🙏🏼":"1f64f-1f3fc","🙏🏻":"1f64f-1f3fb","🙎🏿":"1f64e-1f3ff","🙎🏾":"1f64e-1f3fe","🙎🏽":"1f64e-1f3fd","🙎🏼":"1f64e-1f3fc","🙎🏻":"1f64e-1f3fb","🙍🏿":"1f64d-1f3ff","🙍🏾":"1f64d-1f3fe","🙍🏽":"1f64d-1f3fd","🙍🏼":"1f64d-1f3fc","🙍🏻":"1f64d-1f3fb","🙌🏿":"1f64c-1f3ff","🙌🏾":"1f64c-1f3fe","🙌🏽":"1f64c-1f3fd","🙌🏼":"1f64c-1f3fc","🙌🏻":"1f64c-1f3fb","🙋🏿":"1f64b-1f3ff","🙋🏾":"1f64b-1f3fe","🙋🏽":"1f64b-1f3fd","🙋🏼":"1f64b-1f3fc","🙋🏻":"1f64b-1f3fb","🙇🏿":"1f647-1f3ff","🙇🏾":"1f647-1f3fe","🙇🏽":"1f647-1f3fd","🙇🏼":"1f647-1f3fc","🙇🏻":"1f647-1f3fb","🙆🏿":"1f646-1f3ff","🙆🏾":"1f646-1f3fe","🙆🏽":"1f646-1f3fd","🙆🏼":"1f646-1f3fc","🙆🏻":"1f646-1f3fb","🙅🏿":"1f645-1f3ff","🙅🏾":"1f645-1f3fe","🙅🏽":"1f645-1f3fd","🙅🏼":"1f645-1f3fc","🙅🏻":"1f645-1f3fb","🖖🏿":"1f596-1f3ff","🖖🏾":"1f596-1f3fe","🖖🏽":"1f596-1f3fd","🖖🏼":"1f596-1f3fc","🖖🏻":"1f596-1f3fb","🖕🏿":"1f595-1f3ff","🖕🏾":"1f595-1f3fe","🖕🏽":"1f595-1f3fd","🖕🏼":"1f595-1f3fc","🖕🏻":"1f595-1f3fb","🖐🏿":"1f590-1f3ff","🖐🏾":"1f590-1f3fe","🖐🏽":"1f590-1f3fd","🖐🏼":"1f590-1f3fc","🖐🏻":"1f590-1f3fb","🕵🏿":"1f575-1f3ff","🕵🏾":"1f575-1f3fe","🕵🏽":"1f575-1f3fd","🕵🏼":"1f575-1f3fc","🕵🏻":"1f575-1f3fb","💪🏿":"1f4aa-1f3ff","💪🏾":"1f4aa-1f3fe","💪🏽":"1f4aa-1f3fd","💪🏼":"1f4aa-1f3fc","💪🏻":"1f4aa-1f3fb","💇🏿":"1f487-1f3ff","💇🏾":"1f487-1f3fe","💇🏽":"1f487-1f3fd","💇🏼":"1f487-1f3fc","💇🏻":"1f487-1f3fb","💆🏿":"1f486-1f3ff","💆🏾":"1f486-1f3fe","💆🏽":"1f486-1f3fd","💆🏼":"1f486-1f3fc","💆🏻":"1f486-1f3fb","💅🏿":"1f485-1f3ff","💅🏾":"1f485-1f3fe","💅🏽":"1f485-1f3fd","💅🏼":"1f485-1f3fc","💅🏻":"1f485-1f3fb","💃🏿":"1f483-1f3ff","💃🏾":"1f483-1f3fe","💃🏽":"1f483-1f3fd","💃🏼":"1f483-1f3fc","💃🏻":"1f483-1f3fb","💂🏿":"1f482-1f3ff","💂🏾":"1f482-1f3fe","💂🏽":"1f482-1f3fd","💂🏼":"1f482-1f3fc","💂🏻":"1f482-1f3fb","💁🏿":"1f481-1f3ff","💁🏾":"1f481-1f3fe","💁🏽":"1f481-1f3fd","💁🏼":"1f481-1f3fc","💁🏻":"1f481-1f3fb","👼🏿":"1f47c-1f3ff","👼🏾":"1f47c-1f3fe","👼🏽":"1f47c-1f3fd","👼🏼":"1f47c-1f3fc","👼🏻":"1f47c-1f3fb","👸🏿":"1f478-1f3ff","👸🏾":"1f478-1f3fe","👸🏽":"1f478-1f3fd","👸🏼":"1f478-1f3fc","👸🏻":"1f478-1f3fb","👷🏿":"1f477-1f3ff","👷🏾":"1f477-1f3fe","👷🏽":"1f477-1f3fd","👷🏼":"1f477-1f3fc","👷🏻":"1f477-1f3fb","👶🏿":"1f476-1f3ff","👶🏾":"1f476-1f3fe","👶🏽":"1f476-1f3fd","👶🏼":"1f476-1f3fc","👶🏻":"1f476-1f3fb","👵🏿":"1f475-1f3ff","👵🏾":"1f475-1f3fe","👵🏽":"1f475-1f3fd","👵🏼":"1f475-1f3fc","👵🏻":"1f475-1f3fb","👴🏿":"1f474-1f3ff","👴🏾":"1f474-1f3fe","👴🏽":"1f474-1f3fd","👴🏼":"1f474-1f3fc","👴🏻":"1f474-1f3fb","👳🏿":"1f473-1f3ff","👳🏾":"1f473-1f3fe","👳🏽":"1f473-1f3fd","👳🏼":"1f473-1f3fc","👳🏻":"1f473-1f3fb","👲🏿":"1f472-1f3ff","👲🏾":"1f472-1f3fe","👲🏽":"1f472-1f3fd","👲🏼":"1f472-1f3fc","👲🏻":"1f472-1f3fb","👱🏿":"1f471-1f3ff","👱🏾":"1f471-1f3fe","👱🏽":"1f471-1f3fd","👱🏼":"1f471-1f3fc","👱🏻":"1f471-1f3fb","👰🏿":"1f470-1f3ff","👰🏾":"1f470-1f3fe","👰🏽":"1f470-1f3fd","👰🏼":"1f470-1f3fc","👰🏻":"1f470-1f3fb","👮🏿":"1f46e-1f3ff","👮🏾":"1f46e-1f3fe","👮🏽":"1f46e-1f3fd","👮🏼":"1f46e-1f3fc","👮🏻":"1f46e-1f3fb","👩🏿":"1f469-1f3ff","👩🏾":"1f469-1f3fe","👩🏽":"1f469-1f3fd","👩🏼":"1f469-1f3fc","👩🏻":"1f469-1f3fb","👨🏿":"1f468-1f3ff","👨🏾":"1f468-1f3fe","👨🏽":"1f468-1f3fd","👨🏼":"1f468-1f3fc","👨🏻":"1f468-1f3fb","👧🏿":"1f467-1f3ff","👧🏾":"1f467-1f3fe","👧🏽":"1f467-1f3fd","👧🏼":"1f467-1f3fc","👧🏻":"1f467-1f3fb","👦🏿":"1f466-1f3ff","👦🏾":"1f466-1f3fe","👦🏽":"1f466-1f3fd","👦🏼":"1f466-1f3fc","👦🏻":"1f466-1f3fb","👐🏿":"1f450-1f3ff","👐🏾":"1f450-1f3fe","👐🏽":"1f450-1f3fd","👐🏼":"1f450-1f3fc","👐🏻":"1f450-1f3fb","👏🏿":"1f44f-1f3ff","👏🏾":"1f44f-1f3fe","👏🏽":"1f44f-1f3fd","👏🏼":"1f44f-1f3fc","👏🏻":"1f44f-1f3fb","👎🏿":"1f44e-1f3ff","👎🏾":"1f44e-1f3fe","👎🏽":"1f44e-1f3fd","👎🏼":"1f44e-1f3fc","👎🏻":"1f44e-1f3fb","👍🏿":"1f44d-1f3ff","👍🏾":"1f44d-1f3fe","👍🏽":"1f44d-1f3fd","👍🏼":"1f44d-1f3fc","👍🏻":"1f44d-1f3fb","👌🏿":"1f44c-1f3ff","👌🏾":"1f44c-1f3fe","👌🏽":"1f44c-1f3fd","👌🏼":"1f44c-1f3fc","👌🏻":"1f44c-1f3fb","👋🏿":"1f44b-1f3ff","👋🏾":"1f44b-1f3fe","👋🏽":"1f44b-1f3fd","👋🏼":"1f44b-1f3fc","👋🏻":"1f44b-1f3fb","👊🏿":"1f44a-1f3ff","👊🏾":"1f44a-1f3fe","👊🏽":"1f44a-1f3fd","👊🏼":"1f44a-1f3fc","👊🏻":"1f44a-1f3fb","👉🏿":"1f449-1f3ff","👉🏾":"1f449-1f3fe","👉🏽":"1f449-1f3fd","👉🏼":"1f449-1f3fc","👉🏻":"1f449-1f3fb","👈🏿":"1f448-1f3ff","👈🏾":"1f448-1f3fe","👈🏽":"1f448-1f3fd","👈🏼":"1f448-1f3fc","👈🏻":"1f448-1f3fb","👇🏿":"1f447-1f3ff","👇🏾":"1f447-1f3fe","👇🏽":"1f447-1f3fd","👇🏼":"1f447-1f3fc","👇🏻":"1f447-1f3fb","👆🏿":"1f446-1f3ff","👆🏾":"1f446-1f3fe","👆🏽":"1f446-1f3fd","👆🏼":"1f446-1f3fc","👆🏻":"1f446-1f3fb","👃🏿":"1f443-1f3ff","👃🏾":"1f443-1f3fe","👃🏽":"1f443-1f3fd","👃🏼":"1f443-1f3fc","👃🏻":"1f443-1f3fb","👂🏿":"1f442-1f3ff","👂🏾":"1f442-1f3fe","👂🏽":"1f442-1f3fd","👂🏼":"1f442-1f3fc","👂🏻":"1f442-1f3fb","🏋🏿":"1f3cb-1f3ff","🏋🏾":"1f3cb-1f3fe","🏋🏽":"1f3cb-1f3fd","🏋🏼":"1f3cb-1f3fc","🏋🏻":"1f3cb-1f3fb","🏊🏿":"1f3ca-1f3ff","🏊🏾":"1f3ca-1f3fe","🏊🏽":"1f3ca-1f3fd","🏊🏼":"1f3ca-1f3fc","🏊🏻":"1f3ca-1f3fb","🏇🏿":"1f3c7-1f3ff","🏇🏾":"1f3c7-1f3fe","🏇🏽":"1f3c7-1f3fd","🏇🏼":"1f3c7-1f3fc","🏇🏻":"1f3c7-1f3fb","🏄🏿":"1f3c4-1f3ff","🏄🏾":"1f3c4-1f3fe","🏄🏽":"1f3c4-1f3fd","🏄🏼":"1f3c4-1f3fc","🏄🏻":"1f3c4-1f3fb","🏃🏿":"1f3c3-1f3ff","🏃🏾":"1f3c3-1f3fe","🏃🏽":"1f3c3-1f3fd","🏃🏼":"1f3c3-1f3fc","🏃🏻":"1f3c3-1f3fb","🎅🏿":"1f385-1f3ff","🎅🏾":"1f385-1f3fe","🎅🏽":"1f385-1f3fd","🎅🏼":"1f385-1f3fc","🎅🏻":"1f385-1f3fb","🇿🇼":"1f1ff-1f1fc","🇿🇲":"1f1ff-1f1f2","🇿🇦":"1f1ff-1f1e6","🇾🇹":"1f1fe-1f1f9","🇾🇪":"1f1fe-1f1ea","🇽🇰":"1f1fd-1f1f0","🇼🇸":"1f1fc-1f1f8","🇼🇫":"1f1fc-1f1eb","🇻🇺":"1f1fb-1f1fa","🇻🇳":"1f1fb-1f1f3","🇻🇮":"1f1fb-1f1ee","🇻🇬":"1f1fb-1f1ec","🇻🇪":"1f1fb-1f1ea","🇻🇨":"1f1fb-1f1e8","🇻🇦":"1f1fb-1f1e6","🇺🇿":"1f1fa-1f1ff","🇺🇾":"1f1fa-1f1fe","🇺🇸":"1f1fa-1f1f8","🇺🇲":"1f1fa-1f1f2","🇺🇬":"1f1fa-1f1ec","🇺🇦":"1f1fa-1f1e6","🇹🇿":"1f1f9-1f1ff","🇹🇼":"1f1f9-1f1fc","🇹🇻":"1f1f9-1f1fb","🇹🇹":"1f1f9-1f1f9","🇹🇷":"1f1f9-1f1f7","🇹🇴":"1f1f9-1f1f4","🇹🇳":"1f1f9-1f1f3","🇹🇲":"1f1f9-1f1f2","🇹🇱":"1f1f9-1f1f1","🇹🇰":"1f1f9-1f1f0","🇹🇯":"1f1f9-1f1ef","🇹🇭":"1f1f9-1f1ed","🇹🇬":"1f1f9-1f1ec","🇹🇫":"1f1f9-1f1eb","🇹🇩":"1f1f9-1f1e9","🇹🇨":"1f1f9-1f1e8","🇹🇦":"1f1f9-1f1e6","🇸🇿":"1f1f8-1f1ff","🇸🇾":"1f1f8-1f1fe","🇸🇽":"1f1f8-1f1fd","🇸🇻":"1f1f8-1f1fb","🇸🇹":"1f1f8-1f1f9","🇸🇸":"1f1f8-1f1f8","🇸🇷":"1f1f8-1f1f7","🇸🇴":"1f1f8-1f1f4","🇸🇳":"1f1f8-1f1f3","🇸🇲":"1f1f8-1f1f2","🇸🇱":"1f1f8-1f1f1","🇸🇰":"1f1f8-1f1f0","🇸🇯":"1f1f8-1f1ef","🇸🇮":"1f1f8-1f1ee","🇸🇭":"1f1f8-1f1ed","🇸🇬":"1f1f8-1f1ec","🇸🇪":"1f1f8-1f1ea","🇸🇩":"1f1f8-1f1e9","🇸🇨":"1f1f8-1f1e8","🇸🇧":"1f1f8-1f1e7","🇸🇦":"1f1f8-1f1e6","🇷🇼":"1f1f7-1f1fc","🇷🇺":"1f1f7-1f1fa","🇷🇸":"1f1f7-1f1f8","🇷🇴":"1f1f7-1f1f4","🇷🇪":"1f1f7-1f1ea","🇶🇦":"1f1f6-1f1e6","🇵🇾":"1f1f5-1f1fe","🇵🇼":"1f1f5-1f1fc","🇵🇹":"1f1f5-1f1f9","🇵🇸":"1f1f5-1f1f8","🇵🇷":"1f1f5-1f1f7","🇵🇳":"1f1f5-1f1f3","🇵🇲":"1f1f5-1f1f2","🇵🇱":"1f1f5-1f1f1","🇵🇰":"1f1f5-1f1f0","🇵🇭":"1f1f5-1f1ed","🇵🇬":"1f1f5-1f1ec","🇵🇫":"1f1f5-1f1eb","🇵🇪":"1f1f5-1f1ea","🇵🇦":"1f1f5-1f1e6","🇴🇲":"1f1f4-1f1f2","🇳🇿":"1f1f3-1f1ff","🇳🇺":"1f1f3-1f1fa","🇳🇷":"1f1f3-1f1f7","🇳🇵":"1f1f3-1f1f5","🇳🇴":"1f1f3-1f1f4","🇳🇱":"1f1f3-1f1f1","🇳🇮":"1f1f3-1f1ee","🇳🇬":"1f1f3-1f1ec","🇳🇫":"1f1f3-1f1eb","🇳🇪":"1f1f3-1f1ea","🇳🇨":"1f1f3-1f1e8","🇳🇦":"1f1f3-1f1e6","🇲🇿":"1f1f2-1f1ff","🇲🇾":"1f1f2-1f1fe","🇲🇽":"1f1f2-1f1fd","🇲🇼":"1f1f2-1f1fc","🇲🇻":"1f1f2-1f1fb","🇲🇺":"1f1f2-1f1fa","🇲🇹":"1f1f2-1f1f9","🇲🇸":"1f1f2-1f1f8","🇲🇷":"1f1f2-1f1f7","🇲🇶":"1f1f2-1f1f6","🇲🇵":"1f1f2-1f1f5","🇲🇴":"1f1f2-1f1f4","🇲🇳":"1f1f2-1f1f3","🇲🇲":"1f1f2-1f1f2","🇲🇱":"1f1f2-1f1f1","🇲🇰":"1f1f2-1f1f0","🇲🇭":"1f1f2-1f1ed","🇲🇬":"1f1f2-1f1ec","🇲🇫":"1f1f2-1f1eb","🇲🇪":"1f1f2-1f1ea","🇲🇩":"1f1f2-1f1e9","🇲🇨":"1f1f2-1f1e8","🇲🇦":"1f1f2-1f1e6","🇱🇾":"1f1f1-1f1fe","🇱🇻":"1f1f1-1f1fb","🇱🇺":"1f1f1-1f1fa","🇱🇹":"1f1f1-1f1f9","🇱🇸":"1f1f1-1f1f8","🇱🇷":"1f1f1-1f1f7","🇱🇰":"1f1f1-1f1f0","🇱🇮":"1f1f1-1f1ee","🇱🇨":"1f1f1-1f1e8","🇱🇧":"1f1f1-1f1e7","🇱🇦":"1f1f1-1f1e6","🇰🇿":"1f1f0-1f1ff","🇰🇾":"1f1f0-1f1fe","🇰🇼":"1f1f0-1f1fc","🇰🇷":"1f1f0-1f1f7","🇰🇵":"1f1f0-1f1f5","🇰🇳":"1f1f0-1f1f3","🇰🇲":"1f1f0-1f1f2","🇰🇮":"1f1f0-1f1ee","🇰🇭":"1f1f0-1f1ed","🇰🇬":"1f1f0-1f1ec","🇰🇪":"1f1f0-1f1ea","🇯🇵":"1f1ef-1f1f5","🇯🇴":"1f1ef-1f1f4","🇯🇲":"1f1ef-1f1f2","🇯🇪":"1f1ef-1f1ea","🇮🇹":"1f1ee-1f1f9","🇮🇸":"1f1ee-1f1f8","🇮🇷":"1f1ee-1f1f7","🇮🇶":"1f1ee-1f1f6","🇮🇴":"1f1ee-1f1f4","🇮🇳":"1f1ee-1f1f3","🇮🇲":"1f1ee-1f1f2","🇮🇱":"1f1ee-1f1f1","🇮🇪":"1f1ee-1f1ea","🇮🇩":"1f1ee-1f1e9","🇮🇨":"1f1ee-1f1e8","🇭🇺":"1f1ed-1f1fa","🇭🇹":"1f1ed-1f1f9","🇭🇷":"1f1ed-1f1f7","🇭🇳":"1f1ed-1f1f3","🇭🇲":"1f1ed-1f1f2","🇭🇰":"1f1ed-1f1f0","🇬🇾":"1f1ec-1f1fe","🇬🇼":"1f1ec-1f1fc","🇬🇺":"1f1ec-1f1fa","🇬🇹":"1f1ec-1f1f9","🇬🇸":"1f1ec-1f1f8","🇬🇷":"1f1ec-1f1f7","🇬🇶":"1f1ec-1f1f6","🇬🇵":"1f1ec-1f1f5","🇬🇳":"1f1ec-1f1f3","🇬🇲":"1f1ec-1f1f2","🇬🇱":"1f1ec-1f1f1","🇬🇮":"1f1ec-1f1ee","🇬🇭":"1f1ec-1f1ed","🇬🇬":"1f1ec-1f1ec","🇬🇫":"1f1ec-1f1eb","🇬🇪":"1f1ec-1f1ea","🇬🇩":"1f1ec-1f1e9","🇬🇧":"1f1ec-1f1e7","🇬🇦":"1f1ec-1f1e6","🇫🇷":"1f1eb-1f1f7","🇫🇴":"1f1eb-1f1f4","🇫🇲":"1f1eb-1f1f2","🇫🇰":"1f1eb-1f1f0","🇫🇯":"1f1eb-1f1ef","🇫🇮":"1f1eb-1f1ee","🇪🇺":"1f1ea-1f1fa","🇪🇹":"1f1ea-1f1f9","🇪🇸":"1f1ea-1f1f8","🇪🇷":"1f1ea-1f1f7","🇪🇭":"1f1ea-1f1ed","🇪🇬":"1f1ea-1f1ec","🇪🇪":"1f1ea-1f1ea","🇪🇨":"1f1ea-1f1e8","🇪🇦":"1f1ea-1f1e6","🇩🇿":"1f1e9-1f1ff","🇩🇴":"1f1e9-1f1f4","🇩🇲":"1f1e9-1f1f2","🇩🇰":"1f1e9-1f1f0","🇩🇯":"1f1e9-1f1ef","🇩🇬":"1f1e9-1f1ec","🇩🇪":"1f1e9-1f1ea","🇨🇿":"1f1e8-1f1ff","🇨🇾":"1f1e8-1f1fe","🇨🇽":"1f1e8-1f1fd","🇨🇼":"1f1e8-1f1fc","🇨🇻":"1f1e8-1f1fb","🇨🇺":"1f1e8-1f1fa","🇨🇷":"1f1e8-1f1f7","🇨🇵":"1f1e8-1f1f5","🇨🇴":"1f1e8-1f1f4","🇨🇳":"1f1e8-1f1f3","🇨🇲":"1f1e8-1f1f2","🇨🇱":"1f1e8-1f1f1","🇨🇰":"1f1e8-1f1f0","🇨🇮":"1f1e8-1f1ee","🇨🇭":"1f1e8-1f1ed","🇨🇬":"1f1e8-1f1ec","🇨🇫":"1f1e8-1f1eb","🇨🇩":"1f1e8-1f1e9","🇨🇨":"1f1e8-1f1e8","🇨🇦":"1f1e8-1f1e6","🇧🇿":"1f1e7-1f1ff","🇧🇾":"1f1e7-1f1fe","🇧🇼":"1f1e7-1f1fc","🇧🇻":"1f1e7-1f1fb","🇧🇹":"1f1e7-1f1f9","🇧🇸":"1f1e7-1f1f8","🇧🇷":"1f1e7-1f1f7","🇧🇶":"1f1e7-1f1f6","🇧🇴":"1f1e7-1f1f4","🇧🇳":"1f1e7-1f1f3","🇧🇲":"1f1e7-1f1f2","🇧🇱":"1f1e7-1f1f1","🇧🇯":"1f1e7-1f1ef","🇧🇮":"1f1e7-1f1ee","🇧🇭":"1f1e7-1f1ed","🇧🇬":"1f1e7-1f1ec","🇧🇫":"1f1e7-1f1eb","🇧🇪":"1f1e7-1f1ea","🇧🇩":"1f1e7-1f1e9","🇧🇧":"1f1e7-1f1e7","🇧🇦":"1f1e7-1f1e6","🇦🇿":"1f1e6-1f1ff","🇦🇽":"1f1e6-1f1fd","🇦🇼":"1f1e6-1f1fc","🇦🇺":"1f1e6-1f1fa","🇦🇹":"1f1e6-1f1f9","🇦🇸":"1f1e6-1f1f8","🇦🇷":"1f1e6-1f1f7","🇦🇶":"1f1e6-1f1f6","🇦🇴":"1f1e6-1f1f4","🇦🇲":"1f1e6-1f1f2","🇦🇱":"1f1e6-1f1f1","🇦🇮":"1f1e6-1f1ee","🇦🇬":"1f1e6-1f1ec","🇦🇫":"1f1e6-1f1eb","🇦🇪":"1f1e6-1f1ea","🇦🇩":"1f1e6-1f1e9","🇦🇨":"1f1e6-1f1e8","🀄️":"1f004","🅿️":"1f17f","🈂️":"1f202","🈚️":"1f21a","🈯️":"1f22f","🈷️":"1f237","🎞️":"1f39e","🎟️":"1f39f","🏋️":"1f3cb","🏌️":"1f3cc","🏍️":"1f3cd","🏎️":"1f3ce","🎖️":"1f396","🎗️":"1f397","🌶️":"1f336","🌧️":"1f327","🌨️":"1f328","🌩️":"1f329","🌪️":"1f32a","🌫️":"1f32b","🌬️":"1f32c","🐿️":"1f43f","🕷️":"1f577","🕸️":"1f578","🌡️":"1f321","🎙️":"1f399","🎚️":"1f39a","🎛️":"1f39b","🏳️":"1f3f3","🏵️":"1f3f5","🏷️":"1f3f7","📽️":"1f4fd","🕉️":"1f549","🕊️":"1f54a","🕯️":"1f56f","🕰️":"1f570","🕳️":"1f573","🕶️":"1f576","🕹️":"1f579","🖇️":"1f587","🖊️":"1f58a","🖋️":"1f58b","🖌️":"1f58c","🖍️":"1f58d","🖥️":"1f5a5","🖨️":"1f5a8","🖲️":"1f5b2","🖼️":"1f5bc","🗂️":"1f5c2","🗃️":"1f5c3","🗄️":"1f5c4","🗑️":"1f5d1","🗒️":"1f5d2","🗓️":"1f5d3","🗜️":"1f5dc","🗝️":"1f5dd","🗞️":"1f5de","🗡️":"1f5e1","🗣️":"1f5e3","🗯️":"1f5ef","🗳️":"1f5f3","🗺️":"1f5fa","🛠️":"1f6e0","🛡️":"1f6e1","🛢️":"1f6e2","🛰️":"1f6f0","🍽️":"1f37d","👁️":"1f441","🕴️":"1f574","🕵️":"1f575","🖐️":"1f590","🏔️":"1f3d4","🏕️":"1f3d5","🏖️":"1f3d6","🏗️":"1f3d7","🏘️":"1f3d8","🏙️":"1f3d9","🏚️":"1f3da","🏛️":"1f3db","🏜️":"1f3dc","🏝️":"1f3dd","🏞️":"1f3de","🏟️":"1f3df","🛋️":"1f6cb","🛍️":"1f6cd","🛎️":"1f6ce","🛏️":"1f6cf","🛣️":"1f6e3","🛤️":"1f6e4","🛥️":"1f6e5","🛩️":"1f6e9","🛳️":"1f6f3","🌤️":"1f324","🌥️":"1f325","🌦️":"1f326","🖱️":"1f5b1","☝🏻":"261d-1f3fb","☝🏼":"261d-1f3fc","☝🏽":"261d-1f3fd","☝🏾":"261d-1f3fe","©️":"00a9","®️":"00ae","‼️":"203c","⁉️":"2049","™️":"2122","ℹ️":"2139","↔️":"2194","↕️":"2195","↖️":"2196","↗️":"2197","↘️":"2198","↙️":"2199","↩️":"21a9","↪️":"21aa","⌚️":"231a","⌛️":"231b","Ⓜ️":"24c2","▪️":"25aa","▫️":"25ab","▶️":"25b6","◀️":"25c0","◻️":"25fb","◼️":"25fc","◽️":"25fd","◾️":"25fe","☀️":"2600","☁️":"2601","☎️":"260e","☑️":"2611","☔️":"2614","☕️":"2615","☝️":"261d","☺️":"263a","♈️":"2648","♉️":"2649","♊️":"264a","♋️":"264b","♌️":"264c","♍️":"264d","♎️":"264e","♏️":"264f","♐️":"2650","♑️":"2651","♒️":"2652","♓️":"2653","♠️":"2660","♣️":"2663","♥️":"2665","♦️":"2666","♨️":"2668","♻️":"267b","♿️":"267f","⚓️":"2693","⚠️":"26a0","⚡️":"26a1","⚪️":"26aa","⚫️":"26ab","⚽️":"26bd","⚾️":"26be","⛄️":"26c4","⛅️":"26c5","⛔️":"26d4","⛪️":"26ea","⛲️":"26f2","⛳️":"26f3","⛵️":"26f5","⛺️":"26fa","⛽️":"26fd","✂️":"2702","✈️":"2708","✉️":"2709","✌️":"270c","✏️":"270f","✒️":"2712","✔️":"2714","✖️":"2716","✳️":"2733","✴️":"2734","❄️":"2744","❇️":"2747","❗️":"2757","❤️":"2764","➡️":"27a1","⤴️":"2934","⤵️":"2935","⬅️":"2b05","⬆️":"2b06","⬇️":"2b07","⬛️":"2b1b","⬜️":"2b1c","⭐️":"2b50","⭕️":"2b55","〰️":"3030","〽️":"303d","㊗️":"3297","㊙️":"3299","✝️":"271d","⌨️":"2328","✍️":"270d","⏭️":"23ed","⏮️":"23ee","⏯️":"23ef","⏱️":"23f1","⏲️":"23f2","⏸️":"23f8","⏹️":"23f9","⏺️":"23fa","☂️":"2602","☃️":"2603","☄️":"2604","☘️":"2618","☠️":"2620","☢️":"2622","☣️":"2623","☦️":"2626","☪️":"262a","☮️":"262e","☯️":"262f","☸️":"2638","☹️":"2639","⚒️":"2692","⚔️":"2694","⚖️":"2696","⚗️":"2697","⚙️":"2699","⚛️":"269b","⚜️":"269c","⚰️":"26b0","⚱️":"26b1","⛈️":"26c8","⛏️":"26cf","⛑️":"26d1","⛓️":"26d3","⛩️":"26e9","⛰️":"26f0","⛱️":"26f1","⛴️":"26f4","⛷️":"26f7","⛸️":"26f8","⛹️":"26f9","✡️":"2721","❣️":"2763","🃏":"1f0cf","🅰":"1f170","🅱":"1f171","🅾":"1f17e","🆎":"1f18e","🆑":"1f191","🆒":"1f192","🆓":"1f193","🆔":"1f194","🆕":"1f195","🆖":"1f196","🆗":"1f197","🆘":"1f198","🆙":"1f199","🆚":"1f19a","🈁":"1f201","🈲":"1f232","🈳":"1f233","🈴":"1f234","🈵":"1f235","🈶":"1f236","🈸":"1f238","🈹":"1f239","🈺":"1f23a","🉐":"1f250","🉑":"1f251","🌀":"1f300","🌁":"1f301","🌂":"1f302","🌃":"1f303","🌄":"1f304","🌅":"1f305","🌆":"1f306","🌇":"1f307","🌈":"1f308","🌉":"1f309","🌊":"1f30a","🌋":"1f30b","🌌":"1f30c","🌏":"1f30f","🌑":"1f311","🌓":"1f313","🌔":"1f314","🌕":"1f315","🌙":"1f319","🌛":"1f31b","🌟":"1f31f","🌠":"1f320","🌰":"1f330","🌱":"1f331","🌴":"1f334","🌵":"1f335","🌷":"1f337","🌸":"1f338","🌹":"1f339","🌺":"1f33a","🌻":"1f33b","🌼":"1f33c","🌽":"1f33d","🌾":"1f33e","🌿":"1f33f","🍀":"1f340","🍁":"1f341","🍂":"1f342","🍃":"1f343","🍄":"1f344","🍅":"1f345","🍆":"1f346","🍇":"1f347","🍈":"1f348","🍉":"1f349","🍊":"1f34a","🍌":"1f34c","🍍":"1f34d","🍎":"1f34e","🍏":"1f34f","🍑":"1f351","🍒":"1f352","🍓":"1f353","🍔":"1f354","🍕":"1f355","🍖":"1f356","🍗":"1f357","🍘":"1f358","🍙":"1f359","🍚":"1f35a","🍛":"1f35b","🍜":"1f35c","🍝":"1f35d","🍞":"1f35e","🍟":"1f35f","🍠":"1f360","🍡":"1f361","🍢":"1f362","🍣":"1f363","🍤":"1f364","🍥":"1f365","🍦":"1f366","🍧":"1f367","🍨":"1f368","🍩":"1f369","🍪":"1f36a","🍫":"1f36b","🍬":"1f36c","🍭":"1f36d","🍮":"1f36e","🍯":"1f36f","🍰":"1f370","🍱":"1f371","🍲":"1f372","🍳":"1f373","🍴":"1f374","🍵":"1f375","🍶":"1f376","🍷":"1f377","🍸":"1f378","🍹":"1f379","🍺":"1f37a","🍻":"1f37b","🎀":"1f380","🎁":"1f381","🎂":"1f382","🎃":"1f383","🎄":"1f384","🎅":"1f385","🎆":"1f386","🎇":"1f387","🎈":"1f388","🎉":"1f389","🎊":"1f38a","🎋":"1f38b","🎌":"1f38c","🎍":"1f38d","🎎":"1f38e","🎏":"1f38f","🎐":"1f390","🎑":"1f391","🎒":"1f392","🎓":"1f393","🎠":"1f3a0","🎡":"1f3a1","🎢":"1f3a2","🎣":"1f3a3","🎤":"1f3a4","🎥":"1f3a5","🎦":"1f3a6","🎧":"1f3a7","🎨":"1f3a8","🎩":"1f3a9","🎪":"1f3aa","🎫":"1f3ab","🎬":"1f3ac","🎭":"1f3ad","🎮":"1f3ae","🎯":"1f3af","🎰":"1f3b0","🎱":"1f3b1","🎲":"1f3b2","🎳":"1f3b3","🎴":"1f3b4","🎵":"1f3b5","🎶":"1f3b6","🎷":"1f3b7","🎸":"1f3b8","🎹":"1f3b9","🎺":"1f3ba","🎻":"1f3bb","🎼":"1f3bc","🎽":"1f3bd","🎾":"1f3be","🎿":"1f3bf","🏀":"1f3c0","🏁":"1f3c1","🏂":"1f3c2","🏃":"1f3c3","🏄":"1f3c4","🏆":"1f3c6","🏈":"1f3c8","🏊":"1f3ca","🏠":"1f3e0","🏡":"1f3e1","🏢":"1f3e2","🏣":"1f3e3","🏥":"1f3e5","🏦":"1f3e6","🏧":"1f3e7","🏨":"1f3e8","🏩":"1f3e9","🏪":"1f3ea","🏫":"1f3eb","🏬":"1f3ec","🏭":"1f3ed","🏮":"1f3ee","🏯":"1f3ef","🏰":"1f3f0","🐌":"1f40c","🐍":"1f40d","🐎":"1f40e","🐑":"1f411","🐒":"1f412","🐔":"1f414","🐗":"1f417","🐘":"1f418","🐙":"1f419","🐚":"1f41a","🐛":"1f41b","🐜":"1f41c","🐝":"1f41d","🐞":"1f41e","🐟":"1f41f","🐠":"1f420","🐡":"1f421","🐢":"1f422","🐣":"1f423","🐤":"1f424","🐥":"1f425","🐦":"1f426","🐧":"1f427","🐨":"1f428","🐩":"1f429","🐫":"1f42b","🐬":"1f42c","🐭":"1f42d","🐮":"1f42e","🐯":"1f42f","🐰":"1f430","🐱":"1f431","🐲":"1f432","🐳":"1f433","🐴":"1f434","🐵":"1f435","🐶":"1f436","🐷":"1f437","🐸":"1f438","🐹":"1f439","🐺":"1f43a","🐻":"1f43b","🐼":"1f43c","🐽":"1f43d","🐾":"1f43e","👀":"1f440","👂":"1f442","👃":"1f443","👄":"1f444","👅":"1f445","👆":"1f446","👇":"1f447","👈":"1f448","👉":"1f449","👊":"1f44a","👋":"1f44b","👌":"1f44c","👍":"1f44d","👎":"1f44e","👏":"1f44f","👐":"1f450","👑":"1f451","👒":"1f452","👓":"1f453","👔":"1f454","👕":"1f455","👖":"1f456","👗":"1f457","👘":"1f458","👙":"1f459","👚":"1f45a","👛":"1f45b","👜":"1f45c","👝":"1f45d","👞":"1f45e","👟":"1f45f","👠":"1f460","👡":"1f461","👢":"1f462","👣":"1f463","👤":"1f464","👦":"1f466","👧":"1f467","👨":"1f468","👩":"1f469","👪":"1f46a","👫":"1f46b","👮":"1f46e","👯":"1f46f","👰":"1f470","👱":"1f471","👲":"1f472","👳":"1f473","👴":"1f474","👵":"1f475","👶":"1f476","👷":"1f477","👸":"1f478","👹":"1f479","👺":"1f47a","👻":"1f47b","👼":"1f47c","👽":"1f47d","👾":"1f47e","👿":"1f47f","💀":"1f480","📇":"1f4c7","💁":"1f481","💂":"1f482","💃":"1f483","💄":"1f484","💅":"1f485","📒":"1f4d2","💆":"1f486","📓":"1f4d3","💇":"1f487","📔":"1f4d4","💈":"1f488","📕":"1f4d5","💉":"1f489","📖":"1f4d6","💊":"1f48a","📗":"1f4d7","💋":"1f48b","📘":"1f4d8","💌":"1f48c","📙":"1f4d9","💍":"1f48d","📚":"1f4da","💎":"1f48e","📛":"1f4db","💏":"1f48f","📜":"1f4dc","💐":"1f490","📝":"1f4dd","💑":"1f491","📞":"1f4de","💒":"1f492","📟":"1f4df","📠":"1f4e0","💓":"1f493","📡":"1f4e1","📢":"1f4e2","💔":"1f494","📣":"1f4e3","📤":"1f4e4","💕":"1f495","📥":"1f4e5","📦":"1f4e6","💖":"1f496","📧":"1f4e7","📨":"1f4e8","💗":"1f497","📩":"1f4e9","📪":"1f4ea","💘":"1f498","📫":"1f4eb","📮":"1f4ee","💙":"1f499","📰":"1f4f0","📱":"1f4f1","💚":"1f49a","📲":"1f4f2","📳":"1f4f3","💛":"1f49b","📴":"1f4f4","📶":"1f4f6","💜":"1f49c","📷":"1f4f7","📹":"1f4f9","💝":"1f49d","📺":"1f4fa","📻":"1f4fb","💞":"1f49e","📼":"1f4fc","🔃":"1f503","💟":"1f49f","🔊":"1f50a","🔋":"1f50b","💠":"1f4a0","🔌":"1f50c","🔍":"1f50d","💡":"1f4a1","🔎":"1f50e","🔏":"1f50f","💢":"1f4a2","🔐":"1f510","🔑":"1f511","💣":"1f4a3","🔒":"1f512","🔓":"1f513","💤":"1f4a4","🔔":"1f514","🔖":"1f516","💥":"1f4a5","🔗":"1f517","🔘":"1f518","💦":"1f4a6","🔙":"1f519","🔚":"1f51a","💧":"1f4a7","🔛":"1f51b","🔜":"1f51c","💨":"1f4a8","🔝":"1f51d","🔞":"1f51e","💩":"1f4a9","🔟":"1f51f","💪":"1f4aa","🔠":"1f520","🔡":"1f521","💫":"1f4ab","🔢":"1f522","🔣":"1f523","💬":"1f4ac","🔤":"1f524","🔥":"1f525","💮":"1f4ae","🔦":"1f526","🔧":"1f527","💯":"1f4af","🔨":"1f528","🔩":"1f529","💰":"1f4b0","🔪":"1f52a","🔫":"1f52b","💱":"1f4b1","🔮":"1f52e","💲":"1f4b2","🔯":"1f52f","💳":"1f4b3","🔰":"1f530","🔱":"1f531","💴":"1f4b4","🔲":"1f532","🔳":"1f533","💵":"1f4b5","🔴":"1f534","🔵":"1f535","💸":"1f4b8","🔶":"1f536","🔷":"1f537","💹":"1f4b9","🔸":"1f538","🔹":"1f539","💺":"1f4ba","🔺":"1f53a","🔻":"1f53b","💻":"1f4bb","🔼":"1f53c","💼":"1f4bc","🔽":"1f53d","🕐":"1f550","💽":"1f4bd","🕑":"1f551","💾":"1f4be","🕒":"1f552","💿":"1f4bf","🕓":"1f553","📀":"1f4c0","🕔":"1f554","🕕":"1f555","📁":"1f4c1","🕖":"1f556","🕗":"1f557","📂":"1f4c2","🕘":"1f558","🕙":"1f559","📃":"1f4c3","🕚":"1f55a","🕛":"1f55b","📄":"1f4c4","🗻":"1f5fb","🗼":"1f5fc","📅":"1f4c5","🗽":"1f5fd","🗾":"1f5fe","📆":"1f4c6","🗿":"1f5ff","😁":"1f601","😂":"1f602","😃":"1f603","📈":"1f4c8","😄":"1f604","😅":"1f605","📉":"1f4c9","😆":"1f606","😉":"1f609","📊":"1f4ca","😊":"1f60a","😋":"1f60b","📋":"1f4cb","😌":"1f60c","😍":"1f60d","📌":"1f4cc","😏":"1f60f","😒":"1f612","📍":"1f4cd","😓":"1f613","😔":"1f614","📎":"1f4ce","😖":"1f616","😘":"1f618","📏":"1f4cf","😚":"1f61a","😜":"1f61c","📐":"1f4d0","😝":"1f61d","😞":"1f61e","📑":"1f4d1","😠":"1f620","😡":"1f621","😢":"1f622","😣":"1f623","😤":"1f624","😥":"1f625","😨":"1f628","😩":"1f629","😪":"1f62a","😫":"1f62b","😭":"1f62d","😰":"1f630","😱":"1f631","😲":"1f632","😳":"1f633","😵":"1f635","😷":"1f637","😸":"1f638","😹":"1f639","😺":"1f63a","😻":"1f63b","😼":"1f63c","😽":"1f63d","😾":"1f63e","😿":"1f63f","🙀":"1f640","🙅":"1f645","🙆":"1f646","🙇":"1f647","🙈":"1f648","🙉":"1f649","🙊":"1f64a","🙋":"1f64b","🙌":"1f64c","🙍":"1f64d","🙎":"1f64e","🙏":"1f64f","🚀":"1f680","🚃":"1f683","🚄":"1f684","🚅":"1f685","🚇":"1f687","🚉":"1f689","🚌":"1f68c","🚏":"1f68f","🚑":"1f691","🚒":"1f692","🚓":"1f693","🚕":"1f695","🚗":"1f697","🚙":"1f699","🚚":"1f69a","🚢":"1f6a2","🚤":"1f6a4","🚥":"1f6a5","🚧":"1f6a7","🚨":"1f6a8","🚩":"1f6a9","🚪":"1f6aa","🚫":"1f6ab","🚬":"1f6ac","🚭":"1f6ad","🚲":"1f6b2","🚶":"1f6b6","🚹":"1f6b9","🚺":"1f6ba","🚻":"1f6bb","🚼":"1f6bc","🚽":"1f6bd","🚾":"1f6be","🛀":"1f6c0","🤘":"1f918","😀":"1f600","😇":"1f607","😈":"1f608","😎":"1f60e","😐":"1f610","😑":"1f611","😕":"1f615","😗":"1f617","😙":"1f619","😛":"1f61b","😟":"1f61f","😦":"1f626","😧":"1f627","😬":"1f62c","😮":"1f62e","😯":"1f62f","😴":"1f634","😶":"1f636","🚁":"1f681","🚂":"1f682","🚆":"1f686","🚈":"1f688","🚊":"1f68a","🚍":"1f68d","🚎":"1f68e","🚐":"1f690","🚔":"1f694","🚖":"1f696","🚘":"1f698","🚛":"1f69b","🚜":"1f69c","🚝":"1f69d","🚞":"1f69e","🚟":"1f69f","🚠":"1f6a0","🚡":"1f6a1","🚣":"1f6a3","🚦":"1f6a6","🚮":"1f6ae","🚯":"1f6af","🚰":"1f6b0","🚱":"1f6b1","🚳":"1f6b3","🚴":"1f6b4","🚵":"1f6b5","🚷":"1f6b7","🚸":"1f6b8","🚿":"1f6bf","🛁":"1f6c1","🛂":"1f6c2","🛃":"1f6c3","🛄":"1f6c4","🛅":"1f6c5","🌍":"1f30d","🌎":"1f30e","🌐":"1f310","🌒":"1f312","🌖":"1f316","🌗":"1f317","🌘":"1f318","🌚":"1f31a","🌜":"1f31c","🌝":"1f31d","🌞":"1f31e","🌲":"1f332","🌳":"1f333","🍋":"1f34b","🍐":"1f350","🍼":"1f37c","🏇":"1f3c7","🏉":"1f3c9","🏤":"1f3e4","🐀":"1f400","🐁":"1f401","🐂":"1f402","🐃":"1f403","🐄":"1f404","🐅":"1f405","🐆":"1f406","🐇":"1f407","🐈":"1f408","🐉":"1f409","🐊":"1f40a","🐋":"1f40b","🐏":"1f40f","🐐":"1f410","🐓":"1f413","🐕":"1f415","🐖":"1f416","🐪":"1f42a","👥":"1f465","👬":"1f46c","👭":"1f46d","💭":"1f4ad","💶":"1f4b6","💷":"1f4b7","📬":"1f4ec","📭":"1f4ed","📯":"1f4ef","📵":"1f4f5","🔀":"1f500","🔁":"1f501","🔂":"1f502","🔄":"1f504","🔅":"1f505","🔆":"1f506","🔇":"1f507","🔉":"1f509","🔕":"1f515","🔬":"1f52c","🔭":"1f52d","🕜":"1f55c","🕝":"1f55d","🕞":"1f55e","🕟":"1f55f","🕠":"1f560","🕡":"1f561","🕢":"1f562","🕣":"1f563","🕤":"1f564","🕥":"1f565","🕦":"1f566","🕧":"1f567","🔈":"1f508","🚋":"1f68b","🏅":"1f3c5","🏴":"1f3f4","📸":"1f4f8","🛌":"1f6cc","🖕":"1f595","🖖":"1f596","🙁":"1f641","🙂":"1f642","🛫":"1f6eb","🛬":"1f6ec","🏻":"1f3fb","🏼":"1f3fc","🏽":"1f3fd","🏾":"1f3fe","🏿":"1f3ff","🙃":"1f643","🤑":"1f911","🤓":"1f913","🤗":"1f917","🙄":"1f644","🤔":"1f914","🤐":"1f910","🤒":"1f912","🤕":"1f915","🤖":"1f916","🦁":"1f981","🦄":"1f984","🦂":"1f982","🦀":"1f980","🦃":"1f983","🧀":"1f9c0","🌭":"1f32d","🌮":"1f32e","🌯":"1f32f","🍿":"1f37f","🍾":"1f37e","🏹":"1f3f9","🏺":"1f3fa","🛐":"1f6d0","🕋":"1f54b","🕌":"1f54c","🕍":"1f54d","🕎":"1f54e","📿":"1f4ff","🏏":"1f3cf","🏐":"1f3d0","🏑":"1f3d1","🏒":"1f3d2","🏓":"1f3d3","🏸":"1f3f8","⏩":"23e9","⏪":"23ea","⏫":"23eb","⏬":"23ec","⏰":"23f0","⏳":"23f3","⛎":"26ce","✅":"2705","✊":"270a","✋":"270b","✨":"2728","❌":"274c","❎":"274e","❓":"2753","❔":"2754","❕":"2755","➕":"2795","➖":"2796","➗":"2797","➰":"27b0","➿":"27bf","©":"00a9","®":"00ae","‼":"203c","⁉":"2049","™":"2122","ℹ":"2139","↔":"2194","↕":"2195","↖":"2196","↗":"2197","↘":"2198","↙":"2199","↩":"21a9","↪":"21aa","⌚":"231a","⌛":"231b","Ⓜ":"24c2","▪":"25aa","▫":"25ab","▶":"25b6","◀":"25c0","◻":"25fb","◼":"25fc","◽":"25fd","◾":"25fe","☀":"2600","☁":"2601","☎":"260e","☑":"2611","☔":"2614","☕":"2615","☝":"261d","☺":"263a","♈":"2648","♉":"2649","♊":"264a","♋":"264b","♌":"264c","♍":"264d","♎":"264e","♏":"264f","♐":"2650","♑":"2651","♒":"2652","♓":"2653","♠":"2660","♣":"2663","♥":"2665","♦":"2666","♨":"2668","♻":"267b","♿":"267f","⚓":"2693","⚠":"26a0","⚡":"26a1","⚪":"26aa","⚫":"26ab","⚽":"26bd","⚾":"26be","⛄":"26c4","⛅":"26c5","⛔":"26d4","⛪":"26ea","⛲":"26f2","⛳":"26f3","⛵":"26f5","⛺":"26fa","⛽":"26fd","✂":"2702","✈":"2708","✉":"2709","✌":"270c","✏":"270f","✒":"2712","✔":"2714","✖":"2716","✳":"2733","✴":"2734","❄":"2744","❇":"2747","❗":"2757","❤":"2764","➡":"27a1","⤴":"2934","⤵":"2935","⬅":"2b05","⬆":"2b06","⬇":"2b07","⬛":"2b1b","⬜":"2b1c","⭐":"2b50","⭕":"2b55","〰":"3030","〽":"303d","㊗":"3297","㊙":"3299","🀄":"1f004","🅿":"1f17f","🈂":"1f202","🈚":"1f21a","🈯":"1f22f","🈷":"1f237","🎞":"1f39e","🎟":"1f39f","🏋":"1f3cb","🏌":"1f3cc","🏍":"1f3cd","🏎":"1f3ce","🎖":"1f396","🎗":"1f397","🌶":"1f336","🌧":"1f327","🌨":"1f328","🌩":"1f329","🌪":"1f32a","🌫":"1f32b","🌬":"1f32c","🐿":"1f43f","🕷":"1f577","🕸":"1f578","🌡":"1f321","🎙":"1f399","🎚":"1f39a","🎛":"1f39b","🏳":"1f3f3","🏵":"1f3f5","🏷":"1f3f7","📽":"1f4fd","✝":"271d","🕉":"1f549","🕊":"1f54a","🕯":"1f56f","🕰":"1f570","🕳":"1f573","🕶":"1f576","🕹":"1f579","🖇":"1f587","🖊":"1f58a","🖋":"1f58b","🖌":"1f58c","🖍":"1f58d","🖥":"1f5a5","🖨":"1f5a8","⌨":"2328","🖲":"1f5b2","🖼":"1f5bc","🗂":"1f5c2","🗃":"1f5c3","🗄":"1f5c4","🗑":"1f5d1","🗒":"1f5d2","🗓":"1f5d3","🗜":"1f5dc","🗝":"1f5dd","🗞":"1f5de","🗡":"1f5e1","🗣":"1f5e3","🗯":"1f5ef","🗳":"1f5f3","🗺":"1f5fa","🛠":"1f6e0","🛡":"1f6e1","🛢":"1f6e2","🛰":"1f6f0","🍽":"1f37d","👁":"1f441","🕴":"1f574","🕵":"1f575","✍":"270d","🖐":"1f590","🏔":"1f3d4","🏕":"1f3d5","🏖":"1f3d6","🏗":"1f3d7","🏘":"1f3d8","🏙":"1f3d9","🏚":"1f3da","🏛":"1f3db","🏜":"1f3dc","🏝":"1f3dd","🏞":"1f3de","🏟":"1f3df","🛋":"1f6cb","🛍":"1f6cd","🛎":"1f6ce","🛏":"1f6cf","🛣":"1f6e3","🛤":"1f6e4","🛥":"1f6e5","🛩":"1f6e9","🛳":"1f6f3","⏭":"23ed","⏮":"23ee","⏯":"23ef","⏱":"23f1","⏲":"23f2","⏸":"23f8","⏹":"23f9","⏺":"23fa","☂":"2602","☃":"2603","☄":"2604","☘":"2618","☠":"2620","☢":"2622","☣":"2623","☦":"2626","☪":"262a","☮":"262e","☯":"262f","☸":"2638","☹":"2639","⚒":"2692","⚔":"2694","⚖":"2696","⚗":"2697","⚙":"2699","⚛":"269b","⚜":"269c","⚰":"26b0","⚱":"26b1","⛈":"26c8","⛏":"26cf","⛑":"26d1","⛓":"26d3","⛩":"26e9","⛰":"26f0","⛱":"26f1","⛴":"26f4","⛷":"26f7","⛸":"26f8","⛹":"26f9","✡":"2721","❣":"2763","🌤":"1f324","🌥":"1f325","🌦":"1f326","🖱":"1f5b1"},e.imagePathPNG="//cdn.jsdelivr.net/emojione/assets/png/",e.imagePathSVG="//cdn.jsdelivr.net/emojione/assets/svg/",e.imagePathSVGSprites="./../assets/sprites/emojione.sprites.svg",e.imageType="png",e.sprites=!1,e.unicodeAlt=!0,e.ascii=!1,e.cacheBustParam="?v=2.1.1",e.regShortNames=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+e.shortnames+")","gi"),e.regAscii=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|((\\s|^)"+e.asciiRegexp+"(?=\\s|$|[!,.?]))","g"),e.regUnicode=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+e.unicodeRegexp+")","gi"),e.toImage=function(t){return t=e.unicodeToImage(t),t=e.shortnameToImage(t)},e.unifyUnicode=function(t){return t=e.toShort(t),t=e.shortnameToUnicode(t)},e.shortnameToAscii=function(t){var i,n=e.objectFlip(e.asciiList);return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(i=e.emojioneList[t][e.emojioneList[t].length-1],"undefined"!=typeof n[i]?n[i]:t):t})},e.shortnameToUnicode=function(t){var i;return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(i=e.emojioneList[t][0].toUpperCase(),e.convert(i)):t}),e.ascii&&(t=t.replace(e.regAscii,function(t,n,s,o){return void 0!==o&&""!==o&&e.unescapeHTML(o)in e.asciiList?(o=e.unescapeHTML(o),i=e.asciiList[o].toUpperCase(),s+e.convert(i)):t})),t},e.shortnameToImage=function(t){var i,n,s;return t=t.replace(e.regShortNames,function(t){return void 0!==t&&""!==t&&t in e.emojioneList?(n=e.emojioneList[t][e.emojioneList[t].length-1],s=e.unicodeAlt?e.convert(n.toUpperCase()):t,i="png"===e.imageType?e.sprites?'<span class="emojione-'+n+'" title="'+t+'">'+s+"</span>":'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':'<object class="emojione" data="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'" type="image/svg+xml" standby="'+s+'">'+s+"</object>"):t}),e.ascii&&(t=t.replace(e.regAscii,function(t,o,a,r){return void 0!==r&&""!==r&&e.unescapeHTML(r)in e.asciiList?(r=e.unescapeHTML(r),n=e.asciiList[r],s=e.unicodeAlt?e.convert(n.toUpperCase()):e.escapeHTML(r),i="png"===e.imageType?e.sprites?a+'<span class="emojione-'+n+'" title="'+e.escapeHTML(r)+'">'+s+"</span>":a+'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':a+'<object class="emojione" data="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'" type="image/svg+xml" standby="'+s+'">'+s+"</object>"):t})),t},e.unicodeToImage=function(t){var i,n,s;if(!e.unicodeAlt||e.sprites)var o=e.mapShortToUnicode();return t=t.replace(e.regUnicode,function(t){return void 0!==t&&""!==t&&t in e.jsEscapeMap?(n=e.jsEscapeMap[t],s=e.unicodeAlt?e.convert(n.toUpperCase()):o[n],i="png"===e.imageType?e.sprites?'<span class="emojione-'+n+'" title="'+o[n]+'">'+s+"</span>":'<img class="emojione" alt="'+s+'" src="'+e.imagePathPNG+n+".png"+e.cacheBustParam+'"/>':e.sprites?'<svg class="emojione"><description>'+s+'</description><use xlink:href="'+e.imagePathSVGSprites+"#emoji-"+n+'"></use></svg>':'<img class="emojione" alt="'+s+'" src="'+e.imagePathSVG+n+".svg"+e.cacheBustParam+'"/>'):t})},e.toShort=function(t){
for(var i in e.emojioneList)if(e.emojioneList.hasOwnProperty(i))for(var n=0,s=e.emojioneList[i].length;s>n;n++){var o=e.emojioneList[i][n];t=e.replaceAll(t,e.convert(o.toUpperCase()),i)}return t},e.convert=function(e){if(e.indexOf("-")>-1){for(var t=[],i=e.split("-"),n=0;n<i.length;n++){var s=parseInt(i[n],16);if(s>=65536&&1114111>=s){var o=Math.floor((s-65536)/1024)+55296,a=(s-65536)%1024+56320;s=String.fromCharCode(o)+String.fromCharCode(a)}else s=String.fromCharCode(s);t.push(s)}return t.join("")}var i=parseInt(e,16);if(i>=65536&&1114111>=i){var o=Math.floor((i-65536)/1024)+55296,a=(i-65536)%1024+56320;return String.fromCharCode(o)+String.fromCharCode(a)}return String.fromCharCode(i)},e.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},e.unescapeHTML=function(e){var t={"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3C;":"<","&gt;":">","&#62;":">","&#x3E;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'"};return e.replace(/&(?:amp|#38|#x26|lt|#60|#x3C|gt|#62|#x3E|apos|#39|#x27|quot|#34|#x22);/gi,function(e){return t[e]})},e.mapShortToUnicode=function(){var t={};for(var i in e.emojioneList)if(e.emojioneList.hasOwnProperty(i))for(var n=0,s=e.emojioneList[i].length;s>n;n++)t[e.emojioneList[i][n]]=i;return t},e.objectFlip=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[e[t]]=t);return i},e.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,;:&\\^$|#\s]/g,"\\$&")},e.replaceAll=function(t,i,n){var s=e.escapeRegExp(i),o=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+s+")","gi"),a=function(e,t){return void 0===t||""===t?e:n};return t.replace(o,a)}}(this.emojione=this.emojione||{}),"object"==typeof module&&(module.exports=this.emojione),define("libs/emojione.min",function(){}),define("skins/common/thread/ui/node",["jquery","mustache","static/utils","lib/helpers/inline_loader","lib/helpers/popup","text!./node.mustache","text!./children.mustache","text!./message.mustache","text!./friend_button.mustache","lib/i18n!front","jquery.textcomplete.min","libs/emojione.min"],function(e,t,i,n,s,o,a,r,l,u){emojione.sprites=!0,emojione.ascii=!0;var f=function(e,t){void 0!==e&&(this.id_post=e,this.logic_node=t,this.node=null,this.children_node=null,this.nb_children=0,this.children_open=!1,this.has_next=0,this.next_is_last=!0,this.rendered=!1,this.form_node=null,this.pending_delete=!1,this.edit=null,this.edit_timer=null,this.edit_remaining=0,this["delete"]=null,this.undelete=null,this.report=null,emojione.sprites=!0,emojione.ascii=!0,this.createNode())};return f.prototype={createChild:function(e,t){return new f(e,t)},setNbChildren:function(e){this.nb_children=e,this.children_show_label.html(u.__(this.getMessageKey("show_"+(e>1?"replies":"reply")),{"%nb%":e.toFixed(0)},e>1?"Show %nb% answers":"Show 1 answer")),this.renderChildren(),this.renderPostBtn()},getTemplate:function(){return o},getTemplateVars:function(){return{has_profile:!0,default_img:this.getDefaultPictureUrl(),lbl_load_all:u.__(this.getMessageKey("load_all_replies"),{},"Load all replies"),lbl_reply:u.__(this.getMessageKey("reply"),{},"Reply"),lbl_delete:u.__(this.getMessageKey("delete"),{},"Delete"),lbl_undelete:u.__(this.getMessageKey("restore"),{},"Restore"),lbl_hide_replies:u.__(this.getMessageKey("hide_replies"),{},"Hide replies"),lbl_post_reply:u.__(this.getMessageKey("post_reply"),{},"Reply"),lbl_report:u.__(this.getMessageKey("report"),{},"Report")}},getTemplatePartials:function(){return{children:a}},getMessageKey:function(e){switch(e){case"node_loading":case"children_loading":return"loading.loading";case"node_error":case"children_error":return"loading.error";case"node_error_retry":case"children_error_retry":return"loading.failed_retry";case"user_profile_picture":return"profile.user_profile_picture";case"anonymous":return"misc.anonymous";case"delete":return"misc.delete";case"restore":return"misc.restore";case"edit":return"misc.edit";case"show_reply":return"misc.show_one_reply";case"show_replies":return"misc.show_nb_replies";case"hide_replies":return"misc.hide_replies";case"load_next_nb_replies":return"misc.load_next_nb_replies";case"load_last_reply":return"misc.load_last_reply";case"load_last_nb_replies":return"misc.load_last_nb_replies";case"load_all_replies":return"misc.load_all_replies";case"reply":case"post_reply":return"misc.reply";case"one_reply_before":return"misc.one_reply_before";case"nb_replies_before":return"misc.nb_replies_before";case"one_reply_between":return"misc.one_reply_between";case"nb_replies_between":return"misc.nb_replies_between";case"one_reply_after":return"misc.one_reply_after";case"nb_replies_after":return"misc.nb_replies_after";case"already_friends":return"profile.friends.already_friends";case"friend_req_asked":return"profile.friends.you_asked_friends";case"add_to_friends":return"profile.friends.add_to_friends";case"report":return"report_form.report";case"report_this_post":return"report_form.report_comment";case"report_thanks":return"report_form.thanks"}return e},getDefaultPictureUrl:function(){return i.getStaticDomain()+"/img/profile_default_small.jpg"},createNode:function(){this.node||(this.node=e(t.render(this.getTemplate(),this.getTemplateVars(),this.getTemplatePartials())),this.getNodes(),this.getFormNodes(),this.getChildrenNodes())},getNodes:function(){this.loader=this.node.find(".thread-node-loader").append(n.getSafe("after",u.__(this.getMessageKey("node_loading"),{},"Loading...")).getHtml()),this.nb_hidden_before=this.node.find(".thread-node-nb-before"),this.nb_hidden_after=this.node.find(".thread-node-nb-after"),this.error=this.node.find(".thread-node-error"),this.picture=this.node.find(".thread-node-picture"),this.content=this.node.find(".thread-node-content"),this.flag=this.node.find(".flag-small"),this.poster=this.node.find(".thread-node-poster-name"),this.message=this.node.find(".thread-node-message");var e=this;this.metadata=this.node.find(".thread-node-metadata"),this.date=this.node.find(".thread-node-date");var t=this.node.find(".thread-node-nb-votes");this.votes_count_good=t.filter(".votes-up"),this.votes_count_bad=t.filter(".votes-down"),this.thumb_up=this.node.find(".icon-f.icf-thumb-up").on("click",function(){e.pending_delete||e.logic_node.vote("GOOD")}),this.thumb_down=this.node.find(".icon-f.icf-thumb-down").on("click",function(){e.pending_delete||e.logic_node.vote("BAD")}),this.edit=this.node.find(".thread-node-btn-edit").on("click",function(){e.pending_delete||(e.form_node?(e.form_node.ui_node.node.insertAfter(e.message),e.form_node.open()):(e.form_node=e.logic_node.getForm(),e.form_node&&(e.poster.addClass("hidden"),e.message.addClass("hidden").after(e.form_node.ui_node.node),e.form_node.open(),e.logic_node.canLoadChildren()&&e.logic_node.loadChildren())),e.form_node.setEditMode(e.logic_node.edit_text,e.logic_node.edit_user,e.logic_node.edit_csrf))}),this["delete"]=this.node.find(".thread-node-btn-delete").on("click",function(){e.pending_delete||e.logic_node["delete"]()}),this.undelete=this.node.find(".thread-node-btn-restore").on("click",function(){e.pending_delete&&e.logic_node.undelete()}),this.report=this.node.find(".thread-node-btn-report").on("click",function(){e.logic_node.report()})},getFormNodes:function(){var t=this,i=this.node.find(".thread-node-btn-post").on("click",function(e){e.preventDefault(),t.form_node?(t.content.append(t.form_node.ui_node.node),t.form_node.open()):(t.form_node=t.logic_node.getForm(),t.form_node&&(t.content.append(t.form_node.ui_node.node),t.form_node.open(),t.logic_node.canLoadChildren()&&t.logic_node.loadChildren()))});this.btn_post_in_next=e(),this.btn_post_other=e(),i.each(function(){e(this).parents(".thread-node-children-load-next").length>0?t.btn_post_in_next=t.btn_post_in_next.add(this):t.btn_post_other=t.btn_post_other.add(this)})},getChildrenNodes:function(){this.children_loader=this.node.find(".thread-node-children-loader").append(n.getSafe("after",u.__(this.getMessageKey("children_loading"),{},"Loading...")).getHtml()),this.children_error=this.node.find(".thread-node-children-error");var e=this;this.children=this.node.find(".thread-node-children"),this.children_show=this.node.find(".thread-node-children-show"),this.children_show_label=this.children_show.children("span").on("click",function(){if(e.logic_node.canLoadChildren())return void e.logic_node.loadChildren();e.toggleChildren(!0)}),this.children_hide=this.node.find(".thread-node-children-hide"),this.children_hide.children("span").on("click",function(){e.toggleChildren(!1)}),this.children_node=this.node.find(".thread-node-children-nodes"),this.children_load_next=this.node.find(".thread-node-children-load-next"),this.children_load_next_btn=this.children_load_next.find(".thread-node-children-load-next-btn").on("click",function(t){t.preventDefault(),e.children_load_next_btn.addClass("hidden"),e.children_load_all_btn.addClass("hidden"),e.logic_node.loadChildren()}),this.children_load_all_btn=this.children_load_next.find(".thread-node-children-load-all-btn").on("click",function(t){t.preventDefault(),e.children_load_next_btn.addClass("hidden"),e.children_load_all_btn.addClass("hidden"),e.logic_node.loadChildren(!0)})},render:function(i){this.pending_delete=!!i.pending_delete,this.node.toggleClass("pending-delete",this.pending_delete);var n="number"==typeof i.nb_hidden_before&&i.nb_hidden_before>0,s="number"==typeof i.nb_hidden_between&&i.nb_hidden_between>0,o="number"==typeof i.nb_hidden_after&&i.nb_hidden_after>0;this.nb_hidden_before.toggleClass("hidden",!n&&!s),this.nb_hidden_after.toggleClass("hidden",!o),n&&(1===i.nb_hidden_before?this.nb_hidden_before.html("-- "+u.__(this.getMessageKey("one_reply_before"),{},"1 reply before")+" --"):this.nb_hidden_before.html("-- "+u.__(this.getMessageKey("nb_replies_before"),{"%nb%":i.nb_hidden_before.toString()},"%nb% replies before")+" --")),s&&(1===i.nb_hidden_between?this.nb_hidden_before.html("-- "+u.__(this.getMessageKey("one_reply_between"),{},"1 reply between")+" --"):this.nb_hidden_before.html("-- "+u.__(this.getMessageKey("nb_replies_between"),{"%nb%":i.nb_hidden_between.toString()},"%nb% replies between")+" --")),o&&(1===i.nb_hidden_after?this.nb_hidden_after.html("-- "+u.__(this.getMessageKey("one_reply_after"),{},"1 reply after")+" --"):this.nb_hidden_after.html("-- "+u.__(this.getMessageKey("nb_replies_after"),{"%nb%":i.nb_hidden_after.toString()},"%nb% replies after")+" --"));var a=i.name;if(a||(a=u.__(this.getMessageKey("anonymous"),{},"Anonymous")),i.url&&(a=e("<a>"+a+"</a>").prop("href",i.url)),this.picture.length>0){var r=this.getDefaultPictureUrl(),f=e("<img />");if(i.pic?f.on("error",function(){e(this).off("error").prop("src",r)}).prop("src",i.pic):f.prop("src",r),i.name&&f.prop("title",u.__(this.getMessageKey("user_profile_picture"),{"%name%":i.name},"%name% profile picture")),i.url&&(f=e("<a></a>").prop("href",i.url).append(f)),this.picture.children("a,img").remove(),this.picture.prepend(f),this.picture.removeClass("has-bottom").find(".thread-node-pic-bottom").remove(),(i.is_friend||i.friend_req_asked||i.can_ask_friend)&&(this.picture.addClass("has-bottom").append(e(t.render(l,{is_friend:i.is_friend,friend_req_asked:!i.is_friend&&i.friend_req_asked,can_ask_friend:!i.is_friend&&!i.friend_req_asked&&i.can_ask_friend,lbl_already_friends:u.__(this.getMessageKey("already_friends"),{},"You are already friends"),lbl_friend_req_asked:u.__(this.getMessageKey("friend_req_asked"),{"%name%":i.name},"You asked %name% as friend"),lbl_add_to_friends:u.__(this.getMessageKey("add_to_friends"),{},"Add to friends")}))),!i.is_friend&&!i.friend_req_asked&&i.can_ask_friend)){var d=this.picture.find(".thread-node-friend-ask-btn");require(["skins/default/profile/action/link"],function(t){var n=new t(d,"/profiles/"+i.profile+"/friends/requests/ask",!1,!1,i.ask_req_csrf);d.addClass("init-ok"),n.setLoadingMessage(""),n.onSuccess=function(){e(this.link).replaceWith("<span class='icon-f icf-user-hourglass'></span>")}})}}i.country?this.flag.removeClass().addClass("flag-small flag-"+i.country.toLowerCase()).prop("title",i.country_name):this.flag.addClass("hidden"),this.poster.empty().append(a).toggleClass("poster-model",!0===i.model).toggleClass("poster-channel",!0===i.channel).toggleClass("poster-owner",!0===i.is_owner),i.verified&&this.poster.append(' <span class="icon-f icf-check-circle verified"></span>');var c=[];"number"==typeof i.nb_videos&&(i.nb_videos>1?c.push(u.__("misc.nb_videos",{"%count%":i.nb_videos_f},"%count% videos")):i.nb_videos>0&&c.push(u.__("misc.one_video",{"%count%":i.nb_videos_f},"%count% video"))),"number"==typeof i.nb_subs&&(i.nb_subs>1?c.push(u.__("profile.subscribers",{"%count%":i.nb_subs_f},"%count% subscribers")):i.nb_subs>0&&c.push(u.__("misc.sub_count_s",{"%count%":i.nb_subs_f},"%count% subscriber"))),c.length>0&&this.poster.append('<span class="poster-stats">('+c.join(" / ")+")</span>"),this.renderMessage(i.message),this.renderDate(i.time_diff,i.date),i.lang&&this.date.append('<em> (Debug: <span class="flag-small flag-'+i.lang_country.toLowerCase()+'"></span> '+i.lang+")</em>"),this.renderVotes(i.votes),this.setupEditBtn(i.edit,i.max_edit_time),this["delete"].toggleClass("hidden",!i["delete"]),this.undelete.toggleClass("hidden",!i.undelete),this.report.toggleClass("hidden",!i.report),this.content.removeClass("hidden"),this.rendered=!0,this.renderChildren(),this.renderPostBtn()},renderDate:function(e,t){this.date.html(e).prop("title",t)},renderMessage:function(i){if("string"==typeof i)return emojione&&this.logic_node.thread.show_emojis&&(i=emojione.toImage(i)),void this.message.html(i);var n=i.m;emojione&&this.logic_node.thread.show_emojis&&(n=emojione.toImage(n));for(var o in i.p){var a=i.p[o];a.is_video="v"===a.t,a.is_profile="p"===a.t,a.is_gallery="g"===a.t,a.is_playlist="f"===a.t,n=n.replace(new RegExp("##A"+a.x+"A##","g"),t.render(r,a))}this.message.html(n).find(".preview").each(function(){var t=e(this),i=t.data("thumb");if(i){var n=t.prev(".icon,.icon-f"),o=t.next(".icon,.icon-f");n=n.length>0&&"string"==typeof n[0].outerHTML?n[0].outerHTML+" ":"",o=o.length>0&&"string"==typeof o[0].outerHTML?" "+o[0].outerHTML:"";var a=e("<span>"+n+"<strong></strong>"+o+'<br><img src="'+i+'" /></span>');a.find("strong").text(t.text());var r=new s(t,a,{relative_to:this.node,trigger:"mouseenter",popup_class:"x-thread-node-link-preview-popup"});t.on("mouseleave",function(){r.close()})}})},renderChildren:function(){this.rendered&&(this.children.toggleClass("hidden",0===this.nb_children),this.toggleChildrenShowHide(!0),this.renderPostBtn())},toggleChildren:function(e){if("boolean"!=typeof e)e=!this.children_open;else if(e===this.children_open)return;e?this.children_node.slideDown("fast"):this.children_node.slideUp("fast"),this.children_open=e,this.children_load_next_btn.toggleClass("hidden",!this.has_next||!this.children_open),this.children_load_all_btn.toggleClass("hidden",!this.has_next||this.next_is_last||!this.children_open),this.toggleChildrenShowHide(!0),this.renderPostBtn()},toggleChildrenShowHide:function(e){this.children_show.toggleClass("hidden",!e||this.children_open||this.logic_node.thread.is_admin),this.children_hide.toggleClass("hidden",!e||!this.children_open||this.logic_node.thread.is_admin)},renderVotes:function(e){this.votes_count_good.html(e.nbf).toggleClass("hidden",0===e.nb||this.pending_delete),this.votes_count_bad.html(e.nbbf).toggleClass("hidden",0===e.nbb||this.pending_delete),this.thumb_up.toggleClass("active","GOOD"===e.user).toggleClass("hidden",this.pending_delete),this.thumb_down.toggleClass("active","BAD"===e.user).toggleClass("hidden",this.pending_delete)},setupEditBtn:function(e,t){if(this.edit_timer&&(clearInterval(this.edit_timer),this.edit_timer=null),this.edit.toggleClass("hidden",!e).html(u.__(this.getMessageKey("edit"),{},"Edit")),e&&(this.edit_remaining=t-Math.round((new Date).getTime()/1e3),!(this.edit_remaining<60))){var i=this;this.edit_timer=setInterval(function(){i.updateEditTimer()},1e3),this.updateEditTimer()}},updateEditTimer:function(){if(--this.edit_remaining<=0)return this.edit_timer&&(clearInterval(this.edit_timer),this.edit_timer=null),this.edit.addClass("hidden"),void(this.form_node&&"edit"===this.form_node.ui_node.mode&&this.form_node.close());var e=[],t=Math.floor(this.edit_remaining/60);t>0&&e.push(t+"m"),e.push(this.edit_remaining-60*t+"s"),this.edit.html(u.__(this.getMessageKey("edit"),{},"Edit")+" ("+e.join(" ")+")")},renderEditBtn:function(e){if(!this.edit)return!1;e&&(this.poster.removeClass("hidden"),this.message.removeClass("hidden")),this.edit.toggleClass("hidden",!this.logic_node.can_edit||this.edit_remaining<=0||this.logic_node.isFormOpened()||this.logic_node.isDeleting()||this.logic_node.isUndeleting())},renderPostBtn:function(){if(!this.logic_node.canPost())return this.btn_post_in_next.addClass("hidden"),void this.btn_post_other.addClass("hidden");this.btn_post_in_next.toggleClass("hidden",this.logic_node.canLoadChildren()||this.logic_node.isFormOpened()||!this.children_open||this.logic_node.isDeleting()||this.logic_node.isUndeleting()),this.btn_post_other.toggleClass("hidden",this.logic_node.isFormOpened()||this.children_open||this.logic_node.isDeleting()||this.logic_node.isUndeleting())},prependChild:function(e){this.children_node.prepend(e.node)},appendChild:function(e){this.children_node.append(e.node)},setNbNext:function(e,t){if(this.has_next=e>0,this.next_is_last=e<=t,this.children_load_next_btn.toggleClass("hidden",!this.has_next||!this.children_open),this.children_load_all_btn.toggleClass("hidden",!this.has_next||this.next_is_last||!this.children_open),e>0){var i;i=1===e?u.__(this.getMessageKey("load_last_reply"),{},"Load last reply"):e<=t?u.__(this.getMessageKey("load_last_nb_replies"),{"%nb%":e.toFixed(0)},"Load last %nb% replies"):u.__(this.getMessageKey("load_next_nb_replies"),{"%nb%":t.toFixed(0)},"Load next %nb% replies"),this.children_load_next_btn.html(i)}},destroy:function(){this.node.remove(),this.form_node&&delete this.form_node},show:function(){this.node.show()},hide:function(){this.node.hide()},showLoader:function(){this.loader.removeClass("hidden"),this.content.addClass("hidden")},hideLoader:function(){this.loader.addClass("hidden")},showError:function(t,i){var n=this.error.empty().removeClass("hidden");if(!t)var s="node_error",o="Loading failed!";i&&(n=e("<a></a>").appendTo(this.error).on("click",function(e){e.preventDefault(),i()}),t||(s="node_error_retry",o="Loading failed! Please click here to retry.")),n.html(t||u.__(this.getMessageKey(s),{},o)),this.content.addClass("hidden")},hideError:function(){this.error.addClass("hidden")},showChildrenLoader:function(){this.children_loader.removeClass("hidden"),this["delete"]&&this["delete"].addClass("hidden"),this.undelete&&this.undelete.addClass("hidden"),this.children_load_next_btn.addClass("hidden"),this.children_load_all_btn.addClass("hidden")},hideChildrenLoader:function(){this.children_loader.addClass("hidden"),this["delete"]&&this["delete"].toggleClass("hidden",!this.logic_node.can_delete),this.undelete&&this.undelete.toggleClass("hidden",!this.logic_node.can_undelete)},showChildrenError:function(t,i){var n=this.children_error.empty().removeClass("hidden");if(!t)var s="children_error",o="Loading failed!";i&&(n=e("<a></a>").appendTo(this.children_error).on("click",function(e){e.preventDefault(),i()}),t||(s="children_error_retry",o="Loading failed! Please click here to retry.")),n.html(t||u.__(this.getMessageKey(s),{},o))},hideChildrenError:function(){this.children_error.addClass("hidden")},setDeleteError:function(e){this["delete"].html(e).addClass("has-error");var t=this;window.setTimeout(function(){t["delete"].html(u.__(t.getMessageKey("delete"),{},"Delete")).removeClass("has-error")},3e4)},setUndeleteError:function(e){this.undelete.html(e).addClass("has-error");var t=this;window.setTimeout(function(){t.undelete.html(u.__(t.getMessageKey("restore"),{},"Restore")).removeClass("has-error")},3e4)},disableReport:function(){this.report.addClass("success").html(u.__(this.getMessageKey("report_thanks"),{},"Thanks for your report!"))},toggleVotesDelete:function(e){this.metadata.toggleClass("votes-disabled",!e),this["delete"].toggleClass("hidden",!e||!this.logic_node.can_delete),this.undelete.toggleClass("hidden",!e||!this.logic_node.can_undelete),this.report.toggleClass("hidden",!e||!this.logic_node.can_report)}},f}),define("text!skins/common/thread/ui/root.mustache",[],function(){return'<div class="x-thread thread-{{ type }}">\r\n\t<div class="thread-header">\r\n\t\t<span class="thread-title"></span>\r\n\t\t<span class="thread-node-children-count"></span>\r\n\t\t<a href="#" class="thread-node-btn thread-node-btn-sort mobile-only-show-inline hidden"><span class="icon-f icf-sliders"></span></a>\r\n\t\t<span class="thread-sort mobile-only-hide hidden">{{{ lbl_sort_by }}}</span>\r\n\t\t<a href="#" class="thread-node-btn thread-node-btn-post hidden">{{{ lbl_post_reply }}}</a>\r\n\t</div>\r\n\t<div class="thread-form hidden"></div>\r\n\t<div class="thread-node-loader hidden"></div>\r\n\t<div class="thread-node-error hidden"></div>\r\n\t{{> children}}\r\n</div>'}),define("text!skins/common/thread/ui/sort_popup.mustache",[],function(){return'<ul>\n\t<li><a href="#" class="top{{#active_top}} active{{/active_top}}">{{{ lbl_top }}}</a></li>\n\t<li><a href="#" class="new{{#active_new}} active{{/active_new}}">{{{ lbl_new }}}</a></li>\n\t<li><a href="#" class="worst{{#active_worst}} active{{/active_worst}}">{{{ lbl_worst }}}</a></li>\n\t<li><a href="#" class="old{{#active_old}} active{{/active_old}}">{{{ lbl_old }}}</a></li>\n\t<li><a href="#" class="author{{#active_author}} active{{/active_author}}">{{{ lbl_author }}}</a></li>\n</ul>'}),define("skins/common/thread/ui/root",["mustache","lib/helpers/popup","./node","text!./root.mustache","text!./sort_popup.mustache","lib/i18n!front"],function(e,t,i,n,s,o){var a=function(e,t,n,s){void 0!==e&&(this.type=e,this.title=t,this.id_related=n,this.sort=null,i.apply(this,[0,null]),s.empty().append(this.node))};return a.prototype=new i,a.prototype.getTemplate=function(){return n},a.prototype.getTemplateVars=function(){var e=i.prototype.getTemplateVars.apply(this,[]);return e.type=this.type,e.lbl_sort_by=o.__(this.getMessageKey("sort_by"),{"%start_top%":'<a class="top">',"%end_top%":"</a>","%start_new%":'<a class="new">',"%end_new%":"</a>","%start_worst%":'<a class="worst">',"%end_worst%":"</a>","%start_old%":'<a class="old">',"%end_old%":"</a>","%start_author%":'<a class="author">',"%end_author%":"</a>"},"Sort by %start_top%Top%end_top% / %start_new%New%end_new% / %start_worst%Worst%end_worst% / %start_old%Old%end_old% / %start_author%Author%end_author%"),e},a.prototype.getMessageKey=function(e){return"sort_by"===e?"misc.sort_by_top_new_worst_old_author":"reply"===e||"post_reply"===e?"misc.post_message":"sort_by_top"===e?"misc.top":"sort_by_worst"===e?"misc.worst":"sort_by_new"===e?"misc.new":"sort_by_old"===e?"misc.old":"sort_by_author"===e?"misc.author":"one_reply_before"===e?"misc.one_message_before":"nb_replies_before"===e?"misc.nb_messages_before":"one_reply_between"===e?"misc.one_message_between":"nb_replies_between"===e?"misc.nb_messages_between":"one_reply_after"===e?"misc.one_message_after":"nb_replies_after"===e?"misc.nb_messages_after":i.prototype.getMessageKey.apply(this,[e])},a.prototype.setNbChildren=function(e){i.prototype.setNbChildren.apply(this,[e]),this.sort_btn.toggleClass("hidden",0===e),this.sort_links.toggleClass("hidden",0===e),this.children_count.text(e)},a.prototype.render=function(){this.rendered=!0,this.renderChildren()},a.prototype.getNodes=function(){this.content=this.node,this.node.find(".thread-title").html(this.title);var e=this;this.sort_links=this.node.find(".thread-sort"),this.sort_link_top=this.sort_links.find(".top").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("top")}),this.sort_link_new=this.sort_links.find(".new").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("new")}),this.sort_link_worst=this.sort_links.find(".worst").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("worst")}),this.sort_link_old=this.sort_links.find(".old").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("old")}),this.sort_link_author=this.sort_links.find(".author").on("click",function(t){t.preventDefault(),e.logic_node.updateSort("author")}),this.sort_btn=this.node.find(".thread-node-btn-sort"),this.createPopup(),this.form=this.node.find(".thread-form")},a.prototype.getChildrenNodes=function(){i.prototype.getChildrenNodes.apply(this,[]),this.children_hide.remove(),this.children_show.remove(),this.children_count=this.node.find(".thread-node-children-count")},a.prototype.setSort=function(e){this.logic_node.thread.is_admin&&this.node.find(".thread-header").addClass("hidden"),this.sort=e,this.sort_link_top.toggleClass("active","top"===e),this.sort_link_new.toggleClass("active","new"===e),this.sort_link_worst.toggleClass("active","worst"===e),this.sort_link_old.toggleClass("active","old"===e),this.sort_link_author.toggleClass("active","author"===e),this.sort_popup&&(this.sort_top.toggleClass("active","top"===e),this.sort_new.toggleClass("active","new"===e),this.sort_worst.toggleClass("active","worst"===e),this.sort_old.toggleClass("active","old"===e),this.sort_author.toggleClass("active","author"===e))},a.prototype.renderPostBtn=function(){if(!this.logic_node.canPost())return this.btn_post_in_next.addClass("hidden"),void this.btn_post_other.addClass("hidden");this.btn_post_in_next.toggleClass("hidden",this.logic_node.canLoadChildren()||0===this.logic_node.getNbChildren()||this.logic_node.isFormOpened()),this.btn_post_other.toggleClass("hidden",this.logic_node.canLoadChildren())},a.prototype.createPopup=function(){var i=$(e.render(s,{lbl_top:o.__(this.getMessageKey("sort_by_top"),{},"Top"),lbl_new:o.__(this.getMessageKey("sort_by_new"),{},"New"),lbl_worst:o.__(this.getMessageKey("sort_by_worst"),{},"Worst"),lbl_old:o.__(this.getMessageKey("sort_by_old"),{},"Old"),lbl_author:o.__(this.getMessageKey("sort_by_author"),{},"Author"),active_top:"top"===this.sort,active_new:"new"===this.sort,active_worst:"worst"===this.sort,active_old:"old"===this.sort,active_author:"author"===this.sort}));this.sort_popup=new t(this.sort_btn,i,{relative_to:this.node,position:{v:"below",h:"left"},closebtn:!0,popup_class:"thread-root-sort-popup"});var n=this;this.sort_top=i.find(".top").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("top"),n.sort_popup.close()}),this.sort_new=i.find(".new").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("new"),n.sort_popup.close()}),this.sort_worst=i.find(".worst").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("worst"),n.sort_popup.close()}),this.sort_old=i.find(".old").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("old"),n.sort_popup.close()}),this.sort_author=i.find(".author").on("click",function(e){e.preventDefault(),n.logic_node.updateSort("author"),n.sort_popup.close()})},a}),define("skins/default/profile/comments/ui_node",["skins/common/thread/ui/node"],function(e){var t=function(t,i){void 0!==t&&e.apply(this,[t,i])};return t.prototype=new e,t.prototype.createChild=function(e,i){return new t(e,i)},t.prototype.getMessageKey=function(t){switch(t){case"node_loading":return"video.loading_comment";case"children_loading":return"video.loading_replies";case"children_error":return"video.failed_loading_replies";case"children_error_retry":return"video.failed_loading_replies_retry"}return e.prototype.getMessageKey.apply(this,[t])},t}),define("skins/default/profile/comments/ui_root",["config/main","skins/common/thread/ui/root","./ui_node","lib/i18n!front"],function(e,t,i,n){var s=function(e,i){void 0!==e&&t.apply(this,["profile-wall-posts",n.__("video.comments",{},"Comments"),e,i])};return s.prototype=new t,s.prototype.createChild=function(e,t){return new i(e,t)},s.prototype.getMessageKey=function(e){switch(e){case"sort_by":return"profile.comments.sort";case"children_loading":return"video.loading_comments";case"children_error":return"video.failed_loading_comments";case"children_error_retry":return"video.failed_loading_comments_retry";case"load_next_nb_replies":return"video.load_next_nb_comments";case"load_last_reply":return"video.load_last_comment";case"load_last_nb_replies":return"video.load_last_nb_comments";case"load_all_replies":return"misc.load_all_comments";case"reply":case"post_reply":return"video.post_a_comment";case"one_reply_before":return"misc.one_comment_before";case"nb_replies_before":return"misc.nb_comments_before";case"one_reply_between":return"misc.one_comment_between";case"nb_replies_between":return"misc.nb_comments_between";case"one_reply_after":return"misc.one_comment_after";case"nb_replies_after":return"misc.nb_comments_after"}return t.prototype.getMessageKey.apply(this,[e])},s.prototype.getTemplateVars=function(){var i=t.prototype.getTemplateVars.apply(this,[]);return i.lbl_sort_by=i.lbl_sort_by.replace("%author%","object"==typeof e.data.user&&e.data.user.display?e.data.user.display:n.__("misc.author",{},"Author")),i},s.prototype.getNodes=function(){t.prototype.getNodes.apply(this);var e=this.node.find(".thread-header");this.bg_title=$('<h4 class="bg-title grey"></h4>').append(this.node.find(".thread-title")).prependTo(e)},s.prototype.getChildrenNodes=function(){t.prototype.getChildrenNodes.apply(this,[]),this.bg_title.append(" (").append(this.children_count.removeClass("thread-node-children-count")).append(")")},s.prototype.createPopup=function(){t.prototype.createPopup.apply(this,[]),this.sort_worst.remove(),this.sort_author.text(n.__("profile.comments.from_author",{"%author%":"object"==typeof e.data.user&&e.data.user.display?e.data.user.display:n.__("misc.author",{},"Author")},"From %author%"))},s}),define("skins/default/profile",["config/main","./header/header"],function(e){"undefined"!=typeof e.data.user&&require(["static/dom","lib/tab","skins/default/profile/tabs/aboutme","lib/i18n!front","skins/common/history/page_view_history","skins/common/history/one_info_tracker","lib/helpers/thumbs_rotator","lib/helpers/suggest_tracker","skins/default/profile/title_actions"],function(t,i,n,s,o,a){o.addId("profile",e.data.user.id_user);var r=!1;e.dyn.premium&&!e.dyn.login_info.is_premium&&(window.location.hash="#_tabRed",r=!0);var l={},u={last_profile:"profPage_lastProf",last_tab:"profPage_lastTab",last_page:"profPage_lastPage",last_scroll:"profPage_scrollPos",last_video_page:"profPage_v_lastPage",last_video_scroll:"profPage_v_scrollPos"},f=$("#tabVideos");if(f.length>0){var d;l.tabVideos={},l.tabVideos.action=function(t){if(r)return void(window.location.href="/");if(d)return void d.load(t);require(["skins/default/profile/listing/videos","skins/default/profile/main_cats_switch"],function(i,n){var s=!1,o=["best","new","rating","comments"];e.data.show_up_only.free&&o.push("new/uploads-only"),d=new i($('<div class="tabVideos"></div>').prependTo(f),"profile-listing-uploads","videos",o,"best",{id:"tabVideos",storeLastPage:u.last_video_page,storeScrollPos:u.last_video_scroll,onLoaded:function(){s||(new n(f,e.data.nb_videos.free,"#_tabVideos",f.find("#video_type").length>0,d),s=!0)}}),d.load(t)});var i=$("#privacy-edit-videos");i.length>0&&require(["skins/default/profile/action/popup_form"],function(t){var n=new t(i),o=[];o.push({opt_value:"ANYONE",opt_label:s.__("misc.everybody")}),o.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),o.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.direct_link_only")}),n.addSetting(s.__("profile.privacy.who_can_view_videos"),"profile[upload_access]",o,e.data.user.access.upload)}),$("<div></div>").prependTo(f)},l.tabVideos.subhashes=["videos-new","videos-best","videos-rating","videos-comments"],
e.data.show_up_only.free&&l.tabVideos.subhashes.push("videos-new/uploads-only")}var c=$("#tabRed");if(c.length>0){var h;l.tabRed={},l.tabRed.action=function(t){if(h)return void h.load(t);require(["skins/default/profile/listing/videos","skins/default/profile/main_cats_switch"],function(i,n){var s=!1,o=["premium","premium-new","premium-views"];e.data.show_up_only.premium&&o.push("premium-new/uploads-only"),h=new i($('<div class="tabRed"></div>').prependTo(c),"profile-listing-premium","videos",o,"premium",{id:"tabRed",onLoaded:function(){s||(new n(c,e.data.nb_videos.premium,"#_tabRed",c.find("#video_type").length>0,h),s=!0)}}),h.load(t)})},l.tabRed.subhashes=["videos-premium","videos-premium-new","videos-premium-views"],e.data.show_up_only.premium&&l.tabRed.subhashes.push("videos-premium-new/uploads-only"),e.data.user.channel&&!e.dyn.premium&&require(["skins/common/profile/last_channels_visited"],function(t){t.set(e.data.user.id_user)})}var p=function(){},_=$("#tabActivity");if(_.length>0){var g;p=function(){if(r)return void(window.location.href="/");g||require(["skins/default/profile/listing/infinite","skins/default/profile/images","skins/default/mozaique/thumb_block_common_init","skins/default/profile/main_cats_switch"],function(i,n,o,r){var l="",f=!1;e.data.main_cat?(l="/"+e.data.main_cat,f=e.data.main_cats):!e.data.user.model&&!e.data.user.channel||e.data.no_force_activity||(l="/"+e.dyn.pagefilter,f=[e.dyn.pagefilter]),g=new i("activity",_,e.data.user.url+"/activity"+l,!0,"load-more-activities",s.__("profile.loading_more_activities"),"profile-activities",{main_cats:f}),g.on_first_load=function(){if(n(_.find(".img-block .gif-tag")),"tabActivity"===a.get(u.last_tab)){var e=a.get(u.last_scroll);if("string"==typeof e){var i=$(E).find("#"+e).first();i.length>0&&t.scrollToTop(i.offset().top-S)}}new r(_.find(".activity-event").first(),null,"#_tabActivity",!1)},g.on_next_load=function(e){n(e.find(".img-block .gif-tag")),o.init_listing(e,{rotator:!0})},g.load()})},l.tabActivity=p}l.tabAboutMe=function(){if(r)return void(window.location.href="/");n(),$("#goto-activity").on("click",function(e){e.preventDefault(),$("#tab-activity").click()})};var m=$("#tabPhotos");if(m.length>0){var b=!1;l.tabPhotos=function(){if(r)return void(window.location.href="/");if(!b){b=!0;0!==m.find(".img-block").length&&require(["skins/default/profile/action/link","skins/default/profile/images","lib/helpers/viewer/lightgallery-manager"],function(t){var i=$("#delete-verified-picture");if(i.length>0){i.on("click",function(e){e.stopPropagation()});new t(i,"/profiles/"+e.data.user.username+"/unverify",s.__("profile.unverify.confirm"),!1,e.data.user.csrf.uunverify).onSuccess=function(){i.parents(".img-block").remove(),window.location.reload()}}})}}}var v=$("#tabFriends");if(v.length>0){var D=[];e.data.user.has_friends&&D.push("friends"),e.data.user.has_fans&&D.push("fans");var y;l.tabFriends={},l.tabFriends.action=function(t){if(r)return void(window.location.href="/");if(y)return void(D.length>1&&y.load(t));D.length>1?require(["skins/default/profile/listing/friends"],function(e){y=new e(v),y.load(t)}):require(["skins/common/listing/loader"],function(t){y=new t(D[0],$("<div></div>").prependTo(v),e.data.user.url+"/"+D[0],!1,!0),y.load()});var i=$("#privacy-edit-friends");i.length>0&&require(["skins/default/profile/action/popup_form"],function(t){var n=new t(i),o=[];o.push({opt_value:"ALLOW",opt_label:s.__("misc.everybody")}),o.push({opt_value:"FRIEND_OF_FRIEND",opt_label:s.__("profile.allow.friends_of_friends")}),o.push({opt_value:"BLOCKED",opt_label:s.__("profile.allow.nobody")}),n.addSetting(s.__("profile.privacy.who_can_friend_request"),"profile[friend_request]",o,e.data.user.access.friend_requests),o=[],o.push({opt_value:"ANYONE",opt_label:s.__("misc.everybody")}),o.push({opt_value:"REGISTER",opt_label:s.__("profile.allow.only_registered")}),o.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),o.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.nobody")}),n.addSetting(s.__("profile.privacy.who_can_view_friends"),"profile[friend_list_access]",o,e.data.user.access.friends)})},D.length>1&&(l.tabFriends.subhashes=["friends","fans"])}var w=$("#favs-container");if(w.length>0){var C;l.tabFavorites=function(){if(r)return void(window.location.href="/");if(!C){require(["skins/common/listing/loader/paginated","skins/default/profile/vote/good_bad","skins/default/mozaique/thumb_block_common_init"],function(i,n,s){C=new i("favorites",w,e.data.user.url+"/favorites",!0);var o=!0;C.get_loader_containers=function(){return o?(o=!0,this.container.find(".favorites")):this.container};var r=!1;C.onLoaded=function(){s.init_listing(w,{rotator:!1}),a.set(u.last_page,C.page);var i=0;if("string"==typeof r){var o=$(E).find("#"+r).first();o.length>0&&(i=o.offset().top-S)}var l=e.data.user.id_user;$(".fav-list-votes").each(function(){var e=$(this),t=e.data("vote"),i=e.data("id");new n(e,t.vgood,t.vbad,t.rating,t.vrating,t.total,t.visitor_vote,null,null,!0).initPostData("/api/playlists/list/"+i+"/vote/GOOD","/api/playlists/list/"+i+"/vote/BAD",{csrf:t.csrf,id_user:l})}),t.scrollToTop(i)};var l=0;if("tabFavorites"===a.get(u.last_tab)){r=a.get(u.last_scroll);var f=a.get(u.last_page);"number"==typeof f&&(l=f)}C.loadPage(l)});var i=$("#profile-favs-add"),n=$("#profile-favs-manage");(i&&i.length||n&&n.length)&&require(["skins/default/video/playlists/manager"],function(e){i.on("click",function(t){t.preventDefault(),e.loadCreateList()}),n.on("click",function(t){t.preventDefault(),e.loadEditList()})})}},require(["skins/default/video/playlists/manager"],function(e){e.autoOpenByHash()})}var k=$("#tabComments");if(k.length>0){var x;l.tabComments=function(){if(r)return void(window.location.href="/");if(!x){require(["skins/common/thread/root","skins/default/profile/comments/ui_root"],function(t,i){var n=$("<div></div>").appendTo(k),s=new i(e.data.user.id_user,n);x=new t("profile-wall-posts",e.data.user.id_user,s,"skins/default/form/login"),x.onFirstLoaded=function(e){if(t.prototype.onFirstLoaded.apply(this,[e]),xv.chat&&xv.chat.infos&&xv.chat.infos.link_outside_done){var i=$("#profile-comments-tab-chat-btn");xv.chat.actions.set_chat_toggle(i),i.css("display","block")}else xv.chat||(xv.chat={}),xv.chat.infos||(xv.chat.infos={}),xv.chat.infos.to_set_chat_toggle_link_outside_done||(xv.chat.infos.to_set_chat_toggle_link_outside_done=[]),xv.chat.infos.to_set_chat_toggle_link_outside_done.push({elem:$("#profile-comments-tab-chat-btn"),setted_func:function(){$("#profile-comments-tab-chat-btn").fadeIn().css("display","block")}})},x.setSort(t.SORT_NEW),x.load()});var t=$("#privacy-edit-comments");t.length>0&&require(["skins/default/profile/action/popup_form"],function(i){var n=new i(t),o=[];o.push({opt_value:"REGISTER",opt_label:s.__("profile.allow.only_registered")}),o.push({opt_value:"FRIEND",opt_label:s.__("profile.allow.friends")}),o.push({opt_value:"NOBODY",opt_label:s.__("profile.allow.nobody")}),n.addSetting(s.__("profile.privacy.who_can_comment"),"profile[wall_access]",o,e.data.user.access.wall)})}}}var F=$("#btn-share");F.length>0&&require(["mustache","static/utils","lib/helpers/popup","skins/common/video/share"],function(e,t,i,n){var s=new i(F,"",{popup_class:"share-toolbox",autoclose:!0,mouseout_autoclose:5e3});s.onOpen=function(){s.setContent(n.getShareElem(window.location.href,document.title,"full")),s.position()}});var E=!1,T=!1,S=Math.min(150,$(window).height()/4),L=function(){if(a.canTrack(u.last_tab)&&!1!==E){var e=!1,t=!1,i=$(window).scrollTop()+S;$(E).find(".activity-event").each(function(){t||($(this).offset().top-i>0?t=!0:e=this)}),$(e).length>0&&a.set(u.last_scroll,$(e).prop("id"))}},P=function(){!1!==T&&(clearTimeout(T),T=!1),T=setTimeout(L,250)},I=function(e,t,i){if($(t).toggleClass("active",!!i),i)for(var n in e.tabs)if(e.tabs[n].active){var s=e.tabs[n].id;"tabActivity"===s||"tabFavorites"===s?(E="#"+n,$(window).on("scroll",P)):(E=!1,$(window).off("scroll",P)),a.canTrack(u.last_tab)&&("tabVideos"!==s&&(a.unset(u.last_video_scroll),a.unset(u.last_video_page)),a.get(u.last_tab)!==s&&(a.set(u.last_tab,s),a.unset(u.last_scroll),a.unset(u.last_page)))}};if(a.canTrack(u.last_profile)){a.get(u.last_profile)!==e.data.user.id_user&&(!function(){for(var e in u)a.unset(u[e])}(),a.set(u.last_profile,e.data.user.id_user))}new i("#profile-tabs",l,!1,!0,I)})}),define("text!skins/default/profile/action/gallery_report_bar.mustache",[],function(){return'<div id="gallery-report-bar" class="hidden">\n\t<div>\n\t\t<button type="button" class="btn btn-default btn-danger btn-lg btn-report"><span class="icon-f icf-flag"></span> <span class="label"></span></button>\n\t\t<button type="button" class="btn btn-default btn-lg btn-reset" title="{{{ lbl_cancel }}}"><span class="icon-f icf-rotate-left"></span><span class="mobile-only-hide"> {{{ lbl_cancel }}}</span></button>\n\t</div>\n</div>'}),define("skins/default/profile_gallery",["config/main","./header/header"],function(e){"undefined"!=typeof e.data.user&&require(["config/main","lib/tools","skins/common/history/page_view_history","lib/helpers/viewer/lightgallery-manager","skins/default/profile/vote/good_bad","skins/default/profile/title_actions","skins/default/profile/tabs/aboutme","skins/default/profile/images"],function(e,t,i,n,s){i.addId("photo_gallery",e.data.gal.id_gal);var o=e.data.gal,a=t.getUrlHash(),r=$("#report-gallery");if(new s($("#gal-list-votes"),o.vgood,o.vbad,o.vrating,o.rating,o.total,o.visitor_vote).initPostData("/profiles/"+o.owner+"/galleries/"+o.id_gal+"/vote/good","/profiles/"+o.owner+"/galleries/"+o.id_gal+"/vote/bad",{csrf:o.csrf}),a.length>0&&a.match(/^_galpic-\d+$/g)){var l=$("#"+a.substr(1));1===l.length&&(n.is_loaded?l.hasClass("lightgallery-item")&&l.trigger("click"):n.onLoad=function(){l.hasClass("lightgallery-item")&&l.trigger("click")})}r.length>0&&require(["mustache","skins/default/profile/action/report","lib/i18n!front","text!skins/default/profile/action/gallery_report_bar.mustache"],function(e,t,i,n){var s=null,o=[],a=null,l=$("#tabPhotos .thumb-mozaique .report-gallery-pic").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),n=!t.hasClass("selected");if(n)o.push(t.data("pic"));else{var r=o.indexOf(t.data("pic"));r>-1&&o.splice(r,1)}t.toggleClass("selected",n).parents().toggleClass("selected",n);var l=o.length;a.toggleClass("hidden",0===l).find("button .label").html(i.__(l>1?"report_form.report_pics":"report_form.report_one_pic",{"%nb%":l.toString()})),s.setPictures(o)});if(l.length>0){a=$(e.render(n,{lbl_cancel:i.__("misc.cancel")})).appendTo($("body")),r=r.add(a.find("button.btn-report"));var u=function(){l.filter(".selected").removeClass("selected").parents(".thumb-block").removeClass("selected"),o=[],a.addClass("hidden"),s.setPictures([])};a.find("button.btn-reset").on("click",u)}s=new t("gallery",r,$("#page")),l.length>0&&(s.onReported=function(){if(o.length>0){var e=l.filter(".selected");l=l.not(e),e.parents(".thumb-block").removeClass("selected"),e.remove(),u(),l=l.not(e),0===l.length&&r.remove()}else l.remove()})})})}),define("skins/default/profiles_videos",["./header/header","lib/helpers/thumbs_rotator"],function(){}),define("skins/default/search",["./mozaique/search_base"],function(){var e=$("#search-associates");e.find(".show-more a").on("click",function(){e.toggleClass("mobile-expanded")})}),define("skins/default/suggestion",["static/cookies","./header/header"],function(e){var t=function(){this.active_tracking=!1,this.thumb_list=!1,this.view_list={},this.cookie_name="suggest_view","suggestion"==xv.conf.data.action&&this.init_tracking()};return t.prototype={init_tracking:function(){this.active_tracking=!0,this.thumb_list=$(document).find(".thumb-block");var t=e.get(this.cookie_name);if(t){var i=JSON.parse(t);if(i){for(var n in i){var s=i[n];s=Math.round(s/3),0==s?delete i[n]:i[n]=s}this.view_list=i}}var o=this;window.addEventListener("scroll",function(e){o.checkViewed()}),o.checkViewed()},checkViewed:function(){if(!this.thumb_list)return void console.error("Suggest : No video detected");var e=!1,t=this;this.thumb_list=jQuery.grep(this.thumb_list,function(i){if(!i.getBoundingClientRect)return console.error("Failed for ",i),!1;var n=i.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(n.top<0)return!0;if(n.left<0)return!0;if(n.top>s-n.height)return!0;i.style.border="1px #F00 solid";var o=i.id.substr(6);return o?(t.view_list[o]||(t.view_list[o]=0),t.view_list[o]=t.view_list[o]+9,e=!0,!1):(console.error("Bad thumb id",i.id),!1)}),e&&this.saveCookie()},saveCookie:function(){console.log("Suggestion: Saving cookie with",this.view_list),e.setLocal(this.cookie_name,JSON.stringify(this.view_list),108e5,"/")}},new t}),define("skins/default/tag",["./mozaique/search_base"],function(){}),define("skins/default/tags",["lib/tools","./header/header"],function(e){var t,i=!1,n="",s=$("#filter-tags-input");0!==s.val().length||"#gay"!==window.location.hash&&"#shemale"!==window.location.hash||s.val(window.location.hash.substr(1));var o=function(){i||(i=!0,t=$("#tags li").each(function(){$(this).data("tag",$.trim(e.translit($(this).find("b").text())))}))},a=function(){o();var i=$.trim(e.translit(s.val()));if(i!==n){if(n=i,0===i.length)return void t.removeClass("hidden");t.each(function(){$(this).toggleClass("hidden",-1===$(this).data("tag").indexOf(i))})}};s.on("keyup",a),s.val().length>0&&a()}),define("skins/common/thread/video_comments/ui/node",["../../ui/node"],function(e){var t=function(t,i){void 0!==i&&e.apply(this,[t,i])};return t.prototype=new e,t.prototype.createChild=function(e,i){return new t(e,i)},t.prototype.getMessageKey=function(t){switch(t){case"node_loading":return"video.loading_comment";case"children_loading":return"video.loading_replies";case"children_error":return"video.failed_loading_replies";case"children_error_retry":return"video.failed_loading_replies_retry"}return e.prototype.getMessageKey.apply(this,[t])},t}),define("skins/common/thread/video_comments/ui/root",["../../ui/root","./node","lib/i18n!front"],function(e,t,i){var n=function(t,n){void 0!==t&&e.apply(this,["video-comments",i.__("video.comments",{},"Comments"),t,n])};return n.prototype=new e,n.prototype.createChild=function(e,i){return new t(e,i)},n.prototype.getMessageKey=function(t){switch(t){case"sort_by":return"misc.sort_by_top_new_worst_old";case"children_loading":return"video.loading_comments";case"children_error":return"video.failed_loading_comments";case"children_error_retry":return"video.failed_loading_comments_retry";case"load_next_nb_replies":return"video.load_next_nb_comments";case"load_last_reply":return"video.load_last_comment";case"load_last_nb_replies":return"video.load_last_nb_comments";case"load_all_replies":return"misc.load_all_comments";case"reply":case"post_reply":return"video.post_a_comment";case"one_reply_before":return"misc.one_comment_before";case"nb_replies_before":return"misc.nb_comments_before";case"one_reply_between":return"misc.one_comment_between";case"nb_replies_between":return"misc.nb_comments_between";case"one_reply_after":return"misc.one_comment_after";case"nb_replies_after":return"misc.nb_comments_after"}return e.prototype.getMessageKey.apply(this,[t])},n.prototype.createPopup=function(){e.prototype.createPopup.apply(this,[]),this.sort_author.remove()},n}),define("skins/default/video/comments/ui_root",["skins/common/thread/video_comments/ui/root","lib/i18n!front"],function(e,t){var i=function(t,i){e.apply(this,[t,i])};return i.prototype=new e,i.prototype.setNbChildren=function(t){e.prototype.setNbChildren.apply(this,[t]),$("#tabComments_btn .nb-video-comments").html(t)},i}),define("text!skins/default/video/tab_comments_bottom_page.html",[],function(){return'<div id="tabComments_bottom_page">\r\n\t<div id="tabComments_loader">{{{ loader }}}</div>\r\n</div>'}),define("skins/default/video/comments",["config/main","mustache","lib/tools","lib/helpers/inline_loader","skins/common/thread/root","./comments/ui_root","text!./tab_comments_bottom_page.html","lib/i18n!front"],function(e,t,i,n,s,o,a,r){var l=!1;if(e.data.is_premium&&(!e.dyn.login_info||!e.dyn.login_info.is_premium||!e.dyn.login_info.is_logged))return $("#tabComments_bottom_page").remove(),!1;var u=function(){if(!l){var t=$("#tabComments");0===t.closest("#tabComments_bottom_page").length&&($("#tabComments_bottom_page").remove(),e.dyn.is_mobile&&i.scrollTo($("#video-actions"))),l=!0;var n=new o(e.data.id_video,t);new s("video-comments",e.data.id_video,n,"skins/default/form/login").load()}};if(e.dyn.vmdata.has_comments&&e.dyn.login_info.is_logged&&e.dyn.login_info.profile&&$.post("/threads/video-comments/get-nb-posts/"+e.data.id_video,function(e){e.result&&($("#tabComments_btn .nb-video-comments").html(e.nb_posts),$("#tabCommentsBottom .thread-node-children-count").html(e.nb_posts))}),0===e.dyn.vmdata.pub_comments||0===$("#tabComments_btn").length||"undefined"==typeof window.innerHeight)return u;var f=!1,d=$("#tabDownload"),c=!1,h=!1,p=!1,_=!1,g=function(){f=$("#footer");var e=f.offset().top+20,t=$("body").innerHeight()-20;return Math.floor(Math.min(e,t))},m=function(e){return!0!==h&&(p=!0,c===g()?(p=!1,!1):!0===e?(c=g(),p=!1,!1):(!1!==_&&(clearTimeout(_),_=!1),void(_=setTimeout(function(){c=g(),p=!1,v()},1e3))))},b=function(){h=!1,$("#tabComments_btn").off("click",b),$(window).on("scroll",v).on("resize",m),$("#tabComments").insertBefore(d),$("#tabComments_bottom_page").remove()},v=function(){if(!0===p||!0===h)return!1;if(c<Math.ceil($(window).scrollTop()+window.innerHeight)&&"none"===$("#tabComments").css("display")){h=!0,$("#tabComments_btn").on("click",b);$("#tabComments_bottom_page").length>0?($("#tabCommentsBottom").removeClass("hidden").replaceWith($("#tabComments").show()),u()):($(t.render(a,{loader:n.getSafe("after",r.__("video.loading_comments")).getHtml()})).insertBefore(f),setTimeout(function(){$("#tabComments_loader").replaceWith($("#tabComments").fadeIn()),u()},500)),$(window).off("scroll",v).off("resize",m)}};return $(window).on("scroll",v).on("resize",m),setInterval(m,2e3),$("#related-videos .show-more").on("click",function(){setTimeout(m,200),setTimeout(v,250)}),m(!0),v(),u}),define("skins/common/video/download",["config/main","lib/helpers/inline_loader","lib/i18n!front"],function(e,t,i){var n=function(e){this.displayed=!1,this.key_hd_for_premium=e};return n.prototype={check:function(){this.displayed||(this.displayed=!0,this.contener=$("#tabDownload"),this.messages=i.__("video.download.*"),this.check_download())},on_not_logged:function(){console.error("download.on_not_logged not implemented")},on_checked:function(e){if(!e.LOGGED)return void this.on_not_logged();var t=$("<p>").addClass("text-center");if("string"==typeof e.ERROR)t.addClass("text-danger").html(e.ERROR);else if("string"!=typeof e.URL){var i=this;t.addClass("text-danger").html(this.messages.error_occured_retry.replace("%here%",'<a href="#"><strong>'+this.messages.here+"</strong></a>")).find("a").on("click",function(e){i.check_download(e)})}else{var n=[];e.MP4_4K_AVAILABLE&&e.URL_MP4_4K&&n.push('<a href="'+e.URL_MP4_4K+'" target="_blank"><strong class="label label-danger">4K</strong></a>'),e.MP4HD_AVAILABLE&&!e.MP4HD_ERROR&&e.URL_MP4HD&&n.push('<a href="'+e.URL_MP4HD+'" target="_blank"><strong>'+this.messages.high_qual+"</strong></a>"),n.push('<a href="'+e.URL+'" target="_blank"><strong>'+this.messages.medium_qual+"</strong></a>"),e.URL_LOW&&n.push('<a href="'+e.URL_LOW+'" target="_blank"><strong>'+this.messages.low_qual+"</strong></a>");var s=this.messages.dl_high_medium_low.replace("%high_medium_low%",n.join(" / "));e.MP4HD_AVAILABLE&&(e.IS_PREMIUM?!e.MP4HD_ERROR&&e.URL_MP4HD||(s+="<br>"+this.messages.hd_available_soon.replace("%link_start%",'<a href="#" class="retry"><strong>').replace("%link_end%","</strong></a>")):s+="<br>"+this.messages[this.key_hd_for_premium]);var i=this;t.addClass("download-ready").html(s).find("a.retry").on("click",function(e){i.check_download(e)})}this.contener.empty().append(t)},check_download:function(i){void 0!==i&&i.preventDefault(),this.contener.append($("<p>").addClass("text-danger text-center").append(t.getSafe("after",this.messages.checking).getNode()));var n=this;$.post("/video-download/"+e.data.id_video+"/",{},function(e){n.on_checked(e)},"json").fail(function(){n.contener.empty().append($("<p>").addClass("text-danger text-center").html(n.messages.error_occured_retry.replace("%here%",'<a href="#">'+n.messages.here+"</a>"))).find("a").on("click",function(e){n.check_download(e)})})}},n}),define("skins/default/video/download",["skins/common/video/download","lib/i18n!front"],function(e,t){var i=new e("hd_for_red");return i.on_not_logged=function(){var e=this;require(["skins/default/form/login"],function(i){i.setupLinks($('<h4 class="text-center text-danger">'+t.__("video.must_have_account_to_download",{},"You must have an account to download a video.")+' <a class="text-danger">'+t.__("misc.click_here_login_create_account")+"</a></h4>").appendTo(e.contener.empty()).children("a"))})},function(){i.check()}}),define("skins/common/video/vote",["config/main","./vote_manager"],function(e,t){var i=$("#video-views-votes,#video-votes"),n=new t(i.find(".vote-actions a.vote-action-good"),i.find(".vote-actions a.vote-action-bad"),e.dyn.vmdata.vote_good,e.dyn.vmdata.vote_bad,{pop_relative:i.parent(),rating_total:i.find(".rating-bar .total"),rating_pgs_bar:i.find(".rating-bar .pgs-bar div"),rating_box:i.find(".rating-box")});return function(e,t){n.set_success_func(e),n.set_notlogged_func(t)}}),define("text!skins/common/video/playlist.mustache",[],function(){return'<div id="video-playlist">\n\t<div id="playlist-header" class="hidden">\n\t\t<button class="btn btn-default pull-right next" title="{{{ labels.next }}}">&gt;</button>\n\t\t<button class="btn btn-default pull-right toggle" title="{{{ labels.hide }}}">&#9650;</button>\n\t\t<button class="btn btn-default pull-left prev" title="{{{ labels.prev }}}">&lt;</button>\n\t\t<div class="playlist-vote"></div>\n\t\t<h4></h4>\n\t</div>\n\t<div id="playlist-content">\n\t\t<div class="mozaique thumbs-5-cols"></div>\n\t</div>\n</div>'}),define("skins/common/video/playlist",["config/main","mustache","static/utils","lib/tools","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/thumbs_rotator","text!./playlist.mustache","lib/i18n!front","./playlist_random_order","skins/default/features_test/videos_i_like"],function(e,t,i,n,s,o,a,r,l,u,f){var d=n.parseUrl(window.location.href,"query",!0),c=0;if("undefined"!=typeof d.pl||"undefined"!=typeof d.pltype){var h=!1,p="favorite";if("string"==typeof d.pl)if(0===d.pl.search(/^\d+$/)){if((c=parseInt(d.pl))<0)return}else 0===d.pl.search(/^-[\da-z]+$/)&&(c=d.pl,h=!0);if(0===c){if("string"!=typeof d.pltype||"videosilike"!==d.pltype)return;p=d.pltype}else if("string"==typeof d.pltype){if("related"!==d.pltype&&"videosilike"!==d.pltype&&"random"!==d.pltype)return;p=d.pltype}var _,g,m,b,v,D,y,w,C,k,x,F,E,T,S,L=window.location.pathname.split("/"),P=h?L[1].substr(5):parseInt(L[1].substr(5)),I=l.__("playlist.*"),M=!1,A=!1,O=!1,B=0,R=null,j=!1,V=!1,N=!1,q=!1,z=0,H=!1,U=!1,W=!1,X=!1,Y=!0,G=function(e,t){var i;return i="related"===p?"/video"+c+"/related/playlist/"+e:"videosilike"===p?"/video"+e+"/videosilike/playlist/"+e:"random"===p?"/favorite/"+c+"/playlist-random/"+e:"/favorite/"+c+"/playlist/"+e,t&&(i+="/"+t),i},K=function(e){return u.getIds(e)},J=[],Z=function(e,t){var i=K(e),n=[];if(t.ordered_ids)for(var s in t.ordered_ids){var o=t.ordered_ids[s];-1===i.indexOf(o)&&n.push(o),-1===J.indexOf(o)&&J.push(o)}else if(t.videos)for(var s in t.videos){var o=t.videos[s].id;-1===i.indexOf(o)&&n.push(o),-1===J.indexOf(o)&&J.push(o)}n.length>0&&u.addIds(e,n)},Q=function(){var t,i={};return"videosilike"===p?(t=K("videosilike").join(","),i={ids:"",excluded_ids:J.join(","),ordered_ids:t.length>0?t:P},e.dyn.login_info.is_logged&&e.dyn.login_info.profile||f.isTracking()&&(i.ids=f.getIds().join(","))):"random"===p&&(t=K("fav_"+c).join(","),i={ordered_ids:t.length>0?t:P}),i},ee=function(e,t){var i="";t&&(i=' class="text-danger"'),q?q.setContent("<strong"+i+">"+e+"</strong>"):q=new o(D,"<strong"+i+">"+e+"</strong>",{trigger:!1,position:{v:"below",h:"right"},relative_to:$("#video-playlist")}),q.open()},te=function(e,t){var i="";t&&(i=' class="text-danger"'),V?V.setContent("<strong"+i+">"+e+"</strong>"):V=new o(y,"<strong"+i+">"+e+"</strong>",{trigger:!1,position:{v:"below",h:"left"},relative_to:$("#video-playlist")}),V.open()},ie=function(e,t,i){"after"===e?ee(t,i):te(t,i)},ne=function(){q&&q.close(),V&&V.close()},se=function(){var e=m.width();k=C.outerWidth(),x=Math.round(e/k),F=2,x<=2?F=0:x<=4&&(F=1)},oe=function(e,t){if(!S){var n;if("next"===e){if(n=R+x,n+2*x>=z&&fe(),n>z-x){if(!N)return;if((n=z-x)===R)return}}else if("prev"===e){if(n=R-x,n-2*x<=0&&de(),n<0){if(!j)return;if(n=0,0===R)return}}else n=e;"string"==typeof e&&(O=!0),M=n===z-x&&X&&N,D.toggleClass("invisible",M),A=0===n&&X&&j,y.toggleClass("invisible",A),R=n,w.addClass("disabled").css("cursor","wait"),R+x>z-x&&!N&&H&&D.html(s.getImg()).prop("title",i.unescape(I.loading_next)),R-x<0&&!j&&U&&y.html(s.getImg()).prop("title",i.unescape(I.loading_prev));var o=function(){(R+x<=z-x||N||!H)&&(M=R+x===z&&N,D.html("&gt;").toggleClass("disabled",M).css("cursor","").toggleClass("invisible",M)),(R-x>=0||j||!U)&&(A=0===R&&j,y.html("&lt;").toggleClass("disabled",A).css("cursor","").toggleClass("invisible",A)),S=!1,W&&W()};t?(C.css("margin-left","-"+R*k+"px"),o()):(S=!0,C.animate({"margin-left":"-"+R*k+"px"},"false",o))}},ae=function(){return!O&&(oe(Math.max(0,Math.min(B-F,z-x)),!0),!0)},re=function(){b.html('<p class="text-center"><strong><a href="#" class="text-danger">'+I.failed_loading_retry+"</a></strong></p>").find("a").on("click",function(e){return e.preventDefault(),le(),!1})},le=function(){return _=$(t.render(r,{labels:I})),g=_.find("#playlist-header"),m=_.find("#playlist-content"),b=m.children(".mozaique"),v=g.children("button.toggle"),D=g.children("button.next"),y=g.children("button.prev"),w=D.add(y),b.html('<p class="text-center">'+s.getSafe("after",I.loading).getHtml()+"</p>"),$.post(G(P),Q(),function(t){if(t.result){"object"==typeof html5player&&"function"==typeof html5player.setPlaylist&&html5player.setPlaylist(t.title,t.url,t.videos,t.nb_videos,t.position);var s=t.title;"default"===t.title.toLowerCase()&&(s=I.playlist);var o='<span class="icon playlist" '+I.playlist+'></span> <a href="'+t.url+'">'+s+"</a>";t.user&&!t.is_owner&&(o+=" <small>"+l.__("misc.by_user",{"%user%":'<a href="/profiles/'+t.user+'">'+t.username+"</a>"})+"</small>"),o+=' <span class="badge">'+t.nb_videos_str+"</span>",g.removeClass("hidden").children("h4").html(o);var r=$(n.replaceThumbcast(t.html));b.html(r),n.executePendingPrepare(b.find(".thumb-block")),a(r,!0),"videosilike"===p?Z("videosilike",t):"random"===p&&Z("fav_"+c,t);var u="xnxx"===e.sitename?I.playing_video_x.replace("%video_idx%",(t.position+1).toFixed(0)).replace("%nb_videos%",t.nb_videos.toFixed(0)):I.now_playing;return b.children(":eq("+t.posinlist+")").addClass("selected").find(".thumb-inside").append('<div class="thumb-overlay"><p>'+u+"</p></div>"),j=t.start_reached,N=t.end_reached,z=t.videos.length,C=b.children().first(),E=t.videos[0].id,T=t.videos[z-1].id,R=t.posinlist,B=R,se(),ae(),v.on("click",function(){m.stop(!0).slideToggle("fast"),Y=!Y,v.html(Y?"&#9650;":"&#9660").prop("title",i.unescape(Y?I.hide:I.display)),y.toggleClass("invisible",!Y||A),D.toggleClass("invisible",!Y||M)}),D.on("click",function(){ne(),oe("next")}),y.on("click",function(){ne(),oe("prev")}),X=!0,void $(window).resize(function(){z>0&&(S&&(C.stop(!0,!0),S=!1),se(),ae()||oe(R,!0))})}if(t.message)return void b.html('<p class="text-center"><strong>'+t.message+"</strong></p>");re()},"json").fail(re),_},ue=function(e,t,i,n){$.post(G(e,t),Q(),function(e){return e.result?(i(e),void n()):(n(),e.message?void ie(t,e.message,!0):(ie(t,I.failed_loading_vids,!0),void oe(R,!0)))},"json").fail(function(){n(),ie(t,I.failed_loading_vids,!0)})},fe=function(){if(!H&&!N)return H=!0,ue(T,"after",function(e){var t=$(n.replaceThumbcast(e.html));b.append(t),n.executePendingPrepare(b.find(".thumb-block")),a(t,!0),e.end_reached&&(N=!0),z+=e.videos.length,T=e.videos[e.videos.length-1],oe(R,!0)},function(){H=!1})},de=function(){if(!U&&!j)return U=!0,ue(E,"before",function(e){var t=function(){var t=$(n.replaceThumbcast(e.html));b.prepend(t),n.executePendingPrepare(b.find(".thumb-block")),a(t,!0),e.start_reached&&(j=!0),z+=e.videos.length,C.css("margin-left",""),C=b.children().first(),E=e.videos[0],R+=e.videos.length,W=!1,oe(R,!0)};S?W=t:t()},function(){U=!1})};return le}}),define("text!skins/default/video/sponsor_link.html",[],function(){return'<div id="video-sponsor-links">\n\t<a id="show-channel-desc" title="{{{ show_more }}}">...<span>+</span></a>\n\t{{{ more_at }}} <a href="{{{sponsor.u}}}" target="_blank" rel="noopener"><strong>{{{sponsor.n}}}</strong></a>\n\t<span class="channel-desc">- {{{sponsor.d}}}</span>\n</div>\n'}),define("text!skins/default/video/report.html",[],function(){return'<div class="tab-form">\n\t<form id="video-report-form" class="form-horizontal">\n\t\t<div class="row">\n\t\t\t<div class="col-sm-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-xs-2 control-label">{{{ labels.reason }}}</label>\n\t\t\t\t\t<div class="col-xs-10 text-center">\n\t\t\t\t\t\t{{# reasons }}\n\t\t\t\t\t\t<div class="radio-inline"><label><input type="radio" name="reason" value="{{ value }}"{{# checked }} checked{{/ checked }}> {{ label }}</label></div>\n\t\t\t\t\t\t{{/ reasons }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-xs-2 control-label" for="video-report-form-email">{{{ labels.email }}}</label>\n\t\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t\t<input type="email" name="email" id="video-report-form-email" class="form-control" required placeholder="{{{ labels.leave_email }}}" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t\t<textarea class="form-control" name="message" rows="3" required placeholder="{{{ labels.give_details }}}"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<div class="col-xs-12">\n\t\t\t\t<button type="button" class="submit btn btn-default pull-right">{{{ labels.report }}}</button>\n\t\t\t\t<a href="http://info.xvideos.com/content/" target="_blank" class="btn btn-default btn-sm light-label wrap">{{{ labels.content_owners }}}</a>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>'}),define("skins/common/video/auto_tr_title",["config/main","lib/i18n!front","static/utils"],function(e,t,i){var n=!0,s=$("#title-auto-tr-switch").on("click",function(){$("#title-auto-tr").html(n?e.dyn.video_title_ori:e.dyn.video_title),s.prop("title",i.unescape(n?t.__("video.original_title_click_switch_auto_translated",{},"This is the original title. Click to switch to the automatically translated title."):t.__("video.auto_translated_title_click_for_original",{},"This title has been automatically translated. Click to switch to the original title."))),n=!n})}),define("skins/common/video/tracking",["config/main"],function(e){var t=function(){if(this.allow_tracking=!1,this.declare_sent=!1,this.last_view=!1,this.storageAvailable()&&e.dyn.ref&&e.dyn.id){var t=localStorage.getItem("last_view");if(t){var i=JSON.parse(t);i&&i.id&&i.ref&&i.id!=e.dyn.id&&(this.last_view=i,this.allow_tracking=!0)}var n={};n.id=e.dyn.id,n.ref=e.dyn.ref,localStorage.setItem("last_view",JSON.stringify(n))}};return t.prototype={storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},declareLink:function(){if(console.log("Try to declare link"),!this.declare_sent&&this.last_view&&this.allow_tracking){this.declare_sent=!0;var t={};t.gentime=e.dyn.gentime,
t.source_id=this.last_view.id,t.source_ref=this.last_view.ref,t.current_id=e.dyn.id,t.current_ref=e.dyn.ref,$.post("/video-hit",t)}}},new t}),define("skins/common/video/related",["config/main","static/dom","lib/helpers/thumbs_rotator"],function(e,t,i){var n,s=$("#related-videos"),o=s.children(".show-more"),a=!1,r=s.children(".mozaique"),l=r.children(".thumb-block"),u=!1;0===o.length&&(o=s.children(".row").find(".show-more"));var f=function(e){if(!0===e||u){u=!1,n=null;var s=!1,o=!1,r=$();if(!a){var f=t.getViewportWidth();s=f<=480?"after-8":f<=768?"after-9":f<=992?"after-8":"after-10"}l=l.filter(function(){var e=$(this),t=e.find(".thumb a"),i=t.data("src");if(!i)return!1;if(o)return!0;if(s&&e.hasClass(s))return o=!0,!0;var n=t.data("vid");return t.append('<img src="'+i+'" id="pic_'+n+'" style="display:none;" onload="this.style.display=\'\';" />'),r=r.add(e),!1}),r.length>0&&i(r,!0)}},d=function(){"function"==typeof window.display_related_native&&window.display_related_native(),o.off("click"),a=!0,f(!0),s.addClass("expanded")};f(!0);var c=function(){for(var e=$("#tabComments"),t=$("#related-videos"),i=t.find(".thumb-block[id]"),n=i.first().innerHeight(),r=t.innerHeight(),l=e.innerHeight(),u=l-r>=0?Math.round(l/n):Math.round(r/n),d=Math.round(t.width()/i.first().width())*u,c=0;c<d;c++)i.eq(c).show();"function"==typeof window.display_related_native&&window.display_related_native(),d>i.length&&(o.off("click"),a=!0,f(!0),s.addClass("expanded"))};window.xv.videopage||(window.xv.videopage={}),window.xv.videopage.displayRelatedVideos=function(){$("#related-videos").width()===$(".tabs").width()||s.hasClass("expanded")||c()},o.on("click",function(e){e.preventDefault(),d()}),$(window).on("resize",function(){u=!0,n||(n=setTimeout(f,500))}),$(document).ready(function(){f(!0)})}),define("skins/default/video/subscribe",["skins/default/profile/subscribe/btn"],function(e){$(".video-tags-list .user-subscribe").each(function(){new e($(this),$(this).data("user-profile"),$(this).data("user-id"))})}),define("skins/default/video/tags",["static/dom"],function(e){var t=$("#main .video-tags-list.video-metadata.cropped"),i=t.find("li").not(".view-more-li");if(0!==i.length){var n=t.find("li.view-more-li"),s=!1,o=!1,a=function(){if(o="undefined"==typeof xv.header||"function"!=typeof xv.header.is_mobile||!xv.header.is_mobile(),!s||o){n.css("display","inline-block");var e=0,t=0;return i.not(":hidden").each(function(){if(!(t>2||"none"===$(this).css("display"))){var i=$(this).offset().top;if(i>e&&(e=i,t++),t>2)return!1;n.insertAfter($(this)),2===t&&n.offset().top>e&&(n.insertBefore($(this)),t++)}}),t<=2||0===n.next().length?void n.hide():void 0}},r=function(i){if(s="boolean"==typeof i?i:!s,n.find("a").html(s?"-":"+"),s){if(t.addClass("opened"),o)t.find("ul").first().append(n);else if(t.find("li.view-more-li").length<2){var l=$('<li class="view-more-li"><a href="#" class="view-more btn btn-default" title="more tags">-</a></li>');l.css("display","inline-block").on("click",r),t.find("ul").first().append(l)}}else t.removeClass("opened"),o||e.isElementInView(t)||e.scrollToTop(t.offset().top-6),a()};$(window).on("resize",a),n.on("click",r),a()}}),define("text!skins/default/video/premium_on_free.mustache",[],function(){return'<div id="video-premium-alert">\n\t<p>{{{ text_above }}}</p>\n\t<div class="video-premium-alert-row">\n\t\t<div class="video">\n\t\t\t<img src="{{{ video_thumb_src }}}" alt="" class="wall-autoplay"/>\n\t\t\t{{#cover}}\n\t\t\t\t<svg class="cover-thumb" height="100%" width="100%">\n\t\t\t\t\t<image xlink:href="{{{ static_dom }}}/v3/img/skins/default/ticket-red.svg"\n\t\t\t\t\t       src="{{{ static_dom }}}/v3/img/skins/default/ticket-red.png"\n\t\t\t\t\t       title="RED"\n\t\t\t\t\t       height="100%" width="100%"\n\t\t\t\t\t       class="no-blur"/>\n\t\t\t\t</svg>\n\t\t\t{{/cover}}\n\t\t\t<span class="premium-log-overlay"><span class="icon-f icf-play"></span></span>\n\t\t</div>\n\t\t<p>{{{ text_side }}}</p>\n\t</div>\n\t<p>{{{ text_under }}}</p>\n</div>'}),define("skins/common/form/cross_site_login",["config/main","static/cookies","skins/common/video/lastviews","skins/common/profile/last_channels_visited"],function(e,t,i,n){e.dyn.is_premium&&!e.dyn.login_info.is_logged&&$.ajax({type:"POST",url:e.domains.slave+"/cross_site_cookies",dataType:"json",data:{l:t.get(e.dyn.dev?"session_token_dev":"session_token")},xhrFields:{withCredentials:!0},success:function(e){if(e.result){"string"==typeof e.last_views&&e.last_views.length>0&&i.mergeVideoViews(e.last_views);var s=e.session_token||e.session_token_dev;"string"==typeof s&&s.length>10&&(t.setLocal(e.session_token?"session_token":"session_token_dev",s,2592e6,"/",!0,"None"),$.post("/account/checklogin",function(e){if(e.result&&e.is_logged){if("straight"!==e.main_cat&&"/"===window.location.pathname&&(!window.location.search||-1===window.location.search.indexOf("k=")))return void(window.location.href="/"+e.main_cat+window.location.search);window.location.reload()}},"json")),"string"==typeof e.freechvws&&e.freechvws.length>0&&n.setFullCookie(e.freechvws)}}})}),define("skins/default/video/premium_on_free",["config/main","lib/i18n!front","mustache","lib/helpers/overlay/box","lib/helpers/thumbs_rotator","lib/helpers/thumbs/wall","skins/default/form/login","text!./premium_on_free.mustache"],function(e,t,i,n,s,o,a,r){if(0!==$(".premium-log-overlay").length){require(["skins/common/form/cross_site_login"]),a.setOpenCloseModes("signup",!1,!1,null,!0);var l=!1,u=function(){if(!0!==l){l=!0;var u=n.get($("body"),!1,null,!0),f=$(i.render(r,{video_thumb_src:e.dyn.video_thumb,text_above:t.__("player.premium_alert_hold_on",{"%strong%":"<strong><span class='icon-f icf-warning'></span> ","%end_strong%":" <span class='icon-f icf-warning'></span></strong>"}),text_side:t.__("player.premium_alert",{"%site%":"<span class='icon-f icf-ticket-red icf-white-fill' title='RED'></span> "}),text_under:t.__("player.premium_alert_create_account",{"%link%":"<span class='link'>","%end_link%":"</span>","%site%":"<span class='icon-f icf-ticket-red icf-white-fill' title='RED'></span>"}),static_dom:e.domains["static"],cover:2===e.dyn.preview_mode}));u.setOverlayClosable(!0),u.setEscapeClosable(!1),u.addClass("auto-width-popup"),u.setContent(f),u.onShow=function(){0===e.dyn.preview_mode&&s.video_preview&&new o(u.node.find(".video")),u.node.find(".x-body").on("click",function(e){e.preventDefault(),u.close()})},u.onClose=function(){a.open()},u.show("auto")}};$("a, span, button, input, textarea, select, .btn").each(function(){var e=$(this);e.closest("#disclaimer_message").length||e.prop("disabled",!0).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),u()})});var f=$("#html5video .video-loader");if(f.length>0){f.find(".buffer").animate({height:"100%"},2e3);var d=f.find(".label"),c=0;setInterval(function(){c+=5,c>100&&(c=100),d.text(c+"%")},97),setTimeout(u,2e3)}else u()}}),define("skins/common/video/report",["config/main","mustache","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front"],function(e,t,i,n,s){var o=function(o){this.messages=s.__("report_form.*");var a=[{value:"nevermind",label:this.messages.nevermind,checked:!0},{value:"child_pornography",label:this.messages.child_pornography,checked:!1},{value:"underage",label:this.messages.underage,checked:!1},{value:"spam",label:this.messages.spam,checked:!1},{value:"notporn",label:this.messages.not_porn,checked:!1},{value:"other",label:this.messages.other,checked:!1}];this.node=$(t.render(o,{reasons:a,labels:this.messages}));var r,l=this,u=this.node.children("form"),f=function(e){if(e.validation_error)n.get(l.getNode(),!0).setContent('<strong class="text-danger">'+e.message+"</strong>").show();else{var t=e.result?"text-success":"text-danger";l.getNode().replaceWith('<p class="text-center"><strong class="'+t+'">'+e.message+"</strong></p>")}},d=function(){r||(r=n.get(l.getNode(),!1,"hide").setContent(i.get("after",l.messages.sending).getHtml())),r.show();var t=u.serializeArray();for(var s in t)if("reason"===t[s].name){if("nevermind"===t[s].value)return void f({result:!0,message:l.messages.thanks});break}$.post("/video-report/"+e.data.id_video+"/0",t,f,"json").fail(function(){n.get(l.getNode(),!0).setContent('<strong class="text-danger">'+l.messages.sending_failed+"</strong>").show()}).always(function(){r.hide()})};this.node.find("button").on("click",d)};return o.prototype={getNode:function(){return this.node}},o}),define("skins/default/video",["config/main","./header/header"],function(e){null!==e.data.id_video&&require(["mustache","static/utils","lib/tab","lib/tools","skins/default/video/comments","skins/default/video/download","skins/common/video/vote","skins/common/video/playlist","skins/default/video/playlists/manager","skins/common/video/copy_link","skins/common/video/share","skins/default/features_test/videos_i_like","text!skins/default/video/sponsor_link.html","text!skins/default/video/report.html","lib/i18n!front","skins/common/history/page_view_history","skins/common/video/lastviews","skins/default/video/watch_later","skins/common/xcams/current_live_cams","skins/common/video/auto_tr_title","skins/common/video/tracking","skins/common/video/related","skins/default/video/subscribe","lib/helpers/thumbs_rotator","skins/default/video/tags"],function(t,i,n,s,o,a,r,l,u,f,d,c,h,p,_,g,m,b,v){if(e.data.sponsors&&e.data.sponsors.length>0&&!e.data.hide_sponsors){var D=Math.random()*e.data.sponsors.length,y=e.data.sponsors[Math.floor(D)];$(t.render(h,{more_at:_.__("video.sponsors.more_at"),sponsor:y,show_more:_.__("misc.show_more"),show_less:_.__("misc.show_less")})).insertAfter($("#video-tabs").first());var w=function(){var e=$("#video-sponsor-links");if(e.hasClass("expanded"))return!1;var t=e.children(".channel-desc").first();t.offset().top+t.outerHeight()>e.offset().top+e.outerHeight()?e.addClass("too-small"):e.removeClass("too-small")};$("#show-channel-desc, #video-sponsor-links .channel-desc").on("click",function(e){e.preventDefault(),$(this).parent().addClass("expanded")}),$(window).on("resize",w),w()}e.dyn.login_info&&e.dyn.login_info.is_premium&&e.dyn.login_info.is_logged||require(["skins/default/video/premium_on_free"],function(){});var C=$("#show-all-tags"),k=C.next().children("a:last-child");k.length>0&&k.position().left+k.outerWidth(!0)>=C.position().left-10?C.on("click",function(e){e.preventDefault(),$(this).parent().addClass("expanded")}):C.remove(),r(function(t){return t&&(e.dyn.login_info.is_logged||c.isTracking())?_.__("video.votes.thanks_link",{"%start_link%":'<a href="/videos-i-like">',"%end_link%":"</a>"}):_.__("video.votes.thanks")},function(t){t?c.voteGood(e.data.id_video):c.voteBad(e.data.id_video)}),"function"==typeof l&&l().insertAfter("#video-actions");var x={};x.tabComments=o,x.tabDownload=a;var F=!1,E=function(){if(!F){F=!0;var e=$("#tabShareAndEmbed");e.length>0&&(e.append(d.getShareElem(window.location.href,document.title)),new f,window.addthis_config=window.addthis_config||{},window.addthis_config.pubid="xa-501f7bd44d12cd79",i.loadScript("//s7.addthis.com/js/250/addthis_widget.js#async=1",{async:"async"},{load:function(){window.addthis.init()}}))}};$("#tabShareAndEmbed").length>0?x.tabShareAndEmbed=E:x.tabShare=E;var T=!1;x.tabReport=function(){require(["skins/common/video/report"],function(e){T||(T=!0,$("#tabReport").append(new e(p).getNode()))})};var S=new n("#video-tabs",x,!0,"no_tab_hash");$("#video-tabs .tab-buttons .add-fav").on("click",function(){u.loadAddToList(e.data.id_video)}),m.declareVideoView(e.data.id_video),b.init_btn($("#watch-later-video"),e.data.id_video),g.addId("video",e.data.id_video),window.xvideos.player.openDownload=function(){S.open("tabDownload"),$("html, body").animate({scrollTop:Math.round($(".tab-buttons").offset().top)-12},250)},!e.dyn.is_premium&&e.dyn.slcams&&window.xv.sda.adblocked.called&&(v.getCurrentLiveCamsInfos("ntv"),"undefined"!=typeof e.data.livecamscat&&0===$(".xv-cams-block.footer").length&&v.getCurrentLiveCamsInfos("foot"))})}),define("skins/default/form/region_select",["lib/helpers/inline_loader"],function(e){var t={},i=function(e){var t=[];for(var i in e)t.push({code:i,name:e[i]});return t.sort(function(e,t){return e.name>t.name?1:-1}),t},n=function(e,t){var i=$(e);if(this.region=$(t),0!==i.length&&0!==this.region.length){this.loader=null,this.error=null;var n=this;i.on("change",function(){n.on_change($.trim($(this).val()))}),i.val().length>0&&this.region.children().length<2&&i.trigger("change")}};return n.prototype={on_change:function(e){if(this.region.empty().append('<option value=""></option>'),!e)return void this.set_regions({});if("undefined"!=typeof t[e])return void this.set_regions(t[e]);this.show_loader();var n=this;$.getJSON("/account/getregions/",{country:e},function(s){if(!s.result)return void n.set_error(s.message);var o=i(s.regions);t[e]=o,n.set_regions(o)}).error(function(){n.set_error("An error occured!")}).complete(function(){n.hide_loader()})},show_loader:function(){if(!this.loader)return void(this.loader=e.get().getNode().appendTo(this.region.parent().prev()));this.loader.show()},hide_loader:function(){this.loader.hide()},set_regions:function(e){this.region.nextAll(".help-block.text-danger").remove();for(var t in e)this.region.append('<option value="'+e[t].code+'">'+e[t].name+"</option>");this.region.prop("disabled",0===e.length)},set_error:function(e){this.region.prop("disabled",!0),this.error||(this.error=$('<span class="help-block text-danger"></span>').insertAfter(this.region)),this.error.show().html(e)},hide_error:function(){this.error&&this.error.hide()}},n}),define("skins/default/form/range_select",[],function(){var e=function(e){if(this.min=$("#"+e+"_min"),this.max=$("#"+e+"_max"),0!==this.min.length&&0!==this.max.length){this.error=null;var t=this;this.min.on("change",function(){t.on_change()}),this.max.on("change",function(){t.on_change()}),this.min.trigger("change")}};return e.prototype={on_change:function(){this.hide_error();var e=parseInt(this.min.val()),t=parseInt(this.max.val());0!==e&&0!==t&&(e<=t||this.set_error("Right side must be greater than left side"))},set_error:function(e){this.error||(this.error=$('<span class="help-block text-danger"></span>').insertAfter(this.max)),this.error.show().html(e)},hide_error:function(){this.error&&this.error.hide()}},e}),define("skins/default/profile/listing_common",["config/main","lib/helpers/popup","skins/default/header/header","lib/helpers/thumbs_rotator"],function(e,t){$(".btn-profiles-date-links").each(function(){var e=$(this),i=e.nextAll(".profiles-date-links");new t(e,i,{popup_class:"x-profiles-date-links-popup",autoclose_on_same_level:"profile_listing_dropdowns"}).onOpen=function(){i.removeClass("hidden")}}),document.getElementById("profile-search-form")&&require(["skins/default/form/region_select","skins/default/form/range_select"],function(e,t){new e("#country_select","#region_select"),new t("age_range-select"),$("#profile-search-filters-summary").find(".btn,.value").on("click",function(){$("#profile-search-form").toggleClass("expanded contracted")})}),"object"==typeof e.dyn.subs_users&&require(["skins/default/profile/subscribe/btns_controler"],function(t){var i=[];for(var n in e.dyn.subs_users)e.dyn.subs_users.hasOwnProperty(n)&&i.push({user_id:e.dyn.subs_users[n].id,user_name:n,nb_subs:e.dyn.subs_users[n].subs_s});i.length>0&&new t(i)})}),define("skins/default/xvideos_channels",["./profile/listing_common"],function(){}),define("skins/default/xvideos_channels_premium",["./profile/listing_common"],function(){}),define("skins/default/xvideos_models",["./profile/listing_common"],function(){}),define("skins/default/xvideos_profiles",["./profile/listing_common"],function(){function e(){$(".thumb-block-profile").each(function(){var e=$(this),t=e.find(".profile-aboutme"),i=t.find("p"),n=t.height(),s=i.height();i.length&&(s<n/2?t.addClass("is-oneline"):n<s&&t.addClass("is-close"))})}function t(){new Date-i<s?setTimeout(t,s):(n=!1,o=$("body").width(),e())}var i,n=!1,s=500,o=$("body").width();e(),$(".thumb-block-profile").find(".show-more").on("click",function(e){var t=$(e.currentTarget),i=t.parents(".profile-aboutme"),n=i.find(".profile-aboutme-content"),s=$(".profile-aboutme.is-open");i.hasClass("is-close")?(s.length&&s.each(function(){$(this).addClass("is-close").removeClass("is-open").find("p").scrollTop(0),$(this).find(".show-more").html("+")}),i.addClass("is-open").removeClass("is-close"),n.css({maxHeight:i.parents(".thumb-block-profile").height()}),t.html("-")):(i.addClass("is-close").removeClass("is-open").find("p").scrollTop(0),t.html("+"))}),$(window).resize(function(){i=new Date,!1===n&&Math.abs(o-$("body").width())>50&&(n=!0,setTimeout(t,s),$(".thumb-block-profile").find(".profile-aboutme").removeClass("is-oneline is-close is-open"))})}),define("skins/default/form/unit_select",["lib/converter"],function(e){var t=function(e,t){this.options=$(e).children(),this.val_unit=t};return t.prototype={convert:function(t,i){var n=this;this.options.each(function(){var s=$(this),o=parseFloat(s.val());0!==o&&(t!==n.val_unit&&(o=e.convert(o,n.val_unit,t,0,i)),s.text(o+" "+t))})}},t}),define("skins/default/xvideos_profiles_search",["config/main","./profile/listing_common"],function(e){$("#profile-search-advanced").on("click",function(e){e.preventDefault(),$("#profile-search-form").removeClass("display-compact display-create-account display-create-profile").addClass("display-advanced"),$(this).hide()});var t=$("#switch-search-body-unit");t.length>0&&require(["skins/default/form/unit_select"],function(i){var n=e.data.body_unit,s=new i("#height_range-select_min,#height_range-select_max","cm"),o=new i("#weight_range-select_min,#weight_range-select_max","kg");t.on("click",function(i){i.preventDefault();var a="EU"===n?"US":"EU";t.html(e.data.body_unit_switch[a]),$("#search-body-unit").val(a),s.convert("US"===a?"in":"cm",1),o.convert("US"===a?"lbs":"kg",0),n=a})})}),define("text!skins/form/show_pass/input_contener.mustache",[],function(){return'<div class="form-control visible-password">\n\t<button class="btn btn-clear" type="button">\n\t\t<span class="icon-f icf-eye" title="{{see_password}}"></span>\n\t\t<span class="icon-f icf-eye-blocked" title="{{hide_password}}"></span>\n\t</button>\n</div>'}),define("skins/form/show_pass",["mustache","lib/i18n!front","text!skins/form/show_pass/input_contener.mustache"],function(e,t,i){var n=function(n){this.inp=$(n),this.cont=$(e.render(i,{see_password:t.__("form.see_password"),hide_password:t.__("form.hide_password")})),this.cont.insertAfter(this.inp),this.cont.append(this.inp);var s=this;this.toggle_btn=this.cont.children("button"),this.toggle_btn.on("click",function(e){e.preventDefault(),s.toggle_visible()})};n.prototype={inp:!1,cont:!1,visible:!1,toggle_btn:!1,is_visible:function(){return"password"!==this.inp.prop("type")},update_visible:function(){this.inp.prop("type",this.visible?"text":"password"),this.cont.toggleClass("visible",this.visible)},toggle_visible:function(e){this.visible="boolean"==typeof e?e:!this.is_visible(),this.update_visible();var t=this.inp.val();this.inp.focus().val("").val(t)}};var s=function(){};return s.prototype={passwords:[],"new":function(e){this.is_initiated(e)||"password"!==$(e).prop("type")||this.passwords.push(new n(e))},is_initiated:function(e){for(var t in this.passwords)if(this.passwords[t].inp[0]==$(e)[0])return!0;return!1}},new s}),define("skins/form/validator/base",["static/utils"],function(e){var t={},i=function(e,t){"object"==typeof t&&(this.parent=e,this.options=t.options,this.messages=t.messages)};return i.prototype={errorChanged:null,refresh:null,isValid:null,focus:null,getRegexp:function(e){if(t[e])return t[e];if("/"!==e.substr(0,1))return t[e]=new RegExp(e,"g"),t[e];var i=e.lastIndexOf("/");if(i<=0)return t[e]=new RegExp(e,"g"),t[e];var n=e.substr(i+1).toLowerCase().replace(/[^gimuy]/g,"");return 0===n.length&&(n="g"),t[e]=new RegExp(e.substring(1,i),n),t[e]},getMessage:function(t,i,n){var s=i;if(this.messages[t]&&(s=e.unescape(this.messages[t])),n)for(var o in n)n.hasOwnProperty(o)&&(s=s.replace(o,n[o]));return s},strimwidth:function(t,i){return"string"!=typeof t&&(t=t.toString()),t.length+3>i?e.escape(t.substr(0,i-3))+"...":e.escape(t)}},i}),define("skins/form/validator/focus",["lib/tools","static/dom"],function(e,t){return validator_focus=function(){this.list={}},validator_focus.prototype={focus:function(i,n){if(i=t.element(i)){void 0===n&&(n=this.getId(i)),this.list[n]||(this.list[n]={timeout:!1,elem:i});var s=this.list[n];t.isElementInView(s.elem,!0)||e.scrollTo(s.elem,100,0),s.elem.focus&&s.elem.focus(),s.timeout&&clearTimeout(s.timeout),$(s.elem).removeClass("hl-focus"),setTimeout(function(){$(s.elem).addClass("hl-focus")},10),s.timeout=setTimeout(function(){$(s.elem).removeClass("hl-focus")},2e3)}},getId:function(e){if(e.id)return e.id;var t=e.tagName.toLowerCase();return e.getAttribute("name")&&(t+=e.getAttribute("name")),t}},new validator_focus}),define("skins/form/validator/agreement",["lib/tools","static/dom","lib/converter","./base","./focus","lib/helpers/popup"],function(e,t,i,n,s,o){var a=[],r="rtl"===$("html").prop("dir"),l=function(e,t){n.apply(this,[e,t]),this.id=t.elt_id,this.checkbox=$("#"+this.id),this.checkbox_err,this.popup,this.popup_timer;var i=this;this.checkbox.on("change click",function(){i.validate()}),this.validate()};l.prototype=new n,l.prototype.refresh=function(){this.positionError()},l.prototype.focus=function(){s.focus(this.checkbox),this.showError()},l.prototype.isValid=function(){return this.checkbox.is(":checked")},l.prototype.validate=function(){if(!this.isValid())return this.showError(),void(this.errorChanged&&this.errorChanged(!0,this));this.hideTooltip(),this.errorChanged&&this.errorChanged(!1,this)},l.prototype.getError=function(){return this.error_txt=!this.isValid()&&this.getMessage("invalid","Required"),this.error_txt},l.prototype.showTooltip=function(e){this.popup?e&&this.popup.setContent(e):this.popup=new o(this.checkbox_err,e,{relative_to:this.checkbox.parent(),trigger:!1,autoclose:!1,popup_class:"form-popup-error",position:{v:"below",h:r?"right":"left"},offset:{below:0,above:0,left:r?0:-3,right:r?-3:0},max_width:500}),this.popup.open(),this.startTimer(!0)},l.prototype.showError=function(){this.checkbox_err?this.checkbox_err.show():(this.checkbox.parent().css("position","relative"),this.checkbox_err=$('<div class="checkbox-error-box"></div>').insertAfter(this.checkbox),a.push(this)),this.checkbox.addClass("validator-error"),this.positionError(),this.error_txt=this.getMessage("invalid","Required"),this.showTooltip("<span>"+this.error_txt+"</span>")},l.prototype.hideTooltip=function(){this.checkbox.removeClass("validator-error"),this.checkbox_err&&this.checkbox_err.hide(),this.popup&&this.popup.close()},l.prototype.positionError=function(){if(this.checkbox_err){var e=this.checkbox.position();this.checkbox_err.css({width:this.checkbox.outerWidth(),height:this.checkbox.outerHeight(),top:e.top+i.trimPx(this.checkbox.css("marginTop"))+"px",left:e.left+i.trimPx(this.checkbox.css("marginLeft"))+"px"})}},l.prototype.startTimer=function(e){if(this.popup_timer){if(!e)return;window.clearTimeout(this.popup_timer)}var t=this;this.popup_timer=window.setTimeout(function(){t.popup.close()},3e3)},l.prototype.stopTimer=function(){this.popup_timer&&(window.clearTimeout(this.popup_timer),this.popup_timer=null)};var u,f=function(){u&&(u=null);for(var e in a)a[e].positionError()};return $(window).on("resize",function(){u||(u=window.setTimeout(f,250))}),l}),define("skins/form/validator/body_measurement",["lib/tools","static/dom","lib/converter","./base"],function(e,t,i,n){var s=function(e,t){n.apply(this,[e,t]);var s=e.getRoot(),o=$("#"+s.form.prop("id")+"_"+t.options.body_unit_field.replace(/\|/g,"_")),a=null,r=null,l=null,u=null;if(0!==o.length){t.options.weight_field&&(a=$("#"+s.form.prop("id")+"_"+t.options.weight_field.replace(/\|/g,"_")),0===a.length?a=null:(r=a.prev(".input-group-addon"),0===r.length&&(r=null))),t.options.height_field&&(l=$("#"+s.form.prop("id")+"_"+t.options.height_field.replace(/\|/g,"_")),0===l.length?l=null:(u=l.prev(".input-group-addon"),0===u.length&&(u=null)));var f=o.val(),d=function(){var e=o.val();if(l){var t="US"===e?"cm":"in",n="US"===e?"in":"cm";if(u&&u.text(n),f!==e){var s=parseFloat(l.val());!isNaN(s)&&s>0&&l.val(i.convert(s,t,n,"US"===e?1:0))}}if(a){var d="US"===e?"kg":"lbs",c="US"===e?"lbs":"kg";if(r&&r.text(c),f!==e){var h=parseFloat(a.val());!isNaN(h)&&h>0&&a.val(i.convert(h,d,c,0))}}f=e};d(),o.on("change",d)}};return s.prototype=new n,s.prototype.isValid=function(){return!0},s}),define("skins/form/validator/choice",["lib/tools","static/dom","lib/converter","./base","./focus","lib/helpers/popup"],function(e,t,i,n,s,o){var a="rtl"===$("html").prop("dir"),r=function(e,t){n.apply(this,[e,t]),this.id=t.elt_id,this.is_select=!1;var i=$("select#"+t.elt_id),s=this;if(i.length>0)this.is_select=!0,this.select=i,this.focus_elt=i,this.select.on("change",function(){s.validate()}),this.select.data("validator",this);else{var o=[];for(var a in t.options.choices)o.push("#"+t.elt_id+"_"+t.options.choices[a]);this.choices=$(o.join(",")),this.focus_elt=this.choices.last(),this.choices.on("change click",function(){s.validate()}),this.choices.data("validator",this)}this.input_agent=this.getInputAgent(),this.popup=null,this.has_error=!1,this.error_txt=!1,this.options.no_init_validate||this.validate()};return r.prototype=new n,r.prototype.focus=function(){s.focus(this.input_agent,this.id),this.showError()},r.prototype.getValue=function(){return this.is_select?this.select.val():this.options.is_multiple?this.choices.filter(":checked").map(function(){return $(this).val()}).toArray():this.choices.filter(":checked").val()},r.prototype.isValid=function(){return!this.options.required||!e.isEmpty(this.getValue())},r.prototype.doValidate=function(){return!!this.isValid()||(this.setError(this.getMessage("invalid","Required")),!1)},r.prototype.validate=function(){return!!this.doValidate(this.getValue())&&(this.setSuccess(),!0)},r.prototype.showTooltip=function(e){if(this.popup)e&&this.popup.setContent(e);else{var t=this.focus_elt,n=this.focus_elt.parents(".btn-group,.checkbox-list"),s={below:0,above:0,left:0,right:0};if(n.length>0){t=n;var r=this.focus_elt.parents(".btn");r.length>0&&(s.below=-1*i.trimPx(r.css("marginBottom")),a?s.right=i.trimPx(r.css("marginRight"))+i.trimPx(n.css("paddingRight"))+i.trimPx(n.css("marginRight")):s.left=i.trimPx(r.css("marginLeft"))+i.trimPx(n.css("paddingLeft"))+i.trimPx(n.css("marginLeft")))}var l=t.parent().css("position","relative");this.popup=new o(t,e,{relative_to:l,trigger:!1,autoclose:!1,popup_class:"form-popup-error",position:{v:"below",h:a?"right":"left"},offset:s,max_width:500})}this.popup.open()},r.prototype.setSuccess=function(){this.has_error=!1,this.error_txt=!1,this.input_agent.removeClass("validator-error"),this.errorChanged&&this.errorChanged(!1,this),this.popup&&this.popup.close()},r.prototype.setError=function(e){this.has_error=!0,this.error_txt=e,this.input_agent.addClass("validator-error"),this.errorChanged&&this.errorChanged(!0,this),this.showTooltip($("<span>"+e+"</span>"))},r.prototype.getInputAgent=function(){return this.focus_elt.parents(".form-group")},r.prototype.showError=function(){if(!this.has_error)return!1;this.showTooltip()},r.prototype.hideTooltip=function(){this.popup&&this.popup.close()},r.prototype.getError=function(){return this.error_txt},r.prototype.getLabel=function(){if(this.focus_elt){if(this.is_select){var e=!1;if(this.select.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return e=$(this).text().trim(),!1}),e)return e}var t=this.focus_elt,i=$(),n=0;do{n++,t=t.parents("fieldset"),i=t.find("legend").first()}while(t.length>0&&0===i.length);if(i.length>0&&i.text()){var s=!1,o=!0;if(t.find("input, textarea, select").each(function(){s?s!==$(this).prop("name")&&(o=!1):s=$(this).prop("name")}),o&&(e=function(e){return e=e.trim(),e.lastIndexOf(":")+1===e.length&&(e=e.substr(0,e.length-1)),e}(i.text()),e.length>0))return e}}return!1},r}),define("skins/form/validator/choice_schema",["static/utils","./base"],function(e,t){var i=function(i,n){t.apply(this,[i,n]);var s=i.getRoot();if(this.constrained=$("#"+s.form.prop("id")+"_"+n.options.constrained_field.replace(/\|/g,"_")),this.validator=this.constrained.data("validator"),this.validator){this.checked=$("#"+s.form.prop("id")+"_"+n.options.checked_field.replace(/\|/g,"_"));var o=this,a=this.validator.doValidate;this.validator.doValidate=function(t){if(!a.apply(this,[t]))return!1;var i=$.trim(o.checked.val());if(0===i.length)return!0;if(o.options.constrains.hasOwnProperty(i)&&"object"==typeof o.options.constrains[i]){var n=o.options.constrains[i];for(var s in n)if(n.hasOwnProperty(s)&&n[s]===t)return!0}else if(o.options.allow_by_default)return!0;return this.setError(o.getMessage("invalid",'Invalid with this value of "%checked_label%"',{"%checked%":'"'+e.escape(i)+'"',"%checked_label%":o.options.checked_field_label,"%constrained%":'"'+e.escape(t)+'"'})),!1},this.checked.on("change",function(){o.validator.validate()}),this.validator.validate()}};return i.prototype=new t,i.prototype.isValid=function(){return!0},i.prototype.focus=function(){this.validator.focus&&this.validator.focus()},i}),define("skins/form/validator/compare",["static/utils","./base"],function(e,t){var i=function(i,n){t.apply(this,[i,n]);var s=i.getRoot();if(this.linput=$("#"+s.form.prop("id")+"_"+n.options.left_field.replace(/\|/g,"_")),this.validator=this.linput.data("validator"),this.validator){this.rinput=$("#"+s.form.prop("id")+"_"+n.options.right_field.replace(/\|/g,"_")),this.validation_timer=null,"%!="===n.options.operator&&(this.validator.setupXhr("compare_pc_diff","/account/checkdiff",["val1","val2"],2),this.validator.setXhrOtherParam("compare_pc_diff","pc_min_diff",n.options.pc_min_diff),this.validator.setXhrOtherParam("compare_pc_diff","message",n.messages.pc_diff));var o=this,a=this.validator.doValidate;this.validator.doValidate=function(t){var i=null;return"%!="===o.options.operator&&(i=$.trim(o.rinput.val()),o.validator.setXhrOtherValues("compare_pc_diff",[i])),!!a.apply(this,[t])&&(null===i&&(i=$.trim(o.rinput.val())),i.length<2||("=="===o.options.operator&&t!==i?(this.setError(o.getMessage("equal","%left_field% and %right_field% must match",{"%left_field%":'"'+e.escape(n.options.left_field.replace(/\|/g," "))+'"',"%right_field%":'"'+e.escape(n.options.right_field.replace(/\|/g," "))+'"'})),!1):!("!="===o.options.operator||"~!="===o.options.operator&&t)||t!==i||(this.setError(o.getMessage("not_equal","%left_field% and %right_field% be different",{"%left_field%":'"'+e.escape(n.options.left_field.replace(/\|/g," "))+'"',"%right_field%":'"'+e.escape(n.options.right_field.replace(/\|/g," "))+'"'})),!1)))},this.rinput.on("focus",function(){o.validator.focused=!0,o.validator.showError()}),this.rinput.on("blur",function(){o.validation_timer&&(window.clearTimeout(o.validation_timer),o.validation_timer=null),o.validator.validate(),o.validator.focused=!1,o.validator.startTimer(!0)}),this.rinput.on("keyup",function(){o.validator.hideTooltip(!0),o.validation_timer&&window.clearTimeout(o.validation_timer),o.validation_timer=window.setTimeout(function(){o.validator.validate()},1e3)}),this.validator.validate()}};return i.prototype=new t,i.prototype.isValid=function(){return!0},i.prototype.focus=function(){this.validator.focus&&this.validator.focus()},i}),define("skins/form/validator/conditional_require",["lib/tools","./base"],function(e,t){var i=function(e,t,i){var n="#"+e.form.prop("id")+"_"+i.replace(/\|/g,"_"),s=$(n);if(0===s.length&&("left="===t.options.operator||"left!="===t.options.operator))if("object"==typeof t.options.left_field_val){for(var o in t.options.left_field_val)if(s=$(n+"_"+t.options.left_field_val[o]),0===s.length)return s}else if(s=$(n+"_"+t.options.left_field_val),0===s.length)return s;return s},n=function(e,t){
return"object"==typeof t?-1!==t.indexOf(e):e===t},s=function(t,i,s){var o=t.doValidate;t.doValidate=function(t){if(!(i.stop_validation_loop>0&&0===--i.stop_validation_loop)){if(!o.apply(this,[t]))return!1;switch(0===i.stop_validation_loop&&(i.stop_validation_loop=2),s?(i.last_lval=t,i.rvalidator.validate()):(i.last_rval=t,i.lvalidator.validate()),i.options.operator){case"left!=0":if(!s&&!e.isEmpty(i.last_lval)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_not_empty","%right_field% is required when %left_field% is provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"left=":if(!s&&n(i.last_lval,i.options.left_field_val)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_is","%right_field% is required when %left_field% has this value.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"left!=":if(!s&&!n(i.last_lval,i.options.left_field_val)&&e.isEmpty(i.last_rval))return this.setError(i.getMessage("left_is_not","%right_field% is required when %left_field% has this value.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"=1":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)!=1)return this.setError(i.getMessage("one_of_them","One (and only one) of %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case">=0":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)==0)return this.setError(i.getMessage("at_least_one","At least one of the fields %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1;break;case"<=1":if((e.isEmpty(i.last_lval)?0:1)+(e.isEmpty(i.last_rval)?0:1)==2)return this.setError(i.getMessage("at_most_one","At most one of the fields %left_field% or %right_field% must be provided.",{"%left_field%":i.options.left_field_label,"%right_field%":i.options.right_field_label})),!1}return!0}}},o=function(e,n){t.apply(this,[e,n]);var o=e.getRoot();if(this.linput=i(o,n,n.options.left_field),0===this.linput.length)return void console.error("conditional_require validator is not able to locate left field");if(this.lvalidator=this.linput.data("validator"),!this.lvalidator)return void console.error("Using conditional_require validator currently requires that the left field has a validator");if("function"!=typeof this.lvalidator.doValidate)return void console.error("Using conditional_require validator currently requires that the left field validator to have a doValidate");var a="#"+o.form.prop("id")+"_"+n.options.right_field.replace(/\|/g,"_");return null!==n.options.right_field_values&&"object"==typeof n.options.right_field_values&&(a+="_"+n.options.right_field_values[0],console.info(a)),this.rinput=$(a),0===this.rinput.length?void console.error("conditional_require validator is not able to locate right field"):(this.rvalidator=this.rinput.data("validator"),this.rvalidator?"function"!=typeof this.rvalidator.doValidate?void console.error("Using conditional_require validator currently requires that the left field validator to have a doValidate"):(this.stop_validation_loop=0,this.last_lval=null,this.last_rval=null,s(this.lvalidator,this,!0),s(this.rvalidator,this,!1),void this.lvalidator.validate()):void console.error("Using conditional_require validator currently requires that the right field has a validator"))};return o.prototype=new t,o.prototype.isValid=function(){return!0},o.prototype.focus=function(){},o}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("skins/min/default.creditcards.bwfy",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).creditcards=e()}(function(){return function e(t,i,n){function s(a,r){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[a]={exports:{}};t[a][0].call(f.exports,function(e){return s(t[a][1][e]||e)},f,f.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){"use strict";t.exports=function(e,t,i){if("function"==typeof Array.prototype.find)return e.find(t,i);i=i||this;var n,s=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(n=0;n<s;n++)if(t.call(i,e[n],n,e))return e[n]}},{}],2:[function(e,t,i){"use strict";t.exports=e("./types")},{"./types":10}],3:[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);s(this,e)}var s=e("xtend/mutable");(t.exports=n).prototype.digits=16,n.prototype.cvcLength=3,n.prototype.luhn=!0,n.prototype.groupPattern=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/,n.prototype.group=function(e){return(e.match(this.groupPattern)||[]).slice(1).filter(Boolean)},n.prototype.test=function(e,t){return this[t?"eagerPattern":"pattern"].test(e)}},{"xtend/mutable":30}],4:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"American Express",digits:15,pattern:/^3[47]\d{13}$/,eagerPattern:/^3[47]/,groupPattern:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,cvcLength:4})},{"../type":3}],5:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Dankort",pattern:/^5019\d{12}$/,eagerPattern:/^5019/})},{"../type":3}],6:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Diners Club",digits:14,pattern:/^3(0[0-5]|[68]\d)\d{11}$/,eagerPattern:/^3(0|[68])/,groupPattern:/(\d{1,4})?(\d{1,6})?(\d{1,4})?/})},{"../type":3}],7:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Discover",pattern:/^6(011(0[0-9]|[2-4]\d|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]\d{3}|5\d{4})\d{10}$/,eagerPattern:/^6(011(0[0-9]|[2-4]|74|7[7-9]|8[6-9]|9[0-9])|4[4-9]|5)/})},{"../type":3}],8:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Elo",pattern:/^(4[035]|5[0]|6[235])(6[7263]|9[90]|1[2416]|7[736]|8[9]|0[04579]|5[0])([0-9])([0-9])\d{10}$/,eagerPattern:/^(4[035]|5[0]|6[235])(6[7263]|9[90]|1[2416]|7[736]|8[9]|0[04579]|5[0])([0-9])([0-9])/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],9:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Forbrugsforeningen",pattern:/^600722\d{10}$/,eagerPattern:/^600/})},{"../type":3}],10:[function(e,t,i){"use strict";t.exports=[e("./visa"),e("./maestro"),e("./forbrugsforeningen"),e("./dankort"),e("./mastercard"),e("./american-express"),e("./diners-club"),e("./discover"),e("./jcb"),e("./unionpay"),e("./troy"),e("./elo"),e("./uatp")]},{"./american-express":4,"./dankort":5,"./diners-club":6,"./discover":7,"./elo":8,"./forbrugsforeningen":9,"./jcb":11,"./maestro":12,"./mastercard":13,"./troy":14,"./uatp":15,"./unionpay":16,"./visa":17}],11:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"JCB",pattern:/^35\d{14}$/,eagerPattern:/^35/})},{"../type":3}],12:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Maestro",digits:[12,19],pattern:/^(?:5[06789]\d\d|(?!6011[0234])(?!60117[4789])(?!60118[6789])(?!60119)(?!64[456789])(?!65)6\d{3})\d{8,15}$/,eagerPattern:/^(5(018|0[23]|[68])|6[37]|60111|60115|60117([56]|7[56])|60118[0-5]|64[0-3]|66)/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],13:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Mastercard",pattern:/^(5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)\d{12}$/,eagerPattern:/^(2[3-7]|22[2-9]|5[1-5])/})},{"../type":3}],14:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Troy",pattern:/^9792\d{12}$/,eagerPattern:/^9792/})},{"../type":3}],15:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"UATP",digits:15,pattern:/^1\d{14}$/,eagerPattern:/^1/,groupPattern:/(\d{1,4})(\d{1,5})?(\d{1,6})?/})},{"../type":3}],16:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"UnionPay",pattern:/^62[0-5]\d{13,16}$/,eagerPattern:/^62/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/,luhn:!1})},{"../type":3}],17:[function(e,t,i){"use strict";var n=e("../type");t.exports=n({name:"Visa",digits:[13,19],pattern:/^4\d{12}(\d{3}|\d{6})?$/,eagerPattern:/^4/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/})},{"../type":3}],18:[function(e,t,i){"use strict";var n=e("fast-luhn"),s=e("./types");t.exports=function(e){function t(e,t){return i.find(function(i){return i.test(e,t)})}var i=s(e);return{types:e,parse:function(e){return"string"!=typeof e?"":e.replace(/[^\d]/g,"")},format:function(e,i){var n=t(e,!0);return n?n.group(e).join(i||" "):e},type:function(e,i){var n=t(e,i);return n?n.name:undefined},luhn:n,isValid:function(e,s){return!!(s=s?i.get(s):t(e))&&(!s.luhn||n(e))&&s.test(e)}}}},{"./types":21,"fast-luhn":23}],19:[function(e,t,i){"use strict";var n=e("./types"),s=/^\d{3,4}$/;t.exports=function(e){var t=n(e);return{isValid:function(e,i){return"string"==typeof e&&!!s.test(e)&&(i?t.get(i).cvcLength===e.length:t.some(function(t){return t.cvcLength===e.length}))}}}},{"./types":21}],20:[function(e,t,i){"use strict";var n=e("is-valid-month"),s=e("parse-int"),o=e("parse-year");t.exports={isPast:function(e,t){return Date.now()>=new Date(t,e)},month:{parse:function(e){return s(e)},isValid:n},year:{parse:o,format:function(e,t){return e=e.toString(),t?e.substr(2,4):e},isValid:function(e){return"number"==typeof e&&0<(e=s(e))},isPast:function(e){return(new Date).getFullYear()>e}}}},{"is-valid-month":26,"parse-int":28,"parse-year":29}],21:[function(e,t,i){"use strict";var n=e("array-find"),s=e("creditcards-types");t.exports=function(e){var t=e.reduce(function(e,t){return e[t.name]=t,e},{});return{find:n.bind(null,e),some:e.some.bind(e),get:function(e){var i=t[e];if(i)return i;throw new Error("No type found for name: "+e)}}},t.exports.defaults=s},{"array-find":1,"creditcards-types":2}],22:[function(e,t,i){"use strict";var n=e("zero-fill"),s=e("parse-int"),o=n(2);t.exports=function(e,t){var i=(t=t||new Date).getFullYear().toString().substr(0,2);return e=s(e),s(i+o(e))}},{"parse-int":28,"zero-fill":31}],23:[function(e,t,i){"use strict";var n;t.exports=(n=[0,2,4,6,8,1,3,5,7,9],function(e){if("string"!=typeof e)throw new TypeError("Expected string input");if(!e)return!1;for(var t,i=e.length,s=1,o=0;i;)t=parseInt(e.charAt(--i),10),o+=(s^=1)?n[t]:t;return o%10==0})},{}],24:[function(e,t,i){"use strict";var n=e("number-is-nan");t.exports=Number.isFinite||function(e){return!("number"!=typeof e||n(e)||e===Infinity||e===-Infinity)}},{"number-is-nan":27}],25:[function(e,t,i){var n=e("is-finite");t.exports=Number.isInteger||function(e){return"number"==typeof e&&n(e)&&Math.floor(e)===e}},{"is-finite":24}],26:[function(e,t,i){"use strict";var n=e("is-integer");t.exports=function(e){return!("number"!=typeof e||!n(e))&&1<=e&&e<=12}},{"is-integer":25}],27:[function(e,t,i){"use strict";t.exports=Number.isNaN||function(e){return e!=e}},{}],28:[function(e,t,i){"use strict";var n=e("is-integer"),s=/^-?\d+$/;t.exports=function(e){return"number"==typeof e?n(e)?e:undefined:"string"==typeof e?s.test(e)?parseInt(e,10):undefined:void 0}},{"is-integer":25}],29:[function(e,t,i){"use strict";var n=e("parse-int"),s=e("expand-year");t.exports=function(e,t,i){if(null!=(e=n(e)))return t?s(e,i):e}},{"expand-year":22,"parse-int":28}],30:[function(e,t,i){t.exports=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)n.call(i,s)&&(e[s]=i[s])}return e};var n=Object.prototype.hasOwnProperty},{}],31:[function(e,t,i){t.exports=function n(e,t,i){return t===undefined?function(t,i){return n(e,t,i)}:(i===undefined&&(i="0"),0<(e-=t.toString().length)?new Array(e+(/\./.test(t)?2:1)).join(i)+t:t+"")}},{}],32:[function(e,t,i){t.exports={Card:e("creditcards/card"),Cvc:e("creditcards/cvc"),CcTypes:e("creditcards-types"),Expiration:e("creditcards/expiration")}},{"creditcards-types":2,"creditcards/card":18,"creditcards/cvc":19,"creditcards/expiration":20}]},{},[32])(32)}),define("skins/form/validator/credit_card",["static/utils","./base","./focus","skins/min/default.creditcards.bwfy"],function(e,t,i,n){var s=function(e,i){t.apply(this,[e,i]);var s=this,o=e.getRoot(),a=$("#"+o.form.prop("id")+"_"+i.options.number_field.replace(/\|/g,"_"));if(this.cc_num_error=!1,this.cc_num_validator=a.data("validator"),!this.cc_num_validator)return void console.error("No validator for CC number field");this.cc_num_label=a.prop("placeholder");var r=$("#"+o.form.prop("id")+"_"+i.options.month_field.replace(/\|/g,"_"));if(this.cc_month_error=!1,this.cc_month_validator=r.data("validator"),this.cc_month_label="",!this.cc_month_validator)return void console.error("No validator for CC month field");r.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return s.cc_month_label=$(this).text().trim(),!1});var l=$("#"+o.form.prop("id")+"_"+i.options.year_field.replace(/\|/g,"_"));if(0===l.length)return void console.error("No input for CC year field");l.find("option").each(function(){if(!$(this).val()&&$(this).text().trim().length>0)return s.cc_month_label+=" "+$(this).text().trim(),!1});var u=$("#"+o.form.prop("id")+"_"+i.options.cvv_field.replace(/\|/g,"_"));if(this.cc_cvv_error=!1,this.cc_cvv_validator=u.data("validator"),!this.cc_cvv_validator)return void console.error("No validator for CVV field");this.cc_cvv_label=u.prop("placeholder");var f=$('<div class="cc-icon"></div>').insertAfter(a),d=n.Card(n.CcTypes),c=n.Cvc(n.CcTypes),h=!1,p=l.val();l.on("change",function(){p=l.val(),s.cc_month_validator.validate()});var _=this.cc_num_validator.doValidate;this.cc_num_validator.doValidate=function(e){if(s.cc_num_error=!0,!_.apply(this,[e]))return!1;var t=d.parse(e);h=d.type(t,!0),s.cc_cvv_validator.validate();var i=h?h.toLowerCase().replace(" ","-"):"";return f.removeClass().addClass("cc-icon "+i),this.input.val(d.format(t)),d.isValid(t)?(s.cc_num_error=!1,!0):(this.setError(s.getMessage("invalid_number")),!1)};var g=this.cc_month_validator.doValidate;this.cc_month_validator.doValidate=function(e){if(s.cc_month_error=!0,!g.apply(this,[e]))return!1;var t=n.Expiration.month.parse(e),i=n.Expiration.month.parse(p);return n.Expiration.month.isValid(t)&&n.Expiration.year.isValid(i)?n.Expiration.isPast(t,i)?(this.setError(s.getMessage("invalid_date")),!1):(s.cc_month_error=!1,!0):(this.setError(s.getMessage("invalid_date")),!1)};var m=this.cc_cvv_validator.doValidate;this.cc_cvv_validator.doValidate=function(e){return s.cc_cvv_error=!0,!!m.apply(this,[e])&&(c.isValid(e,h)?(s.cc_cvv_error=!1,!0):(this.setError(s.getMessage("invalid_cvv")),!1))},this.cc_num_validator.validate()};return s.prototype=new t,s.prototype.isValid=function(){return!this.cc_num_error&&!this.cc_month_error&&!this.cc_cvv_error},s.prototype.focus=function(){i.focus(this.getInputError())},s.prototype.getLabel=function(){return input_err=this.getInputError(),input_err===this.cc_num_validator?this.cc_num_label:input_err===this.cc_month_validator?this.cc_month_label:input_err===this.cc_cvv_validator&&this.cc_cvv_label},s.prototype.getInputError=function(){return this.cc_num_error?this.cc_num_validator:this.cc_month_error?this.cc_month_validator:this.cc_cvv_error?this.cc_cvv_validator:this.cc_num_validator},s}),define("skins/form/validator/xhr",[],function(){var e=function(e,t,i,n){this.cache={},this.result_cache={},this.url=e,this.params="object"==typeof t?t:[t],this.other_params={},this.min_chars=i||3,this.intervall=n||1e3,this.last_check=0,this.last_checked=null,this.pending_check=null,this.timer=null,this.xhr=null};return e.prototype={checkStart:null,checkEnd:null,checkError:null,setOtherParam:function(e,t){this.other_params[e]=t},check:function(){var t=arguments;if(t.length!==this.params.length)return console.error("validator/xhr.check: You passed "+t.length+" arguments when "+this.params.length+" are required",t,t.length,this.params,this.params.length),void this.checkEnd(!0,{});for(var i in t)if(t[i].length<this.min_chars)return void this.checkEnd(!0,{});var n="";for(var i in t)n+="+"+t[i];for(var s in this.other_params)n+="+"+s+"+"+this.other_params[s];if("undefined"!=typeof this.cache[n])return void this.checkEnd(this.cache[n],this.result_cache[n]);if(this.last_checked!==n){this.checkStart(),this.pending_check=t;var o=(new Date).getTime(),a=this;if(o-this.last_check<=this.intervall){if(this.timer)return;return void(this.timer=window.setTimeout(function(){a.timer=null,e.prototype.check.apply(a,a.pending_check)},this.intervall-(o-this.last_check)))}this.last_checked=n,this.last_check=o,this.xhr&&this.xhr.abort();var r={};for(var s in this.params)r[this.params[s]]=t[s];for(var s in this.other_params)r[s]=this.other_params[s];this.xhr=$.getJSON(this.url,r,function(e){a.result_cache[n]=e,e.result?a.cache[n]=!0:a.cache[n]=e.message,a.checkEnd(a.cache[n],e)}).fail(function(){a.checkError()})}}},e}),define("skins/form/validator/input_base",["lib/tools","static/dom","static/utils","lib/converter","lib/helpers/popup","./base","./focus","./xhr"],function(e,t,i,n,s,o,a,r){var l=[],u="rtl"===$("html").prop("dir"),f=function(e,t){if("object"==typeof t){o.apply(this,[e,t]),this.id=t.elt_id,this.input=this.getInput(),this.input_agent=this.getInputAgent(),this.type=t.elt_type,this.input_type=t.input_type,this.focused=this.input.is(":focus"),this.has_error=!1,this.error_txt=!1,this.warning=!1,this.icon=null,this.popup=null,this.popup_timer=null;var i=this;this.input.on("focus",function(){i.focused=!0,i.showError(),i.showWarning()}),this.input.on("blur",function(){i.focused=!1,i.startTimer(!0)}),this.input.data("validator",this),this.input.trigger("validator-init")}};f.prototype=new o,f.prototype.doValidate=null,f.prototype.validate=function(){return!(this.doValidate&&!this.doValidate(this.getValue()))&&this.validateXhr()},f.prototype.refresh=function(){this.positionIcon()},f.prototype.getInputAgent=function(){return this.input},f.prototype.focus=function(){a.focus(this.input_agent),this.showError(),this.showWarning()},f.prototype.isValid=function(){return!(this.has_error||this.options.required&&this.isEmpty())},f.prototype.getInput=function(){return $("#"+this.id)},f.prototype.getValue=function(){return $.trim(this.input.val())},f.prototype.isEmpty=function(){return 0===this.getValue().length},f.prototype.showIcon=function(e,t){if(this.icon)this.icon.removeClass().show();else{this.icon=$("<i></i>").css("position","absolute").css("z-index","100");var i=this.input.parent().css("position","relative");i.hasClass("input-group")?this.icon.appendTo(i):this.icon.insertAfter(this.input),l.push(this)}this.icon.addClass("icon-f icf-"+e+" text-"+t),this.positionIcon();var n=this;this.icon.on("mouseover",function(){n.showError(),n.showWarning()})},f.prototype.hideIcon=function(e,t){this.icon&&this.icon.hide()},f.prototype.positionIcon=function(){if(this.icon){var e=this.getIconPositionReference(),t=e.position();this.icon.css({top:this.options.tooltip_position_top?Math.round(t.top+n.trimPx(e.css("borderTopWidth"))+2)+"px":Math.round(t.top+e.outerHeight()-this.icon.outerHeight()-2)+"px",left:u?Math.round(t.left+n.trimPx(e.css("borderLeftWidth"))+2)+"px":Math.round(t.left+e.innerWidth()-this.icon.outerWidth()-2-n.trimPx(e.css("borderLeftWidth")))+"px"})}},f.prototype.getIconPositionReference=function(){return this.input},f.prototype.showTooltip=function(e){this.popup?(this.popup.open(),e&&this.popup.setContent(e)):(this.popup=new s(this.icon,e,{relative_to:this.getTooltipParent(),trigger:!1,autoclose:!1,position:{v:this.options.tooltip_position_top?"above":"below",h:u?"left":"right"},popup_class:"form-popup-error",offset:{below:0,above:0,left:u?-4:0,right:u?0:-4},max_width:500}),this.input.is(":focus")&&this.popup.open()),this.startTimer(!0)},f.prototype.getTooltipParent=function(){return this.input.parent()},f.prototype.setLoading=function(){this.unsetError(),this.errorChanged&&this.errorChanged(!1,this),this.showIcon("spinner icf-anim-pulse","primary")},f.prototype.setSuccess=function(){this.unsetError(),this.errorChanged&&this.errorChanged(!1,this),this.warning?this.showWarning():(this.hideIcon(),this.popup&&this.popup.close())},f.prototype.setWarning=function(e){this.warning=e,this.has_error||this.showWarning()},f.prototype.showWarning=function(){if(this.has_error||!this.warning)return!1;this.showIcon("warning","warning"),this.showTooltip("<span>"+this.warning+"</span>")},f.prototype.clearWarning=function(){this.warning=!1,this.hideTooltip()},f.prototype.getLabel=function(){var e=function(e){return e=e.trim(),e.lastIndexOf(":")+1===e.length&&(e=e.substr(0,e.length-1)),e};if(this.input){if(this.input.prop("id")){var t=$("label[for="+this.input.prop("id")+"]");if(t.length>0&&t.text()&&(t=e(t.text()),t.length>0))return t}if(this.input.prop("placeholder")&&(t=e(this.input.prop("placeholder")),t.length>0))return t;var i=this.input,n=$();do{i=i.parents("fieldset"),n=i.find("legend").first()}while(i.length>0&&0===n.length);if(n.length>0&&n.text()){var s=!1,o=!0;if(i.find("input, textarea, select").each(function(){s?s!==$(this).prop("name")&&(o=!1):s=$(this).prop("name")}),o&&(t=e(n.text()),t.length>0))return t}}return!1},f.prototype.getError=function(){return this.error_txt},f.prototype.unsetError=function(){this.has_error=!1,this.error_txt=!1,this.input_agent.removeClass("validator-error")},f.prototype.setError=function(e,t){this.has_error=!0,this.error_txt=e,this.errorChanged&&this.errorChanged(!0,this),this.showIcon("close","danger"),this.input_agent.addClass("validator-error"),e=$("<span>"+e+"</span>"),"function"==typeof t&&e.addClass("click-func").on("mousedown",t),this.showTooltip(e)},f.prototype.showError=function(){if(!this.has_error)return!1;this.showTooltip()},f.prototype.hideTooltip=function(e){if(!e&&(!this.has_error&&!this.warning||this.focused))return!1;this.popup&&this.popup.close()},f.prototype.startTimer=function(e){if(this.popup_timer){if(!e)return;window.clearTimeout(this.popup_timer)}var t=this;this.popup_timer=window.setTimeout(function(){t.hideTooltip()},3e3)},f.prototype.stopTimer=function(){this.popup_timer&&(window.clearTimeout(this.popup_timer),this.popup_timer=null)},f.prototype.hasXhr=function(e){return!!this.vxhr&&"object"==typeof this.vxhr[e]},f.prototype.setupXhr=function(e,t,i,n,s){if(this.vxhr||(this.vxhr={},this.vxhr_other_values={},this.vxhr_callbacks={},this.nb_xhr=0),"undefined"==typeof this.vxhr[e]){var o=this;this.vxhr[e]=new r(t,i,n,s),this.vxhr[e].checkStart=function(){o.setLoading()},this.vxhr[e].checkError=function(){o.vxhr_nbchecked++;for(var t in o.vxhr_callbacks[e].error)o.vxhr_callbacks[e].error[t]();o.checkXhrs()},this.vxhr[e].checkEnd=function(t,i){!0!==t&&o.vxhr_errors.push(t);for(var n in o.vxhr_callbacks[e].success)o.vxhr_callbacks[e].success[n](t,i);o.vxhr_nbchecked++,o.checkXhrs()},this.nb_xhr++,this.vxhr_other_values[e]=[],this.vxhr_callbacks[e]={success:[],error:[]}}},f.prototype.setXhrOtherParam=function(e,t,i){this.vxhr[e].setOtherParam(t,i)},f.prototype.setXhrOtherValues=function(e,t){this.vxhr_other_values[e]=t},f.prototype.addXhrSuccessCallback=function(e,t){this.vxhr_callbacks[e].success.push(t)},f.prototype.addXhrErrorCallback=function(e,t){this.vxhr_callbacks[e].error.push(t)},f.prototype.validateXhr=function(){if(!this.vxhr)return this.setSuccess(),!0;this.vxhr_errors=[],this.vxhr_nbchecked=0;var e=this.getValue();for(var t in this.vxhr)this.vxhr.hasOwnProperty(t)&&r.prototype.check.apply(this.vxhr[t],[e].concat(this.vxhr_other_values[t]));return!1},f.prototype.checkXhrs=function(){if(this.nb_xhr===this.vxhr_nbchecked)return 0===this.vxhr_errors.length?void this.setSuccess():void this.setError(this.vxhr_errors.join("<br>"))};var d,c=function(){d&&(d=null);for(var e in l)l[e].positionIcon()};return $(window).on("resize",function(){d||(d=window.setTimeout(c,250))}),f}),function(e,t){"function"==typeof define&&define.amd?define("libs/croppie",t):"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=t():e.Croppie=t()}("undefined"!=typeof self?self:this,function(){function e(e){if(e in Y)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=X.length;i--;)if((e=X[i]+t)in Y)return e}function t(e,t){var i=G.indexOf(e)>-1?G:K,n=i.indexOf(e),s=t/90%i.length;return i[(i.length+n+s%i.length)%i.length]}function i(e,t){e=e||{};for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},i(e[n],t[n])):e[n]=t[n];return e}function n(e){return i({},e)}function s(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function o(e,t,i){if("string"==typeof t){var n=t;t={},t[n]=i}for(var s in t)e.style[s]=t[s]}function a(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function r(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function l(e,t){for(var i in t)e.setAttribute(i,t[i])}function u(e){return parseInt(e,10)}function f(e,t){var i=new Image;return i.style.opacity="0",new Promise(function(n,s){function o(){i.style.opacity="1",setTimeout(function(){n(i)},1)}i.removeAttribute("crossOrigin"),e.match(/^https?:\/\/|^\/\//)&&i.setAttribute("crossOrigin","anonymous"),i.onload=function(){t?EXIF.getData(i,function(){o()}):o()},i.onerror=function(e){i.style.opacity=1,setTimeout(function(){s(e)},1)},i.src=e})}function d(e,t){var i=e.naturalWidth,n=e.naturalHeight,s=t||c(e);if(s&&s>=5){var o=i;i=n,n=o}return{width:i,height:n}}function c(e){return e.exifdata&&e.exifdata.Orientation?u(e.exifdata.Orientation):1}function h(e,t,i){var n=t.width,s=t.height,o=e.getContext("2d");switch(e.width=t.width,e.height=t.height,o.save(),i){case 2:o.translate(n,0),o.scale(-1,1);break;case 3:o.translate(n,s),o.rotate(180*Math.PI/180);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.scale(1,-1);break;case 6:e.width=s,e.height=n,o.rotate(90*Math.PI/180),o.translate(0,-s);break;case 7:e.width=s,e.height=n,o.rotate(-90*Math.PI/180),o.translate(-n,s),o.scale(1,-1);break;case 8:e.width=s,e.height=n,o.translate(0,n),o.rotate(-90*Math.PI/180)}o.drawImage(t,0,0,n,s),o.restore()}function p(){var e,t,i,n,s,r,u=this,f=u.options.viewport.type?"cr-vp-"+u.options.viewport.type:null;u.options.useCanvas=u.options.enableOrientation||_.call(u),u.data={},u.elements={},e=u.elements.boundary=document.createElement("div"),i=u.elements.viewport=document.createElement("div"),t=u.elements.img=document.createElement("img"),n=u.elements.overlay=document.createElement("div"),u.options.useCanvas?(u.elements.canvas=document.createElement("canvas"),u.elements.preview=u.elements.canvas):u.elements.preview=t,a(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),s=u.options.boundary.width,r=u.options.boundary.height,o(e,{width:s+(isNaN(s)?"":"px"),height:r+(isNaN(r)?"":"px")}),a(i,"cr-viewport"),f&&a(i,f),o(i,{width:u.options.viewport.width+"px",height:u.options.viewport.height+"px"}),i.setAttribute("tabindex",0),a(u.elements.preview,"cr-image"),l(u.elements.preview,{alt:"preview","aria-grabbed":"false"}),a(n,"cr-overlay"),u.element.appendChild(e),e.appendChild(u.elements.preview),e.appendChild(i),e.appendChild(n),a(u.element,"croppie-container"),u.options.customClass&&a(u.element,u.options.customClass),w.call(this),u.options.enableZoom&&b.call(u),u.options.enableResize&&g.call(u)}function _(){return this.options.enableExif&&window.EXIF}function g(){function e(e){if((e.button===undefined||0===e.button)&&(e.preventDefault(),!p)){var o=c.elements.overlay.getBoundingClientRect();if(p=!0,s=e.pageX,r=e.pageY,n=-1!==e.currentTarget.className.indexOf("vertical")?"v":"h",l=o.width,u=o.height,e.touches){var a=e.touches[0];s=a.pageX,r=a.pageY}window.addEventListener("mousemove",t),window.addEventListener("touchmove",t),window.addEventListener("mouseup",i),window.addEventListener("touchend",i),document.body.style[W]="none"}}function t(e){var t=e.pageX,i=e.pageY;if(e.preventDefault(),e.touches){var a=e.touches[0];t=a.pageX,i=a.pageY}var f=t-s,d=i-r,p=c.options.viewport.height+d,g=c.options.viewport.width+f;"v"===n&&p>=_&&p<=u?(o(h,{height:p+"px"}),c.options.boundary.height+=d,o(c.elements.boundary,{height:c.options.boundary.height+"px"}),c.options.viewport.height+=d,o(c.elements.viewport,{height:c.options.viewport.height+"px"})):"h"===n&&g>=_&&g<=l&&(o(h,{width:g+"px"}),c.options.boundary.width+=f,o(c.elements.boundary,{width:c.options.boundary.width+"px"}),c.options.viewport.width+=f,o(c.elements.viewport,{width:c.options.viewport.width+"px"})),C.call(c),$.call(c),y.call(c),k.call(c),r=i,s=t}function i(){p=!1,window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),document.body.style[W]=""}var n,s,r,l,u,f,d,c=this,h=document.createElement("div"),p=!1,_=50;a(h,"cr-resizer"),o(h,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(f=document.createElement("div"),a(f,"cr-resizer-vertical"),h.appendChild(f)),this.options.resizeControls.width&&(d=document.createElement("div"),a(d,"cr-resizer-horisontal"),h.appendChild(d)),f&&(f.addEventListener("mousedown",e),f.addEventListener("touchstart",e)),d&&(d.addEventListener("mousedown",e),d.addEventListener("touchstart",e)),this.elements.boundary.appendChild(h)}function m(e){if(this.options.enableZoom){var t=this.elements.zoomer,i=B(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),i)).toString()}}function b(){function e(){v.call(i,{value:parseFloat(s.value),origin:new Q(i.elements.preview),viewportRect:i.elements.viewport.getBoundingClientRect(),transform:Z.parse(i.elements.preview)})}function t(t){var n,s;if("ctrl"===i.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,s=i._currentZoom+n*i._currentZoom,t.preventDefault(),m.call(i,s),e.call(i)}var i=this,n=i.elements.zoomerWrap=document.createElement("div"),s=i.elements.zoomer=document.createElement("input");a(n,"cr-slider-wrap"),a(s,"cr-slider"),s.type="range",s.step="0.0001",s.value="1",s.style.display=i.options.showZoomer?"":"none",s.setAttribute("aria-label","zoom"),i.element.appendChild(n),n.appendChild(s),i._currentZoom=1,i.elements.zoomer.addEventListener("input",e),i.elements.zoomer.addEventListener("change",e),i.options.mouseWheelZoom&&(i.elements.boundary.addEventListener("mousewheel",t),i.elements.boundary.addEventListener("DOMMouseScroll",t))}function v(e){function t(){var e={};e[U]=n.toString(),e[H]=a.toString(),o(i.elements.preview,e)}var i=this,n=e?e.transform:Z.parse(i.elements.preview),s=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),a=e?e.origin:new Q(i.elements.preview);if(i._currentZoom=e?e.value:i._currentZoom,n.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),t(),i.options.enforceBoundary){var r=D.call(i,s),l=r.translate,u=r.origin;n.x>=l.maxX&&(a.x=u.minX,n.x=l.maxX),n.x<=l.minX&&(a.x=u.maxX,n.x=l.minX),n.y>=l.maxY&&(a.y=u.minY,n.y=l.maxY),n.y<=l.minY&&(a.y=u.maxY,n.y=l.minY)}t(),ee.call(i),k.call(i)}function D(e){var t=this,i=t._currentZoom,n=e.width,s=e.height,o=t.elements.boundary.clientWidth/2,a=t.elements.boundary.clientHeight/2,r=t.elements.preview.getBoundingClientRect(),l=r.width,u=r.height,f=n/2,d=s/2,c=-1*(f/i-o),h=c-(l*(1/i)-n*(1/i)),p=-1*(d/i-a),_=p-(u*(1/i)-s*(1/i)),g=1/i*f,m=l*(1/i)-g,b=1/i*d;return{translate:{maxX:c,minX:h,maxY:p,minY:_},origin:{maxX:m,minX:g,maxY:u*(1/i)-b,minY:b}}}function y(e){
var t=this,i=t._currentZoom,n=t.elements.preview.getBoundingClientRect(),s=t.elements.viewport.getBoundingClientRect(),a=Z.parse(t.elements.preview.style[U]),r=new Q(t.elements.preview),l=s.top-n.top+s.height/2,u=s.left-n.left+s.width/2,f={},d={};if(e){var c=r.x,h=r.y,p=a.x,_=a.y;f.y=c,f.x=h,a.y=p,a.x=_}else f.y=l/i,f.x=u/i,d.y=(f.y-r.y)*(1-i),d.x=(f.x-r.x)*(1-i),a.x-=d.x,a.y-=d.y;var g={};g[H]=f.x+"px "+f.y+"px",g[U]=a.toString(),o(t.elements.preview,g)}function w(){function e(e,t){var i=p.elements.preview.getBoundingClientRect(),n=h.y+t,s=h.x+e;p.options.enforceBoundary?(c.top>i.top+t&&c.bottom<i.bottom+t&&(h.y=n),c.left>i.left+e&&c.right<i.right+e&&(h.x=s)):(h.y=n,h.x=s)}function t(e){p.elements.preview.setAttribute("aria-grabbed",e),p.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function i(e){var t=37,i=38,s=39,o=40;if(!e.shiftKey||e.keyCode!==i&&e.keyCode!==o){if(p.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var a=function(e){switch(e){case t:return[1,0];case i:return[0,1];case s:return[-1,0];case o:return[0,-1]}}(e.keyCode);h=Z.parse(p.elements.preview),document.body.style[W]="none",c=p.elements.viewport.getBoundingClientRect(),n(a)}}else{var r;r=e.keyCode===i?parseFloat(p.elements.zoomer.value)+parseFloat(p.elements.zoomer.step):parseFloat(p.elements.zoomer.value)-parseFloat(p.elements.zoomer.step),p.setZoom(r)}}function n(t){var i=t[0],n=t[1],s={};e(i,n),s[U]=h.toString(),o(p.elements.preview,s),C.call(p),document.body.style[W]="",y.call(p),k.call(p),d=0}function a(e){if((e.button===undefined||0===e.button)&&(e.preventDefault(),!_)){if(_=!0,u=e.pageX,f=e.pageY,e.touches){var i=e.touches[0];u=i.pageX,f=i.pageY}t(_),h=Z.parse(p.elements.preview),window.addEventListener("mousemove",r),window.addEventListener("touchmove",r),window.addEventListener("mouseup",l),window.addEventListener("touchend",l),document.body.style[W]="none",c=p.elements.viewport.getBoundingClientRect()}}function r(t){t.preventDefault();var i=t.pageX,n=t.pageY;if(t.touches){var a=t.touches[0];i=a.pageX,n=a.pageY}var r=i-u,l=n-f,c={};if("touchmove"===t.type&&t.touches.length>1){var _=t.touches[0],g=t.touches[1],b=Math.sqrt((_.pageX-g.pageX)*(_.pageX-g.pageX)+(_.pageY-g.pageY)*(_.pageY-g.pageY));d||(d=b/p._currentZoom);var v=b/d;return m.call(p,v),void s(p.elements.zoomer)}e(r,l),c[U]=h.toString(),o(p.elements.preview,c),C.call(p),f=n,u=i}function l(){_=!1,t(_),window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l),document.body.style[W]="",y.call(p),k.call(p),d=0}var u,f,d,c,h,p=this,_=!1;p.elements.overlay.addEventListener("mousedown",a),p.elements.viewport.addEventListener("keydown",i),p.elements.overlay.addEventListener("touchstart",a)}function C(){if(this.elements){var e=this,t=e.elements.boundary.getBoundingClientRect(),i=e.elements.preview.getBoundingClientRect();o(e.elements.overlay,{width:i.width+"px",height:i.height+"px",top:i.top-t.top+"px",left:i.left-t.left+"px"})}}function k(){var e=this,t=e.get();if(x.call(e))if(e.options.update.call(e,t),e.$&&"undefined"==typeof Prototype)e.$(e.element).trigger("update.croppie",t);else{var i;window.CustomEvent?i=new CustomEvent("update",{detail:t}):(i=document.createEvent("CustomEvent"),i.initCustomEvent("update",!0,!0,t)),e.element.dispatchEvent(i)}}function x(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function F(){var e,t=this,i={},n=t.elements.preview,s=new Z(0,0,1),a=new Q;x.call(t)&&!t.data.bound&&(t.data.bound=!0,i[U]=s.toString(),i[H]=a.toString(),i.opacity=1,o(n,i),e=t.elements.preview.getBoundingClientRect(),t._originalImageWidth=e.width,t._originalImageHeight=e.height,t.data.orientation=c(t.elements.img),t.options.enableZoom?$.call(t,!0):t._currentZoom=1,s.scale=t._currentZoom,i[U]=s.toString(),o(n,i),t.data.points.length?E.call(t,t.data.points):T.call(t),y.call(t),C.call(t))}function $(e){var t,i,n,o,a=this,r=Math.max(a.options.minZoom,0)||0,l=a.options.maxZoom||1.5,u=a.elements.zoomer,f=parseFloat(u.value),c=a.elements.boundary.getBoundingClientRect(),h=d(a.elements.img,a.data.orientation),p=a.elements.viewport.getBoundingClientRect();a.options.enforceBoundary&&(n=p.width/h.width,o=p.height/h.height,r=Math.max(n,o)),r>=l&&(l=r+1),u.min=B(r,4),u.max=B(l,4),!e&&(f<u.min||f>u.max)?m.call(a,f<u.min?u.min:u.max):e&&(i=Math.max(c.width/h.width,c.height/h.height),t=null!==a.data.boundZoom?a.data.boundZoom:i,m.call(a,t)),s(u)}function E(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,i=e[2]-e[0],n=t.elements.viewport.getBoundingClientRect(),s=t.elements.boundary.getBoundingClientRect(),a={left:n.left-s.left,top:n.top-s.top},r=n.width/i,l=e[1],u=e[0],f=-1*e[1]+a.top,d=-1*e[0]+a.left,c={};c[H]=u+"px "+l+"px",c[U]=new Z(d,f,r).toString(),o(t.elements.preview,c),m.call(t,r),t._currentZoom=r}function T(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),n=e.elements.boundary.getBoundingClientRect(),s=i.left-n.left,a=i.top-n.top,r=s-(t.width-i.width)/2,l=a-(t.height-i.height)/2,u=new Z(r,l,e._currentZoom);o(e.elements.preview,U,u.toString())}function S(e){var t=this,i=t.elements.canvas,n=t.elements.img;i.getContext("2d").clearRect(0,0,i.width,i.height),i.width=n.width,i.height=n.height,h(i,n,t.options.enableOrientation&&e||c(n))}function L(e){var t=this,i=e.points,n=u(i[0]),s=u(i[1]),o=u(i[2]),a=u(i[3]),r=o-n,l=a-s,f=e.circle,d=document.createElement("canvas"),c=d.getContext("2d"),h=e.outputWidth||r,p=e.outputHeight||l;d.width=h,d.height=p,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,h,p));var _=n,g=s,m=r,b=l,v=0,D=0,y=h,w=p;return n<0&&(_=0,v=Math.abs(n)/r*h),m+_>t._originalImageWidth&&(m=t._originalImageWidth-_,y=m/r*h),s<0&&(g=0,D=Math.abs(s)/l*p),b+g>t._originalImageHeight&&(b=t._originalImageHeight-g,w=b/l*p),c.drawImage(this.elements.preview,_,g,m,b,v,D,y,w),f&&(c.fillStyle="#fff",c.globalCompositeOperation="destination-in",c.beginPath(),c.arc(d.width/2,d.height/2,d.width/2,0,2*Math.PI,!0),c.closePath(),c.fill()),d}function P(e){var t=e.points,i=document.createElement("div"),n=document.createElement("img"),s=t[2]-t[0],r=t[3]-t[1];return a(i,"croppie-result"),i.appendChild(n),o(n,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),n.src=e.url,o(i,{width:s+"px",height:r+"px"}),i}function I(e){return L.call(this,e).toDataURL(e.format,e.quality)}function M(e){var t=this;return new Promise(function(i){L.call(t,e).toBlob(function(e){i(e)},e.format,e.quality)})}function A(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){e.classList.add(t)}),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}function O(e,t){var i,n=this,s=[],o=null,a=_.call(n);if("string"==typeof e)i=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&n.data.url)return F.call(n),k.call(n),null;i=e.url,s=e.points||[],o="undefined"==typeof e.zoom?null:e.zoom}return n.data.bound=!1,n.data.url=i||n.data.url,n.data.boundZoom=o,f(i,a).then(function(i){if(A.call(n,i),s.length)n.options.relative&&(s=[s[0]*i.naturalWidth/100,s[1]*i.naturalHeight/100,s[2]*i.naturalWidth/100,s[3]*i.naturalHeight/100]);else{var o,a,r=d(i),l=n.elements.viewport.getBoundingClientRect(),u=l.width/l.height,f=r.width/r.height;f>u?(a=r.height,o=a*u):(o=r.width,a=r.height/u);var c=(r.width-o)/2,h=(r.height-a)/2,p=c+o,_=h+a;n.data.points=[c,h,p,_]}n.data.points=s.map(function(e){return parseFloat(e)}),n.options.useCanvas&&S.call(n,e.orientation),F.call(n),k.call(n),t&&t()})}function B(e,t){return parseFloat(e).toFixed(t||0)}function R(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),n=i.left-t.left,s=i.top-t.top,o=(i.width-e.elements.viewport.offsetWidth)/2,a=(i.height-e.elements.viewport.offsetHeight)/2,r=n+e.elements.viewport.offsetWidth+o,l=s+e.elements.viewport.offsetHeight+a,u=e._currentZoom;(u===Infinity||isNaN(u))&&(u=1);var f=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return n=Math.max(f,n/u),s=Math.max(f,s/u),r=Math.max(f,r/u),l=Math.max(f,l/u),{points:[B(n),B(s),B(r),B(l)],zoom:u,orientation:e.data.orientation}}function j(e){var t=this,s=R.call(t),o=i(n(te),n(e)),a="string"==typeof e?e:o.type||"base64",r=o.size||"viewport",l=o.format,u=o.quality,f=o.backgroundColor,d="boolean"==typeof o.circle?o.circle:"circle"===t.options.viewport.type,c=t.elements.viewport.getBoundingClientRect(),h=c.width/c.height;return"viewport"===r?(s.outputWidth=c.width,s.outputHeight=c.height):"object"==typeof r&&(r.width&&r.height?(s.outputWidth=r.width,s.outputHeight=r.height):r.width?(s.outputWidth=r.width,s.outputHeight=r.width/h):r.height&&(s.outputWidth=r.height*h,s.outputHeight=r.height)),ie.indexOf(l)>-1&&(s.format="image/"+l,s.quality=u),s.circle=d,s.url=t.data.url,s.backgroundColor=f,new Promise(function(e){switch(a.toLowerCase()){case"rawcanvas":e(L.call(t,s));break;case"canvas":case"base64":e(I.call(t,s));break;case"blob":M.call(t,s).then(e);break;default:e(P.call(t,s))}})}function V(){F.call(this)}function N(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var i=this,n=i.elements.canvas;i.data.orientation=t(i.data.orientation,e),h(n,i.elements.img,i.data.orientation),y.call(i,!0),$.call(i)}function q(){var e=this;e.element.removeChild(e.elements.boundary),r(e.element,"croppie-container"),e.options.enableZoom&&e.element.removeChild(e.elements.zoomerWrap),delete e.elements}function z(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=i(n(z.defaults),t),"img"===this.element.tagName.toLowerCase()){var s=this.element;a(s,"cr-original-image"),l(s,{"aria-hidden":"true",alt:""});var o=document.createElement("div");this.element.parentNode.appendChild(o),o.appendChild(s),this.element=o,this.options.url=this.options.url||s.src}if(p.call(this),this.options.url){var r={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,O.call(this,r)}}"function"!=typeof Promise&&function(e){function t(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(s,this),t(o,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void f(function(){var i=t._state?e.onFulfilled:e.onRejected;if(null===i)return void(t._state?e.resolve:e.reject)(t._value);var n;try{n=i(t._value)}catch(s){return void e.reject(s)}e.resolve(n)})}function s(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void l(t(i,e),t(s,this),t(o,this))}this._state=!0,this._value=e,a.call(this)}catch(n){o.call(this,n)}}function o(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function r(e,t,i,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n}function l(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(s){if(n)return;n=!0,i(s)}}var u=setTimeout,f="function"==typeof setImmediate&&setImmediate||function(e){u(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var s=this;return new i(function(i,o){n.call(s,new r(e,t,i,o))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new i(function(t,i){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var r=a.then;if("function"==typeof r)return void r.call(a,function(e){n(o,e)},i)}e[o]=a,0==--s&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var s=e.length,o=0;o<e.length;o++)n(o,e[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var n=0,s=e.length;s>n;n++)e[n].then(t,i)})},i._setImmediateFn=function(e){f=e},"undefined"!=typeof module&&module.exports?module.exports=i:e.Promise||(e.Promise=i)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var n=atob(this.toDataURL(t,i).split(",")[1]),s=n.length,o=new Uint8Array(s),a=0;a<s;a++)o[a]=n.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}});var H,U,W,X=["Webkit","Moz","ms"],Y=document.createElement("div").style,G=[1,8,3,6],K=[2,7,4,5];U=e("transform"),H=e("transformOrigin"),W=e("userSelect");var J={translate3d:{suffix:", 0px"},translate:{suffix:""}},Z=function(e,t,i){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(i)};Z.parse=function(e){return e.style?Z.parse(e.style[U]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?Z.fromMatrix(e):Z.fromString(e)},Z.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new Z(u(t[4]),u(t[5]),parseFloat(t[0]))},Z.fromString=function(e){var t=e.split(") "),i=t[0].substring(z.globals.translate.length+1).split(","),n=t.length>1?t[1].substring(6):1,s=i.length>1?i[0]:0,o=i.length>1?i[1]:0;return new Z(s,o,n)},Z.prototype.toString=function(){var e=J[z.globals.translate].suffix||"";return z.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var Q=function(e){if(!e||!e.style[H])return this.x=0,void(this.y=0);var t=e.style[H].split(" ");this.x=parseFloat(t[0]),this.y=parseFloat(t[1])};Q.prototype.toString=function(){return this.x+"px "+this.y+"px"};var ee=function(e,t,i){var n;return function(){var s=this,o=arguments,a=function(){n=null,i||e.apply(s,o)},r=i&&!n;clearTimeout(n),n=setTimeout(a,t),r&&e.apply(s,o)}}(C,500),te={type:"canvas",format:"png",quality:1},ie=["jpeg","webp","png"];if(window.jQuery){var ne=window.jQuery;ne.fn.croppie=function(e){if("string"==typeof e){var t=Array.prototype.slice.call(arguments,1),i=ne(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,t):"bind"===e?i.bind.apply(i,t):this.each(function(){var i=ne(this).data("croppie");if(i){var n=i[e];if(!ne.isFunction(n))throw"Croppie "+e+" method not found";n.apply(i,t),"destroy"===e&&ne(this).removeData("croppie")}})}return this.each(function(){var t=new z(this,e);t.$=ne,ne(this).data("croppie",t)})}}return z.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},z.globals={translate:"translate3d"},i(z.prototype,{bind:function(e,t){return O.call(this,e,t)},get:function(){var e=R.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return j.call(this,e)},refresh:function(){return V.call(this)},setZoom:function(e){m.call(this,e),s(this.elements.zoomer)},rotate:function(e){N.call(this,e)},destroy:function(){return q.call(this)}}),z}),function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(e),n=i.length,s=new ArrayBuffer(n),o=new Uint8Array(s),a=0;a<n;a++)o[a]=i.charCodeAt(a);return s}function i(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},i.send()}function s(e,n){function s(t){var i=o(t);e.exifdata=i||{};var s=a(t);if(e.iptcdata=s||{},v.isXmpEnabled){var r=p(t);e.xmpdata=r||{}}n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var r=t(e.src);s(r)}else if(/^blob\:/i.test(e.src)){var l=new FileReader;l.onload=function(e){s(e.target.result)},i(e.src,function(e){l.readAsArrayBuffer(e)})}else{var u=new XMLHttpRequest;u.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";s(u.response),u=null},u.open("GET",e.src,!0),u.responseType="arraybuffer",u.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var l=new FileReader;l.onload=function(e){m&&console.log("Got file of length "+e.target.result.byteLength),s(e.target.result)},l.readAsArrayBuffer(e)}}function o(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i,n=2,s=e.byteLength;n<s;){if(255!=t.getUint8(n))return m&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(i=t.getUint8(n+1),m&&console.log(i),225==i)return m&&console.log("Found 0xFFE1 marker"),h(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}function a(e){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i=2,n=e.byteLength;i<n;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,i)){var s=t.getUint8(i+7);s%2!=0&&(s+=1),0===s&&(s=4);return r(e,i+8+s,t.getUint16(i+6+s))}i++}}function r(e,t,i){for(var n,s,o,a,r=new DataView(e),l={},u=t;u<t+i;)28===r.getUint8(u)&&2===r.getUint8(u+1)&&(a=r.getUint8(u+2))in x&&(o=r.getInt16(u+3),o+5,s=x[a],n=c(r,u+5,o),l.hasOwnProperty(s)?l[s]instanceof Array?l[s].push(n):l[s]=[l[s],n]:l[s]=n),u++;return l}function l(e,t,i,n,s){var o,a,r,l=e.getUint16(i,!s),f={};for(r=0;r<l;r++)o=i+12*r+2,a=n[e.getUint16(o,!s)],!a&&m&&console.log("Unknown tag: "+e.getUint16(o,!s)),f[a]=u(e,o,t,i,s);return f}function u(e,t,i,n,s){var o,a,r,l,u,f,d=e.getUint16(t+2,!s),h=e.getUint32(t+4,!s),p=e.getUint32(t+8,!s)+i;switch(d){case 1:case 7:if(1==h)return e.getUint8(t+8,!s);for(o=h>4?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint8(o+l);return a;case 2:return o=h>4?p:t+8,c(e,o,h-1);case 3:if(1==h)return e.getUint16(t+8,!s);for(o=h>2?p:t+8,a=[],l=0;l<h;l++)a[l]=e.getUint16(o+2*l,!s);return a;case 4:if(1==h)return e.getUint32(t+8,!s);for(a=[],l=0;l<h;l++)a[l]=e.getUint32(p+4*l,!s);return a;case 5:if(1==h)return u=e.getUint32(p,!s),f=e.getUint32(p+4,!s),r=new Number(u/f),r.numerator=u,r.denominator=f,r;for(a=[],l=0;l<h;l++)u=e.getUint32(p+8*l,!s),f=e.getUint32(p+4+8*l,!s),a[l]=new Number(u/f),a[l].numerator=u,a[l].denominator=f;return a;case 9:if(1==h)return e.getInt32(t+8,!s);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+4*l,!s);return a;case 10:if(1==h)return e.getInt32(p,!s)/e.getInt32(p+4,!s);for(a=[],l=0;l<h;l++)a[l]=e.getInt32(p+8*l,!s)/e.getInt32(p+4+8*l,!s);return a}}function f(e,t,i){var n=e.getUint16(t,!i);return e.getUint32(t+2+12*n,!i)}function d(e,t,i,n){var s=f(e,t+i,n);if(!s)return{};if(s>e.byteLength)return{};var o=l(e,t,t+s,C,n);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,r=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,a,r)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function c(e,t,i){var s="";for(n=t;n<t+i;n++)s+=String.fromCharCode(e.getUint8(n));return s}function h(e,t){if("Exif"!=c(e,t,4))return m&&console.log("Not valid EXIF data! "+c(e,t,4)),!1;var i,n,s,o,a,r=t+6;if(18761==e.getUint16(r))i=!1;else{if(19789!=e.getUint16(r))return m&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;i=!0}if(42!=e.getUint16(r+2,!i))return m&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(r+4,!i);if(u<8)return m&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!i)),!1;if(n=l(e,r,r+u,y,i),n.ExifIFDPointer){o=l(e,r,r+n.ExifIFDPointer,D,i);for(s in o){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[s]=k[s][o[s]];break;case"ExifVersion":case"FlashpixVersion":o[s]=String.fromCharCode(o[s][0],o[s][1],o[s][2],o[s][3]);break;case"ComponentsConfiguration":o[s]=k.Components[o[s][0]]+k.Components[o[s][1]]+k.Components[o[s][2]]+k.Components[o[s][3]]}n[s]=o[s]}}if(n.GPSInfoIFDPointer){a=l(e,r,r+n.GPSInfoIFDPointer,w,i);for(s in a){switch(s){case"GPSVersionID":a[s]=a[s][0]+"."+a[s][1]+"."+a[s][2]+"."+a[s][3]}n[s]=a[s]}}return n.thumbnail=d(e,r,u,i),n}function p(e){if("DOMParser"in self){var t=new DataView(e);if(m&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var i=2,n=e.byteLength,s=new DOMParser;i<n-4;){if("http"==c(t,i,4)){var o=i-1,a=t.getUint16(i-2)-1,r=c(t,o,a),l=r.indexOf("xmpmeta>")+8;r=r.substring(r.indexOf("<x:xmpmeta"),l);var u=r.indexOf("x:xmpmeta")+10;r=r.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+r.slice(u);return g(s.parseFromString(r,"text/xml"))}i++}}}function _(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var i=0;i<e.attributes.length;i++){var n=e.attributes.item(i);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var s=0;s<e.childNodes.length;s++){var o=e.childNodes.item(s),a=o.nodeName;if(null==t[a])t[a]=_(o);else{if(null==t[a].push){var r=t[a];t[a]=[],t[a].push(r)}t[a].push(_(o))}}return t}function g(e){try{var t={};if(e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children.item(i),s=n.attributes;for(var o in s){var a=s[o],r=a.nodeName,l=a.nodeValue;r!==undefined&&(t[r]=l)}var u=n.nodeName;if("undefined"==typeof t[u])t[u]=_(n);else{if("undefined"==typeof t[u].push){var f=t[u];t[u]=[],t[u].push(f)}t[u].push(_(n))}}else t=e.textContent;return t}catch(d){console.log(d.message)}}var m=!1,b=this,v=function(e){return e instanceof v?e:this instanceof v?void(this.EXIFwrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports.EXIF=v):b.EXIF=v;var D=v.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},y=v.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=v.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},C=v.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},k=v.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},x={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};v.enableXmp=function(){v.isXmpEnabled=!0},v.disableXmp=function(){v.isXmpEnabled=!1},v.getData=function(t,i){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(e(t)?i&&i.call(t):s(t,i),!0)},v.getTag=function(t,i){if(e(t))return t.exifdata[i]},v.getIptcTag=function(t,i){if(e(t))return t.iptcdata[i]},v.getAllTags=function(t){if(!e(t))return{};var i,n=t.exifdata,s={};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s},v.getAllIptcTags=function(t){if(!e(t))return{};var i,n=t.iptcdata,s={};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s},v.pretty=function(t){if(!e(t))return"";var i,n=t.exifdata,s="";for(i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?n[i]instanceof Number?s+=i+" : "+n[i]+" ["+n[i].numerator+"/"+n[i].denominator+"]\r\n":s+=i+" : ["+n[i].length+" values]\r\n":s+=i+" : "+n[i]+"\r\n");return s},v.readFromBinaryFile=function(e){return o(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return v})}.call(this),define("libs/exif",function(){}),define("skins/form/validator/crop_image",["static/utils","./input_base","lib/helpers/overlay/contextual_popup","lib/i18n!front","libs/croppie","jquery-scrollLock","libs/exif"],function(e,t,i,n){var s=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return s.prototype=new t,s.prototype._init=function(){var e=this;if(this.label=$("#"+this.id+"-label"),0===this.label.length)return void console.error("Unable to find the label");if(this.displayError=$("#"+this.id+"-display-error"),0===this.displayError.length)return void console.error("Unable to find display error crop validator");if(this.displayCrop=$("#"+this.id+"-display"),0===this.displayCrop.length)return void console.error("Unable to find display crop validator");if(this.sourceCrop=$("#"+this.id+"-source"),0===this.sourceCrop.length)return void console.error("Unable to find source crop validator");if(this.actionsCrop=$("#"+this.id+"-actions"),0===this.sourceCrop.length)return void console.error("Unable to find actions crop validator")
;this.input_agent=this.getInputAgent(),this.adBlockEnabled=!1;var t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",document.body.appendChild(t),window.setTimeout(function(){0===t.offsetHeight&&(e.adBlockEnabled=!0,$("#message_adblock").removeClass("hidden")),t.remove()},100),this.is_ios=/iPod/.test(navigator.userAgent)&&!window.MSStream,this.uploadCrop=!1,this.lastParentWidth=0,this.lastCropWidth=0,this.width=this.options.width,this.height=this.options.height,this.fit_container=this.options.fit_container,this.imageUploaded=!1,this.resizeTimer=!1,this.crop_to_window_size(),this.sourceCrop.on("change",function(){e.hide_crop(),e.imageUploaded=!1,e.validate()}).prop("disabled",!1),$("."+this.id+"-rotate").on("click",function(){return e.rotate_image(this.dataset.action),!1}),$(window).on("resize",function(){e.on_resize()}),this.options.no_init_validate||this.validate()},s.prototype.showIcon=function(e,t){this.icon?this.icon.removeClass():this.icon=this.displayError.find(".icon-error-content"),this.displayError.removeClass("hidden"),this.icon.addClass("icon-f icf-"+e+" text-"+t);var i=this;i.showError(),i.showWarning(),this.icon.on("mouseover",function(){i.showError(),i.showWarning()})},s.prototype.hideIcon=function(){this.icon&&this.displayError.addClass("hidden")},s.prototype.getInputAgent=function(){return this.label},s.prototype.doValidate=function(){if(this.is_ios)return i.alert(n.__("misc.device_not_compatible"),null,!0),!1;if(this.adBlockEnabled)return i.alert(n.__("misc.please_disabled_adblock"),null,!0),!1;if(0===this.sourceCrop[0].files.length)return!this.options.required||(this.setError(this.getMessage("required","Required")),!1);var t=this.sourceCrop[0].files[0].name;if(!t)return!this.options.required||(this.setError(this.getMessage("required","Required")),!1);if("object"==typeof this.options.extensions&&this.options.extensions.length>0){var s="",o=t.lastIndexOf(".");if(-1===o)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1;if(s=t.substr(o+1).toLowerCase(),!/^[a-z0-1]{2,20}$/.test(s))return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1;var a=!1;for(var r in this.options.extensions)if(this.options.extensions.hasOwnProperty(r)&&this.options.extensions[r].toLowerCase()===s){a=!0;break}if(!a)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(s)})),!1}return!!this.imageUploaded||(this.read_file(),this.getOrientation(),!1)},s.prototype.getOrientation=function(e){var t=this,i={1:0,6:90,3:180,8:-90,2:0,5:90,4:180,7:-90};(new FileReader).onload=function(e){var n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return!1;for(var s=n.byteLength,o=2;o<s;){if(n.getUint16(o+2,!1)<=8)return callback(-1);var a=n.getUint16(o,!1);if(o+=2,65505==a){if(1165519206!=n.getUint32(o+=2,!1))return!1;var r=18761==n.getUint16(o+=6,!1);o+=n.getUint32(o+4,r);var l=n.getUint16(o,r);o+=2;for(var u,f=0;f<l;f++)if(274==n.getUint16(o+12*f,r)){u=n.getUint16(o+12*f+8,r);break}u&&(t.rotate_image(i[u]),[2,5,4,7].indexOf(u)&&t.flip_image("NORMAL"))}else{if(65280!=(65280&a))break;o+=n.getUint16(o,!1)}}return!1}},s.prototype.read_file=function(){var e=this,t=new FileReader;t.onload=function(i){var n=new Image;n.onload=function(){e.imageUploaded=i.target.result,e.update_crop_image(),e.validate()},n.src=t.result},t.readAsDataURL(this.sourceCrop[0].files[0])},s.prototype.show_crop=function(){this.displayCrop.removeClass("hidden"),this.actionsCrop.removeClass("hidden")},s.prototype.hide_crop=function(){this.displayCrop.addClass("hidden"),this.actionsCrop.addClass("hidden")},s.prototype.crop_to_window_size=function(){var e,t,i=this,n=i.sourceCrop.parents("form").innerWidth();if(i.lastParentWidth===n)return!1;if(i.lastParentWidth=n,e=i.width,t=i.height,(i.fit_container||n<300)&&(e=n,t=100*i.height/(100*i.width/n)),i.lastCropWidth===e)return!1;try{i.hide_crop(),i.displayCrop.croppie("destroy"),i.uploadCrop=i.displayCrop.croppie({viewport:{width:e,height:t,type:"square"},enableExif:!0,enableOrientation:!0,boundary:{width:e,height:t},update:function(){i.set_crop_value()}}),i.lastCropWidth=e}catch(s){return console.info(s),!1}return i.displayCrop.children(".cr-boundary .cr-overlay").scrollLock(),!0},s.prototype.update_crop_image=function(){var e=this;this.show_crop(),this.displayCrop.css({visibility:"hidden !important"}),this.uploadCrop.croppie("bind",{url:this.imageUploaded}).then(function(){e.uploadCrop.croppie("setZoom",0),e.displayCrop.css({visibility:"visible"}),e.set_crop_value()})},s.prototype.on_resize=function(){var e=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.crop_to_window_size()&&e.imageUploaded&&e.update_crop_image()},10)},s.prototype.set_crop_value=function(){var e=this;this.uploadCrop.croppie("result",{type:"canvas",size:"original"}).then(function(t){e.input.val(t),e.validate()})},s.prototype.getIconPositionReference=function(){return this.sourceCrop},s.prototype.rotate_image=function(e){this.uploadCrop.croppie("rotate",parseInt(e))},s.prototype.flip_image=function(e){var t=this;t.uploadCrop.croppie("bind",{url:t.imageUploaded,orientation:e})},s}),define("skins/form/validator/date",["config/main","static/utils","lib/tools","./input_base","lib/i18n!front"],function(e,t,i,n,s){var o=function(o,a){if("object"==typeof a){n.apply(this,[o,a]),this.hidden_input=this.input.parent().next();var r=this,l=function(){require(["libs/datetimepicker"],function(){var n=s.__("widget.datepicker.*");for(var o in n)if(n.hasOwnProperty(o)){var l=o.split("_");if(l.length<=1)n[o]=t.unescape(n[o]);else{for(var u=1;u<l.length;u++)l[u]=i.ucfirst(l[u]);l=l.join(""),n[l]=t.unescape(n[o]),delete n[o]}}var f={locale:e.dyn.locale,icons:{time:"glyphicon icon-f icf-clock",date:"glyphicon icon-f icf-calendar",up:"glyphicon icon-f icf-angle-up",down:"glyphicon icon-f icf-angle-down",previous:"glyphicon icon-f icf-chevron-left",next:"glyphicon icon-f icf-chevron-right",today:"glyphicon icon-f icf-arrows",clear:"glyphicon icon-f icf-trash",close:"glyphicon icon-f icf-close"},tooltips:n,allowInputToggle:!0,useCurrent:!1};a.options.with_time?f.format="LLL":f.format="LL",a.options.min_date&&(f.minDate=a.options.min_date),a.options.max_date&&(f.maxDate=a.options.max_date);var d=r.input.val(),c=r.input.parent().datetimepicker(f).on("dp.change",function(e){var t="YYYY-MM-DD";a.options.with_time&&(t+=" HH:mm:ss"),r.hidden_input.val(e.date?e.date.clone().locale("en").format(t):"")});if("string"==typeof d&&d.length>0){var h=0,p=0,_=0,g=0,m=0,b=0,v=d.split(/[ :-]+/);v.length>=3&&(h=parseInt(v[0]),p=parseInt(v[1])-1,_=parseInt(v[2]),v.length>=6&&(g=parseInt(v[3]),m=parseInt(v[4]),b=parseInt(v[5]))),d=new Date(h,p,_,g,m,b),isNaN(d.getTime())||c.data("DateTimePicker").date(d)}r.input.on("blur keyup",function(){r.validate()}),r.getValue().length>0&&r.validate()})};if("en"!==e.dyn.locale){var u=e.dyn.locale;"zh"===u&&(u="zh-cn"),require(["moment","moment/locale/"+u],function(e){e.locale(u),l()})}else l()}};return o.prototype=new n,o.prototype.getInput=function(){return $("#"+this.id)},o.prototype.doValidate=function(e){return!this.options.required||0!==e.length||(this.setError(this.getMessage("required","Required")),!1)},o}),window="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},document=window.document||{},function(e,t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define("libs/emojionearea.min",["jquery"],e):e(t.jQuery)}(function(e){"use strict";function t(e){P?e():I.push(e)}function i(t,i,n){var s=!0,o=1;if(i){i=i.toLowerCase();do{var a=1==o?"@"+i:i;S[t.id][a]&&S[t.id][a].length&&e.each(S[t.id][a],function(e,i){return s=!1!==i.apply(t,n||[])})}while(s&&o--)}return s}function n(t,i,n,s){s=s||function(t,i){return e(i.currentTarget)},e.each(n,function(o,a){o=e.isArray(n)?a:o,(L[t.id][a]||(L[t.id][a]=[])).push([i,o,s])})}function s(e,t,i){var n,s=P.imageType;n="svg"==s?P.imagePathSVG:P.imagePathPNG;var o="";i&&(o=i.substr(1,i.length-2).replace(/_/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));var a="";return t.uc_base&&B>4?(a=t.uc_base,t=t.uc_output.toUpperCase()):a=t,e.replace("{name}",i||"").replace("{friendlyName}",o).replace("{img}",n+(2>B?a.toUpperCase():a)+"."+s).replace("{uni}",t).replace("{alt}",P.convert(t))}function o(e,t,i){return e.replace(/:?\+?[\w_\-]+:?/g,function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var n=P.emojioneList[e];return n?B>4?s(t,n,e):(B>3&&(n=n.unicode),s(t,n[n.length-1],e)):i?"":e})}function a(e){var t,i;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){i=t.getRangeAt(0),i.deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var s,o,a=document.createDocumentFragment();s=n.firstChild;)o=a.appendChild(s);i.insertNode(a),o&&(i=i.cloneRange(),i.setStartAfter(o),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function r(){return window.emojioneVersion||"3.1.2"}function l(e){return"object"==typeof e}function u(e){var t;return e.cacheBustParam?(t=e.cacheBustParam,l(e.jsEscapeMap)?"?v=1.2.4"===t?"2.0.0":"?v=2.0.1"===t?"2.1.0":"?v=2.1.1"===t?"2.1.1":"?v=2.1.2"===t?"2.1.2":"?v=2.1.3"===t?"2.1.3":"?v=2.1.4"===t?"2.1.4":"2.2.7":"1.5.2"):e.emojiVersion}function f(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;case"3.1.0":case"3.1.1":case"3.1.2":case"3.1":default:return 6}}function d(){if(e.fn.emojioneArea&&e.fn.emojioneArea.defaults)return e.fn.emojioneArea.defaults;var t={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!0,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:"SEARCH",container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:"Use the TAB key to insert emoji faster",tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},i=f(P?u(P):r());return t.filters=i>4?{tones:{title:"Diversity",emoji:"open_hands raised_hands clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear nose baby boy girl man woman blond-haired_woman blond_haired_person blond-haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban person_wearing_turban man_wearing_turban woman_police_officer police_officer man_police_officer woman_construction_worker construction_worker man_construction_worker woman_guard guard man_guard woman_detective detective man_detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman woman_bowing person_bowing man_bowing person_tipping_hand man_tipping_hand woman_tipping_hand person_gesturing_no man_gesturing_no woman_gesturing_no person_gesturing_ok man_gesturing_ok woman_gesturing_ok person_raising_hand man_raising_hand woman_raising_hand woman_facepalming man_facepalming person_facepalming woman_shrugging man_shrugging person_shrugging person_pouting man_pouting woman_pouting person_frowning man_frowning woman_frowning person_getting_haircut man_getting_haircut woman_getting_haircut person_getting_massage man_getting_face_massage woman_getting_face_massage levitate dancer man_dancing woman_walking person_walking man_walking woman_running person_running man_running adult child older_adult bearded_person woman_with_headscarf mage fairy vampire merperson elf love_you_gesture palms_up_together woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf snowboarder woman_lifting_weights person_lifting_weights man_lifting_weights woman_cartwheeling man_cartwheeling person_doing_cartwheel woman_bouncing_ball person_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball person_playing_handball woman_golfing person_golfing man_golfing woman_surfing person_surfing man_surfing woman_swimming person_swimming man_swimming woman_playing_water_polo man_playing_water_polo person_playing_water_polo woman_rowing_boat person_rowing_boat man_rowing_boat horse_racing woman_biking person_biking man_biking woman_mountain_biking person_mountain_biking man_mountain_biking woman_juggling man_juggling person_juggling breast_feeding person_in_steamy_room person_climbing person_in_lotus_position woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position bath sleeping_accommodation"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses clown cowboy smirk unamused disappointed pensive worried confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking lying_face grimacing zipper_mouth nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_person older_man older_woman man_with_chinese_cap woman_wearing_turban person_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman woman_bowing person_bowing person_tipping_hand man_tipping_hand person_gesturing_no man_gesturing_no person_gesturing_ok man_gesturing_ok person_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging person_pouting man_pouting person_frowning man_frowning person_getting_haircut man_getting_haircut person_getting_massage man_getting_face_massage levitate dancer man_dancing people_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking person_walking woman_running person_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses closed_umbrella umbrella2 face_with_raised_eyebrow star_struck crazy_face shushing_face face_with_symbols_over_mouth face_with_hand_over_mouth face_vomiting exploding_head face_with_monocle adult child older_adult bearded_person woman_with_headscarf brain billed_cap scarf gloves coat socks love_you_gesture palms_up_together woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella giraffe zebra hedgehog sauropod t_rex cricket"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder woman_lifting_weights person_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling man_cartwheeling woman_bouncing_ball person_bouncing_ball woman_playing_handball man_playing_handball woman_golfing person_golfing woman_surfing person_surfing woman_swimming person_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat person_rowing_boat horse_racing woman_biking person_biking woman_mountain_biking person_mountain_biking running_shirt_with_sash medal military_medal first_place second_place third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling video_game slot_machine sled breast_feeding curling_stone woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock orange_heart"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond white_square_button black_square_button black_small_square white_small_square black_medium_small_square white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:"Flags",emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf united_nations england scotland wales"}}:{tones:{title:"Diversity",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",
emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne sake tea coffee baby_bottle fork_and_knife fork_knife_plate"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin clapper video_game space_invader dart game_die slot_machine bowling"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain black_nib pencil pencil2 crayon paintbrush mag mag_right"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble"},flags:{icon:"flag_gb",title:"Flags",emoji:"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc "}},t}function c(t){var i=d();if(t&&t.filters){var n=i.filters;e.each(t.filters,function(t,i){return!l(i)||e.isEmptyObject(i)?void delete n[t]:void e.each(i,function(e,i){n[t][e]=i})}),t.filters=n}return e.extend({},i,t)}function h(e,t){return e.replace(j,function(e){var i=P[0===B?"jsecapeMap":"jsEscapeMap"];return void 0!==e&&e in i?s(t,i[e]):e})}function p(e,t){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>"),t.shortnames&&(e=P.shortnameToUnicode(e)),h(e,t.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function _(e,t){switch(e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(R,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),t.saveEmojisAs){case"image":e=h(e,t.emojiTemplate);break;case"shortname":e=P.toShort(e)}return e}function g(){var e=this,t=e.editor[0].offsetWidth-e.editor[0].clientWidth,i=parseInt(e.button.css("marginRight"));i!==t&&(e.button.css({marginRight:t}),e.floatingPicker&&e.picker.css({right:parseInt(e.picker.css("right"))-i+t}))}function m(){var t=this;if(!t.sprite&&t.lasyEmoji[0]){var i=t.picker.offset().top,n=i+t.picker.height()+20;t.lasyEmoji.each(function(){var t=e(this),s=t.offset().top;s>i&&n>s&&t.attr("src",t.data("src")).removeClass("lazy-emoji")}),t.lasyEmoji=t.lasyEmoji.filter(".lazy-emoji")}}function b(e,t){return(t?"":".")+O+(e?"-"+e:"")}function v(t){var i=e("<div/>",l(t)?t:{"class":b(t,!0)});return e.each(A.call(arguments).slice(1),function(t,n){e.isFunction(n)&&(n=n.call(i)),n&&e(n).appendTo(i)}),i}function D(){return localStorage.getItem("recent_emojis")||""}function y(t,i){var n=D();if(!t.recent||t.recent!==n||i){if(n.length){var s,a,r=t.scrollArea.is(".skinnable");r||(s=t.scrollArea.scrollTop(),i&&t.recentCategory.show(),a=t.recentCategory.is(":visible")?t.recentCategory.height():0);var l=o(n,t.emojiBtnTemplate,!0).split("|").join("");if(t.recentCategory.children(".emojibtn").remove(),e(l).insertAfter(t.recentCategory.children(".emojionearea-category-title")),t.recentCategory.children(".emojibtn").on("click",function(){t.trigger("emojibtn.click",e(this))}),t.recentFilter.show(),!r){t.recentCategory.show();var u=t.recentCategory.height();a!==u&&t.scrollArea.scrollTop(s+u-a)}}else t.recentFilter.hasClass("active")&&t.recentFilter.removeClass("active").next().addClass("active"),t.recentCategory.hide(),t.recentFilter.hide();t.recent=n}}function w(e,t){var i=D(),n=i.split("|"),s=n.indexOf(t);-1!==s&&n.splice(s,1),n.unshift(t),n.length>9&&n.pop(),localStorage.setItem("recent_emojis",n.join("|")),y(e)}function C(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(T){return!1}}function k(t,s,r){t.options=r=c(r),t.sprite=r.sprite&&3>B,t.inline=null===r.inline?s.is("INPUT"):r.inline,t.shortnames=r.shortnames,t.saveEmojisAs=r.saveEmojisAs,t.standalone=r.standalone,t.emojiTemplate='<img alt="{alt}" class="emojione'+(t.sprite?'-{uni}" src="'+M+'"/>':'emoji" src="{img}"/>'),t.emojiTemplateAlt=t.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',t.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+t.emojiTemplateAlt+"</i>",t.recentEmojis=r.recentEmojis&&C();var u=r.pickerPosition;t.floatingPicker="top"===u||"bottom"===u,t.source=s,(s.is(":disabled")||s.is(".disabled"))&&t.disable();var f,d,h,k,x,F,T,S,L,I,A=s.is("TEXTAREA")||s.is("INPUT")?"val":"text",j=v("tones",r.tones?function(){this.addClass(b("tones-"+r.tonesStyle,!0));for(var t=0;5>=t;t++)this.append(e("<i/>",{"class":"btn-tone btn-tone-"+t+(t?"":" active"),"data-skin":t,role:"button"}))}:null),V=v({"class":O+(t.standalone?" "+O+"-standalone ":" ")+(s.attr("class")||""),role:"application"},f=t.editor=v("editor").attr({contenteditable:!t.standalone,placeholder:r.placeholder||s.data("placeholder")||s.attr("placeholder")||"",tabindex:0}),d=t.button=v("button",v("button-open"),v("button-close")).attr("title",r.buttonTitle),h=t.picker=v("picker",v("wrapper",k=v("filters"),r.search?F=v("search-panel",v("search",r.search?function(){t.search=e("<input/>",{placeholder:r.searchPlaceholder||"",type:"text","class":"search"}),this.append(t.search)}:null),j):null,I=v("scroll-area",r.tones&&!r.search?v("tones-panel",j):null,T=v("emojis-list")))).addClass(b("picker-position-"+r.pickerPosition,!0)).addClass(b("filters-position-"+r.filtersPosition,!0)).addClass(b("search-position-"+r.searchPosition,!0)).addClass("hidden"));r.search&&F.addClass(b("with-search",!0)),t.searchSel=null,f.data(s.data()),e.each(r.attributes,function(e,t){f.attr(e,t)});var N=v("category-block").attr({"data-tone":0}).prependTo(T);if(e.each(r.filters,function(i,n){var s=0;if("recent"!==i||t.recentEmojis){if("tones"!==i)e("<i/>",{"class":b("filter",!0)+" "+b("filter-"+i,!0),"data-filter":i,title:n.title}).wrapInner(o(n.icon,t.emojiTemplateAlt)).appendTo(k);else{if(!r.tones)return;s=5}do{var a,l=n.emoji.replace(/[\s,;]+/g,"|");a=0===s?v("category").attr({name:i,"data-tone":s}).appendTo(N):v("category-block").attr({name:i,"data-tone":s}).appendTo(T),s>0&&(a.hide(),l=l.split("|").join("_tone"+s+"|")+"_tone"+s),"recent"===i&&(l=D()),l=o(l,t.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),a.html(l),e('<div class="emojionearea-category-title"/>').text(n.title).prependTo(a)}while(--s>0)}}),r.filters=null,t.sprite||(t.lasyEmoji=T.find(".lazy-emoji")),x=k.find(b("filter")),x.eq(0).addClass("active"),L=T.find(b("category-block")),S=T.find(b("category")),t.recentFilter=x.filter('[data-filter="recent"]'),t.recentCategory=S.filter("[name=recent]"),t.scrollArea=I,r.container?e(r.container).wrapInner(V):V.insertAfter(s),r.hideSource&&s.hide(),t.setText(s[A]()),s[A](t.getText()),g.apply(t),t.standalone&&!t.getText().length){var q=e(s).data("emoji-placeholder")||r.emojiPlaceholder;t.setText(q),f.addClass("has-placeholder")}n(t,T.find(".emojibtn"),{click:"emojibtn.click"}),n(t,window,{resize:"!resize"}),n(t,j.children(),{click:"tone.click"}),n(t,[h,d],{mousedown:"!mousedown"},f),n(t,d,{click:"button.click"}),n(t,f,{paste:"!paste"},f),n(t,f,["focus","blur"],function(){return!t.stayFocused&&f}),n(t,h,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),n(t,f,["mousedown","mouseup","click","keyup","keydown","keypress"]),n(t,h.find(".emojionearea-filter"),{click:"filter.click"}),n(t,s,{change:"source.change"}),r.search&&n(t,t.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"});var z=!1;if(I.on("scroll",function(){if(!z&&(m.call(t),I.is(":not(.skinnable)"))){var i=S.eq(0),n=I.offset().top;S.each(function(t,s){return!(e(s).offset().top-n>=10)&&void(i=e(s))});var s=x.filter('[data-filter="'+i.attr("name")+'"]');s[0]&&!s.is(".active")&&(x.removeClass("active"),s.addClass("active"))}}),t.on("@filter.click",function(e){var i=e.is(".active");if(I.is(".skinnable")){if(i)return;j.children().eq(0).click()}z=!0,i||(x.filter(".active").removeClass("active"),e.addClass("active"));var n=S.filter('[name="'+e.data("filter")+'"]').offset().top,s=I.scrollTop(),o=I.offset().top;I.stop().animate({scrollTop:n+s-o-2},200,"swing",function(){m.call(t),z=!1})}).on("@picker.show",function(){t.recentEmojis&&y(t),m.call(t)}).on("@tone.click",function(e){j.children().removeClass("active");var i=e.addClass("active").data("skin");i?(I.addClass("skinnable"),L.hide().filter("[data-tone="+i+"]").show(),x.removeClass("active")):(I.removeClass("skinnable"),L.hide().filter("[data-tone=0]").show(),x.eq(0).click()),m.call(t),r.search&&t.trigger("search.keypress")}).on("@button.click",function(e){e.is(".active")?t.hidePicker():(t.showPicker(),t.searchSel=null)}).on("@!paste",function(n,s){var o=function(s){var o="caret-"+(new Date).getTime(),r=p(s,t);a(r),a('<i id="'+o+'"></i>'),n.scrollTop(u);var l=e("#"+o),f=l.offset().top-n.offset().top,d=n.height();(u+f>=d||u>f)&&n.scrollTop(u+f-2*d/3),l.remove(),t.stayFocused=!1,g.apply(t),i(t,"paste",[n,s,r])};if(s.originalEvent.clipboardData){var r=s.originalEvent.clipboardData.getData("text/plain");return o(r),s.preventDefault?s.preventDefault():s.stop(),s.returnValue=!1,s.stopPropagation(),!1}t.stayFocused=!0,a("<span>"+R+"</span>");var l=$(n[0]),u=n.scrollTop(),f=e("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(e("BODY")).focus();window.setTimeout(function(){n.focus(),E(n[0],l);var e=_(f.html().replace(/\r\n|\n|\r/g,"<br>"),t);f.remove(),o(e)},200)}).on("@emojibtn.click",function(e){f.removeClass("has-placeholder"),null!==t.searchSel&&(f.focus(),E(f[0],t.searchSel),t.searchSel=null),t.standalone?(f.html(o(e.data("name"),t.emojiTemplate)),t.trigger("blur")):($(f[0]),a(o(e.data("name"),t.emojiTemplate))),t.recentEmojis&&w(t,e.data("name")),t.trigger("search.keypress")}).on("@!resize @keyup @emojibtn.click",g).on("@!mousedown",function(i,n){return e(n.target).hasClass("search")?(t.stayFocused=!0,null===t.searchSel&&(t.searchSel=$(i[0]))):(V.is(".focused")||i.focus(),n.preventDefault()),!1}).on("@change",function(){var e=t.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");e.length&&!/^<br[^>]*>$/i.test(e)||t.editor.html(t.content=""),s[A](t.getText())}).on("@source.change",function(){t.setText(s[A]()),i("change")}).on("@focus",function(){V.addClass("focused")}).on("@blur",function(){V.removeClass("focused"),r.hidePickerOnBlur&&t.hidePicker();var e=t.editor.html();t.content!==e?(t.content=e,i(t,"change",[t.editor]),s.blur().trigger("change")):s.blur(),r.search&&(t.search.val(""),t.trigger("search.keypress",!0))}),r.search&&t.on("@search.focus",function(){t.stayFocused=!0,t.search.addClass("focused")}).on("@search.keypress",function(i){var n=h.find(".emojionearea-filter"),s=r.tones?j.find("i.active").data("skin"):0,o=t.search.val().replace(/ /g,"_").replace(/"/g,'\\"');o&&o.length?(t.recentFilter.hasClass("active")&&t.recentFilter.removeClass("active").next().addClass("active"),t.recentCategory.hide(),t.recentFilter.hide(),L.each(function(){var t=function(e,t){var i=e.find('.emojibtn[data-name*="'+o+'"]');if(0===i.length)e.data("tone")===t&&e.hide(),n.filter('[data-filter="'+e.attr("name")+'"]').hide();else{e.find('.emojibtn:not([data-name*="'+o+'"])').hide(),i.show(),e.data("tone")===t&&e.show(),n.filter('[data-filter="'+e.attr("name")+'"]').show()}},i=e(this);0===i.data("tone")?S.filter(':not([name="recent"])').each(function(){t(e(this),0)}):t(i,s)}),z?m.call(t):I.trigger("scroll")):(y(t,!0),L.filter('[data-tone="'+j.find("i.active").data("skin")+'"]:not([name="recent"])').show(),e(".emojibtn",L).show(),n.show(),i||m.call(t))}).on("@search.blur",function(){t.stayFocused=!1,t.search.removeClass("focused"),t.trigger("blur")}),r.shortcuts&&t.on("@keydown",function(e,i){i.ctrlKey||(9==i.which?(i.preventDefault(),d.click()):27==i.which&&(i.preventDefault(),d.is(".active")&&t.hidePicker()))}),l(r.events)&&!e.isEmptyObject(r.events)&&e.each(r.events,function(e,i){t.on(e.replace(/_/g,"."),i)}),r.autocomplete){var H=function(){var i={maxCount:r.textcomplete.maxCount,placement:r.textcomplete.placement};r.shortcuts&&(i.onKeydown=function(e,t){return e.ctrlKey||13!=e.which?void 0:t.KEY_ENTER});var n=e.map(P.emojioneList,function(e,t){return r.autocompleteTones?t:/_tone[12345]/.test(t)?null:t});n.sort(),f.textcomplete([{id:O,match:/\B(:[\-+\w]*)$/,search:function(t,i){i(e.map(n,function(e){return 0===e.indexOf(t)?e:null}))},template:function(e){return o(e,t.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return o(e,t.emojiTemplate)},cache:!0,index:1}],i),r.textcomplete.placement&&"static"==e(f.data("textComplete").option.appendTo).css("position")&&e(f.data("textComplete").option.appendTo).css("position","relative")},U=function(){if(t.disabled){var e=function(){t.off("enabled",e),H()};t.on("enabled",e)}else H()};e.fn.textcomplete?U():e.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:U})}t.inline&&(V.addClass(b("inline",!0)),t.on("@keydown",function(e,t){13==t.which&&t.preventDefault()})),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),t.isReady=!0,t.trigger("onLoad",f),t.trigger("ready",f)}function x(i){var n=r();if(i=c(i),!V.isLoading)if(!P||f(u(P))<2){V.isLoading=!0;var s;s=f(n)>5?V.defaultBase3+"npm/emojione@"+n:f(n)>4?V.defaultBase3+"emojione/"+n:V.defaultBase+"/"+n,e.ajax({url:s+"/lib/js/emojione.min.js",dataType:"script",cache:!0,success:function(){P=window.emojione,n=u(P),B=f(n);var t;for(B>4?(V.base=V.defaultBase3+"emojione/assets/"+n,t=V.base+"/sprites/emojione-sprite-"+P.emojiSize+".css"):(V.base=V.defaultBase+n+"/assets",t=V.base+"/sprites/emojione.sprites.css"),i.sprite&&(document.createStyleSheet?document.createStyleSheet(t):e("<link/>",{rel:"stylesheet",href:t}).appendTo("head"));I.length;)I.shift().call();V.isLoading=!1}})}else n=u(P),B=f(n),V.base=B>4?V.defaultBase3+"emojione/assets/"+n:V.defaultBase+n+"/assets";t(function(){var e="";i.useInternalCDN&&(B>4&&(e=P.emojiSize+"/"),P.imagePathPNG=V.base+"/png/"+e,P.imagePathSVG=V.base+"/svg/"+e,P.imagePathSVGSprites=V.base+"/sprites/emojione.sprites.svg",P.imageType=i.imageType),f(n)>4?(j=P.regUnicode,P.imageType=i.imageType||"png"):j=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+P.unicodeRegexp+")","gi")})}function F(t,n){n=n.replace(/^@/,"");var s=t.id;L[s][n]&&(e.each(L[s][n],function(s,o){e.each(e.isArray(o[0])?o[0]:[o[0]],function(s,a){e(a).on(o[1],function(){var s=A.call(arguments),a=e.isFunction(o[2])?o[2].apply(t,[n].concat(s)):o[2];a&&i(t,n,[a].concat(s))})})}),L[s][n]=null)}var $,E,T=0,S={},L={},P=window.emojione,I=[],M="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",A=[].slice,O="emojionearea",B=0,R="&#8203;";window.getSelection&&document.createRange?($=function(e){var t=window.getSelection&&window.getSelection();return t&&t.rangeCount>0?t.getRangeAt(0):void 0},E=function(e,t){var i=document.createRange();i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),t=window.getSelection(),t.removeAllRanges(),t.addRange(i)}):document.selection&&document.body.createTextRange&&($=function(e){return document.selection.createRange()},E=function(e,t){var i=document.body.createTextRange();i.moveToElementText(e),i.setStart(t.startContanier,t.startOffset),i.setEnd(t.endContainer,t.endOffset),i.select()});var j,V={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:!1},N=function(e,i){var n=this;x(i),S[n.id=++T]={},L[n.id]={},t(function(){k(n,e,i)})};N.prototype.on=function(t,i){if(t&&e.isFunction(i)){var n=this;e.each(t.toLowerCase().split(" "),function(e,t){F(n,t),(S[n.id][t]||(S[n.id][t]=[])).push(i)})}return this},N.prototype.off=function(t,i){if(t){var n=this.id;e.each(t.toLowerCase().replace(/_/g,".").split(" "),function(t,s){S[n][s]&&!/^@/.test(s)&&(i?e.each(S[n][s],function(e,t){t===i&&(S[n][s]=S[n][s].splice(e,1))}):S[n][s]=[])})}return this},N.prototype.trigger=function(){var e=A.call(arguments),t=[this].concat(e.slice(0,1));return t.push(e.slice(1)),i.apply(this,t)},N.prototype.setFocus=function(){var e=this;return t(function(){e.editor.focus()}),e},N.prototype.setText=function(e){var n=this;return t(function(){n.editor.html(p(e,n)),n.content=n.editor.html(),i(n,"change",[n.editor]),g.apply(n)}),n},N.prototype.getText=function(){return _(this.editor.html(),this)},N.prototype.showPicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.picker.removeClass("hidden"),e._sh_timer=window.setTimeout(function(){e.button.addClass("active")},50),i(e,"picker.show",[e.picker]),e},N.prototype.hidePicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.button.removeClass("active"),e._sh_timer=window.setTimeout(function(){e.picker.addClass("hidden")},500),i(e,"picker.hide",[e.picker]),e},N.prototype.enable=function(){var e=this,t=function(){e.disabled=!1,e.editor.prop("contenteditable",!0),e.button.show();var t=e[e.standalone?"button":"editor"];t.parent().removeClass("emojionearea-disable"),i(e,"enabled",[t])};return e.isReady?t():e.on("ready",t),e},N.prototype.disable=function(){var e=this;e.disabled=!0;var t=function(){e.editor.prop("contenteditable",!1),e.hidePicker(),e.button.hide();var t=e[e.standalone?"button":"editor"];t.parent().addClass("emojionearea-disable"),i(e,"disabled",[t])};return e.isReady?t():e.on("ready",t),e},e.fn.emojioneArea=function(t){return this.each(function(){return this.emojioneArea?this.emojioneArea:(e.data(this,"emojioneArea",this.emojioneArea=new N(e(this),t)),this.emojioneArea)})},e.fn.emojioneArea.defaults=d(),e.fn.emojioneAreaText=function(i){i=c(i);var n=this,s={shortnames:!i||"undefined"==typeof i.shortnames||i.shortnames,emojiTemplate:'<img alt="{alt}" class="emojione'+(i&&i.sprite&&3>B?'-{uni}" src="'+M:'emoji" src="{img}')+'"/>'};return x(i),t(function(){n.each(function(){var t=e(this);return t.hasClass("emojionearea-text")||t.addClass("emojionearea-text").html(p(t.is("TEXTAREA")||t.is("INPUT")?t.val():t.text(),s)),t})}),this}},window),define("skins/form/validator/string",["static/console","./input_base","skins/form/show_pass"],function(e,t,i){var n=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return n.prototype=new t,n.prototype._init=function(){var e=this;this.options.show_emojis&&this.show_emojis(),this.input.on("blur keyup input",function(){e.validate()}),this.options.show_char_count&&this.initCounter(),this.options.password_viewable&&i["new"](this.input),this.options.no_init_validate||this.validate()},n.prototype.doValidate=function(e){return this.counter&&(this.counter.removeClass("text-danger").children(".count").html(e.length),0===e.length?this.counter.addClass("empty"):this.counter.removeClass("empty")),this.options.required&&0===e.length?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("required","Required")),!1):this.options.min_length>0&&e.length<this.options.min_length&&(this.options.required||e.length>0)?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("min_length","Too short (%nb_chars% min)",{"%value%":'"'+this.strimwidth(e,20)+'"',"%nb_chars%":this.options.min_length})),!1):this.options.max_length>0&&e.length>this.options.max_length?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_length","Too long (%nb_chars% max)",{"%value%":'"'+this.strimwidth(e,20)+'"',"%nb_chars%":this.options.max_length})),!1):!(this.options.max_lines>0&&e.split("\n").length>this.options.max_lines)||(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_lines","Too many lines (max %nb_lines%).",{
"%nb_lines%":this.options.max_lines})),!1)},n.prototype.counter=!1,n.prototype.initCounter=function(){var e=this.options.max_length>0&&this.options.max_length;this.counter=$("<span class='floating-count'><span class='count'></span>"+(e?"<span class='max'>/"+e+"</span>":"")+"</span>"),this.counter.insertAfter(this.input);var t=this.input.parent();t.hasClass("input-group")&&(t=t.parent()),t.addClass("has-floating-count")},n.prototype.show_emojis=function(){var t=this;require(["libs/emojione.min"],function(){require(["libs/emojionearea.min"],function(){var i=$('<div id="'+t.id+'_emoji"></div>');i.insertAfter(t.input);try{emojione.sprites=!0,emojione.ascii=!0,$(t.input).emojioneArea({container:i,hideSource:!0,useInternalCDN:!0,sprite:!0,autocomplete:!0,shortnames:!0,saveEmojisAs:"shortname",textcomplete:{maxCount:12},attributes:{spellcheck:!0,autocorrect:"on",autocomplete:"on"},events:{keyup:function(e,i){this.trigger("change",[e]),t.validate()},blur:function(e,i){this.trigger("change",[e]),t.validate()}}})}catch(n){e.log("emojionearea textarea init failed : "+n.message,"Validator",null,n)}},function(t){e.log("failed to load and init emojionearea","Validator",t)})},function(t){e.log("failed to load and init emojionearea","Validator",t)})},n.prototype.getIconPositionReference=function(){return this.options.show_emojis&&$("#"+this.id+"_emoji .emojionearea-editor").length>0?$($("#"+this.id+"_emoji .emojionearea.form-control")[0]):t.prototype.getIconPositionReference.apply(this)},n}),define("skins/form/validator/email",["static/utils","./string"],function(e,t){var i=function(e,i){t.apply(this,[e,i])};return i.prototype=new t,i.prototype.doValidate=function(i){return!!t.prototype.doValidate.apply(this,[i])&&(!!i.match(this.getRegexp(this.options.regex))||(this.setError(this.getMessage("invalid","Invalid email address",{"%email%":e.escape(i)})),!1))},i}),define("skins/form/validator/file_validator",["static/utils","./input_base"],function(e,t){var i=function(e,i){"object"==typeof i&&(t.apply(this,[e,i]),this._init())};return i.prototype=new t,i.prototype._init=function(){var e=this;this.input.on("change input",function(){e.validate()}),this.options.no_init_validate||this.validate()},i.prototype.doValidate=function(t){if(this.options.required&&0===t.length)return this.setError(this.getMessage("required","Required")),!1;if(t.length>0&&"object"==typeof this.options.extensions&&this.options.extensions.length>0){var i="",n=t.lastIndexOf(".");if(-1===n)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1;if(i=t.substr(n+1).toLowerCase(),!/^[a-z0-1]{2,20}$/.test(i))return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1;var s=!1;for(var o in this.options.extensions)if(this.options.extensions.hasOwnProperty(o)&&this.options.extensions[o].toLowerCase()===i){s=!0;break}if(!s)return this.setError(this.getMessage("extensions","Invalid extension (%extension%).",{"%extension%":e.escape(i)})),!1}return!0},i}),define("skins/form/validator/integer",["./input_base"],function(e){var t=function(t,i){if("object"==typeof i){e.apply(this,[t,i]);var n=this;this.input.on("blur keyup input",function(){n.validate()}),this.validate()}};return t.prototype=new e,t.prototype.doValidate=function(e){return 0===e.length?!this.options.required||(this.setError(this.getMessage("required","Required")),!1):e.match(/^\d+$/g)?(e=parseInt(e),null!==this.options.min&&e<this.options.min?(this.setError(this.getMessage("min","Must be greater than %min%",{"%value%":e.toString(),"%min%":this.options.min})),!1):!(this.options.max>0&&e>this.options.max)||(this.setError(this.getMessage("max","Must be less than %max%",{"%value%":e.toString(),"%max%":this.options.max})),!1)):(this.setError(this.getMessage("invalid","Invalid",{"%value%":this.strimwidth(e,20)})),!1)},t}),define("skins/form/validator/language_alphabet",["static/utils","./base","lib/i18n!front"],function(e,t,i){var n=function(e,i){t.apply(this,[e,i]);var n=e.getRoot();if(this.langinput=$("#"+n.form.prop("id")+"_"+i.options.language_field.replace(/\|/g,"_")),0!==this.langinput.length&&(this.textinput=$("#"+n.form.prop("id")+"_"+i.options.text_field.replace(/\|/g,"_")),0!==this.textinput.length&&(this.validator=this.textinput.data("validator"),this.validator))){var s=this;this.validator.setupXhr("check_alphabet","/account/checkalphabet",["text","lang"],1),this.validator.setXhrOtherParam("check_alphabet","min_threshold",i.options.min_threshold),this.validator.setXhrOtherParam("check_alphabet","message",i.messages.wrong_alphabet),this.options.mismatch_warning&&this.validator.addXhrSuccessCallback("check_alphabet",function(e,t){if(!e||!t.lang||"unk"===$.trim(s.langinput.val())||"unk"===t.lang)return void s.validator.clearWarning();t.lang!==$.trim(s.langinput.val())?s.validator.setWarning("<span>"+s.options.mismatch_warning+"</span>"):s.validator.clearWarning()});var o=this.validator.doValidate;this.validator.doValidate=function(e){return s.validator.setXhrOtherValues("check_alphabet",[$.trim(s.langinput.val())]),o.apply(this,[e])},this.langinput.on("change",function(){s.validator.validate()}),this.validator.validate(),this.textinput.trigger("alphabet-validator-init")}};return n.prototype=new t,n.prototype.isValid=function(){return!0},n.prototype.focus=function(){this.validator.focus&&this.validator.focus()},n}),define("skins/form/validator/number",["./input_base"],function(e){var t=function(t,i){if("object"==typeof i){e.apply(this,[t,i]);var n=this;this.input.on("blur keyup input",function(){n.validate()}),this.validate()}};return t.prototype=new e,t.prototype.doValidate=function(e){return 0===e.length?!this.options.required||(this.setError(this.getMessage("required","Required")),!1):e.match(/^\d+(\.\d+)?$/g)?(e=parseFloat(e),null!==this.options.min&&e<this.options.min?(this.setError(this.getMessage("min","Must be greater than %min%",{"%value%":e.toString(),"%min%":this.options.min})),!1):!(this.options.max>0&&e>this.options.max)||(this.setError(this.getMessage("max","Must be less than %max%",{"%value%":e.toString(),"%max%":this.options.max})),!1)):(this.setError(this.getMessage("invalid","Invalid",{"%value%":this.strimwidth(e,20)})),!1)},t}),define("skins/form/validator/password",["./string"],function(e){var t=function(e,t){if(0===e.length)return 0;for(var i=e.split(""),n={Excess:0,Lower:0,Upper:0,Numbers:0,Symbols:0},s={Excess:4,Lower:2,Upper:4,Numbers:5,Symbols:10,Combo:0,FlatLower:0,FlatNumber:0},o=0;o<i.length;o++)i[o].match(/[A-Z]/g)?n.Upper++:i[o].match(/[a-z]/g)?n.Lower++:i[o].match(/[0-9]/g)?n.Numbers++:i[o].match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/)&&n.Symbols++;return n.Excess=i.length-t,n.Lower&&n.Upper&&n.Numbers&&n.Symbols?s.Combo=25:(n.Upper&&n.Numbers||n.Upper&&n.Symbols||n.Numbers&&n.Symbols)&&(s.Combo=15),e.match(/^[\sa-z]+$/)&&(s.FlatLower=-15),e.match(/^[\s0-9]+$/)&&(s.FlatNumber=-35),n.Excess*s.Excess+n.Lower*s.Lower+n.Upper*s.Upper+n.Numbers*s.Numbers+n.Symbols*s.Symbols+s.Combo+s.FlatLower+s.FlatNumber},i=function(t,i){if(i.options.check_strength){var n=$('<div class="progress progress-pwd-check"><div class="progress-bar progress-bar-danger" style="width:15%"></div></div>');this.progress=n.children()}e.apply(this,[t,i]),i.options.check_strength&&(this.last_strength=null,n.insertAfter(this.input.addClass("input-pwd-check")))};return i.prototype=new e,i.prototype.doValidate=function(i){if(this.options.check_strength){var n=t(i,this.options.min_length);this.progress.width(Math.max(0,Math.min(100,n))+"%").removeClass().addClass("progress-bar"),n>=90?this.progress.addClass("progress-bar-success"):n<25?this.progress.addClass("progress-bar-danger"):n<50?this.progress.addClass("progress-bar-warning"):n<75&&this.progress.addClass("progress-bar-info"),"function"==typeof this.onStrengthChange&&this.last_strength!==n&&this.onStrengthChange(n),this.last_strength=n}return e.prototype.doValidate.apply(this,[i])},i.prototype.onStrengthChange=null,i}),define("skins/form/validator/profile_name",["config/main","static/utils","./string"],function(e,t,i){var n=function(e,t){this.setupXhr("profile_name","/account/checkprofilename","profile"),i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])&&(!!e.replace(/ /g,"_").match(this.getRegexp(this.options.regex))||(this.setError(this.getMessage("name_invalid","Invalid profile name",{"%name%":t.escape(e)})),!1))},n}),define("skins/form/validator/regex",["static/utils","./string"],function(e,t){var i=function(e,i){t.apply(this,[e,i])};return i.prototype=new t,i.prototype.doValidate=function(i){if(!t.prototype.doValidate.apply(this,[i]))return!1;if(0===i.length&&!this.options.required)return!0;var n=i.match(this.getRegexp(this.options.pattern));return!(this.options.must_match&&!n||!this.options.must_match&&n)||(this.setError(this.getMessage("invalid","Invalid",{"%value%":e.escape(i)})),!1)},i}),define("skins/form/validator/profile_website",["config/main","static/utils","./regex"],function(e,t,i){var n=function(e,t){i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){if(!i.prototype.doValidate.apply(this,[e]))return!1;e=e.toLowerCase(),"http://"===e.substr(0,7)?e=e.substr(7):"https://"===e.substr(0,8)&&(e=e.substr(8));var t=e.indexOf("/");t>-1&&(e=e.substr(0,t));for(var n in this.options.blacklisted_domains)if(e.indexOf(this.options.blacklisted_domains[n].toLocaleLowerCase())>-1)return this.setError(this.getMessage("blacklisted","This domain is not allowed")),!1;return!0},n}),define("skins/form/validator/region",["lib/tools","static/dom","lib/converter","./input_base"],function(e,t,i,n){var s={},o=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push({code:i,name:e[i]});return t.sort(function(e,t){return e.name>t.name?1:-1}),t},a=function(e,t){var i=e.getRoot();if(this.country_select=$("#"+i.form.prop("id")+"_"+t.options.country_field.replace(/\|/g,"_")),0===this.country_select.length)return void console.error("Cannot find country validator");this.cur_country=this.country_select.val(),this.cur_xhr=null,this.help=null,n.apply(this,[e,t]);var s=this;this.country_select.on("change",function(){s.validate()}),this.input.on("change",function(){s.validate()})};return a.prototype=new n,a.prototype.getInput=function(){var e=this.parent.getRoot();return $("#"+e.form.prop("id")+"_"+this.options.region_field.replace(/\|/g,"_"))},a.prototype.doValidate=function(t){if(this.options.required&&e.isEmpty(t.length))return this.setError(this.getMessage("required","Required")),!1;var i=this.country_select.val();if(this.cur_country===i)return!0;if(this.input.val("").empty().append('<option value=""></option>'),e.isEmpty(i))return this.setRegions({}),!0;if(this.help&&this.help.hide(),"undefined"!=typeof s[i])return this.setRegions(s[i]),!0;this.cur_xhr&&this.cur_xhr.abort();var n=this;return this.setLoading(),this.cur_xhr=$.getJSON("/account/getregions",{country:i},function(e){if(!e.result){if(1!==e.code)return void n.setError(e.message);e.regions={}}var t=o(e.regions);s[i]=t,n.cur_country=i,n.cur_xhr=null,n.setRegions(t),n.validate()}).fail(function(){n.setError(i18n.__("loading.error"))}),!0},a.prototype.setRegions=function(e){for(var t in e)this.input.append('<option value="'+e[t].code+'">'+e[t].name+"</option>");if(this.input.prop("disabled",0===e.length),0===e.length)if(this.help)this.help.show();else{var i=this.input,n=this.input.parent();n.hasClass("input-group")&&(i=n);var s=this.country_select.children('option[value="'+this.cur_country+'"]').text();i.after('<span class="help-block">'+this.getMessage("no_region_for_country"," No known region for country %country%.",{"%country%":s})+"</span>")}},a}),define("skins/form/validator/remote_file",["./string"],function(e){var t=function(t,i){e.apply(this,[t,i])};return t.prototype=new e,t.prototype.doValidate=function(t){if(!e.prototype.doValidate.apply(this,[t]))return!1;if(!this.options.required&&0===t.length)return!0;var i=t.indexOf("://");return-1===i?(this.setError(this.getProtocolErrorMessage()),!1):-1!==$.inArray(t.substr(0,i),this.options.protocols)||(this.setError(this.getProtocolErrorMessage()),!1)},t.prototype.getProtocolErrorMessage=function(){var e=[];for(var t in this.options.protocols)e.push("'"+this.options.protocols[t]+"://'");return this.getMessage("invalid_protocol","Invalid URL. It must start with one of the following protocols: %protocols%.",{"%protocols%":e.join(", ")})},t}),define("text!skins/form/widget/tag_adder/tag.mustache",[],function(){return'<div class="tag" data-elem="tag" data-value="{{ value }}">\n\t<span class="del" data-role="remove">\n\t\t<span class="icon-f icf-close"></span>\n\t</span>\n\t<span class="txt">{{ displayed }}</span>\n</div>'}),define("skins/form/widget/tag_adder",["mustache","config/main","static/utils","lib/tools","lib/helpers/popup","lib/i18n!front","text!./tag_adder/tag.mustache"],function(e,t,i,n,s,o,a){var r=function(e){if(this.container=$(e).first(),!(this.container.length<1)){this.input_txt=this.container.find("input[type='text']"),this.input_hdn=this.container.find("input[type='hidden']"),this.btn_add=this.container.find("button[data-role='add']"),this.legend=this.container.find(".tag-adder-legend");var t=this.input_hdn.data("options");"object"==typeof t&&Object.keys(t).length>0&&(this.options=t),this.suggests_origin="",this.suggests_pop=!1,this.suggests_lines=[],this.suggests_cur_line=!1,this.suggests_max_qtt=10,this.tags=[],this.focused_tag=!1,this.init_suggests_list();var i=this;this.input_txt.on("keyup",function(e){i.input_text_manage(e)}),this.input_txt.on("keydown",function(e){9!==e.which&&13!==e.which||e.preventDefault()}),this.input_txt.on("focus",function(){i.focus_input(!1),i.set_suggests_pop()}),this.input_txt.on("blur",function(){i.blured_input_txt()}),this.input_txt.prop("autocomplete","off"),this.btn_add.on("click",function(){i.clicked_add_btn()}),this.import_from_hidden_inp(),this.container.addClass("init-ok"),r.addInstance(this)}};return r.prototype={add_tag:function(t,i){if(this.unset_input_text_error(),this.unset_legend_error(),(i=!!i)&&!this.input_txt_focused)return!1;var n=t.split(",");if("string"==typeof t&&n.length>1){for(var s,o=[];n.length>0;){var r=n.shift();s=this.add_tag(r),s||o.push(r)}return i&&o.length>0?(this.input_txt.val(o.join(",")),this.set_input_text_error(),!1):s}var l=this.has_tag(t);if(l)return this.focus_tag(t,!0),l;var u=this.format_displayed_tag_value(t);if(t=this.format_saved_tag_value(t,i),!u||!t)return i&&this.set_input_text_error(),!1;var f={value:t,displayed:u};if(this.options&&this.options.choices_only){var d=this.is_in_suggests_list(t);if(!d)return i&&(this.set_input_text_error(),this.set_legend_error()),!1;if(l=this.has_tag(d.value))return this.focus_tag(t,!0),l;f.value=d.value,f.displayed=d.disp}var c=$(e.render(a,f));c.insertBefore(this.input_txt),f.html=c,this.tags.push(f),this.unfocus_tag();var h=this;return c.click(function(){h.focus_tag(f.value)}),c.find('[data-role="remove"]').click(function(){h.del_tag(f.value)}),this.write_hidden_inp(),f},has_tag:function(e){e=this.format_saved_tag_value(e);for(var t in this.tags)if(this.tags[t].value===e)return this.tags[t];return!1},del_tag:function(e){var t=this.has_tag(e);if(!t)return!1;t.html.fadeOut(function(){$(this).remove()}),this.tags.splice(this.tags.indexOf(t),1),this.focus_input(),this.write_hidden_inp()},focus_tag:function(e,t){var i=this.has_tag(e);if(!i)return!1;this.unfocus_tag(),i.html.addClass((t?"partial-":"")+"focused"),this.focused_tag=i},unfocus_tag:function(){this.focused_tag&&$(this.focused_tag.html).length>0&&($(this.focused_tag.html).removeClass("focused").removeClass("partial-focused"),this.focused_tag=!1)},set_input_text_error:function(){this.unset_input_text_error();var e=this;this.set_input_text_error_timer=setTimeout(function(){e.input_txt.addClass("inp-error"),e.set_input_text_error_timer=null},10)},unset_input_text_error:function(){this.set_input_text_error_timer&&(clearTimeout(this.set_input_text_error_timer),this.set_input_text_error_timer=null),this.input_txt.removeClass("inp-error")},set_legend_error:function(){if(0!==this.legend.length){this.unset_legend_error();var e=this;this.set_legend_error_timer=setTimeout(function(){e.legend.addClass("legend-error"),e.set_legend_error_timer=null},10)}},unset_legend_error:function(){this.set_legend_error_timer&&(clearTimeout(this.set_legend_error_timer),this.set_legend_error_timer=null),this.legend.removeClass("legend-error")},write_hidden_inp:function(){var e=[];for(var t in this.tags)e.push(this.tags[t].value);return e=JSON.stringify(e),this.input_hdn.val(e).change(),e},import_from_hidden_inp:function(){var e=this.input_hdn.val();if(e.length<1)return!1;if("object"!=typeof(e=JSON.parse(e))||e.length<1)return!1;for(var t in e)if(this.options&&this.options.choices_only){for(var i in this.options.choices)if(this.options.choices[i].value===e[t]){this.add_tag(this.options.choices[i].value);break}}else this.add_tag(e[t])},input_text_manage:function(e){if(13===e.which){e.preventDefault();var t="boolean"!=typeof this.suggests_cur_line&&$(this.suggests_lines[this.suggests_cur_line]).length>0?this.add_tag($(this.suggests_lines[this.suggests_cur_line]).data("value")):this.add_tag(this.input_txt.val(),!0);if($(t).length>0)return this.close_suggests_pop(),this.input_txt.val("").removeClass("not-empty-val"),void this.focus_input()}if(this.suggests_lines.length>0){switch(e.which){case 40:case 9:if("boolean"==typeof this.suggests_cur_line?this.suggests_cur_line=0:($(this.suggests_lines[this.suggests_cur_line]).removeClass("focused"),++this.suggests_cur_line>this.suggests_lines.length-1&&(this.suggests_cur_line=!1)),"boolean"!=typeof this.suggests_cur_line){var i=this.format_displayed_tag_value(String($(this.suggests_lines[this.suggests_cur_line]).data("displayed")));this.input_txt.val(i)}else this.input_txt.val(this.suggests_origin);break;case 38:if("boolean"==typeof this.suggests_cur_line?this.suggests_cur_line=this.suggests_lines.length-1:($(this.suggests_lines[this.suggests_cur_line]).removeClass("focused"),--this.suggests_cur_line<0&&(this.suggests_cur_line=!1)),"boolean"!=typeof this.suggests_cur_line){var i=this.format_displayed_tag_value(String($(this.suggests_lines[this.suggests_cur_line]).data("displayed")));this.input_txt.val(i)}else this.input_txt.val(this.suggests_origin);break;case 27:this.close_suggests_pop();break;default:this.suggests_cur_line=!1,this.set_suggests_pop()}"boolean"!=typeof this.suggests_cur_line&&$(this.suggests_lines[this.suggests_cur_line]).addClass("focused")}else this.suggests_cur_line=!1,this.set_suggests_pop()},focus_input:function(e){this.blured_last=!1,this.input_txt_focused=!0,this.input_txt.addClass("focus"),!1!==e&&this.input_txt.focus()},blured_input_txt:function(){this.blured_last=$.now();var e=this;this.blured_timer&&(clearTimeout(this.blured_timer),this.blured_timer=!1),this.blured_timer=setTimeout(function(){e.close_if_blured_long_ago()},1e3),this.clean_tag_value(this.input_txt.val()).length>0?this.input_txt.addClass("not-empty-val"):this.input_txt.removeClass("not-empty-val"),this.close_suggests_pop()},close_if_blured_long_ago:function(){if(this.blured_timer=!1,!1===this.blured_last||this.blured_last<$.now()-990)return!1;this.input_txt_focused=!1,this.input_txt.removeClass("focus")},clicked_add_btn:function(){if(this.add_tag(this.input_txt.val(),!0))return this.close_suggests_pop(),void this.input_txt.val("");this.focus_input()},get_suggests_pop:function(){return this.suggests_pop||(this.suggests_pop=new s(this.input_txt,!1,{relative_to:$("#page"),position:{v:"below",h:"left"},popup_class:"tag-adder-pop",trigger:!1,autoclose:!0,closebtn:!1})),this.suggests_pop},set_suggests_pop:function(){var e=this.get_suggests_pop(),t=this.input_txt.val();if(!t)return this.close_suggests_pop(),!1;var i=this.get_suggests(t);if($(i).length<1)return this.close_suggests_pop(),!1;e.open(),e.setContent($(i))},init_suggests_list:function(){if(this.options&&this.options.choices){this.suggests_list=[];for(var e in this.options.choices)this.suggests_list.push({value:this.options.choices[e].value,comp:this.format_comparing_value(this.options.choices[e].name),disp:this.format_displayed_tag_value(this.options.choices[e].name)})}else if(t.data&&t.data.best_keywords&&t.data.best_keywords.length>0){this.suggests_list=[];for(var e in t.data.best_keywords)this.suggests_list.push({value:t.data.best_keywords[e].NOM,comp:this.format_comparing_value(t.data.best_keywords[e].NOM),disp:this.format_displayed_tag_value(t.data.best_keywords[e].NOM)})}},get_suggests:function(e){if(!this.suggests_list)return!1;query_comp=this.format_comparing_value(e),this.suggests_origin="";var t=[],i=[],n=[];for(r in this.suggests_list){var s=this.suggests_list[r];0===s.comp.indexOf(query_comp)?t.push(this.format_suggest_display(s.value,s.disp,query_comp)):-1!==(s.comp+"-").indexOf("-"+query_comp+"-")?i.push(this.format_suggest_display(s.value,s.disp,query_comp)):-1!==s.comp.indexOf(query_comp)&&n.push(this.format_suggest_display(s.value,s.disp,query_comp))}if(t=t.concat(i.concat(n)),t.length<1)return!1;t.length>this.suggests_max_qtt&&(t=t.slice(0,this.suggests_max_qtt)),this.suggests_origin=e,this.suggests_lines=[],this.suggests_cur_line=!1;var o=$("<ul></ul>"),a=this;for(var r in t){var l=$("<li>"+t[r].html+"</li>"),u=t[r].value,f=t[r].displayed;l.data("value",u).data("displayed",f).on("click",function(){a.add_tag($(this).data("value")),a.input_txt.val(""),a.focus_input()}),this.suggests_lines.push(l),o.append(l)}return o},format_suggest_display:function(e,t,i){var n=this.format_displayed_tag_value(t),s=this.format_comparing_value(t),o=i,a=s.indexOf(o);if(-1===a)return!1;var r=a+o.length;return{value:e,displayed:n,html:n.substr(0,a)+"<strong>"+n.substr(a,o.length)+"</strong>"+n.substr(r)}},close_suggests_pop:function(){this.suggests_pop&&(this.suggests_lines=[],this.suggests_cur_line=!1,this.suggests_pop.isOpened()&&this.suggests_pop.close())},is_in_suggests_list:function(e,t){if(!this.suggests_list)return!1;for(var i in this.suggests_list)if(t){if(this.suggests_list[i].comp===this.format_comparing_value(e))return this.suggests_list[i]}else if(this.suggests_list[i].value===e)return this.suggests_list[i];return!1},clean_tag_value:function(e){var t=i.escape(i.unescape(e.toString()).replace(/\ +/g," ").trim().toLowerCase(),!0);return!(t.length<1)&&t},format_displayed_tag_value:function(e){if("string"!=typeof e)return!1;if("string"!=typeof(e=this.clean_tag_value(e)))return!1;if(str=e.replace(/-/g," "),!str)return!1;str=str.split(" ");for(var t=0;t<str.length;t++)str[t]=str[t].split(""),str[t].length>0&&"string"==typeof str[t][0]?(str[t][0]=str[t][0].toUpperCase(),str[t]=str[t].join("")):str[t]="";return str.join(" ").trim()},format_saved_tag_value:function(e,t){if("number"!=typeof e&&(e=e.toString()),"string"!=typeof e)return!1;if(this.options){var i=this.is_in_suggests_list(e,t);if(i)return i.value}return str=this.clean_tag_value(e),!!str&&str.trim().replace(/\ /g,"-")},format_comparing_value:function(e){return e=this.format_saved_tag_value(e),"string"!=typeof e?"":n.translit(e)}},r.data_instance="tag-adder-instance",r.instances=[],r.getInstance=function(e){e=$(e);var t;if(e.data(this.data_instance)?t=e:e.parents().each(function(){$(this).data(r.data_instance)&&(t=$(this))}),0===t.length)return!1;var i=t.data(this.data_instance);if(!i)return!1;for(var n in this.instances)if(this.instances[n].instance===i)return this.instances[n];return!1},r.addInstance=function(e){e.instance=this.instances.length+1,e.container.data(this.data_instance,e.instance),this.instances.push(e)},r}),define("skins/form/validator/tag_adder",["lib/converter","lib/tools","static/utils","./input_base","skins/form/widget/tag_adder","lib/json"],function(e,t,i,n,s){var o=function(e,t){"object"==typeof t&&(this.setupXhr("title_blacklist","/account/checkblacklist","title"),n.apply(this,[e,t]),this._init())};return o.prototype=new n,o.prototype._init=function(){new s(this.input.parents(".tag-adder"));var e=this;this.input.on("change input",function(){e.validate()}),this.input.parent().children("input[type=text]").on("blur",function(){e.validate()}),this.options.show_char_count&&this.initCounter(),this.options.no_init_validate||this.validate()},o.prototype.options_choices=!1,o.prototype.cleanTags=function(e){var n=[],o=this;if("object"==typeof this.options.choices&&!1===this.options_choices){this.options_choices=[];for(var a in this.options.choices){var r=this.options.choices[a];"number"==typeof r&&(r=r.toString()),this.options_choices.push(t.translit(r))}}for(var l in e){var u=e[l];"number"==typeof u&&(u=u.toString());var f=i.escape(i.unescape(u.toString()).replace(/\ +/g," ").trim().toLowerCase(),!0),d=function(){var e=s.getInstance(o.input);if(!e)return!1;e.del_tag(u)},c=this.input.parents(".tag-list").find('[data-elem="tag"][data-value="'+u+'"]');if("undefined"!=typeof this.options.choices&&$.isArray(this.options.choices)&&this.options.choices.length>0){if(-1===this.options_choices.indexOf(t.translit(u)))return this.setError(this.getMessage("not_in_list","'%value%'",{"%value%":u}),d),!1;n.push(u)}else{if(!(f.length>=this.options.min_tag_length))return c.addClass("error"),this.setError(this.getMessage("input_too_short","%value% is too short (%nb_chars% characters min)",{"%value%":'"'+u+'"',"%nb_chars%":this.options.min_tag_length}),d),!1;if(!(f.length<=this.options.max_tag_length))return c.addClass("error"),this.setError(this.getMessage("input_too_long","%value% is too long (%nb_chars% characters max)",{"%value%":'"'+u+'"',"%nb_chars%":this.options.max_tag_length}),d),!1;c.removeClass("error"),n.push(u)}}return n},o.prototype.doValidate=function(e){""===e&&(e="[]");var t=JSON.parse(e),i=this.cleanTags(t,this.options);return!1!==i&&(this.counter&&(this.counter.removeClass("text-danger").children(".count").html(i.length),0===i.length?this.counter.addClass("empty"):this.counter.removeClass("empty")),this.options.min_tags>0&&("object"!=typeof t||i.length<this.options.min_tags)?(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("min_tags","%nb% tags minimum",{"%nb%":this.options.min_tags})),!1):!(this.options.max_tags>0&&i.length>this.options.max_tags)||(this.counter&&this.counter.addClass("text-danger"),this.setError(this.getMessage("max_tags","%nb% tags maximum",{"%nb%":this.options.max_tags})),!1))},o.prototype.getTooltipParent=function(){return this.input.parents(".content")},o.prototype.getIconPositionReference=function(){return this.input.parents(".tag-list").children("label")},o.prototype.getInputAgent=function(){return this.input.parents(".tag-list")},o.prototype.counter=!1,o.prototype.initCounter=function(){var e=this.options.max_tags>0&&this.options.max_tags;this.counter=$("<span class='floating-count'><span class='count'></span>"+(e?"<span class='max'>/"+e+"</span>":"")+"</span>"),this.counter.insertAfter(this.input.parent())},o}),define("skins/form/validator/title_blacklist",["config/main","static/utils","./string"],function(e,t,i){var n=function(e,t){this.setupXhr("title_blacklist","/account/checkblacklist","title"),this.setXhrOtherParam("title_blacklist","blacklist",t.options.blacklist),i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])},n}),define("skins/form/validator/translations_langs",["static/utils","./base"],function(e,t){var i=function(e,t,n){return!!e&&("string"==typeof t&&0!==t.length&&"empty"!==t&&("unk"===t?i(!0,n,!1):t))},n=function(e,i){t.apply(this,[e,i]);var n=e.getRoot();this.fields=[],this.langs=[];for(var s in i.options.fields)this.setupField(n,i.options.fields[s],i.options.lang_suffix)};return n.prototype=new t,n.prototype.setupField=function(e,t,n){var s="#"+e.form.prop("id")+"_"+t.replace(/\|/g,"_"),o=$(s);if(0===o.length)return console.error('Unable to find lang field "'+s+'" in translations_langs'),!1;var a=s.lastIndexOf(n);if(-1===a)return console.error('Unable to find suffix "'+n+'" in "'+s+"' in translations_langs"),!1;var r=s.substr(0,a),l=$(r);if(0===l.length)return console.error('Unable to find title field "'+r+'" in translations_langs'),!1;var u=l.data("validator");if(!u)return console.error('Unable to find validator for field "'+r+'" in translations_langs'),!1;var f={input:l,validator:u,has_value:$.trim(l.val()).length>0,lang:i(o.val(),o.data("detected"))};this.fields.push(f);var d=this.fields.length-1,c=this,h=u.doValidate;u.doValidate=function(e){if(f.lang)for(var t=0;t<d;t++)if(c.fields[t].lang===f.lang)return this.setError(this.getMessage("invalid","The same lang cannot be used twice")),!1;return h.apply(this,[e])};var p=function(){var e=f.lang;f.lang=i(f.has_value,o.val(),o.data("detected")),e!==f.lang&&c.validate()};o.on("change",p),l.on("keyup",function(){var e=f.has_value;f.has_value=$.trim(l.val()).length>0,e!==f.has_value&&p()})},n.prototype.validate=function(){for(var e in this.fields)this.fields[e].validator.validate();return!0},n.prototype.isValid=function(){return!0},n.prototype.focus=function(){},n}),define("skins/form/validator/user_email",["config/main","static/utils","./email"],function(e,t,i){var n=function(e,t){this.setupXhr("email","/account/checkemail","email"),"number"==typeof t.options.exclude_id_user&&t.options.exclude_id_user>0&&this.setXhrOtherParam("email","exclude",t.options.exclude_id_user),i.apply(this,[e,t])};return n.prototype=new i,n.prototype.doValidate=function(e){return!!i.prototype.doValidate.apply(this,[e])},n});